var CONFIG_SERVER_PATH = 'http://test4.loc/';
! function(t) {
    function e(r) {
        if (n[r]) return n[r].exports;
        var i = n[r] = {
            exports: {},
            id: r,
            loaded: !1
        };
        return t[r].call(i.exports, i, i.exports, e), i.loaded = !0, i.exports
    }
    var n = {};
    return e.m = t, e.c = n, e.p = "", e(0)
}([function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }
    var i = n(1),
        o = r(i),
        s = function t(e) {
            window.removeEventListener("load", t, !1), o.default.init()
        };
    window.addEventListener("load", s)
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var s = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        a = n(2),
        l = i(a),
        u = n(5),
        c = r(u),
        f = n(6),
        h = i(f),
        d = n(10),
        p = r(d),
        g = function() {
            function t() {
                o(this, t)
            }
            return s(t, [{
                key: "init",
                value: function() {
                    l.default.debug("app init started"), this.initRenderer(), this.initApp()
                }
            }, {
                key: "initRenderer",
                value: function() {
                    l.default.debug("app init renderer");
                    var t = document.getElementById(c.CONSTRUCTOR_CONTAINER_ID);
                    h.default.init(t)
                }
            }, {
                key: "initApp",
                value: function() {
                    l.default.debug("app initialization start");
                    var t = document.getElementById(c.CONSTRUCTOR_SCRIPT_ID),
                        e = t.getAttribute(c.CONSTRUCTOR_SCRIPT_ID_ARGUMENT),
                        n = t.getAttribute(c.CONSTRUCTOR_SCRIPT_LANG_ARGUMENT);
                    l.default.debug("constructor identifier: " + e), l.default.debug("constructor language: " + n), p.initApp(e, n)
                }
            }]), t
        }(),
        _ = new g;
    e.default = _
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t) {
        var e = (new Date).toISOString();
        return e + ": " + t
    }

    function o(t, e) {
        if (!(e > a.default.get("logLevel"))) switch (e) {
            case l.LOG_LEVELS.DEBUG:
            default:
                console.log(i(t, e));
                break;
            case l.LOG_LEVELS.INFO:
                console.log(i(t, e));
                break;
            case l.LOG_LEVELS.WARN:
                console.log(i(t, e));
                break;
            case l.LOG_LEVELS.ERROR:
                console.log(i(t, e))
        }
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var s = n(3),
        a = r(s),
        l = n(4);
    e.default = {
        debug: function(t) {
            o(t, l.LOG_LEVELS.DEBUG)
        },
        info: function(t) {
            o(t, l.LOG_LEVELS.INFO)
        },
        warn: function(t) {
            o(t, l.LOG_LEVELS.WARN)
        },
        error: function(t) {
            o(t, l.LOG_LEVELS.ERROR)
        }
    }
}, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = (e.PUBLIC_SERVER_CONFIG = {
            HOST: "localhost",
            PORT: "8080"
        }, e.PRODUCTION_SERVER_CONFIG = {
            HOST: "localhost",
            PORT: "8081",
            URL: CONFIG_SERVER_PATH
        }, e.WEBPACK_DEV_SERVER = {
            HOST: "localhost",
            PORT: "8081",
            PUBLIC_PATH: "/",
            ENTRY_POINT_NAME: "index"
        }, {
            logLevel: -1
        }),
        i = r;
    e.default = {
        get: function(t) {
            return i[t]
        }
    }
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    e.LOG_LEVELS = {
        DEBUG: 4,
        INFO: 3,
        WARN: 2,
        ERROR: 1
    }
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    e.REQUEST_API_URL = "mail.php", e.CONSTRUCTOR_CONTAINER_ID = "constructor-container", e.CONSTRUCTOR_SCRIPT_ID = "constructor-script", e.CONSTRUCTOR_SCRIPT_ID_ARGUMENT = "data-id", e.CONSTRUCTOR_SCRIPT_LANG_ARGUMENT = "data-lang", e.RUSSIAN_LANG = "ru", e.ENGLISH_LANG = "en", e.MAIN_CANVAS_ID = "constructor-canvas-id", e.SPY_CANVAS_ID = "constructor-spy-canvas-id", e.CONFIG_SERVER_PATH = "config", e.DEFAULT_CONFIG_NAME = "default", e.CONFIG_EXTENSION = "json", e.CONFIG_RESOURCES_PATH = "resources", e.CANVAS_ZOOM = 1.1, e.DOORS_COLLECTION_ITEMS = {
        BOX: "images/cabinet-items/box.png",
        HANGER: "images/cabinet-items/hanger.png",
        HORIZONTALPIPE: "images/cabinet-items/horizontal-pipe.png",
        PATNOGRAPH: "images/cabinet-items/pantograph.png",
        PANTS: "images/cabinet-items/pants.png",
        SHOES: "images/cabinet-items/shoes.png",
        TIE: "images/cabinet-items/tie.png",
        VERTICALPIPE: "images/cabinet-items/vertical-pipe.png"
    }, e.CABINET_COLLECTION_ITEMS = {
        BOX: "images/cabinet-items/box.png",
        HANGER: "images/cabinet-items/hanger.png",
        HORIZONTALPIPE: "images/cabinet-items/horizontal-pipe.png",
        PATNOGRAPH: "images/cabinet-items/pantograph.png",
        PANTS: "images/cabinet-items/pants.png",
        SHOES: "images/cabinet-items/shoes.png",
        TIE: "images/cabinet-items/tie.png",
        VERTICALPIPE: "images/cabinet-items/vertical-pipe.png"
    }, e.PANTOGRAPH_PARTS = {
        LEFT: "images/cabinet-items/pantograph/left.png",
        RIGHT: "images/cabinet-items/pantograph/right.png",
        CENTER: "images/cabinet-items/pantograph/center.png"
    }, e.DEFAULT_DOORS_MATERIAL = "images/doors/default-mat.jpg", e.RESOURCES = ["images/arrows/down.png", "images/arrows/up.png", "images/arrows/left.png", "images/arrows/right.png", "images/arrows/right-big.png", "images/arrows/left-big.png", "images/arrows/checkbox.png", "images/collection/horizontal-baffle.png", "images/collection/vertical-baffle.png", "images/collection/ordinary-hanger.png", "images/collection/ascending-pipe.png", "images/collection/box.png", "images/collection/tie.png", "images/collection/shoes.png", "images/collection/hanger.png", "images/collection/pantograph.png", "images/collection/trousers.png", "images/inside/repeat.png", "images/inside/help.png", "images/header-list/check.png", "images/header-list/cancel.png"]
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var o = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        s = n(7),
        a = r(s),
        l = function() {
            function t() {
                i(this, t), this.constructor = null, this.component = null
            }
            return o(t, [{
                key: "init",
                value: function(t) {
                    this.container = t
                }
            }, {
                key: "renderComponent",
                value: function(t, e) {
                    var n = new t(e);
                    this.preRender(n, e), this.buildTree(n, null), this.render(n), this.postRender(n)
                }
            }, {
                key: "buildTree",
                value: function(t, e) {
                    var n = this,
                        r = a.default.values(t.children);
                    e ? t.parent = e : this.component = t, a.default.forEach(r, function(e) {
                        n.buildTree(e, t)
                    })
                }
            }, {
                key: "preRender",
                value: function(t, e) {
                    var n = this;
                    t.preRender(e);
                    var r = a.default.values(t.children);
                    a.default.forEach(r, function(t) {
                        n.preRender(t)
                    })
                }
            }, {
                key: "render",
                value: function(t) {
                    this.container.innerHTML = t.getTemplate()
                }
            }, {
                key: "rerender",
                value: function(t) {
                    var e = document.getElementById(t.id),
                        n = e.parentElement,
                        r = e.nextElementSibling;
                    n.removeChild(e);
                    var i = document.createElement("div");
                    i.innerHTML = t.getTemplate(), r ? n.insertBefore(i.children[0], r) : n.appendChild(i.children[0])
                }
            }, {
                key: "postRender",
                value: function(t) {
                    var e = this,
                        n = a.default.values(t.children);
                    a.default.forEach(n, function(t) {
                        e.postRender(t)
                    }), t.postRender()
                }
            }, {
                key: "unload",
                value: function(t) {
                    var e = this,
                        n = a.default.values(t.children);
                    a.default.forEach(n, function(t) {
                        e.unload(t)
                    }), t.unload()
                }
            }, {
                key: "update",
                value: function(t) {
                    var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                    this.unload(t), this.preRender(t, e), this.buildTree(t, t.parent), this.rerender(t), this.postRender(t)
                }
            }]), t
        }();
    e.default = new l
}, function(t, e, n) {
    var r;
    (function(t, i) {
        "use strict";
        var o = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        };
        (function() {
            function s(t, e) {
                return t.set(e[0], e[1]), t
            }

            function a(t, e) {
                return t.add(e), t
            }

            function l(t, e, n) {
                switch (n.length) {
                    case 0:
                        return t.call(e);
                    case 1:
                        return t.call(e, n[0]);
                    case 2:
                        return t.call(e, n[0], n[1]);
                    case 3:
                        return t.call(e, n[0], n[1], n[2])
                }
                return t.apply(e, n)
            }

            function u(t, e, n, r) {
                for (var i = -1, o = null == t ? 0 : t.length; ++i < o;) {
                    var s = t[i];
                    e(r, s, n(s), t)
                }
                return r
            }

            function c(t, e) {
                for (var n = -1, r = null == t ? 0 : t.length; ++n < r && e(t[n], n, t) !== !1;);
                return t
            }

            function f(t, e) {
                for (var n = null == t ? 0 : t.length; n-- && e(t[n], n, t) !== !1;);
                return t
            }

            function h(t, e) {
                for (var n = -1, r = null == t ? 0 : t.length; ++n < r;)
                    if (!e(t[n], n, t)) return !1;
                return !0
            }

            function d(t, e) {
                for (var n = -1, r = null == t ? 0 : t.length, i = 0, o = []; ++n < r;) {
                    var s = t[n];
                    e(s, n, t) && (o[i++] = s)
                }
                return o
            }

            function p(t, e) {
                var n = null == t ? 0 : t.length;
                return !!n && x(t, e, 0) > -1
            }

            function g(t, e, n) {
                for (var r = -1, i = null == t ? 0 : t.length; ++r < i;)
                    if (n(e, t[r])) return !0;
                return !1
            }

            function _(t, e) {
                for (var n = -1, r = null == t ? 0 : t.length, i = Array(r); ++n < r;) i[n] = e(t[n], n, t);
                return i
            }

            function v(t, e) {
                for (var n = -1, r = e.length, i = t.length; ++n < r;) t[i + n] = e[n];
                return t
            }

            function b(t, e, n, r) {
                var i = -1,
                    o = null == t ? 0 : t.length;
                for (r && o && (n = t[++i]); ++i < o;) n = e(n, t[i], i, t);
                return n
            }

            function y(t, e, n, r) {
                var i = null == t ? 0 : t.length;
                for (r && i && (n = t[--i]); i--;) n = e(n, t[i], i, t);
                return n
            }

            function m(t, e) {
                for (var n = -1, r = null == t ? 0 : t.length; ++n < r;)
                    if (e(t[n], n, t)) return !0;
                return !1
            }

            function E(t) {
                return t.split("")
            }

            function S(t) {
                return t.match(Ye) || []
            }

            function O(t, e, n) {
                var r;
                return n(t, function(t, n, i) {
                    if (e(t, n, i)) return r = n, !1
                }), r
            }

            function T(t, e, n, r) {
                for (var i = t.length, o = n + (r ? 1 : -1); r ? o-- : ++o < i;)
                    if (e(t[o], o, t)) return o;
                return -1
            }

            function x(t, e, n) {
                return e === e ? Q(t, e, n) : T(t, C, n)
            }

            function w(t, e, n, r) {
                for (var i = n - 1, o = t.length; ++i < o;)
                    if (r(t[i], e)) return i;
                return -1
            }

            function C(t) {
                return t !== t
            }

            function I(t, e) {
                var n = null == t ? 0 : t.length;
                return n ? k(t, e) / n : Bt
            }

            function R(t) {
                return function(e) {
                    return null == e ? ot : e[t]
                }
            }

            function A(t) {
                return function(e) {
                    return null == t ? ot : t[e]
                }
            }

            function P(t, e, n, r, i) {
                return i(t, function(t, i, o) {
                    n = r ? (r = !1, t) : e(n, t, i, o)
                }), n
            }

            function L(t, e) {
                var n = t.length;
                for (t.sort(e); n--;) t[n] = t[n].value;
                return t
            }

            function k(t, e) {
                for (var n, r = -1, i = t.length; ++r < i;) {
                    var o = e(t[r]);
                    o !== ot && (n = n === ot ? o : n + o)
                }
                return n
            }

            function D(t, e) {
                for (var n = -1, r = Array(t); ++n < t;) r[n] = e(n);
                return r
            }

            function j(t, e) {
                return _(e, function(e) {
                    return [e, t[e]]
                })
            }

            function M(t) {
                return function(e) {
                    return t(e)
                }
            }

            function N(t, e) {
                return _(e, function(e) {
                    return t[e]
                })
            }

            function B(t, e) {
                return t.has(e)
            }

            function H(t, e) {
                for (var n = -1, r = t.length; ++n < r && x(e, t[n], 0) > -1;);
                return n
            }

            function F(t, e) {
                for (var n = t.length; n-- && x(e, t[n], 0) > -1;);
                return n
            }

            function U(t, e) {
                for (var n = t.length, r = 0; n--;) t[n] === e && ++r;
                return r
            }

            function G(t) {
                return "\\" + rr[t]
            }

            function W(t, e) {
                return null == t ? ot : t[e]
            }

            function Y(t) {
                return Kn.test(t)
            }

            function V(t) {
                return qn.test(t)
            }

            function X(t) {
                for (var e, n = []; !(e = t.next()).done;) n.push(e.value);
                return n
            }

            function z(t) {
                var e = -1,
                    n = Array(t.size);
                return t.forEach(function(t, r) {
                    n[++e] = [r, t]
                }), n
            }

            function K(t, e) {
                return function(n) {
                    return t(e(n))
                }
            }

            function q(t, e) {
                for (var n = -1, r = t.length, i = 0, o = []; ++n < r;) {
                    var s = t[n];
                    s !== e && s !== ht || (t[n] = ht, o[i++] = n)
                }
                return o
            }

            function $(t) {
                var e = -1,
                    n = Array(t.size);
                return t.forEach(function(t) {
                    n[++e] = t
                }), n
            }

            function Z(t) {
                var e = -1,
                    n = Array(t.size);
                return t.forEach(function(t) {
                    n[++e] = [t, t]
                }), n
            }

            function Q(t, e, n) {
                for (var r = n - 1, i = t.length; ++r < i;)
                    if (t[r] === e) return r;
                return -1
            }

            function J(t, e, n) {
                for (var r = n + 1; r--;)
                    if (t[r] === e) return r;
                return r
            }

            function tt(t) {
                return Y(t) ? nt(t) : mr(t)
            }

            function et(t) {
                return Y(t) ? rt(t) : E(t)
            }

            function nt(t) {
                for (var e = Xn.lastIndex = 0; Xn.test(t);) ++e;
                return e
            }

            function rt(t) {
                return t.match(Xn) || []
            }

            function it(t) {
                return t.match(zn) || []
            }
            var ot, st = "4.17.4",
                at = 200,
                lt = "Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",
                ut = "Expected a function",
                ct = "__lodash_hash_undefined__",
                ft = 500,
                ht = "__lodash_placeholder__",
                dt = 1,
                pt = 2,
                gt = 4,
                _t = 1,
                vt = 2,
                bt = 1,
                yt = 2,
                mt = 4,
                Et = 8,
                St = 16,
                Ot = 32,
                Tt = 64,
                xt = 128,
                wt = 256,
                Ct = 512,
                It = 30,
                Rt = "...",
                At = 800,
                Pt = 16,
                Lt = 1,
                kt = 2,
                Dt = 3,
                jt = 1 / 0,
                Mt = 9007199254740991,
                Nt = 1.7976931348623157e308,
                Bt = NaN,
                Ht = 4294967295,
                Ft = Ht - 1,
                Ut = Ht >>> 1,
                Gt = [
                    ["ary", xt],
                    ["bind", bt],
                    ["bindKey", yt],
                    ["curry", Et],
                    ["curryRight", St],
                    ["flip", Ct],
                    ["partial", Ot],
                    ["partialRight", Tt],
                    ["rearg", wt]
                ],
                Wt = "[object Arguments]",
                Yt = "[object Array]",
                Vt = "[object AsyncFunction]",
                Xt = "[object Boolean]",
                zt = "[object Date]",
                Kt = "[object DOMException]",
                qt = "[object Error]",
                $t = "[object Function]",
                Zt = "[object GeneratorFunction]",
                Qt = "[object Map]",
                Jt = "[object Number]",
                te = "[object Null]",
                ee = "[object Object]",
                ne = "[object Promise]",
                re = "[object Proxy]",
                ie = "[object RegExp]",
                oe = "[object Set]",
                se = "[object String]",
                ae = "[object Symbol]",
                le = "[object Undefined]",
                ue = "[object WeakMap]",
                ce = "[object WeakSet]",
                fe = "[object ArrayBuffer]",
                he = "[object DataView]",
                de = "[object Float32Array]",
                pe = "[object Float64Array]",
                ge = "[object Int8Array]",
                _e = "[object Int16Array]",
                ve = "[object Int32Array]",
                be = "[object Uint8Array]",
                ye = "[object Uint8ClampedArray]",
                me = "[object Uint16Array]",
                Ee = "[object Uint32Array]",
                Se = /\b__p \+= '';/g,
                Oe = /\b(__p \+=) '' \+/g,
                Te = /(__e\(.*?\)|\b__t\)) \+\n'';/g,
                xe = /&(?:amp|lt|gt|quot|#39);/g,
                we = /[&<>"']/g,
                Ce = RegExp(xe.source),
                Ie = RegExp(we.source),
                Re = /<%-([\s\S]+?)%>/g,
                Ae = /<%([\s\S]+?)%>/g,
                Pe = /<%=([\s\S]+?)%>/g,
                Le = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
                ke = /^\w*$/,
                De = /^\./,
                je = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,
                Me = /[\\^$.*+?()[\]{}|]/g,
                Ne = RegExp(Me.source),
                Be = /^\s+|\s+$/g,
                He = /^\s+/,
                Fe = /\s+$/,
                Ue = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,
                Ge = /\{\n\/\* \[wrapped with (.+)\] \*/,
                We = /,? & /,
                Ye = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,
                Ve = /\\(\\)?/g,
                Xe = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,
                ze = /\w*$/,
                Ke = /^[-+]0x[0-9a-f]+$/i,
                qe = /^0b[01]+$/i,
                $e = /^\[object .+?Constructor\]$/,
                Ze = /^0o[0-7]+$/i,
                Qe = /^(?:0|[1-9]\d*)$/,
                Je = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,
                tn = /($^)/,
                en = /['\n\r\u2028\u2029\\]/g,
                nn = "\\ud800-\\udfff",
                rn = "\\u0300-\\u036f",
                on = "\\ufe20-\\ufe2f",
                sn = "\\u20d0-\\u20ff",
                an = rn + on + sn,
                ln = "\\u2700-\\u27bf",
                un = "a-z\\xdf-\\xf6\\xf8-\\xff",
                cn = "\\xac\\xb1\\xd7\\xf7",
                fn = "\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",
                hn = "\\u2000-\\u206f",
                dn = " \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",
                pn = "A-Z\\xc0-\\xd6\\xd8-\\xde",
                gn = "\\ufe0e\\ufe0f",
                _n = cn + fn + hn + dn,
                vn = "['т]",
                bn = "[" + nn + "]",
                yn = "[" + _n + "]",
                mn = "[" + an + "]",
                En = "\\d+",
                Sn = "[" + ln + "]",
                On = "[" + un + "]",
                Tn = "[^" + nn + _n + En + ln + un + pn + "]",
                xn = "\\ud83c[\\udffb-\\udfff]",
                wn = "(?:" + mn + "|" + xn + ")",
                Cn = "[^" + nn + "]",
                In = "(?:\\ud83c[\\udde6-\\uddff]){2}",
                Rn = "[\\ud800-\\udbff][\\udc00-\\udfff]",
                An = "[" + pn + "]",
                Pn = "\\u200d",
                Ln = "(?:" + On + "|" + Tn + ")",
                kn = "(?:" + An + "|" + Tn + ")",
                Dn = "(?:" + vn + "(?:d|ll|m|re|s|t|ve))?",
                jn = "(?:" + vn + "(?:D|LL|M|RE|S|T|VE))?",
                Mn = wn + "?",
                Nn = "[" + gn + "]?",
                Bn = "(?:" + Pn + "(?:" + [Cn, In, Rn].join("|") + ")" + Nn + Mn + ")*",
                Hn = "\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",
                Fn = "\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",
                Un = Nn + Mn + Bn,
                Gn = "(?:" + [Sn, In, Rn].join("|") + ")" + Un,
                Wn = "(?:" + [Cn + mn + "?", mn, In, Rn, bn].join("|") + ")",
                Yn = RegExp(vn, "g"),
                Vn = RegExp(mn, "g"),
                Xn = RegExp(xn + "(?=" + xn + ")|" + Wn + Un, "g"),
                zn = RegExp([An + "?" + On + "+" + Dn + "(?=" + [yn, An, "$"].join("|") + ")", kn + "+" + jn + "(?=" + [yn, An + Ln, "$"].join("|") + ")", An + "?" + Ln + "+" + Dn, An + "+" + jn, Fn, Hn, En, Gn].join("|"), "g"),
                Kn = RegExp("[" + Pn + nn + an + gn + "]"),
                qn = /[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,
                $n = ["Array", "Buffer", "DataView", "Date", "Error", "Float32Array", "Float64Array", "Function", "Int8Array", "Int16Array", "Int32Array", "Map", "Math", "Object", "Promise", "RegExp", "Set", "String", "Symbol", "TypeError", "Uint8Array", "Uint8ClampedArray", "Uint16Array", "Uint32Array", "WeakMap", "_", "clearTimeout", "isFinite", "parseInt", "setTimeout"],
                Zn = -1,
                Qn = {};
            Qn[de] = Qn[pe] = Qn[ge] = Qn[_e] = Qn[ve] = Qn[be] = Qn[ye] = Qn[me] = Qn[Ee] = !0, Qn[Wt] = Qn[Yt] = Qn[fe] = Qn[Xt] = Qn[he] = Qn[zt] = Qn[qt] = Qn[$t] = Qn[Qt] = Qn[Jt] = Qn[ee] = Qn[ie] = Qn[oe] = Qn[se] = Qn[ue] = !1;
            var Jn = {};
            Jn[Wt] = Jn[Yt] = Jn[fe] = Jn[he] = Jn[Xt] = Jn[zt] = Jn[de] = Jn[pe] = Jn[ge] = Jn[_e] = Jn[ve] = Jn[Qt] = Jn[Jt] = Jn[ee] = Jn[ie] = Jn[oe] = Jn[se] = Jn[ae] = Jn[be] = Jn[ye] = Jn[me] = Jn[Ee] = !0, Jn[qt] = Jn[$t] = Jn[ue] = !1;
            var tr = {
                    "У": "A",
                    "У": "A",
                    "У": "A",
                    "У": "A",
                    "У": "A",
                    "У": "A",
                    "У ": "a",
                    "УЁ": "a",
                    "УЂ": "a",
                    "УЃ": "a",
                    "УЄ": "a",
                    "УЅ": "a",
                    "У": "C",
                    "УЇ": "c",
                    "У": "D",
                    "УА": "d",
                    "У": "E",
                    "У": "E",
                    "У": "E",
                    "У": "E",
                    "УЈ": "e",
                    "УЉ": "e",
                    "УЊ": "e",
                    "УЋ": "e",
                    "У": "I",
                    "У": "I",
                    "У": "I",
                    "У": "I",
                    "УЌ": "i",
                    "У­": "i",
                    "УЎ": "i",
                    "УЏ": "i",
                    "У": "N",
                    "УБ": "n",
                    "У": "O",
                    "У": "O",
                    "У": "O",
                    "У": "O",
                    "У": "O",
                    "У": "O",
                    "УВ": "o",
                    "УГ": "o",
                    "УД": "o",
                    "УЕ": "o",
                    "УЖ": "o",
                    "УИ": "o",
                    "У": "U",
                    "У": "U",
                    "У": "U",
                    "У": "U",
                    "УЙ": "u",
                    "УК": "u",
                    "УЛ": "u",
                    "УМ": "u",
                    "У": "Y",
                    "УН": "y",
                    "УП": "y",
                    "У": "Ae",
                    "УІ": "ae",
                    "У": "Th",
                    "УО": "th",
                    "У": "ss",
                    "Ф": "A",
                    "Ф": "A",
                    "Ф": "A",
                    "Ф": "a",
                    "Ф": "a",
                    "Ф": "a",
                    "Ф": "C",
                    "Ф": "C",
                    "Ф": "C",
                    "Ф": "C",
                    "Ф": "c",
                    "Ф": "c",
                    "Ф": "c",
                    "Ф": "c",
                    "Ф": "D",
                    "Ф": "D",
                    "Ф": "d",
                    "Ф": "d",
                    "Ф": "E",
                    "Ф": "E",
                    "Ф": "E",
                    "Ф": "E",
                    "Ф": "E",
                    "Ф": "e",
                    "Ф": "e",
                    "Ф": "e",
                    "Ф": "e",
                    "Ф": "e",
                    "Ф": "G",
                    "Ф": "G",
                    "Ф ": "G",
                    "ФЂ": "G",
                    "Ф": "g",
                    "Ф": "g",
                    "ФЁ": "g",
                    "ФЃ": "g",
                    "ФЄ": "H",
                    "ФІ": "H",
                    "ФЅ": "h",
                    "ФЇ": "h",
                    "ФЈ": "I",
                    "ФЊ": "I",
                    "ФЌ": "I",
                    "ФЎ": "I",
                    "ФА": "I",
                    "ФЉ": "i",
                    "ФЋ": "i",
                    "Ф­": "i",
                    "ФЏ": "i",
                    "ФБ": "i",
                    "ФД": "J",
                    "ФЕ": "j",
                    "ФЖ": "K",
                    "ФЗ": "k",
                    "ФИ": "k",
                    "ФЙ": "L",
                    "ФЛ": "L",
                    "ФН": "L",
                    "ФП": "L",
                    "Х": "L",
                    "ФК": "l",
                    "ФМ": "l",
                    "ФО": "l",
                    "Х": "l",
                    "Х": "l",
                    "Х": "N",
                    "Х": "N",
                    "Х": "N",
                    "Х": "N",
                    "Х": "n",
                    "Х": "n",
                    "Х": "n",
                    "Х": "n",
                    "Х": "O",
                    "Х": "O",
                    "Х": "O",
                    "Х": "o",
                    "Х": "o",
                    "Х": "o",
                    "Х": "R",
                    "Х": "R",
                    "Х": "R",
                    "Х": "r",
                    "Х": "r",
                    "Х": "r",
                    "Х": "S",
                    "Х": "S",
                    "Х": "S",
                    "Х ": "S",
                    "Х": "s",
                    "Х": "s",
                    "Х": "s",
                    "ХЁ": "s",
                    "ХЂ": "T",
                    "ХЄ": "T",
                    "ХІ": "T",
                    "ХЃ": "t",
                    "ХЅ": "t",
                    "ХЇ": "t",
                    "ХЈ": "U",
                    "ХЊ": "U",
                    "ХЌ": "U",
                    "ХЎ": "U",
                    "ХА": "U",
                    "ХВ": "U",
                    "ХЉ": "u",
                    "ХЋ": "u",
                    "Х­": "u",
                    "ХЏ": "u",
                    "ХБ": "u",
                    "ХГ": "u",
                    "ХД": "W",
                    "ХЕ": "w",
                    "ХЖ": "Y",
                    "ХЗ": "y",
                    "ХИ": "Y",
                    "ХЙ": "Z",
                    "ХЛ": "Z",
                    "ХН": "Z",
                    "ХК": "z",
                    "ХМ": "z",
                    "ХО": "z",
                    "ФВ": "IJ",
                    "ФГ": "ij",
                    "Х": "Oe",
                    "Х": "oe",
                    "Х": "'n",
                    "ХП": "s"
                },
                er = {
                    "&": "&amp;",
                    "<": "&lt;",
                    ">": "&gt;",
                    '"': "&quot;",
                    "'": "&#39;"
                },
                nr = {
                    "&amp;": "&",
                    "&lt;": "<",
                    "&gt;": ">",
                    "&quot;": '"',
                    "&#39;": "'"
                },
                rr = {
                    "\\": "\\",
                    "'": "'",
                    "\n": "n",
                    "\r": "r",
                    "\u2028": "u2028",
                    "\u2029": "u2029"
                },
                ir = parseFloat,
                or = parseInt,
                sr = "object" == ("undefined" == typeof t ? "undefined" : o(t)) && t && t.Object === Object && t,
                ar = "object" == ("undefined" == typeof self ? "undefined" : o(self)) && self && self.Object === Object && self,
                lr = sr || ar || Function("return this")(),
                ur = "object" == o(e) && e && !e.nodeType && e,
                cr = ur && "object" == o(i) && i && !i.nodeType && i,
                fr = cr && cr.exports === ur,
                hr = fr && sr.process,
                dr = function() {
                    try {
                        return hr && hr.binding && hr.binding("util")
                    } catch (t) {}
                }(),
                pr = dr && dr.isArrayBuffer,
                gr = dr && dr.isDate,
                _r = dr && dr.isMap,
                vr = dr && dr.isRegExp,
                br = dr && dr.isSet,
                yr = dr && dr.isTypedArray,
                mr = R("length"),
                Er = A(tr),
                Sr = A(er),
                Or = A(nr),
                Tr = function t(e) {
                    function n(t) {
                        if (cl(t) && !Sh(t) && !(t instanceof E)) {
                            if (t instanceof i) return t;
                            if (Ec.call(t, "__wrapped__")) return as(t)
                        }
                        return new i(t)
                    }

                    function r() {}

                    function i(t, e) {
                        this.__wrapped__ = t, this.__actions__ = [], this.__chain__ = !!e, this.__index__ = 0, this.__values__ = ot
                    }

                    function E(t) {
                        this.__wrapped__ = t, this.__actions__ = [], this.__dir__ = 1, this.__filtered__ = !1, this.__iteratees__ = [], this.__takeCount__ = Ht, this.__views__ = []
                    }

                    function A() {
                        var t = new E(this.__wrapped__);
                        return t.__actions__ = Ui(this.__actions__), t.__dir__ = this.__dir__, t.__filtered__ = this.__filtered__, t.__iteratees__ = Ui(this.__iteratees__), t.__takeCount__ = this.__takeCount__, t.__views__ = Ui(this.__views__), t
                    }

                    function Q() {
                        if (this.__filtered__) {
                            var t = new E(this);
                            t.__dir__ = -1, t.__filtered__ = !0
                        } else t = this.clone(), t.__dir__ *= -1;
                        return t
                    }

                    function nt() {
                        var t = this.__wrapped__.value(),
                            e = this.__dir__,
                            n = Sh(t),
                            r = e < 0,
                            i = n ? t.length : 0,
                            o = Po(0, i, this.__views__),
                            s = o.start,
                            a = o.end,
                            l = a - s,
                            u = r ? a : s - 1,
                            c = this.__iteratees__,
                            f = c.length,
                            h = 0,
                            d = Zc(l, this.__takeCount__);
                        if (!n || !r && i == l && d == l) return Si(t, this.__actions__);
                        var p = [];
                        t: for (; l-- && h < d;) {
                            u += e;
                            for (var g = -1, _ = t[u]; ++g < f;) {
                                var v = c[g],
                                    b = v.iteratee,
                                    y = v.type,
                                    m = b(_);
                                if (y == kt) _ = m;
                                else if (!m) {
                                    if (y == Lt) continue t;
                                    break t
                                }
                            }
                            p[h++] = _
                        }
                        return p
                    }

                    function rt(t) {
                        var e = -1,
                            n = null == t ? 0 : t.length;
                        for (this.clear(); ++e < n;) {
                            var r = t[e];
                            this.set(r[0], r[1])
                        }
                    }

                    function Ye() {
                        this.__data__ = lf ? lf(null) : {}, this.size = 0
                    }

                    function nn(t) {
                        var e = this.has(t) && delete this.__data__[t];
                        return this.size -= e ? 1 : 0, e
                    }

                    function rn(t) {
                        var e = this.__data__;
                        if (lf) {
                            var n = e[t];
                            return n === ct ? ot : n
                        }
                        return Ec.call(e, t) ? e[t] : ot
                    }

                    function on(t) {
                        var e = this.__data__;
                        return lf ? e[t] !== ot : Ec.call(e, t)
                    }

                    function sn(t, e) {
                        var n = this.__data__;
                        return this.size += this.has(t) ? 0 : 1, n[t] = lf && e === ot ? ct : e, this
                    }

                    function an(t) {
                        var e = -1,
                            n = null == t ? 0 : t.length;
                        for (this.clear(); ++e < n;) {
                            var r = t[e];
                            this.set(r[0], r[1])
                        }
                    }

                    function ln() {
                        this.__data__ = [], this.size = 0
                    }

                    function un(t) {
                        var e = this.__data__,
                            n = Dn(e, t);
                        if (n < 0) return !1;
                        var r = e.length - 1;
                        return n == r ? e.pop() : jc.call(e, n, 1), --this.size, !0
                    }

                    function cn(t) {
                        var e = this.__data__,
                            n = Dn(e, t);
                        return n < 0 ? ot : e[n][1]
                    }

                    function fn(t) {
                        return Dn(this.__data__, t) > -1
                    }

                    function hn(t, e) {
                        var n = this.__data__,
                            r = Dn(n, t);
                        return r < 0 ? (++this.size, n.push([t, e])) : n[r][1] = e, this
                    }

                    function dn(t) {
                        var e = -1,
                            n = null == t ? 0 : t.length;
                        for (this.clear(); ++e < n;) {
                            var r = t[e];
                            this.set(r[0], r[1])
                        }
                    }

                    function pn() {
                        this.size = 0, this.__data__ = {
                            hash: new rt,
                            map: new(rf || an),
                            string: new rt
                        }
                    }

                    function gn(t) {
                        var e = Co(this, t).delete(t);
                        return this.size -= e ? 1 : 0, e
                    }

                    function _n(t) {
                        return Co(this, t).get(t)
                    }

                    function vn(t) {
                        return Co(this, t).has(t)
                    }

                    function bn(t, e) {
                        var n = Co(this, t),
                            r = n.size;
                        return n.set(t, e), this.size += n.size == r ? 0 : 1, this
                    }

                    function yn(t) {
                        var e = -1,
                            n = null == t ? 0 : t.length;
                        for (this.__data__ = new dn; ++e < n;) this.add(t[e])
                    }

                    function mn(t) {
                        return this.__data__.set(t, ct), this
                    }

                    function En(t) {
                        return this.__data__.has(t)
                    }

                    function Sn(t) {
                        var e = this.__data__ = new an(t);
                        this.size = e.size
                    }

                    function On() {
                        this.__data__ = new an, this.size = 0
                    }

                    function Tn(t) {
                        var e = this.__data__,
                            n = e.delete(t);
                        return this.size = e.size, n
                    }

                    function xn(t) {
                        return this.__data__.get(t)
                    }

                    function wn(t) {
                        return this.__data__.has(t)
                    }

                    function Cn(t, e) {
                        var n = this.__data__;
                        if (n instanceof an) {
                            var r = n.__data__;
                            if (!rf || r.length < at - 1) return r.push([t, e]), this.size = ++n.size, this;
                            n = this.__data__ = new dn(r)
                        }
                        return n.set(t, e), this.size = n.size, this
                    }

                    function In(t, e) {
                        var n = Sh(t),
                            r = !n && Eh(t),
                            i = !n && !r && Th(t),
                            o = !n && !r && !i && Rh(t),
                            s = n || r || i || o,
                            a = s ? D(t.length, pc) : [],
                            l = a.length;
                        for (var u in t) !e && !Ec.call(t, u) || s && ("length" == u || i && ("offset" == u || "parent" == u) || o && ("buffer" == u || "byteLength" == u || "byteOffset" == u) || Ho(u, l)) || a.push(u);
                        return a
                    }

                    function Rn(t) {
                        var e = t.length;
                        return e ? t[ri(0, e - 1)] : ot
                    }

                    function An(t, e) {
                        return rs(Ui(t), Fn(e, 0, t.length))
                    }

                    function Pn(t) {
                        return rs(Ui(t))
                    }

                    function Ln(t, e, n) {
                        (n === ot || $a(t[e], n)) && (n !== ot || e in t) || Bn(t, e, n)
                    }

                    function kn(t, e, n) {
                        var r = t[e];
                        Ec.call(t, e) && $a(r, n) && (n !== ot || e in t) || Bn(t, e, n)
                    }

                    function Dn(t, e) {
                        for (var n = t.length; n--;)
                            if ($a(t[n][0], e)) return n;
                        return -1
                    }

                    function jn(t, e, n, r) {
                        return mf(t, function(t, i, o) {
                            e(r, t, n(t), o)
                        }), r
                    }

                    function Mn(t, e) {
                        return t && Gi(e, Vl(e), t)
                    }

                    function Nn(t, e) {
                        return t && Gi(e, Xl(e), t)
                    }

                    function Bn(t, e, n) {
                        "__proto__" == e && Hc ? Hc(t, e, {
                            configurable: !0,
                            enumerable: !0,
                            value: n,
                            writable: !0
                        }) : t[e] = n
                    }

                    function Hn(t, e) {
                        for (var n = -1, r = e.length, i = ac(r), o = null == t; ++n < r;) i[n] = o ? ot : Gl(t, e[n]);
                        return i
                    }

                    function Fn(t, e, n) {
                        return t === t && (n !== ot && (t = t <= n ? t : n), e !== ot && (t = t >= e ? t : e)), t
                    }

                    function Un(t, e, n, r, i, o) {
                        var s, a = e & dt,
                            l = e & pt,
                            u = e & gt;
                        if (n && (s = i ? n(t, r, i, o) : n(t)), s !== ot) return s;
                        if (!ul(t)) return t;
                        var f = Sh(t);
                        if (f) {
                            if (s = Do(t), !a) return Ui(t, s)
                        } else {
                            var h = Lf(t),
                                d = h == $t || h == Zt;
                            if (Th(t)) return Ri(t, a);
                            if (h == ee || h == Wt || d && !i) {
                                if (s = l || d ? {} : jo(t), !a) return l ? Yi(t, Nn(s, t)) : Wi(t, Mn(s, t))
                            } else {
                                if (!Jn[h]) return i ? t : {};
                                s = Mo(t, h, Un, a)
                            }
                        }
                        o || (o = new Sn);
                        var p = o.get(t);
                        if (p) return p;
                        o.set(t, s);
                        var g = u ? l ? Oo : So : l ? Xl : Vl,
                            _ = f ? ot : g(t);
                        return c(_ || t, function(r, i) {
                            _ && (i = r, r = t[i]), kn(s, i, Un(r, e, n, i, t, o))
                        }), s
                    }

                    function Gn(t) {
                        var e = Vl(t);
                        return function(n) {
                            return Wn(n, t, e)
                        }
                    }

                    function Wn(t, e, n) {
                        var r = n.length;
                        if (null == t) return !r;
                        for (t = hc(t); r--;) {
                            var i = n[r],
                                o = e[i],
                                s = t[i];
                            if (s === ot && !(i in t) || !o(s)) return !1
                        }
                        return !0
                    }

                    function Xn(t, e, n) {
                        if ("function" != typeof t) throw new gc(ut);
                        return jf(function() {
                            t.apply(ot, n)
                        }, e)
                    }

                    function zn(t, e, n, r) {
                        var i = -1,
                            o = p,
                            s = !0,
                            a = t.length,
                            l = [],
                            u = e.length;
                        if (!a) return l;
                        n && (e = _(e, M(n))), r ? (o = g, s = !1) : e.length >= at && (o = B, s = !1, e = new yn(e));
                        t: for (; ++i < a;) {
                            var c = t[i],
                                f = null == n ? c : n(c);
                            if (c = r || 0 !== c ? c : 0, s && f === f) {
                                for (var h = u; h--;)
                                    if (e[h] === f) continue t;
                                l.push(c)
                            } else o(e, f, r) || l.push(c)
                        }
                        return l
                    }

                    function Kn(t, e) {
                        var n = !0;
                        return mf(t, function(t, r, i) {
                            return n = !!e(t, r, i)
                        }), n
                    }

                    function qn(t, e, n) {
                        for (var r = -1, i = t.length; ++r < i;) {
                            var o = t[r],
                                s = e(o);
                            if (null != s && (a === ot ? s === s && !El(s) : n(s, a))) var a = s,
                                l = o
                        }
                        return l
                    }

                    function tr(t, e, n, r) {
                        var i = t.length;
                        for (n = Cl(n), n < 0 && (n = -n > i ? 0 : i + n), r = r === ot || r > i ? i : Cl(r), r < 0 && (r += i), r = n > r ? 0 : Il(r); n < r;) t[n++] = e;
                        return t
                    }

                    function er(t, e) {
                        var n = [];
                        return mf(t, function(t, r, i) {
                            e(t, r, i) && n.push(t)
                        }), n
                    }

                    function nr(t, e, n, r, i) {
                        var o = -1,
                            s = t.length;
                        for (n || (n = Bo), i || (i = []); ++o < s;) {
                            var a = t[o];
                            e > 0 && n(a) ? e > 1 ? nr(a, e - 1, n, r, i) : v(i, a) : r || (i[i.length] = a)
                        }
                        return i
                    }

                    function rr(t, e) {
                        return t && Sf(t, e, Vl)
                    }

                    function sr(t, e) {
                        return t && Of(t, e, Vl)
                    }

                    function ar(t, e) {
                        return d(e, function(e) {
                            return sl(t[e])
                        })
                    }

                    function ur(t, e) {
                        e = Ci(e, t);
                        for (var n = 0, r = e.length; null != t && n < r;) t = t[is(e[n++])];
                        return n && n == r ? t : ot
                    }

                    function cr(t, e, n) {
                        var r = e(t);
                        return Sh(t) ? r : v(r, n(t))
                    }

                    function hr(t) {
                        return null == t ? t === ot ? le : te : Bc && Bc in hc(t) ? Ao(t) : Zo(t)
                    }

                    function dr(t, e) {
                        return t > e
                    }

                    function mr(t, e) {
                        return null != t && Ec.call(t, e)
                    }

                    function Tr(t, e) {
                        return null != t && e in hc(t)
                    }

                    function wr(t, e, n) {
                        return t >= Zc(e, n) && t < $c(e, n)
                    }

                    function Cr(t, e, n) {
                        for (var r = n ? g : p, i = t[0].length, o = t.length, s = o, a = ac(o), l = 1 / 0, u = []; s--;) {
                            var c = t[s];
                            s && e && (c = _(c, M(e))), l = Zc(c.length, l), a[s] = !n && (e || i >= 120 && c.length >= 120) ? new yn(s && c) : ot
                        }
                        c = t[0];
                        var f = -1,
                            h = a[0];
                        t: for (; ++f < i && u.length < l;) {
                            var d = c[f],
                                v = e ? e(d) : d;
                            if (d = n || 0 !== d ? d : 0, !(h ? B(h, v) : r(u, v, n))) {
                                for (s = o; --s;) {
                                    var b = a[s];
                                    if (!(b ? B(b, v) : r(t[s], v, n))) continue t
                                }
                                h && h.push(v), u.push(d)
                            }
                        }
                        return u
                    }

                    function Ir(t, e, n, r) {
                        return rr(t, function(t, i, o) {
                            e(r, n(t), i, o)
                        }), r
                    }

                    function Rr(t, e, n) {
                        e = Ci(e, t), t = Jo(t, e);
                        var r = null == t ? t : t[is(ws(e))];
                        return null == r ? ot : l(r, t, n)
                    }

                    function Ar(t) {
                        return cl(t) && hr(t) == Wt
                    }

                    function Pr(t) {
                        return cl(t) && hr(t) == fe
                    }

                    function Lr(t) {
                        return cl(t) && hr(t) == zt
                    }

                    function kr(t, e, n, r, i) {
                        return t === e || (null == t || null == e || !cl(t) && !cl(e) ? t !== t && e !== e : Dr(t, e, n, r, kr, i))
                    }

                    function Dr(t, e, n, r, i, o) {
                        var s = Sh(t),
                            a = Sh(e),
                            l = s ? Yt : Lf(t),
                            u = a ? Yt : Lf(e);
                        l = l == Wt ? ee : l, u = u == Wt ? ee : u;
                        var c = l == ee,
                            f = u == ee,
                            h = l == u;
                        if (h && Th(t)) {
                            if (!Th(e)) return !1;
                            s = !0, c = !1
                        }
                        if (h && !c) return o || (o = new Sn), s || Rh(t) ? bo(t, e, n, r, i, o) : yo(t, e, l, n, r, i, o);
                        if (!(n & _t)) {
                            var d = c && Ec.call(t, "__wrapped__"),
                                p = f && Ec.call(e, "__wrapped__");
                            if (d || p) {
                                var g = d ? t.value() : t,
                                    _ = p ? e.value() : e;
                                return o || (o = new Sn), i(g, _, n, r, o)
                            }
                        }
                        return !!h && (o || (o = new Sn), mo(t, e, n, r, i, o))
                    }

                    function jr(t) {
                        return cl(t) && Lf(t) == Qt
                    }

                    function Mr(t, e, n, r) {
                        var i = n.length,
                            o = i,
                            s = !r;
                        if (null == t) return !o;
                        for (t = hc(t); i--;) {
                            var a = n[i];
                            if (s && a[2] ? a[1] !== t[a[0]] : !(a[0] in t)) return !1
                        }
                        for (; ++i < o;) {
                            a = n[i];
                            var l = a[0],
                                u = t[l],
                                c = a[1];
                            if (s && a[2]) {
                                if (u === ot && !(l in t)) return !1
                            } else {
                                var f = new Sn;
                                if (r) var h = r(u, c, l, t, e, f);
                                if (!(h === ot ? kr(c, u, _t | vt, r, f) : h)) return !1
                            }
                        }
                        return !0
                    }

                    function Nr(t) {
                        if (!ul(t) || Yo(t)) return !1;
                        var e = sl(t) ? Cc : $e;
                        return e.test(os(t))
                    }

                    function Br(t) {
                        return cl(t) && hr(t) == ie
                    }

                    function Hr(t) {
                        return cl(t) && Lf(t) == oe
                    }

                    function Fr(t) {
                        return cl(t) && ll(t.length) && !!Qn[hr(t)]
                    }

                    function Ur(t) {
                        return "function" == typeof t ? t : null == t ? ju : "object" == ("undefined" == typeof t ? "undefined" : o(t)) ? Sh(t) ? zr(t[0], t[1]) : Xr(t) : Wu(t)
                    }

                    function Gr(t) {
                        if (!Vo(t)) return qc(t);
                        var e = [];
                        for (var n in hc(t)) Ec.call(t, n) && "constructor" != n && e.push(n);
                        return e
                    }

                    function Wr(t) {
                        if (!ul(t)) return $o(t);
                        var e = Vo(t),
                            n = [];
                        for (var r in t)("constructor" != r || !e && Ec.call(t, r)) && n.push(r);
                        return n
                    }

                    function Yr(t, e) {
                        return t < e
                    }

                    function Vr(t, e) {
                        var n = -1,
                            r = Za(t) ? ac(t.length) : [];
                        return mf(t, function(t, i, o) {
                            r[++n] = e(t, i, o)
                        }), r
                    }

                    function Xr(t) {
                        var e = Io(t);
                        return 1 == e.length && e[0][2] ? zo(e[0][0], e[0][1]) : function(n) {
                            return n === t || Mr(n, t, e)
                        }
                    }

                    function zr(t, e) {
                        return Uo(t) && Xo(e) ? zo(is(t), e) : function(n) {
                            var r = Gl(n, t);
                            return r === ot && r === e ? Yl(n, t) : kr(e, r, _t | vt)
                        }
                    }

                    function Kr(t, e, n, r, i) {
                        t !== e && Sf(e, function(o, s) {
                            if (ul(o)) i || (i = new Sn), qr(t, e, s, n, Kr, r, i);
                            else {
                                var a = r ? r(t[s], o, s + "", t, e, i) : ot;
                                a === ot && (a = o), Ln(t, s, a)
                            }
                        }, Xl)
                    }

                    function qr(t, e, n, r, i, o, s) {
                        var a = t[n],
                            l = e[n],
                            u = s.get(l);
                        if (u) return void Ln(t, n, u);
                        var c = o ? o(a, l, n + "", t, e, s) : ot,
                            f = c === ot;
                        if (f) {
                            var h = Sh(l),
                                d = !h && Th(l),
                                p = !h && !d && Rh(l);
                            c = l, h || d || p ? Sh(a) ? c = a : Qa(a) ? c = Ui(a) : d ? (f = !1, c = Ri(l, !0)) : p ? (f = !1, c = Mi(l, !0)) : c = [] : bl(l) || Eh(l) ? (c = a, Eh(a) ? c = Al(a) : (!ul(a) || r && sl(a)) && (c = jo(l))) : f = !1
                        }
                        f && (s.set(l, c), i(c, l, r, o, s), s.delete(l)), Ln(t, n, c)
                    }

                    function $r(t, e) {
                        var n = t.length;
                        if (n) return e += e < 0 ? n : 0, Ho(e, n) ? t[e] : ot
                    }

                    function Zr(t, e, n) {
                        var r = -1;
                        e = _(e.length ? e : [ju], M(wo()));
                        var i = Vr(t, function(t, n, i) {
                            var o = _(e, function(e) {
                                return e(t)
                            });
                            return {
                                criteria: o,
                                index: ++r,
                                value: t
                            }
                        });
                        return L(i, function(t, e) {
                            return Bi(t, e, n)
                        })
                    }

                    function Qr(t, e) {
                        return Jr(t, e, function(e, n) {
                            return Yl(t, n)
                        })
                    }

                    function Jr(t, e, n) {
                        for (var r = -1, i = e.length, o = {}; ++r < i;) {
                            var s = e[r],
                                a = ur(t, s);
                            n(a, s) && ui(o, Ci(s, t), a)
                        }
                        return o
                    }

                    function ti(t) {
                        return function(e) {
                            return ur(e, t)
                        }
                    }

                    function ei(t, e, n, r) {
                        var i = r ? w : x,
                            o = -1,
                            s = e.length,
                            a = t;
                        for (t === e && (e = Ui(e)), n && (a = _(t, M(n))); ++o < s;)
                            for (var l = 0, u = e[o], c = n ? n(u) : u;
                                 (l = i(a, c, l, r)) > -1;) a !== t && jc.call(a, l, 1), jc.call(t, l, 1);
                        return t
                    }

                    function ni(t, e) {
                        for (var n = t ? e.length : 0, r = n - 1; n--;) {
                            var i = e[n];
                            if (n == r || i !== o) {
                                var o = i;
                                Ho(i) ? jc.call(t, i, 1) : yi(t, i)
                            }
                        }
                        return t
                    }

                    function ri(t, e) {
                        return t + Yc(tf() * (e - t + 1))
                    }

                    function ii(t, e, n, r) {
                        for (var i = -1, o = $c(Wc((e - t) / (n || 1)), 0), s = ac(o); o--;) s[r ? o : ++i] = t, t += n;
                        return s
                    }

                    function oi(t, e) {
                        var n = "";
                        if (!t || e < 1 || e > Mt) return n;
                        do e % 2 && (n += t), e = Yc(e / 2), e && (t += t); while (e);
                        return n
                    }

                    function si(t, e) {
                        return Mf(Qo(t, e, ju), t + "")
                    }

                    function ai(t) {
                        return Rn(iu(t))
                    }

                    function li(t, e) {
                        var n = iu(t);
                        return rs(n, Fn(e, 0, n.length))
                    }

                    function ui(t, e, n, r) {
                        if (!ul(t)) return t;
                        e = Ci(e, t);
                        for (var i = -1, o = e.length, s = o - 1, a = t; null != a && ++i < o;) {
                            var l = is(e[i]),
                                u = n;
                            if (i != s) {
                                var c = a[l];
                                u = r ? r(c, l, a) : ot, u === ot && (u = ul(c) ? c : Ho(e[i + 1]) ? [] : {})
                            }
                            kn(a, l, u), a = a[l]
                        }
                        return t
                    }

                    function ci(t) {
                        return rs(iu(t))
                    }

                    function fi(t, e, n) {
                        var r = -1,
                            i = t.length;
                        e < 0 && (e = -e > i ? 0 : i + e), n = n > i ? i : n, n < 0 && (n += i), i = e > n ? 0 : n - e >>> 0, e >>>= 0;
                        for (var o = ac(i); ++r < i;) o[r] = t[r + e];
                        return o
                    }

                    function hi(t, e) {
                        var n;
                        return mf(t, function(t, r, i) {
                            return n = e(t, r, i), !n
                        }), !!n
                    }

                    function di(t, e, n) {
                        var r = 0,
                            i = null == t ? r : t.length;
                        if ("number" == typeof e && e === e && i <= Ut) {
                            for (; r < i;) {
                                var o = r + i >>> 1,
                                    s = t[o];
                                null !== s && !El(s) && (n ? s <= e : s < e) ? r = o + 1 : i = o
                            }
                            return i
                        }
                        return pi(t, e, ju, n)
                    }

                    function pi(t, e, n, r) {
                        e = n(e);
                        for (var i = 0, o = null == t ? 0 : t.length, s = e !== e, a = null === e, l = El(e), u = e === ot; i < o;) {
                            var c = Yc((i + o) / 2),
                                f = n(t[c]),
                                h = f !== ot,
                                d = null === f,
                                p = f === f,
                                g = El(f);
                            if (s) var _ = r || p;
                            else _ = u ? p && (r || h) : a ? p && h && (r || !d) : l ? p && h && !d && (r || !g) : !d && !g && (r ? f <= e : f < e);
                            _ ? i = c + 1 : o = c
                        }
                        return Zc(o, Ft)
                    }

                    function gi(t, e) {
                        for (var n = -1, r = t.length, i = 0, o = []; ++n < r;) {
                            var s = t[n],
                                a = e ? e(s) : s;
                            if (!n || !$a(a, l)) {
                                var l = a;
                                o[i++] = 0 === s ? 0 : s
                            }
                        }
                        return o
                    }

                    function _i(t) {
                        return "number" == typeof t ? t : El(t) ? Bt : +t
                    }

                    function vi(t) {
                        if ("string" == typeof t) return t;
                        if (Sh(t)) return _(t, vi) + "";
                        if (El(t)) return bf ? bf.call(t) : "";
                        var e = t + "";
                        return "0" == e && 1 / t == -jt ? "-0" : e
                    }

                    function bi(t, e, n) {
                        var r = -1,
                            i = p,
                            o = t.length,
                            s = !0,
                            a = [],
                            l = a;
                        if (n) s = !1, i = g;
                        else if (o >= at) {
                            var u = e ? null : If(t);
                            if (u) return $(u);
                            s = !1, i = B, l = new yn
                        } else l = e ? [] : a;
                        t: for (; ++r < o;) {
                            var c = t[r],
                                f = e ? e(c) : c;
                            if (c = n || 0 !== c ? c : 0, s && f === f) {
                                for (var h = l.length; h--;)
                                    if (l[h] === f) continue t;
                                e && l.push(f), a.push(c)
                            } else i(l, f, n) || (l !== a && l.push(f), a.push(c))
                        }
                        return a
                    }

                    function yi(t, e) {
                        return e = Ci(e, t), t = Jo(t, e), null == t || delete t[is(ws(e))]
                    }

                    function mi(t, e, n, r) {
                        return ui(t, e, n(ur(t, e)), r)
                    }

                    function Ei(t, e, n, r) {
                        for (var i = t.length, o = r ? i : -1;
                             (r ? o-- : ++o < i) && e(t[o], o, t););
                        return n ? fi(t, r ? 0 : o, r ? o + 1 : i) : fi(t, r ? o + 1 : 0, r ? i : o)
                    }

                    function Si(t, e) {
                        var n = t;
                        return n instanceof E && (n = n.value()), b(e, function(t, e) {
                            return e.func.apply(e.thisArg, v([t], e.args))
                        }, n)
                    }

                    function Oi(t, e, n) {
                        var r = t.length;
                        if (r < 2) return r ? bi(t[0]) : [];
                        for (var i = -1, o = ac(r); ++i < r;)
                            for (var s = t[i], a = -1; ++a < r;) a != i && (o[i] = zn(o[i] || s, t[a], e, n));
                        return bi(nr(o, 1), e, n)
                    }

                    function Ti(t, e, n) {
                        for (var r = -1, i = t.length, o = e.length, s = {}; ++r < i;) {
                            var a = r < o ? e[r] : ot;
                            n(s, t[r], a)
                        }
                        return s
                    }

                    function xi(t) {
                        return Qa(t) ? t : []
                    }

                    function wi(t) {
                        return "function" == typeof t ? t : ju
                    }

                    function Ci(t, e) {
                        return Sh(t) ? t : Uo(t, e) ? [t] : Nf(Ll(t))
                    }

                    function Ii(t, e, n) {
                        var r = t.length;
                        return n = n === ot ? r : n, !e && n >= r ? t : fi(t, e, n)
                    }

                    function Ri(t, e) {
                        if (e) return t.slice();
                        var n = t.length,
                            r = Pc ? Pc(n) : new t.constructor(n);
                        return t.copy(r), r
                    }

                    function Ai(t) {
                        var e = new t.constructor(t.byteLength);
                        return new Ac(e).set(new Ac(t)), e
                    }

                    function Pi(t, e) {
                        var n = e ? Ai(t.buffer) : t.buffer;
                        return new t.constructor(n, t.byteOffset, t.byteLength)
                    }

                    function Li(t, e, n) {
                        var r = e ? n(z(t), dt) : z(t);
                        return b(r, s, new t.constructor)
                    }

                    function ki(t) {
                        var e = new t.constructor(t.source, ze.exec(t));
                        return e.lastIndex = t.lastIndex, e
                    }

                    function Di(t, e, n) {
                        var r = e ? n($(t), dt) : $(t);
                        return b(r, a, new t.constructor)
                    }

                    function ji(t) {
                        return vf ? hc(vf.call(t)) : {}
                    }

                    function Mi(t, e) {
                        var n = e ? Ai(t.buffer) : t.buffer;
                        return new t.constructor(n, t.byteOffset, t.length)
                    }

                    function Ni(t, e) {
                        if (t !== e) {
                            var n = t !== ot,
                                r = null === t,
                                i = t === t,
                                o = El(t),
                                s = e !== ot,
                                a = null === e,
                                l = e === e,
                                u = El(e);
                            if (!a && !u && !o && t > e || o && s && l && !a && !u || r && s && l || !n && l || !i) return 1;
                            if (!r && !o && !u && t < e || u && n && i && !r && !o || a && n && i || !s && i || !l) return -1
                        }
                        return 0
                    }

                    function Bi(t, e, n) {
                        for (var r = -1, i = t.criteria, o = e.criteria, s = i.length, a = n.length; ++r < s;) {
                            var l = Ni(i[r], o[r]);
                            if (l) {
                                if (r >= a) return l;
                                var u = n[r];
                                return l * ("desc" == u ? -1 : 1)
                            }
                        }
                        return t.index - e.index
                    }

                    function Hi(t, e, n, r) {
                        for (var i = -1, o = t.length, s = n.length, a = -1, l = e.length, u = $c(o - s, 0), c = ac(l + u), f = !r; ++a < l;) c[a] = e[a];
                        for (; ++i < s;)(f || i < o) && (c[n[i]] = t[i]);
                        for (; u--;) c[a++] = t[i++];
                        return c
                    }

                    function Fi(t, e, n, r) {
                        for (var i = -1, o = t.length, s = -1, a = n.length, l = -1, u = e.length, c = $c(o - a, 0), f = ac(c + u), h = !r; ++i < c;) f[i] = t[i];
                        for (var d = i; ++l < u;) f[d + l] = e[l];
                        for (; ++s < a;)(h || i < o) && (f[d + n[s]] = t[i++]);
                        return f
                    }

                    function Ui(t, e) {
                        var n = -1,
                            r = t.length;
                        for (e || (e = ac(r)); ++n < r;) e[n] = t[n];
                        return e
                    }

                    function Gi(t, e, n, r) {
                        var i = !n;
                        n || (n = {});
                        for (var o = -1, s = e.length; ++o < s;) {
                            var a = e[o],
                                l = r ? r(n[a], t[a], a, n, t) : ot;
                            l === ot && (l = t[a]), i ? Bn(n, a, l) : kn(n, a, l)
                        }
                        return n
                    }

                    function Wi(t, e) {
                        return Gi(t, Af(t), e)
                    }

                    function Yi(t, e) {
                        return Gi(t, Pf(t), e)
                    }

                    function Vi(t, e) {
                        return function(n, r) {
                            var i = Sh(n) ? u : jn,
                                o = e ? e() : {};
                            return i(n, t, wo(r, 2), o)
                        }
                    }

                    function Xi(t) {
                        return si(function(e, n) {
                            var r = -1,
                                i = n.length,
                                o = i > 1 ? n[i - 1] : ot,
                                s = i > 2 ? n[2] : ot;
                            for (o = t.length > 3 && "function" == typeof o ? (i--, o) : ot, s && Fo(n[0], n[1], s) && (o = i < 3 ? ot : o, i = 1), e = hc(e); ++r < i;) {
                                var a = n[r];
                                a && t(e, a, r, o)
                            }
                            return e
                        })
                    }

                    function zi(t, e) {
                        return function(n, r) {
                            if (null == n) return n;
                            if (!Za(n)) return t(n, r);
                            for (var i = n.length, o = e ? i : -1, s = hc(n);
                                 (e ? o-- : ++o < i) && r(s[o], o, s) !== !1;);
                            return n
                        }
                    }

                    function Ki(t) {
                        return function(e, n, r) {
                            for (var i = -1, o = hc(e), s = r(e), a = s.length; a--;) {
                                var l = s[t ? a : ++i];
                                if (n(o[l], l, o) === !1) break
                            }
                            return e
                        }
                    }

                    function qi(t, e, n) {
                        function r() {
                            var e = this && this !== lr && this instanceof r ? o : t;
                            return e.apply(i ? n : this, arguments)
                        }
                        var i = e & bt,
                            o = Qi(t);
                        return r
                    }

                    function $i(t) {
                        return function(e) {
                            e = Ll(e);
                            var n = Y(e) ? et(e) : ot,
                                r = n ? n[0] : e.charAt(0),
                                i = n ? Ii(n, 1).join("") : e.slice(1);
                            return r[t]() + i
                        }
                    }

                    function Zi(t) {
                        return function(e) {
                            return b(Au(cu(e).replace(Yn, "")), t, "")
                        }
                    }

                    function Qi(t) {
                        return function() {
                            var e = arguments;
                            switch (e.length) {
                                case 0:
                                    return new t;
                                case 1:
                                    return new t(e[0]);
                                case 2:
                                    return new t(e[0], e[1]);
                                case 3:
                                    return new t(e[0], e[1], e[2]);
                                case 4:
                                    return new t(e[0], e[1], e[2], e[3]);
                                case 5:
                                    return new t(e[0], e[1], e[2], e[3], e[4]);
                                case 6:
                                    return new t(e[0], e[1], e[2], e[3], e[4], e[5]);
                                case 7:
                                    return new t(e[0], e[1], e[2], e[3], e[4], e[5], e[6])
                            }
                            var n = yf(t.prototype),
                                r = t.apply(n, e);
                            return ul(r) ? r : n
                        }
                    }

                    function Ji(t, e, n) {
                        function r() {
                            for (var o = arguments.length, s = ac(o), a = o, u = xo(r); a--;) s[a] = arguments[a];
                            var c = o < 3 && s[0] !== u && s[o - 1] !== u ? [] : q(s, u);
                            if (o -= c.length, o < n) return co(t, e, no, r.placeholder, ot, s, c, ot, ot, n - o);
                            var f = this && this !== lr && this instanceof r ? i : t;
                            return l(f, this, s)
                        }
                        var i = Qi(t);
                        return r
                    }

                    function to(t) {
                        return function(e, n, r) {
                            var i = hc(e);
                            if (!Za(e)) {
                                var o = wo(n, 3);
                                e = Vl(e), n = function(t) {
                                    return o(i[t], t, i)
                                }
                            }
                            var s = t(e, n, r);
                            return s > -1 ? i[o ? e[s] : s] : ot
                        }
                    }

                    function eo(t) {
                        return Eo(function(e) {
                            var n = e.length,
                                r = n,
                                o = i.prototype.thru;
                            for (t && e.reverse(); r--;) {
                                var s = e[r];
                                if ("function" != typeof s) throw new gc(ut);
                                if (o && !a && "wrapper" == To(s)) var a = new i([], !0)
                            }
                            for (r = a ? r : n; ++r < n;) {
                                s = e[r];
                                var l = To(s),
                                    u = "wrapper" == l ? Rf(s) : ot;
                                a = u && Wo(u[0]) && u[1] == (xt | Et | Ot | wt) && !u[4].length && 1 == u[9] ? a[To(u[0])].apply(a, u[3]) : 1 == s.length && Wo(s) ? a[l]() : a.thru(s)
                            }
                            return function() {
                                var t = arguments,
                                    r = t[0];
                                if (a && 1 == t.length && Sh(r)) return a.plant(r).value();
                                for (var i = 0, o = n ? e[i].apply(this, t) : r; ++i < n;) o = e[i].call(this, o);
                                return o
                            }
                        })
                    }

                    function no(t, e, n, r, i, o, s, a, l, u) {
                        function c() {
                            for (var v = arguments.length, b = ac(v), y = v; y--;) b[y] = arguments[y];
                            if (p) var m = xo(c),
                                E = U(b, m);
                            if (r && (b = Hi(b, r, i, p)), o && (b = Fi(b, o, s, p)), v -= E, p && v < u) {
                                var S = q(b, m);
                                return co(t, e, no, c.placeholder, n, b, S, a, l, u - v)
                            }
                            var O = h ? n : this,
                                T = d ? O[t] : t;
                            return v = b.length, a ? b = ts(b, a) : g && v > 1 && b.reverse(), f && l < v && (b.length = l), this && this !== lr && this instanceof c && (T = _ || Qi(T)), T.apply(O, b)
                        }
                        var f = e & xt,
                            h = e & bt,
                            d = e & yt,
                            p = e & (Et | St),
                            g = e & Ct,
                            _ = d ? ot : Qi(t);
                        return c
                    }

                    function ro(t, e) {
                        return function(n, r) {
                            return Ir(n, t, e(r), {})
                        }
                    }

                    function io(t, e) {
                        return function(n, r) {
                            var i;
                            if (n === ot && r === ot) return e;
                            if (n !== ot && (i = n), r !== ot) {
                                if (i === ot) return r;
                                "string" == typeof n || "string" == typeof r ? (n = vi(n), r = vi(r)) : (n = _i(n), r = _i(r)), i = t(n, r)
                            }
                            return i
                        }
                    }

                    function oo(t) {
                        return Eo(function(e) {
                            return e = _(e, M(wo())), si(function(n) {
                                var r = this;
                                return t(e, function(t) {
                                    return l(t, r, n)
                                })
                            })
                        })
                    }

                    function so(t, e) {
                        e = e === ot ? " " : vi(e);
                        var n = e.length;
                        if (n < 2) return n ? oi(e, t) : e;
                        var r = oi(e, Wc(t / tt(e)));
                        return Y(e) ? Ii(et(r), 0, t).join("") : r.slice(0, t)
                    }

                    function ao(t, e, n, r) {
                        function i() {
                            for (var e = -1, a = arguments.length, u = -1, c = r.length, f = ac(c + a), h = this && this !== lr && this instanceof i ? s : t; ++u < c;) f[u] = r[u];
                            for (; a--;) f[u++] = arguments[++e];
                            return l(h, o ? n : this, f)
                        }
                        var o = e & bt,
                            s = Qi(t);
                        return i
                    }

                    function lo(t) {
                        return function(e, n, r) {
                            return r && "number" != typeof r && Fo(e, n, r) && (n = r = ot), e = wl(e), n === ot ? (n = e, e = 0) : n = wl(n), r = r === ot ? e < n ? 1 : -1 : wl(r), ii(e, n, r, t)
                        }
                    }

                    function uo(t) {
                        return function(e, n) {
                            return "string" == typeof e && "string" == typeof n || (e = Rl(e), n = Rl(n)), t(e, n)
                        }
                    }

                    function co(t, e, n, r, i, o, s, a, l, u) {
                        var c = e & Et,
                            f = c ? s : ot,
                            h = c ? ot : s,
                            d = c ? o : ot,
                            p = c ? ot : o;
                        e |= c ? Ot : Tt, e &= ~(c ? Tt : Ot), e & mt || (e &= ~(bt | yt));
                        var g = [t, e, i, d, f, p, h, a, l, u],
                            _ = n.apply(ot, g);
                        return Wo(t) && Df(_, g), _.placeholder = r, es(_, t, e)
                    }

                    function fo(t) {
                        var e = fc[t];
                        return function(t, n) {
                            if (t = Rl(t), n = null == n ? 0 : Zc(Cl(n), 292)) {
                                var r = (Ll(t) + "e").split("e"),
                                    i = e(r[0] + "e" + (+r[1] + n));
                                return r = (Ll(i) + "e").split("e"), +(r[0] + "e" + (+r[1] - n))
                            }
                            return e(t)
                        }
                    }

                    function ho(t) {
                        return function(e) {
                            var n = Lf(e);
                            return n == Qt ? z(e) : n == oe ? Z(e) : j(e, t(e))
                        }
                    }

                    function po(t, e, n, r, i, o, s, a) {
                        var l = e & yt;
                        if (!l && "function" != typeof t) throw new gc(ut);
                        var u = r ? r.length : 0;
                        if (u || (e &= ~(Ot | Tt), r = i = ot), s = s === ot ? s : $c(Cl(s), 0), a = a === ot ? a : Cl(a), u -= i ? i.length : 0, e & Tt) {
                            var c = r,
                                f = i;
                            r = i = ot
                        }
                        var h = l ? ot : Rf(t),
                            d = [t, e, n, r, i, c, f, o, s, a];
                        if (h && qo(d, h), t = d[0], e = d[1], n = d[2], r = d[3], i = d[4], a = d[9] = d[9] === ot ? l ? 0 : t.length : $c(d[9] - u, 0), !a && e & (Et | St) && (e &= ~(Et | St)), e && e != bt) p = e == Et || e == St ? Ji(t, e, a) : e != Ot && e != (bt | Ot) || i.length ? no.apply(ot, d) : ao(t, e, n, r);
                        else var p = qi(t, e, n);
                        var g = h ? Tf : Df;
                        return es(g(p, d), t, e)
                    }

                    function go(t, e, n, r) {
                        return t === ot || $a(t, bc[n]) && !Ec.call(r, n) ? e : t
                    }

                    function _o(t, e, n, r, i, o) {
                        return ul(t) && ul(e) && (o.set(e, t), Kr(t, e, ot, _o, o), o.delete(e)), t
                    }

                    function vo(t) {
                        return bl(t) ? ot : t
                    }

                    function bo(t, e, n, r, i, o) {
                        var s = n & _t,
                            a = t.length,
                            l = e.length;
                        if (a != l && !(s && l > a)) return !1;
                        var u = o.get(t);
                        if (u && o.get(e)) return u == e;
                        var c = -1,
                            f = !0,
                            h = n & vt ? new yn : ot;
                        for (o.set(t, e), o.set(e, t); ++c < a;) {
                            var d = t[c],
                                p = e[c];
                            if (r) var g = s ? r(p, d, c, e, t, o) : r(d, p, c, t, e, o);
                            if (g !== ot) {
                                if (g) continue;
                                f = !1;
                                break
                            }
                            if (h) {
                                if (!m(e, function(t, e) {
                                        if (!B(h, e) && (d === t || i(d, t, n, r, o))) return h.push(e)
                                    })) {
                                    f = !1;
                                    break
                                }
                            } else if (d !== p && !i(d, p, n, r, o)) {
                                f = !1;
                                break
                            }
                        }
                        return o.delete(t), o.delete(e), f
                    }

                    function yo(t, e, n, r, i, o, s) {
                        switch (n) {
                            case he:
                                if (t.byteLength != e.byteLength || t.byteOffset != e.byteOffset) return !1;
                                t = t.buffer, e = e.buffer;
                            case fe:
                                return !(t.byteLength != e.byteLength || !o(new Ac(t), new Ac(e)));
                            case Xt:
                            case zt:
                            case Jt:
                                return $a(+t, +e);
                            case qt:
                                return t.name == e.name && t.message == e.message;
                            case ie:
                            case se:
                                return t == e + "";
                            case Qt:
                                var a = z;
                            case oe:
                                var l = r & _t;
                                if (a || (a = $), t.size != e.size && !l) return !1;
                                var u = s.get(t);
                                if (u) return u == e;
                                r |= vt, s.set(t, e);
                                var c = bo(a(t), a(e), r, i, o, s);
                                return s.delete(t), c;
                            case ae:
                                if (vf) return vf.call(t) == vf.call(e)
                        }
                        return !1
                    }

                    function mo(t, e, n, r, i, o) {
                        var s = n & _t,
                            a = So(t),
                            l = a.length,
                            u = So(e),
                            c = u.length;
                        if (l != c && !s) return !1;
                        for (var f = l; f--;) {
                            var h = a[f];
                            if (!(s ? h in e : Ec.call(e, h))) return !1
                        }
                        var d = o.get(t);
                        if (d && o.get(e)) return d == e;
                        var p = !0;
                        o.set(t, e), o.set(e, t);
                        for (var g = s; ++f < l;) {
                            h = a[f];
                            var _ = t[h],
                                v = e[h];
                            if (r) var b = s ? r(v, _, h, e, t, o) : r(_, v, h, t, e, o);
                            if (!(b === ot ? _ === v || i(_, v, n, r, o) : b)) {
                                p = !1;
                                break
                            }
                            g || (g = "constructor" == h)
                        }
                        if (p && !g) {
                            var y = t.constructor,
                                m = e.constructor;
                            y != m && "constructor" in t && "constructor" in e && !("function" == typeof y && y instanceof y && "function" == typeof m && m instanceof m) && (p = !1)
                        }
                        return o.delete(t), o.delete(e), p
                    }

                    function Eo(t) {
                        return Mf(Qo(t, ot, bs), t + "")
                    }

                    function So(t) {
                        return cr(t, Vl, Af)
                    }

                    function Oo(t) {
                        return cr(t, Xl, Pf)
                    }

                    function To(t) {
                        for (var e = t.name + "", n = cf[e], r = Ec.call(cf, e) ? n.length : 0; r--;) {
                            var i = n[r],
                                o = i.func;
                            if (null == o || o == t) return i.name
                        }
                        return e
                    }

                    function xo(t) {
                        var e = Ec.call(n, "placeholder") ? n : t;
                        return e.placeholder
                    }

                    function wo() {
                        var t = n.iteratee || Mu;
                        return t = t === Mu ? Ur : t, arguments.length ? t(arguments[0], arguments[1]) : t
                    }

                    function Co(t, e) {
                        var n = t.__data__;
                        return Go(e) ? n["string" == typeof e ? "string" : "hash"] : n.map
                    }

                    function Io(t) {
                        for (var e = Vl(t), n = e.length; n--;) {
                            var r = e[n],
                                i = t[r];
                            e[n] = [r, i, Xo(i)]
                        }
                        return e
                    }

                    function Ro(t, e) {
                        var n = W(t, e);
                        return Nr(n) ? n : ot
                    }

                    function Ao(t) {
                        var e = Ec.call(t, Bc),
                            n = t[Bc];
                        try {
                            t[Bc] = ot;
                            var r = !0
                        } catch (t) {}
                        var i = Tc.call(t);
                        return r && (e ? t[Bc] = n : delete t[Bc]), i
                    }

                    function Po(t, e, n) {
                        for (var r = -1, i = n.length; ++r < i;) {
                            var o = n[r],
                                s = o.size;
                            switch (o.type) {
                                case "drop":
                                    t += s;
                                    break;
                                case "dropRight":
                                    e -= s;
                                    break;
                                case "take":
                                    e = Zc(e, t + s);
                                    break;
                                case "takeRight":
                                    t = $c(t, e - s)
                            }
                        }
                        return {
                            start: t,
                            end: e
                        }
                    }

                    function Lo(t) {
                        var e = t.match(Ge);
                        return e ? e[1].split(We) : []
                    }

                    function ko(t, e, n) {
                        e = Ci(e, t);
                        for (var r = -1, i = e.length, o = !1; ++r < i;) {
                            var s = is(e[r]);
                            if (!(o = null != t && n(t, s))) break;
                            t = t[s]
                        }
                        return o || ++r != i ? o : (i = null == t ? 0 : t.length, !!i && ll(i) && Ho(s, i) && (Sh(t) || Eh(t)))
                    }

                    function Do(t) {
                        var e = t.length,
                            n = t.constructor(e);
                        return e && "string" == typeof t[0] && Ec.call(t, "index") && (n.index = t.index, n.input = t.input), n
                    }

                    function jo(t) {
                        return "function" != typeof t.constructor || Vo(t) ? {} : yf(Lc(t))
                    }

                    function Mo(t, e, n, r) {
                        var i = t.constructor;
                        switch (e) {
                            case fe:
                                return Ai(t);
                            case Xt:
                            case zt:
                                return new i(+t);
                            case he:
                                return Pi(t, r);
                            case de:
                            case pe:
                            case ge:
                            case _e:
                            case ve:
                            case be:
                            case ye:
                            case me:
                            case Ee:
                                return Mi(t, r);
                            case Qt:
                                return Li(t, r, n);
                            case Jt:
                            case se:
                                return new i(t);
                            case ie:
                                return ki(t);
                            case oe:
                                return Di(t, r, n);
                            case ae:
                                return ji(t)
                        }
                    }

                    function No(t, e) {
                        var n = e.length;
                        if (!n) return t;
                        var r = n - 1;
                        return e[r] = (n > 1 ? "& " : "") + e[r], e = e.join(n > 2 ? ", " : " "), t.replace(Ue, "{\n/* [wrapped with " + e + "] */\n")
                    }

                    function Bo(t) {
                        return Sh(t) || Eh(t) || !!(Mc && t && t[Mc])
                    }

                    function Ho(t, e) {
                        return e = null == e ? Mt : e, !!e && ("number" == typeof t || Qe.test(t)) && t > -1 && t % 1 == 0 && t < e
                    }

                    function Fo(t, e, n) {
                        if (!ul(n)) return !1;
                        var r = "undefined" == typeof e ? "undefined" : o(e);
                        return !!("number" == r ? Za(n) && Ho(e, n.length) : "string" == r && e in n) && $a(n[e], t)
                    }

                    function Uo(t, e) {
                        if (Sh(t)) return !1;
                        var n = "undefined" == typeof t ? "undefined" : o(t);
                        return !("number" != n && "symbol" != n && "boolean" != n && null != t && !El(t)) || (ke.test(t) || !Le.test(t) || null != e && t in hc(e))
                    }

                    function Go(t) {
                        var e = "undefined" == typeof t ? "undefined" : o(t);
                        return "string" == e || "number" == e || "symbol" == e || "boolean" == e ? "__proto__" !== t : null === t
                    }

                    function Wo(t) {
                        var e = To(t),
                            r = n[e];
                        if ("function" != typeof r || !(e in E.prototype)) return !1;
                        if (t === r) return !0;
                        var i = Rf(r);
                        return !!i && t === i[0]
                    }

                    function Yo(t) {
                        return !!Oc && Oc in t
                    }

                    function Vo(t) {
                        var e = t && t.constructor,
                            n = "function" == typeof e && e.prototype || bc;
                        return t === n
                    }

                    function Xo(t) {
                        return t === t && !ul(t)
                    }

                    function zo(t, e) {
                        return function(n) {
                            return null != n && (n[t] === e && (e !== ot || t in hc(n)))
                        }
                    }

                    function Ko(t) {
                        var e = Ma(t, function(t) {
                                return n.size === ft && n.clear(), t
                            }),
                            n = e.cache;
                        return e
                    }

                    function qo(t, e) {
                        var n = t[1],
                            r = e[1],
                            i = n | r,
                            o = i < (bt | yt | xt),
                            s = r == xt && n == Et || r == xt && n == wt && t[7].length <= e[8] || r == (xt | wt) && e[7].length <= e[8] && n == Et;
                        if (!o && !s) return t;
                        r & bt && (t[2] = e[2], i |= n & bt ? 0 : mt);
                        var a = e[3];
                        if (a) {
                            var l = t[3];
                            t[3] = l ? Hi(l, a, e[4]) : a, t[4] = l ? q(t[3], ht) : e[4]
                        }
                        return a = e[5], a && (l = t[5], t[5] = l ? Fi(l, a, e[6]) : a, t[6] = l ? q(t[5], ht) : e[6]), a = e[7], a && (t[7] = a), r & xt && (t[8] = null == t[8] ? e[8] : Zc(t[8], e[8])), null == t[9] && (t[9] = e[9]), t[0] = e[0], t[1] = i, t
                    }

                    function $o(t) {
                        var e = [];
                        if (null != t)
                            for (var n in hc(t)) e.push(n);
                        return e
                    }

                    function Zo(t) {
                        return Tc.call(t)
                    }

                    function Qo(t, e, n) {
                        return e = $c(e === ot ? t.length - 1 : e, 0),
                            function() {
                                for (var r = arguments, i = -1, o = $c(r.length - e, 0), s = ac(o); ++i < o;) s[i] = r[e + i];
                                i = -1;
                                for (var a = ac(e + 1); ++i < e;) a[i] = r[i];
                                return a[e] = n(s), l(t, this, a)
                            }
                    }

                    function Jo(t, e) {
                        return e.length < 2 ? t : ur(t, fi(e, 0, -1))
                    }

                    function ts(t, e) {
                        for (var n = t.length, r = Zc(e.length, n), i = Ui(t); r--;) {
                            var o = e[r];
                            t[r] = Ho(o, n) ? i[o] : ot
                        }
                        return t
                    }

                    function es(t, e, n) {
                        var r = e + "";
                        return Mf(t, No(r, ss(Lo(r), n)))
                    }

                    function ns(t) {
                        var e = 0,
                            n = 0;
                        return function() {
                            var r = Qc(),
                                i = Pt - (r - n);
                            if (n = r, i > 0) {
                                if (++e >= At) return arguments[0]
                            } else e = 0;
                            return t.apply(ot, arguments)
                        }
                    }

                    function rs(t, e) {
                        var n = -1,
                            r = t.length,
                            i = r - 1;
                        for (e = e === ot ? r : e; ++n < e;) {
                            var o = ri(n, i),
                                s = t[o];
                            t[o] = t[n], t[n] = s
                        }
                        return t.length = e, t
                    }

                    function is(t) {
                        if ("string" == typeof t || El(t)) return t;
                        var e = t + "";
                        return "0" == e && 1 / t == -jt ? "-0" : e
                    }

                    function os(t) {
                        if (null != t) {
                            try {
                                return mc.call(t)
                            } catch (t) {}
                            try {
                                return t + ""
                            } catch (t) {}
                        }
                        return ""
                    }

                    function ss(t, e) {
                        return c(Gt, function(n) {
                            var r = "_." + n[0];
                            e & n[1] && !p(t, r) && t.push(r)
                        }), t.sort()
                    }

                    function as(t) {
                        if (t instanceof E) return t.clone();
                        var e = new i(t.__wrapped__, t.__chain__);
                        return e.__actions__ = Ui(t.__actions__), e.__index__ = t.__index__, e.__values__ = t.__values__, e
                    }

                    function ls(t, e, n) {
                        e = (n ? Fo(t, e, n) : e === ot) ? 1 : $c(Cl(e), 0);
                        var r = null == t ? 0 : t.length;
                        if (!r || e < 1) return [];
                        for (var i = 0, o = 0, s = ac(Wc(r / e)); i < r;) s[o++] = fi(t, i, i += e);
                        return s
                    }

                    function us(t) {
                        for (var e = -1, n = null == t ? 0 : t.length, r = 0, i = []; ++e < n;) {
                            var o = t[e];
                            o && (i[r++] = o)
                        }
                        return i
                    }

                    function cs() {
                        var t = arguments.length;
                        if (!t) return [];
                        for (var e = ac(t - 1), n = arguments[0], r = t; r--;) e[r - 1] = arguments[r];
                        return v(Sh(n) ? Ui(n) : [n], nr(e, 1))
                    }

                    function fs(t, e, n) {
                        var r = null == t ? 0 : t.length;
                        return r ? (e = n || e === ot ? 1 : Cl(e), fi(t, e < 0 ? 0 : e, r)) : []
                    }

                    function hs(t, e, n) {
                        var r = null == t ? 0 : t.length;
                        return r ? (e = n || e === ot ? 1 : Cl(e), e = r - e, fi(t, 0, e < 0 ? 0 : e)) : []
                    }

                    function ds(t, e) {
                        return t && t.length ? Ei(t, wo(e, 3), !0, !0) : []
                    }

                    function ps(t, e) {
                        return t && t.length ? Ei(t, wo(e, 3), !0) : []
                    }

                    function gs(t, e, n, r) {
                        var i = null == t ? 0 : t.length;
                        return i ? (n && "number" != typeof n && Fo(t, e, n) && (n = 0, r = i), tr(t, e, n, r)) : []
                    }

                    function _s(t, e, n) {
                        var r = null == t ? 0 : t.length;
                        if (!r) return -1;
                        var i = null == n ? 0 : Cl(n);
                        return i < 0 && (i = $c(r + i, 0)), T(t, wo(e, 3), i)
                    }

                    function vs(t, e, n) {
                        var r = null == t ? 0 : t.length;
                        if (!r) return -1;
                        var i = r - 1;
                        return n !== ot && (i = Cl(n), i = n < 0 ? $c(r + i, 0) : Zc(i, r - 1)), T(t, wo(e, 3), i, !0)
                    }

                    function bs(t) {
                        var e = null == t ? 0 : t.length;
                        return e ? nr(t, 1) : []
                    }

                    function ys(t) {
                        var e = null == t ? 0 : t.length;
                        return e ? nr(t, jt) : []
                    }

                    function ms(t, e) {
                        var n = null == t ? 0 : t.length;
                        return n ? (e = e === ot ? 1 : Cl(e), nr(t, e)) : []
                    }

                    function Es(t) {
                        for (var e = -1, n = null == t ? 0 : t.length, r = {}; ++e < n;) {
                            var i = t[e];
                            r[i[0]] = i[1]
                        }
                        return r
                    }

                    function Ss(t) {
                        return t && t.length ? t[0] : ot
                    }

                    function Os(t, e, n) {
                        var r = null == t ? 0 : t.length;
                        if (!r) return -1;
                        var i = null == n ? 0 : Cl(n);
                        return i < 0 && (i = $c(r + i, 0)), x(t, e, i)
                    }

                    function Ts(t) {
                        var e = null == t ? 0 : t.length;
                        return e ? fi(t, 0, -1) : []
                    }

                    function xs(t, e) {
                        return null == t ? "" : Kc.call(t, e)
                    }

                    function ws(t) {
                        var e = null == t ? 0 : t.length;
                        return e ? t[e - 1] : ot
                    }

                    function Cs(t, e, n) {
                        var r = null == t ? 0 : t.length;
                        if (!r) return -1;
                        var i = r;
                        return n !== ot && (i = Cl(n), i = i < 0 ? $c(r + i, 0) : Zc(i, r - 1)), e === e ? J(t, e, i) : T(t, C, i, !0)
                    }

                    function Is(t, e) {
                        return t && t.length ? $r(t, Cl(e)) : ot
                    }

                    function Rs(t, e) {
                        return t && t.length && e && e.length ? ei(t, e) : t
                    }

                    function As(t, e, n) {
                        return t && t.length && e && e.length ? ei(t, e, wo(n, 2)) : t
                    }

                    function Ps(t, e, n) {
                        return t && t.length && e && e.length ? ei(t, e, ot, n) : t
                    }

                    function Ls(t, e) {
                        var n = [];
                        if (!t || !t.length) return n;
                        var r = -1,
                            i = [],
                            o = t.length;
                        for (e = wo(e, 3); ++r < o;) {
                            var s = t[r];
                            e(s, r, t) && (n.push(s), i.push(r))
                        }
                        return ni(t, i), n
                    }

                    function ks(t) {
                        return null == t ? t : ef.call(t)
                    }

                    function Ds(t, e, n) {
                        var r = null == t ? 0 : t.length;
                        return r ? (n && "number" != typeof n && Fo(t, e, n) ? (e = 0, n = r) : (e = null == e ? 0 : Cl(e), n = n === ot ? r : Cl(n)), fi(t, e, n)) : []
                    }

                    function js(t, e) {
                        return di(t, e)
                    }

                    function Ms(t, e, n) {
                        return pi(t, e, wo(n, 2))
                    }

                    function Ns(t, e) {
                        var n = null == t ? 0 : t.length;
                        if (n) {
                            var r = di(t, e);
                            if (r < n && $a(t[r], e)) return r
                        }
                        return -1
                    }

                    function Bs(t, e) {
                        return di(t, e, !0)
                    }

                    function Hs(t, e, n) {
                        return pi(t, e, wo(n, 2), !0)
                    }

                    function Fs(t, e) {
                        var n = null == t ? 0 : t.length;
                        if (n) {
                            var r = di(t, e, !0) - 1;
                            if ($a(t[r], e)) return r
                        }
                        return -1
                    }

                    function Us(t) {
                        return t && t.length ? gi(t) : []
                    }

                    function Gs(t, e) {
                        return t && t.length ? gi(t, wo(e, 2)) : []
                    }

                    function Ws(t) {
                        var e = null == t ? 0 : t.length;
                        return e ? fi(t, 1, e) : []
                    }

                    function Ys(t, e, n) {
                        return t && t.length ? (e = n || e === ot ? 1 : Cl(e), fi(t, 0, e < 0 ? 0 : e)) : []
                    }

                    function Vs(t, e, n) {
                        var r = null == t ? 0 : t.length;
                        return r ? (e = n || e === ot ? 1 : Cl(e), e = r - e, fi(t, e < 0 ? 0 : e, r)) : []
                    }

                    function Xs(t, e) {
                        return t && t.length ? Ei(t, wo(e, 3), !1, !0) : []
                    }

                    function zs(t, e) {
                        return t && t.length ? Ei(t, wo(e, 3)) : []
                    }

                    function Ks(t) {
                        return t && t.length ? bi(t) : []
                    }

                    function qs(t, e) {
                        return t && t.length ? bi(t, wo(e, 2)) : []
                    }

                    function $s(t, e) {
                        return e = "function" == typeof e ? e : ot, t && t.length ? bi(t, ot, e) : []
                    }

                    function Zs(t) {
                        if (!t || !t.length) return [];
                        var e = 0;
                        return t = d(t, function(t) {
                            if (Qa(t)) return e = $c(t.length, e), !0
                        }), D(e, function(e) {
                            return _(t, R(e))
                        })
                    }

                    function Qs(t, e) {
                        if (!t || !t.length) return [];
                        var n = Zs(t);
                        return null == e ? n : _(n, function(t) {
                            return l(e, ot, t)
                        })
                    }

                    function Js(t, e) {
                        return Ti(t || [], e || [], kn)
                    }

                    function ta(t, e) {
                        return Ti(t || [], e || [], ui)
                    }

                    function ea(t) {
                        var e = n(t);
                        return e.__chain__ = !0, e
                    }

                    function na(t, e) {
                        return e(t), t
                    }

                    function ra(t, e) {
                        return e(t)
                    }

                    function ia() {
                        return ea(this)
                    }

                    function oa() {
                        return new i(this.value(), this.__chain__)
                    }

                    function sa() {
                        this.__values__ === ot && (this.__values__ = xl(this.value()));
                        var t = this.__index__ >= this.__values__.length,
                            e = t ? ot : this.__values__[this.__index__++];
                        return {
                            done: t,
                            value: e
                        }
                    }

                    function aa() {
                        return this
                    }

                    function la(t) {
                        for (var e, n = this; n instanceof r;) {
                            var i = as(n);
                            i.__index__ = 0, i.__values__ = ot, e ? o.__wrapped__ = i : e = i;
                            var o = i;
                            n = n.__wrapped__
                        }
                        return o.__wrapped__ = t, e
                    }

                    function ua() {
                        var t = this.__wrapped__;
                        if (t instanceof E) {
                            var e = t;
                            return this.__actions__.length && (e = new E(this)), e = e.reverse(), e.__actions__.push({
                                func: ra,
                                args: [ks],
                                thisArg: ot
                            }), new i(e, this.__chain__)
                        }
                        return this.thru(ks)
                    }

                    function ca() {
                        return Si(this.__wrapped__, this.__actions__)
                    }

                    function fa(t, e, n) {
                        var r = Sh(t) ? h : Kn;
                        return n && Fo(t, e, n) && (e = ot), r(t, wo(e, 3))
                    }

                    function ha(t, e) {
                        var n = Sh(t) ? d : er;
                        return n(t, wo(e, 3))
                    }

                    function da(t, e) {
                        return nr(ya(t, e), 1)
                    }

                    function pa(t, e) {
                        return nr(ya(t, e), jt)
                    }

                    function ga(t, e, n) {
                        return n = n === ot ? 1 : Cl(n), nr(ya(t, e), n)
                    }

                    function _a(t, e) {
                        var n = Sh(t) ? c : mf;
                        return n(t, wo(e, 3))
                    }

                    function va(t, e) {
                        var n = Sh(t) ? f : Ef;
                        return n(t, wo(e, 3))
                    }

                    function ba(t, e, n, r) {
                        t = Za(t) ? t : iu(t), n = n && !r ? Cl(n) : 0;
                        var i = t.length;
                        return n < 0 && (n = $c(i + n, 0)), ml(t) ? n <= i && t.indexOf(e, n) > -1 : !!i && x(t, e, n) > -1
                    }

                    function ya(t, e) {
                        var n = Sh(t) ? _ : Vr;
                        return n(t, wo(e, 3))
                    }

                    function ma(t, e, n, r) {
                        return null == t ? [] : (Sh(e) || (e = null == e ? [] : [e]), n = r ? ot : n, Sh(n) || (n = null == n ? [] : [n]), Zr(t, e, n))
                    }

                    function Ea(t, e, n) {
                        var r = Sh(t) ? b : P,
                            i = arguments.length < 3;
                        return r(t, wo(e, 4), n, i, mf)
                    }

                    function Sa(t, e, n) {
                        var r = Sh(t) ? y : P,
                            i = arguments.length < 3;
                        return r(t, wo(e, 4), n, i, Ef)
                    }

                    function Oa(t, e) {
                        var n = Sh(t) ? d : er;
                        return n(t, Na(wo(e, 3)))
                    }

                    function Ta(t) {
                        var e = Sh(t) ? Rn : ai;
                        return e(t)
                    }

                    function xa(t, e, n) {
                        e = (n ? Fo(t, e, n) : e === ot) ? 1 : Cl(e);
                        var r = Sh(t) ? An : li;
                        return r(t, e)
                    }

                    function wa(t) {
                        var e = Sh(t) ? Pn : ci;
                        return e(t)
                    }

                    function Ca(t) {
                        if (null == t) return 0;
                        if (Za(t)) return ml(t) ? tt(t) : t.length;
                        var e = Lf(t);
                        return e == Qt || e == oe ? t.size : Gr(t).length
                    }

                    function Ia(t, e, n) {
                        var r = Sh(t) ? m : hi;
                        return n && Fo(t, e, n) && (e = ot), r(t, wo(e, 3))
                    }

                    function Ra(t, e) {
                        if ("function" != typeof e) throw new gc(ut);
                        return t = Cl(t),
                            function() {
                                if (--t < 1) return e.apply(this, arguments)
                            }
                    }

                    function Aa(t, e, n) {
                        return e = n ? ot : e, e = t && null == e ? t.length : e, po(t, xt, ot, ot, ot, ot, e)
                    }

                    function Pa(t, e) {
                        var n;
                        if ("function" != typeof e) throw new gc(ut);
                        return t = Cl(t),
                            function() {
                                return --t > 0 && (n = e.apply(this, arguments)), t <= 1 && (e = ot), n
                            }
                    }

                    function La(t, e, n) {
                        e = n ? ot : e;
                        var r = po(t, Et, ot, ot, ot, ot, ot, e);
                        return r.placeholder = La.placeholder, r
                    }

                    function ka(t, e, n) {
                        e = n ? ot : e;
                        var r = po(t, St, ot, ot, ot, ot, ot, e);
                        return r.placeholder = ka.placeholder, r
                    }

                    function Da(t, e, n) {
                        function r(e) {
                            var n = h,
                                r = d;
                            return h = d = ot, b = e, g = t.apply(r, n)
                        }

                        function i(t) {
                            return b = t, _ = jf(a, e), y ? r(t) : g
                        }

                        function o(t) {
                            var n = t - v,
                                r = t - b,
                                i = e - n;
                            return m ? Zc(i, p - r) : i
                        }

                        function s(t) {
                            var n = t - v,
                                r = t - b;
                            return v === ot || n >= e || n < 0 || m && r >= p
                        }

                        function a() {
                            var t = ch();
                            return s(t) ? l(t) : void(_ = jf(a, o(t)))
                        }

                        function l(t) {
                            return _ = ot, E && h ? r(t) : (h = d = ot, g)
                        }

                        function u() {
                            _ !== ot && Cf(_), b = 0, h = v = d = _ = ot
                        }

                        function c() {
                            return _ === ot ? g : l(ch())
                        }

                        function f() {
                            var t = ch(),
                                n = s(t);
                            if (h = arguments, d = this, v = t, n) {
                                if (_ === ot) return i(v);
                                if (m) return _ = jf(a, e), r(v)
                            }
                            return _ === ot && (_ = jf(a, e)), g
                        }
                        var h, d, p, g, _, v, b = 0,
                            y = !1,
                            m = !1,
                            E = !0;
                        if ("function" != typeof t) throw new gc(ut);
                        return e = Rl(e) || 0, ul(n) && (y = !!n.leading, m = "maxWait" in n, p = m ? $c(Rl(n.maxWait) || 0, e) : p, E = "trailing" in n ? !!n.trailing : E), f.cancel = u, f.flush = c, f
                    }

                    function ja(t) {
                        return po(t, Ct)
                    }

                    function Ma(t, e) {
                        if ("function" != typeof t || null != e && "function" != typeof e) throw new gc(ut);
                        var n = function n() {
                            var r = arguments,
                                i = e ? e.apply(this, r) : r[0],
                                o = n.cache;
                            if (o.has(i)) return o.get(i);
                            var s = t.apply(this, r);
                            return n.cache = o.set(i, s) || o, s
                        };
                        return n.cache = new(Ma.Cache || dn), n
                    }

                    function Na(t) {
                        if ("function" != typeof t) throw new gc(ut);
                        return function() {
                            var e = arguments;
                            switch (e.length) {
                                case 0:
                                    return !t.call(this);
                                case 1:
                                    return !t.call(this, e[0]);
                                case 2:
                                    return !t.call(this, e[0], e[1]);
                                case 3:
                                    return !t.call(this, e[0], e[1], e[2])
                            }
                            return !t.apply(this, e)
                        }
                    }

                    function Ba(t) {
                        return Pa(2, t)
                    }

                    function Ha(t, e) {
                        if ("function" != typeof t) throw new gc(ut);
                        return e = e === ot ? e : Cl(e), si(t, e)
                    }

                    function Fa(t, e) {
                        if ("function" != typeof t) throw new gc(ut);
                        return e = null == e ? 0 : $c(Cl(e), 0), si(function(n) {
                            var r = n[e],
                                i = Ii(n, 0, e);
                            return r && v(i, r), l(t, this, i)
                        })
                    }

                    function Ua(t, e, n) {
                        var r = !0,
                            i = !0;
                        if ("function" != typeof t) throw new gc(ut);
                        return ul(n) && (r = "leading" in n ? !!n.leading : r, i = "trailing" in n ? !!n.trailing : i), Da(t, e, {
                            leading: r,
                            maxWait: e,
                            trailing: i
                        })
                    }

                    function Ga(t) {
                        return Aa(t, 1)
                    }

                    function Wa(t, e) {
                        return _h(wi(e), t)
                    }

                    function Ya() {
                        if (!arguments.length) return [];
                        var t = arguments[0];
                        return Sh(t) ? t : [t]
                    }

                    function Va(t) {
                        return Un(t, gt)
                    }

                    function Xa(t, e) {
                        return e = "function" == typeof e ? e : ot, Un(t, gt, e)
                    }

                    function za(t) {
                        return Un(t, dt | gt)
                    }

                    function Ka(t, e) {
                        return e = "function" == typeof e ? e : ot, Un(t, dt | gt, e)
                    }

                    function qa(t, e) {
                        return null == e || Wn(t, e, Vl(e))
                    }

                    function $a(t, e) {
                        return t === e || t !== t && e !== e
                    }

                    function Za(t) {
                        return null != t && ll(t.length) && !sl(t)
                    }

                    function Qa(t) {
                        return cl(t) && Za(t)
                    }

                    function Ja(t) {
                        return t === !0 || t === !1 || cl(t) && hr(t) == Xt
                    }

                    function tl(t) {
                        return cl(t) && 1 === t.nodeType && !bl(t)
                    }

                    function el(t) {
                        if (null == t) return !0;
                        if (Za(t) && (Sh(t) || "string" == typeof t || "function" == typeof t.splice || Th(t) || Rh(t) || Eh(t))) return !t.length;
                        var e = Lf(t);
                        if (e == Qt || e == oe) return !t.size;
                        if (Vo(t)) return !Gr(t).length;
                        for (var n in t)
                            if (Ec.call(t, n)) return !1;
                        return !0
                    }

                    function nl(t, e) {
                        return kr(t, e)
                    }

                    function rl(t, e, n) {
                        n = "function" == typeof n ? n : ot;
                        var r = n ? n(t, e) : ot;
                        return r === ot ? kr(t, e, ot, n) : !!r
                    }

                    function il(t) {
                        if (!cl(t)) return !1;
                        var e = hr(t);
                        return e == qt || e == Kt || "string" == typeof t.message && "string" == typeof t.name && !bl(t)
                    }

                    function ol(t) {
                        return "number" == typeof t && zc(t)
                    }

                    function sl(t) {
                        if (!ul(t)) return !1;
                        var e = hr(t);
                        return e == $t || e == Zt || e == Vt || e == re
                    }

                    function al(t) {
                        return "number" == typeof t && t == Cl(t)
                    }

                    function ll(t) {
                        return "number" == typeof t && t > -1 && t % 1 == 0 && t <= Mt
                    }

                    function ul(t) {
                        var e = "undefined" == typeof t ? "undefined" : o(t);
                        return null != t && ("object" == e || "function" == e)
                    }

                    function cl(t) {
                        return null != t && "object" == ("undefined" == typeof t ? "undefined" : o(t))
                    }

                    function fl(t, e) {
                        return t === e || Mr(t, e, Io(e))
                    }

                    function hl(t, e, n) {
                        return n = "function" == typeof n ? n : ot, Mr(t, e, Io(e), n)
                    }

                    function dl(t) {
                        return vl(t) && t != +t
                    }

                    function pl(t) {
                        if (kf(t)) throw new uc(lt);
                        return Nr(t)
                    }

                    function gl(t) {
                        return null === t
                    }

                    function _l(t) {
                        return null == t
                    }

                    function vl(t) {
                        return "number" == typeof t || cl(t) && hr(t) == Jt
                    }

                    function bl(t) {
                        if (!cl(t) || hr(t) != ee) return !1;
                        var e = Lc(t);
                        if (null === e) return !0;
                        var n = Ec.call(e, "constructor") && e.constructor;
                        return "function" == typeof n && n instanceof n && mc.call(n) == xc
                    }

                    function yl(t) {
                        return al(t) && t >= -Mt && t <= Mt
                    }

                    function ml(t) {
                        return "string" == typeof t || !Sh(t) && cl(t) && hr(t) == se
                    }

                    function El(t) {
                        return "symbol" == ("undefined" == typeof t ? "undefined" : o(t)) || cl(t) && hr(t) == ae
                    }

                    function Sl(t) {
                        return t === ot
                    }

                    function Ol(t) {
                        return cl(t) && Lf(t) == ue
                    }

                    function Tl(t) {
                        return cl(t) && hr(t) == ce
                    }

                    function xl(t) {
                        if (!t) return [];
                        if (Za(t)) return ml(t) ? et(t) : Ui(t);
                        if (Nc && t[Nc]) return X(t[Nc]());
                        var e = Lf(t),
                            n = e == Qt ? z : e == oe ? $ : iu;
                        return n(t)
                    }

                    function wl(t) {
                        if (!t) return 0 === t ? t : 0;
                        if (t = Rl(t), t === jt || t === -jt) {
                            var e = t < 0 ? -1 : 1;
                            return e * Nt
                        }
                        return t === t ? t : 0
                    }

                    function Cl(t) {
                        var e = wl(t),
                            n = e % 1;
                        return e === e ? n ? e - n : e : 0
                    }

                    function Il(t) {
                        return t ? Fn(Cl(t), 0, Ht) : 0
                    }

                    function Rl(t) {
                        if ("number" == typeof t) return t;
                        if (El(t)) return Bt;
                        if (ul(t)) {
                            var e = "function" == typeof t.valueOf ? t.valueOf() : t;
                            t = ul(e) ? e + "" : e
                        }
                        if ("string" != typeof t) return 0 === t ? t : +t;
                        t = t.replace(Be, "");
                        var n = qe.test(t);
                        return n || Ze.test(t) ? or(t.slice(2), n ? 2 : 8) : Ke.test(t) ? Bt : +t
                    }

                    function Al(t) {
                        return Gi(t, Xl(t))
                    }

                    function Pl(t) {
                        return t ? Fn(Cl(t), -Mt, Mt) : 0 === t ? t : 0
                    }

                    function Ll(t) {
                        return null == t ? "" : vi(t)
                    }

                    function kl(t, e) {
                        var n = yf(t);
                        return null == e ? n : Mn(n, e)
                    }

                    function Dl(t, e) {
                        return O(t, wo(e, 3), rr)
                    }

                    function jl(t, e) {
                        return O(t, wo(e, 3), sr)
                    }

                    function Ml(t, e) {
                        return null == t ? t : Sf(t, wo(e, 3), Xl)
                    }

                    function Nl(t, e) {
                        return null == t ? t : Of(t, wo(e, 3), Xl)
                    }

                    function Bl(t, e) {
                        return t && rr(t, wo(e, 3))
                    }

                    function Hl(t, e) {
                        return t && sr(t, wo(e, 3))
                    }

                    function Fl(t) {
                        return null == t ? [] : ar(t, Vl(t))
                    }

                    function Ul(t) {
                        return null == t ? [] : ar(t, Xl(t))
                    }

                    function Gl(t, e, n) {
                        var r = null == t ? ot : ur(t, e);
                        return r === ot ? n : r
                    }

                    function Wl(t, e) {
                        return null != t && ko(t, e, mr)
                    }

                    function Yl(t, e) {
                        return null != t && ko(t, e, Tr)
                    }

                    function Vl(t) {
                        return Za(t) ? In(t) : Gr(t)
                    }

                    function Xl(t) {
                        return Za(t) ? In(t, !0) : Wr(t)
                    }

                    function zl(t, e) {
                        var n = {};
                        return e = wo(e, 3), rr(t, function(t, r, i) {
                            Bn(n, e(t, r, i), t)
                        }), n
                    }

                    function Kl(t, e) {
                        var n = {};
                        return e = wo(e, 3), rr(t, function(t, r, i) {
                            Bn(n, r, e(t, r, i))
                        }), n
                    }

                    function ql(t, e) {
                        return $l(t, Na(wo(e)))
                    }

                    function $l(t, e) {
                        if (null == t) return {};
                        var n = _(Oo(t), function(t) {
                            return [t]
                        });
                        return e = wo(e), Jr(t, n, function(t, n) {
                            return e(t, n[0])
                        })
                    }

                    function Zl(t, e, n) {
                        e = Ci(e, t);
                        var r = -1,
                            i = e.length;
                        for (i || (i = 1, t = ot); ++r < i;) {
                            var o = null == t ? ot : t[is(e[r])];
                            o === ot && (r = i, o = n), t = sl(o) ? o.call(t) : o
                        }
                        return t
                    }

                    function Ql(t, e, n) {
                        return null == t ? t : ui(t, e, n)
                    }

                    function Jl(t, e, n, r) {
                        return r = "function" == typeof r ? r : ot, null == t ? t : ui(t, e, n, r)
                    }

                    function tu(t, e, n) {
                        var r = Sh(t),
                            i = r || Th(t) || Rh(t);
                        if (e = wo(e, 4), null == n) {
                            var o = t && t.constructor;
                            n = i ? r ? new o : [] : ul(t) && sl(o) ? yf(Lc(t)) : {}
                        }
                        return (i ? c : rr)(t, function(t, r, i) {
                            return e(n, t, r, i)
                        }), n
                    }

                    function eu(t, e) {
                        return null == t || yi(t, e)
                    }

                    function nu(t, e, n) {
                        return null == t ? t : mi(t, e, wi(n))
                    }

                    function ru(t, e, n, r) {
                        return r = "function" == typeof r ? r : ot, null == t ? t : mi(t, e, wi(n), r)
                    }

                    function iu(t) {
                        return null == t ? [] : N(t, Vl(t))
                    }

                    function ou(t) {
                        return null == t ? [] : N(t, Xl(t))
                    }

                    function su(t, e, n) {
                        return n === ot && (n = e, e = ot), n !== ot && (n = Rl(n), n = n === n ? n : 0), e !== ot && (e = Rl(e), e = e === e ? e : 0), Fn(Rl(t), e, n)
                    }

                    function au(t, e, n) {
                        return e = wl(e), n === ot ? (n = e, e = 0) : n = wl(n), t = Rl(t), wr(t, e, n)
                    }

                    function lu(t, e, n) {
                        if (n && "boolean" != typeof n && Fo(t, e, n) && (e = n = ot), n === ot && ("boolean" == typeof e ? (n = e, e = ot) : "boolean" == typeof t && (n = t, t = ot)), t === ot && e === ot ? (t = 0, e = 1) : (t = wl(t), e === ot ? (e = t, t = 0) : e = wl(e)), t > e) {
                            var r = t;
                            t = e, e = r
                        }
                        if (n || t % 1 || e % 1) {
                            var i = tf();
                            return Zc(t + i * (e - t + ir("1e-" + ((i + "").length - 1))), e)
                        }
                        return ri(t, e)
                    }

                    function uu(t) {
                        return ed(Ll(t).toLowerCase())
                    }

                    function cu(t) {
                        return t = Ll(t), t && t.replace(Je, Er).replace(Vn, "")
                    }

                    function fu(t, e, n) {
                        t = Ll(t), e = vi(e);
                        var r = t.length;
                        n = n === ot ? r : Fn(Cl(n), 0, r);
                        var i = n;
                        return n -= e.length, n >= 0 && t.slice(n, i) == e
                    }

                    function hu(t) {
                        return t = Ll(t), t && Ie.test(t) ? t.replace(we, Sr) : t
                    }

                    function du(t) {
                        return t = Ll(t), t && Ne.test(t) ? t.replace(Me, "\\$&") : t
                    }

                    function pu(t, e, n) {
                        t = Ll(t), e = Cl(e);
                        var r = e ? tt(t) : 0;
                        if (!e || r >= e) return t;
                        var i = (e - r) / 2;
                        return so(Yc(i), n) + t + so(Wc(i), n)
                    }

                    function gu(t, e, n) {
                        t = Ll(t), e = Cl(e);
                        var r = e ? tt(t) : 0;
                        return e && r < e ? t + so(e - r, n) : t
                    }

                    function _u(t, e, n) {
                        t = Ll(t), e = Cl(e);
                        var r = e ? tt(t) : 0;
                        return e && r < e ? so(e - r, n) + t : t
                    }

                    function vu(t, e, n) {
                        return n || null == e ? e = 0 : e && (e = +e), Jc(Ll(t).replace(He, ""), e || 0)
                    }

                    function bu(t, e, n) {
                        return e = (n ? Fo(t, e, n) : e === ot) ? 1 : Cl(e), oi(Ll(t), e)
                    }

                    function yu() {
                        var t = arguments,
                            e = Ll(t[0]);
                        return t.length < 3 ? e : e.replace(t[1], t[2])
                    }

                    function mu(t, e, n) {
                        return n && "number" != typeof n && Fo(t, e, n) && (e = n = ot), (n = n === ot ? Ht : n >>> 0) ? (t = Ll(t), t && ("string" == typeof e || null != e && !Ch(e)) && (e = vi(e), !e && Y(t)) ? Ii(et(t), 0, n) : t.split(e, n)) : []
                    }

                    function Eu(t, e, n) {
                        return t = Ll(t), n = null == n ? 0 : Fn(Cl(n), 0, t.length), e = vi(e), t.slice(n, n + e.length) == e
                    }

                    function Su(t, e, r) {
                        var i = n.templateSettings;
                        r && Fo(t, e, r) && (e = ot), t = Ll(t), e = Dh({}, e, i, go);
                        var o, s, a = Dh({}, e.imports, i.imports, go),
                            l = Vl(a),
                            u = N(a, l),
                            c = 0,
                            f = e.interpolate || tn,
                            h = "__p += '",
                            d = dc((e.escape || tn).source + "|" + f.source + "|" + (f === Pe ? Xe : tn).source + "|" + (e.evaluate || tn).source + "|$", "g"),
                            p = "//# sourceURL=" + ("sourceURL" in e ? e.sourceURL : "lodash.templateSources[" + ++Zn + "]") + "\n";
                        t.replace(d, function(e, n, r, i, a, l) {
                            return r || (r = i), h += t.slice(c, l).replace(en, G), n && (o = !0, h += "' +\n__e(" + n + ") +\n'"), a && (s = !0, h += "';\n" + a + ";\n__p += '"), r && (h += "' +\n((__t = (" + r + ")) == null ? '' : __t) +\n'"), c = l + e.length, e
                        }), h += "';\n";
                        var g = e.variable;
                        g || (h = "with (obj) {\n" + h + "\n}\n"), h = (s ? h.replace(Se, "") : h).replace(Oe, "$1").replace(Te, "$1;"), h = "function(" + (g || "obj") + ") {\n" + (g ? "" : "obj || (obj = {});\n") + "var __t, __p = ''" + (o ? ", __e = _.escape" : "") + (s ? ", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n" : ";\n") + h + "return __p\n}";
                        var _ = nd(function() {
                            return cc(l, p + "return " + h).apply(ot, u)
                        });
                        if (_.source = h, il(_)) throw _;
                        return _
                    }

                    function Ou(t) {
                        return Ll(t).toLowerCase()
                    }

                    function Tu(t) {
                        return Ll(t).toUpperCase()
                    }

                    function xu(t, e, n) {
                        if (t = Ll(t), t && (n || e === ot)) return t.replace(Be, "");
                        if (!t || !(e = vi(e))) return t;
                        var r = et(t),
                            i = et(e),
                            o = H(r, i),
                            s = F(r, i) + 1;
                        return Ii(r, o, s).join("")
                    }

                    function wu(t, e, n) {
                        if (t = Ll(t), t && (n || e === ot)) return t.replace(Fe, "");
                        if (!t || !(e = vi(e))) return t;
                        var r = et(t),
                            i = F(r, et(e)) + 1;
                        return Ii(r, 0, i).join("")
                    }

                    function Cu(t, e, n) {
                        if (t = Ll(t), t && (n || e === ot)) return t.replace(He, "");
                        if (!t || !(e = vi(e))) return t;
                        var r = et(t),
                            i = H(r, et(e));
                        return Ii(r, i).join("")
                    }

                    function Iu(t, e) {
                        var n = It,
                            r = Rt;
                        if (ul(e)) {
                            var i = "separator" in e ? e.separator : i;
                            n = "length" in e ? Cl(e.length) : n, r = "omission" in e ? vi(e.omission) : r
                        }
                        t = Ll(t);
                        var o = t.length;
                        if (Y(t)) {
                            var s = et(t);
                            o = s.length
                        }
                        if (n >= o) return t;
                        var a = n - tt(r);
                        if (a < 1) return r;
                        var l = s ? Ii(s, 0, a).join("") : t.slice(0, a);
                        if (i === ot) return l + r;
                        if (s && (a += l.length - a), Ch(i)) {
                            if (t.slice(a).search(i)) {
                                var u, c = l;
                                for (i.global || (i = dc(i.source, Ll(ze.exec(i)) + "g")), i.lastIndex = 0; u = i.exec(c);) var f = u.index;
                                l = l.slice(0, f === ot ? a : f)
                            }
                        } else if (t.indexOf(vi(i), a) != a) {
                            var h = l.lastIndexOf(i);
                            h > -1 && (l = l.slice(0, h))
                        }
                        return l + r
                    }

                    function Ru(t) {
                        return t = Ll(t), t && Ce.test(t) ? t.replace(xe, Or) : t
                    }

                    function Au(t, e, n) {
                        return t = Ll(t), e = n ? ot : e, e === ot ? V(t) ? it(t) : S(t) : t.match(e) || []
                    }

                    function Pu(t) {
                        var e = null == t ? 0 : t.length,
                            n = wo();
                        return t = e ? _(t, function(t) {
                            if ("function" != typeof t[1]) throw new gc(ut);
                            return [n(t[0]), t[1]]
                        }) : [], si(function(n) {
                            for (var r = -1; ++r < e;) {
                                var i = t[r];
                                if (l(i[0], this, n)) return l(i[1], this, n)
                            }
                        })
                    }

                    function Lu(t) {
                        return Gn(Un(t, dt))
                    }

                    function ku(t) {
                        return function() {
                            return t
                        }
                    }

                    function Du(t, e) {
                        return null == t || t !== t ? e : t
                    }

                    function ju(t) {
                        return t
                    }

                    function Mu(t) {
                        return Ur("function" == typeof t ? t : Un(t, dt))
                    }

                    function Nu(t) {
                        return Xr(Un(t, dt))
                    }

                    function Bu(t, e) {
                        return zr(t, Un(e, dt))
                    }

                    function Hu(t, e, n) {
                        var r = Vl(e),
                            i = ar(e, r);
                        null != n || ul(e) && (i.length || !r.length) || (n = e, e = t, t = this, i = ar(e, Vl(e)));
                        var o = !(ul(n) && "chain" in n && !n.chain),
                            s = sl(t);
                        return c(i, function(n) {
                            var r = e[n];
                            t[n] = r, s && (t.prototype[n] = function() {
                                var e = this.__chain__;
                                if (o || e) {
                                    var n = t(this.__wrapped__),
                                        i = n.__actions__ = Ui(this.__actions__);
                                    return i.push({
                                        func: r,
                                        args: arguments,
                                        thisArg: t
                                    }), n.__chain__ = e, n
                                }
                                return r.apply(t, v([this.value()], arguments))
                            })
                        }), t
                    }

                    function Fu() {
                        return lr._ === this && (lr._ = wc), this
                    }

                    function Uu() {}

                    function Gu(t) {
                        return t = Cl(t), si(function(e) {
                            return $r(e, t)
                        })
                    }

                    function Wu(t) {
                        return Uo(t) ? R(is(t)) : ti(t)
                    }

                    function Yu(t) {
                        return function(e) {
                            return null == t ? ot : ur(t, e)
                        }
                    }

                    function Vu() {
                        return []
                    }

                    function Xu() {
                        return !1
                    }

                    function zu() {
                        return {}
                    }

                    function Ku() {
                        return ""
                    }

                    function qu() {
                        return !0
                    }

                    function $u(t, e) {
                        if (t = Cl(t), t < 1 || t > Mt) return [];
                        var n = Ht,
                            r = Zc(t, Ht);
                        e = wo(e), t -= Ht;
                        for (var i = D(r, e); ++n < t;) e(n);
                        return i
                    }

                    function Zu(t) {
                        return Sh(t) ? _(t, is) : El(t) ? [t] : Ui(Nf(Ll(t)))
                    }

                    function Qu(t) {
                        var e = ++Sc;
                        return Ll(t) + e
                    }

                    function Ju(t) {
                        return t && t.length ? qn(t, ju, dr) : ot
                    }

                    function tc(t, e) {
                        return t && t.length ? qn(t, wo(e, 2), dr) : ot
                    }

                    function ec(t) {
                        return I(t, ju)
                    }

                    function nc(t, e) {
                        return I(t, wo(e, 2))
                    }

                    function rc(t) {
                        return t && t.length ? qn(t, ju, Yr) : ot
                    }

                    function ic(t, e) {
                        return t && t.length ? qn(t, wo(e, 2), Yr) : ot
                    }

                    function oc(t) {
                        return t && t.length ? k(t, ju) : 0
                    }

                    function sc(t, e) {
                        return t && t.length ? k(t, wo(e, 2)) : 0
                    }
                    e = null == e ? lr : xr.defaults(lr.Object(), e, xr.pick(lr, $n));
                    var ac = e.Array,
                        lc = e.Date,
                        uc = e.Error,
                        cc = e.Function,
                        fc = e.Math,
                        hc = e.Object,
                        dc = e.RegExp,
                        pc = e.String,
                        gc = e.TypeError,
                        _c = ac.prototype,
                        vc = cc.prototype,
                        bc = hc.prototype,
                        yc = e["__core-js_shared__"],
                        mc = vc.toString,
                        Ec = bc.hasOwnProperty,
                        Sc = 0,
                        Oc = function() {
                            var t = /[^.]+$/.exec(yc && yc.keys && yc.keys.IE_PROTO || "");
                            return t ? "Symbol(src)_1." + t : ""
                        }(),
                        Tc = bc.toString,
                        xc = mc.call(hc),
                        wc = lr._,
                        Cc = dc("^" + mc.call(Ec).replace(Me, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"),
                        Ic = fr ? e.Buffer : ot,
                        Rc = e.Symbol,
                        Ac = e.Uint8Array,
                        Pc = Ic ? Ic.allocUnsafe : ot,
                        Lc = K(hc.getPrototypeOf, hc),
                        kc = hc.create,
                        Dc = bc.propertyIsEnumerable,
                        jc = _c.splice,
                        Mc = Rc ? Rc.isConcatSpreadable : ot,
                        Nc = Rc ? Rc.iterator : ot,
                        Bc = Rc ? Rc.toStringTag : ot,
                        Hc = function() {
                            try {
                                var t = Ro(hc, "defineProperty");
                                return t({}, "", {}), t
                            } catch (t) {}
                        }(),
                        Fc = e.clearTimeout !== lr.clearTimeout && e.clearTimeout,
                        Uc = lc && lc.now !== lr.Date.now && lc.now,
                        Gc = e.setTimeout !== lr.setTimeout && e.setTimeout,
                        Wc = fc.ceil,
                        Yc = fc.floor,
                        Vc = hc.getOwnPropertySymbols,
                        Xc = Ic ? Ic.isBuffer : ot,
                        zc = e.isFinite,
                        Kc = _c.join,
                        qc = K(hc.keys, hc),
                        $c = fc.max,
                        Zc = fc.min,
                        Qc = lc.now,
                        Jc = e.parseInt,
                        tf = fc.random,
                        ef = _c.reverse,
                        nf = Ro(e, "DataView"),
                        rf = Ro(e, "Map"),
                        of = Ro(e, "Promise"),
                        sf = Ro(e, "Set"),
                        af = Ro(e, "WeakMap"),
                        lf = Ro(hc, "create"),
                        uf = af && new af,
                        cf = {},
                        ff = os(nf),
                        hf = os(rf),
                        df = os(of),
                        pf = os(sf),
                        gf = os(af),
                        _f = Rc ? Rc.prototype : ot,
                        vf = _f ? _f.valueOf : ot,
                        bf = _f ? _f.toString : ot,
                        yf = function() {
                            function t() {}
                            return function(e) {
                                if (!ul(e)) return {};
                                if (kc) return kc(e);
                                t.prototype = e;
                                var n = new t;
                                return t.prototype = ot, n
                            }
                        }();
                    n.templateSettings = {
                        escape: Re,
                        evaluate: Ae,
                        interpolate: Pe,
                        variable: "",
                        imports: {
                            _: n
                        }
                    }, n.prototype = r.prototype, n.prototype.constructor = n, i.prototype = yf(r.prototype), i.prototype.constructor = i, E.prototype = yf(r.prototype), E.prototype.constructor = E, rt.prototype.clear = Ye, rt.prototype.delete = nn, rt.prototype.get = rn, rt.prototype.has = on, rt.prototype.set = sn, an.prototype.clear = ln, an.prototype.delete = un, an.prototype.get = cn, an.prototype.has = fn, an.prototype.set = hn, dn.prototype.clear = pn, dn.prototype.delete = gn, dn.prototype.get = _n, dn.prototype.has = vn, dn.prototype.set = bn, yn.prototype.add = yn.prototype.push = mn, yn.prototype.has = En, Sn.prototype.clear = On, Sn.prototype.delete = Tn, Sn.prototype.get = xn, Sn.prototype.has = wn, Sn.prototype.set = Cn;
                    var mf = zi(rr),
                        Ef = zi(sr, !0),
                        Sf = Ki(),
                        Of = Ki(!0),
                        Tf = uf ? function(t, e) {
                            return uf.set(t, e), t
                        } : ju,
                        xf = Hc ? function(t, e) {
                            return Hc(t, "toString", {
                                configurable: !0,
                                enumerable: !1,
                                value: ku(e),
                                writable: !0
                            })
                        } : ju,
                        wf = si,
                        Cf = Fc || function(t) {
                            return lr.clearTimeout(t)
                        },
                        If = sf && 1 / $(new sf([, -0]))[1] == jt ? function(t) {
                            return new sf(t)
                        } : Uu,
                        Rf = uf ? function(t) {
                            return uf.get(t)
                        } : Uu,
                        Af = Vc ? function(t) {
                            return null == t ? [] : (t = hc(t), d(Vc(t), function(e) {
                                return Dc.call(t, e)
                            }))
                        } : Vu,
                        Pf = Vc ? function(t) {
                            for (var e = []; t;) v(e, Af(t)), t = Lc(t);
                            return e
                        } : Vu,
                        Lf = hr;
                    (nf && Lf(new nf(new ArrayBuffer(1))) != he || rf && Lf(new rf) != Qt || of && Lf(of.resolve()) != ne || sf && Lf(new sf) != oe || af && Lf(new af) != ue) && (Lf = function(t) {
                        var e = hr(t),
                            n = e == ee ? t.constructor : ot,
                            r = n ? os(n) : "";
                        if (r) switch (r) {
                            case ff:
                                return he;
                            case hf:
                                return Qt;
                            case df:
                                return ne;
                            case pf:
                                return oe;
                            case gf:
                                return ue
                        }
                        return e
                    });
                    var kf = yc ? sl : Xu,
                        Df = ns(Tf),
                        jf = Gc || function(t, e) {
                            return lr.setTimeout(t, e)
                        },
                        Mf = ns(xf),
                        Nf = Ko(function(t) {
                            var e = [];
                            return De.test(t) && e.push(""), t.replace(je, function(t, n, r, i) {
                                e.push(r ? i.replace(Ve, "$1") : n || t)
                            }), e
                        }),
                        Bf = si(function(t, e) {
                            return Qa(t) ? zn(t, nr(e, 1, Qa, !0)) : []
                        }),
                        Hf = si(function(t, e) {
                            var n = ws(e);
                            return Qa(n) && (n = ot), Qa(t) ? zn(t, nr(e, 1, Qa, !0), wo(n, 2)) : []
                        }),
                        Ff = si(function(t, e) {
                            var n = ws(e);
                            return Qa(n) && (n = ot), Qa(t) ? zn(t, nr(e, 1, Qa, !0), ot, n) : []
                        }),
                        Uf = si(function(t) {
                            var e = _(t, xi);
                            return e.length && e[0] === t[0] ? Cr(e) : []
                        }),
                        Gf = si(function(t) {
                            var e = ws(t),
                                n = _(t, xi);
                            return e === ws(n) ? e = ot : n.pop(), n.length && n[0] === t[0] ? Cr(n, wo(e, 2)) : []
                        }),
                        Wf = si(function(t) {
                            var e = ws(t),
                                n = _(t, xi);
                            return e = "function" == typeof e ? e : ot, e && n.pop(), n.length && n[0] === t[0] ? Cr(n, ot, e) : []
                        }),
                        Yf = si(Rs),
                        Vf = Eo(function(t, e) {
                            var n = null == t ? 0 : t.length,
                                r = Hn(t, e);
                            return ni(t, _(e, function(t) {
                                return Ho(t, n) ? +t : t
                            }).sort(Ni)), r
                        }),
                        Xf = si(function(t) {
                            return bi(nr(t, 1, Qa, !0))
                        }),
                        zf = si(function(t) {
                            var e = ws(t);
                            return Qa(e) && (e = ot), bi(nr(t, 1, Qa, !0), wo(e, 2))
                        }),
                        Kf = si(function(t) {
                            var e = ws(t);
                            return e = "function" == typeof e ? e : ot, bi(nr(t, 1, Qa, !0), ot, e)
                        }),
                        qf = si(function(t, e) {
                            return Qa(t) ? zn(t, e) : []
                        }),
                        $f = si(function(t) {
                            return Oi(d(t, Qa))
                        }),
                        Zf = si(function(t) {
                            var e = ws(t);
                            return Qa(e) && (e = ot), Oi(d(t, Qa), wo(e, 2))
                        }),
                        Qf = si(function(t) {
                            var e = ws(t);
                            return e = "function" == typeof e ? e : ot, Oi(d(t, Qa), ot, e)
                        }),
                        Jf = si(Zs),
                        th = si(function(t) {
                            var e = t.length,
                                n = e > 1 ? t[e - 1] : ot;
                            return n = "function" == typeof n ? (t.pop(), n) : ot, Qs(t, n)
                        }),
                        eh = Eo(function(t) {
                            var e = t.length,
                                n = e ? t[0] : 0,
                                r = this.__wrapped__,
                                o = function(e) {
                                    return Hn(e, t)
                                };
                            return !(e > 1 || this.__actions__.length) && r instanceof E && Ho(n) ? (r = r.slice(n, +n + (e ? 1 : 0)), r.__actions__.push({
                                func: ra,
                                args: [o],
                                thisArg: ot
                            }), new i(r, this.__chain__).thru(function(t) {
                                return e && !t.length && t.push(ot), t
                            })) : this.thru(o)
                        }),
                        nh = Vi(function(t, e, n) {
                            Ec.call(t, n) ? ++t[n] : Bn(t, n, 1)
                        }),
                        rh = to(_s),
                        ih = to(vs),
                        oh = Vi(function(t, e, n) {
                            Ec.call(t, n) ? t[n].push(e) : Bn(t, n, [e])
                        }),
                        sh = si(function(t, e, n) {
                            var r = -1,
                                i = "function" == typeof e,
                                o = Za(t) ? ac(t.length) : [];
                            return mf(t, function(t) {
                                o[++r] = i ? l(e, t, n) : Rr(t, e, n)
                            }), o
                        }),
                        ah = Vi(function(t, e, n) {
                            Bn(t, n, e)
                        }),
                        lh = Vi(function(t, e, n) {
                            t[n ? 0 : 1].push(e)
                        }, function() {
                            return [
                                [],
                                []
                            ]
                        }),
                        uh = si(function(t, e) {
                            if (null == t) return [];
                            var n = e.length;
                            return n > 1 && Fo(t, e[0], e[1]) ? e = [] : n > 2 && Fo(e[0], e[1], e[2]) && (e = [e[0]]), Zr(t, nr(e, 1), [])
                        }),
                        ch = Uc || function() {
                            return lr.Date.now()
                        },
                        fh = si(function(t, e, n) {
                            var r = bt;
                            if (n.length) {
                                var i = q(n, xo(fh));
                                r |= Ot
                            }
                            return po(t, r, e, n, i)
                        }),
                        hh = si(function(t, e, n) {
                            var r = bt | yt;
                            if (n.length) {
                                var i = q(n, xo(hh));
                                r |= Ot
                            }
                            return po(e, r, t, n, i)
                        }),
                        dh = si(function(t, e) {
                            return Xn(t, 1, e)
                        }),
                        ph = si(function(t, e, n) {
                            return Xn(t, Rl(e) || 0, n)
                        });
                    Ma.Cache = dn;
                    var gh = wf(function(t, e) {
                            e = 1 == e.length && Sh(e[0]) ? _(e[0], M(wo())) : _(nr(e, 1), M(wo()));
                            var n = e.length;
                            return si(function(r) {
                                for (var i = -1, o = Zc(r.length, n); ++i < o;) r[i] = e[i].call(this, r[i]);
                                return l(t, this, r)
                            })
                        }),
                        _h = si(function(t, e) {
                            var n = q(e, xo(_h));
                            return po(t, Ot, ot, e, n)
                        }),
                        vh = si(function(t, e) {
                            var n = q(e, xo(vh));
                            return po(t, Tt, ot, e, n)
                        }),
                        bh = Eo(function(t, e) {
                            return po(t, wt, ot, ot, ot, e)
                        }),
                        yh = uo(dr),
                        mh = uo(function(t, e) {
                            return t >= e
                        }),
                        Eh = Ar(function() {
                            return arguments
                        }()) ? Ar : function(t) {
                            return cl(t) && Ec.call(t, "callee") && !Dc.call(t, "callee")
                        },
                        Sh = ac.isArray,
                        Oh = pr ? M(pr) : Pr,
                        Th = Xc || Xu,
                        xh = gr ? M(gr) : Lr,
                        wh = _r ? M(_r) : jr,
                        Ch = vr ? M(vr) : Br,
                        Ih = br ? M(br) : Hr,
                        Rh = yr ? M(yr) : Fr,
                        Ah = uo(Yr),
                        Ph = uo(function(t, e) {
                            return t <= e
                        }),
                        Lh = Xi(function(t, e) {
                            if (Vo(e) || Za(e)) return void Gi(e, Vl(e), t);
                            for (var n in e) Ec.call(e, n) && kn(t, n, e[n])
                        }),
                        kh = Xi(function(t, e) {
                            Gi(e, Xl(e), t)
                        }),
                        Dh = Xi(function(t, e, n, r) {
                            Gi(e, Xl(e), t, r)
                        }),
                        jh = Xi(function(t, e, n, r) {
                            Gi(e, Vl(e), t, r)
                        }),
                        Mh = Eo(Hn),
                        Nh = si(function(t) {
                            return t.push(ot, go), l(Dh, ot, t)
                        }),
                        Bh = si(function(t) {
                            return t.push(ot, _o), l(Wh, ot, t)
                        }),
                        Hh = ro(function(t, e, n) {
                            t[e] = n
                        }, ku(ju)),
                        Fh = ro(function(t, e, n) {
                            Ec.call(t, e) ? t[e].push(n) : t[e] = [n]
                        }, wo),
                        Uh = si(Rr),
                        Gh = Xi(function(t, e, n) {
                            Kr(t, e, n)
                        }),
                        Wh = Xi(function(t, e, n, r) {
                            Kr(t, e, n, r)
                        }),
                        Yh = Eo(function(t, e) {
                            var n = {};
                            if (null == t) return n;
                            var r = !1;
                            e = _(e, function(e) {
                                return e = Ci(e, t), r || (r = e.length > 1), e
                            }), Gi(t, Oo(t), n), r && (n = Un(n, dt | pt | gt, vo));
                            for (var i = e.length; i--;) yi(n, e[i]);
                            return n
                        }),
                        Vh = Eo(function(t, e) {
                            return null == t ? {} : Qr(t, e)
                        }),
                        Xh = ho(Vl),
                        zh = ho(Xl),
                        Kh = Zi(function(t, e, n) {
                            return e = e.toLowerCase(), t + (n ? uu(e) : e)
                        }),
                        qh = Zi(function(t, e, n) {
                            return t + (n ? "-" : "") + e.toLowerCase()
                        }),
                        $h = Zi(function(t, e, n) {
                            return t + (n ? " " : "") + e.toLowerCase()
                        }),
                        Zh = $i("toLowerCase"),
                        Qh = Zi(function(t, e, n) {
                            return t + (n ? "_" : "") + e.toLowerCase()
                        }),
                        Jh = Zi(function(t, e, n) {
                            return t + (n ? " " : "") + ed(e)
                        }),
                        td = Zi(function(t, e, n) {
                            return t + (n ? " " : "") + e.toUpperCase()
                        }),
                        ed = $i("toUpperCase"),
                        nd = si(function(t, e) {
                            try {
                                return l(t, ot, e)
                            } catch (t) {
                                return il(t) ? t : new uc(t)
                            }
                        }),
                        rd = Eo(function(t, e) {
                            return c(e, function(e) {
                                e = is(e), Bn(t, e, fh(t[e], t))
                            }), t
                        }),
                        id = eo(),
                        od = eo(!0),
                        sd = si(function(t, e) {
                            return function(n) {
                                return Rr(n, t, e)
                            }
                        }),
                        ad = si(function(t, e) {
                            return function(n) {
                                return Rr(t, n, e)
                            }
                        }),
                        ld = oo(_),
                        ud = oo(h),
                        cd = oo(m),
                        fd = lo(),
                        hd = lo(!0),
                        dd = io(function(t, e) {
                            return t + e
                        }, 0),
                        pd = fo("ceil"),
                        gd = io(function(t, e) {
                            return t / e
                        }, 1),
                        _d = fo("floor"),
                        vd = io(function(t, e) {
                            return t * e
                        }, 1),
                        bd = fo("round"),
                        yd = io(function(t, e) {
                            return t - e
                        }, 0);
                    return n.after = Ra, n.ary = Aa, n.assign = Lh, n.assignIn = kh, n.assignInWith = Dh, n.assignWith = jh, n.at = Mh, n.before = Pa, n.bind = fh, n.bindAll = rd, n.bindKey = hh, n.castArray = Ya, n.chain = ea, n.chunk = ls, n.compact = us, n.concat = cs, n.cond = Pu, n.conforms = Lu, n.constant = ku, n.countBy = nh, n.create = kl, n.curry = La, n.curryRight = ka, n.debounce = Da, n.defaults = Nh, n.defaultsDeep = Bh, n.defer = dh, n.delay = ph, n.difference = Bf, n.differenceBy = Hf, n.differenceWith = Ff, n.drop = fs, n.dropRight = hs, n.dropRightWhile = ds, n.dropWhile = ps, n.fill = gs, n.filter = ha, n.flatMap = da, n.flatMapDeep = pa, n.flatMapDepth = ga, n.flatten = bs, n.flattenDeep = ys, n.flattenDepth = ms, n.flip = ja, n.flow = id, n.flowRight = od, n.fromPairs = Es, n.functions = Fl, n.functionsIn = Ul, n.groupBy = oh, n.initial = Ts, n.intersection = Uf, n.intersectionBy = Gf, n.intersectionWith = Wf, n.invert = Hh, n.invertBy = Fh, n.invokeMap = sh, n.iteratee = Mu, n.keyBy = ah, n.keys = Vl, n.keysIn = Xl, n.map = ya, n.mapKeys = zl, n.mapValues = Kl, n.matches = Nu, n.matchesProperty = Bu, n.memoize = Ma, n.merge = Gh, n.mergeWith = Wh, n.method = sd, n.methodOf = ad, n.mixin = Hu, n.negate = Na, n.nthArg = Gu, n.omit = Yh, n.omitBy = ql, n.once = Ba, n.orderBy = ma, n.over = ld, n.overArgs = gh, n.overEvery = ud, n.overSome = cd, n.partial = _h, n.partialRight = vh, n.partition = lh, n.pick = Vh, n.pickBy = $l, n.property = Wu, n.propertyOf = Yu, n.pull = Yf, n.pullAll = Rs, n.pullAllBy = As, n.pullAllWith = Ps, n.pullAt = Vf, n.range = fd, n.rangeRight = hd, n.rearg = bh, n.reject = Oa, n.remove = Ls, n.rest = Ha, n.reverse = ks, n.sampleSize = xa, n.set = Ql, n.setWith = Jl, n.shuffle = wa, n.slice = Ds, n.sortBy = uh, n.sortedUniq = Us, n.sortedUniqBy = Gs, n.split = mu, n.spread = Fa, n.tail = Ws, n.take = Ys, n.takeRight = Vs, n.takeRightWhile = Xs, n.takeWhile = zs, n.tap = na, n.throttle = Ua, n.thru = ra, n.toArray = xl, n.toPairs = Xh, n.toPairsIn = zh, n.toPath = Zu, n.toPlainObject = Al, n.transform = tu, n.unary = Ga, n.union = Xf, n.unionBy = zf, n.unionWith = Kf, n.uniq = Ks, n.uniqBy = qs, n.uniqWith = $s, n.unset = eu, n.unzip = Zs, n.unzipWith = Qs, n.update = nu, n.updateWith = ru, n.values = iu, n.valuesIn = ou, n.without = qf, n.words = Au, n.wrap = Wa, n.xor = $f, n.xorBy = Zf, n.xorWith = Qf, n.zip = Jf, n.zipObject = Js, n.zipObjectDeep = ta, n.zipWith = th, n.entries = Xh, n.entriesIn = zh, n.extend = kh, n.extendWith = Dh, Hu(n, n), n.add = dd, n.attempt = nd, n.camelCase = Kh, n.capitalize = uu, n.ceil = pd, n.clamp = su, n.clone = Va, n.cloneDeep = za, n.cloneDeepWith = Ka, n.cloneWith = Xa, n.conformsTo = qa, n.deburr = cu, n.defaultTo = Du, n.divide = gd, n.endsWith = fu, n.eq = $a, n.escape = hu, n.escapeRegExp = du, n.every = fa, n.find = rh, n.findIndex = _s, n.findKey = Dl, n.findLast = ih, n.findLastIndex = vs, n.findLastKey = jl, n.floor = _d, n.forEach = _a, n.forEachRight = va, n.forIn = Ml, n.forInRight = Nl, n.forOwn = Bl, n.forOwnRight = Hl, n.get = Gl, n.gt = yh, n.gte = mh, n.has = Wl, n.hasIn = Yl, n.head = Ss, n.identity = ju, n.includes = ba, n.indexOf = Os, n.inRange = au, n.invoke = Uh, n.isArguments = Eh, n.isArray = Sh, n.isArrayBuffer = Oh, n.isArrayLike = Za, n.isArrayLikeObject = Qa, n.isBoolean = Ja, n.isBuffer = Th, n.isDate = xh, n.isElement = tl, n.isEmpty = el, n.isEqual = nl, n.isEqualWith = rl, n.isError = il, n.isFinite = ol, n.isFunction = sl, n.isInteger = al, n.isLength = ll, n.isMap = wh, n.isMatch = fl, n.isMatchWith = hl, n.isNaN = dl, n.isNative = pl, n.isNil = _l, n.isNull = gl, n.isNumber = vl, n.isObject = ul, n.isObjectLike = cl, n.isPlainObject = bl, n.isRegExp = Ch, n.isSafeInteger = yl, n.isSet = Ih, n.isString = ml, n.isSymbol = El, n.isTypedArray = Rh, n.isUndefined = Sl, n.isWeakMap = Ol, n.isWeakSet = Tl, n.join = xs, n.kebabCase = qh, n.last = ws, n.lastIndexOf = Cs, n.lowerCase = $h, n.lowerFirst = Zh, n.lt = Ah, n.lte = Ph, n.max = Ju, n.maxBy = tc, n.mean = ec, n.meanBy = nc, n.min = rc, n.minBy = ic, n.stubArray = Vu, n.stubFalse = Xu, n.stubObject = zu, n.stubString = Ku, n.stubTrue = qu, n.multiply = vd, n.nth = Is, n.noConflict = Fu, n.noop = Uu, n.now = ch, n.pad = pu, n.padEnd = gu, n.padStart = _u, n.parseInt = vu, n.random = lu, n.reduce = Ea, n.reduceRight = Sa, n.repeat = bu, n.replace = yu, n.result = Zl, n.round = bd, n.runInContext = t, n.sample = Ta, n.size = Ca, n.snakeCase = Qh, n.some = Ia, n.sortedIndex = js, n.sortedIndexBy = Ms, n.sortedIndexOf = Ns, n.sortedLastIndex = Bs, n.sortedLastIndexBy = Hs, n.sortedLastIndexOf = Fs, n.startCase = Jh, n.startsWith = Eu, n.subtract = yd, n.sum = oc, n.sumBy = sc, n.template = Su, n.times = $u, n.toFinite = wl, n.toInteger = Cl, n.toLength = Il, n.toLower = Ou, n.toNumber = Rl, n.toSafeInteger = Pl, n.toString = Ll, n.toUpper = Tu, n.trim = xu, n.trimEnd = wu, n.trimStart = Cu, n.truncate = Iu, n.unescape = Ru, n.uniqueId = Qu, n.upperCase = td, n.upperFirst = ed, n.each = _a, n.eachRight = va, n.first = Ss, Hu(n, function() {
                        var t = {};
                        return rr(n, function(e, r) {
                            Ec.call(n.prototype, r) || (t[r] = e)
                        }), t
                    }(), {
                        chain: !1
                    }), n.VERSION = st, c(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], function(t) {
                        n[t].placeholder = n
                    }), c(["drop", "take"], function(t, e) {
                        E.prototype[t] = function(n) {
                            n = n === ot ? 1 : $c(Cl(n), 0);
                            var r = this.__filtered__ && !e ? new E(this) : this.clone();
                            return r.__filtered__ ? r.__takeCount__ = Zc(n, r.__takeCount__) : r.__views__.push({
                                size: Zc(n, Ht),
                                type: t + (r.__dir__ < 0 ? "Right" : "")
                            }), r
                        }, E.prototype[t + "Right"] = function(e) {
                            return this.reverse()[t](e).reverse()
                        }
                    }), c(["filter", "map", "takeWhile"], function(t, e) {
                        var n = e + 1,
                            r = n == Lt || n == Dt;
                        E.prototype[t] = function(t) {
                            var e = this.clone();
                            return e.__iteratees__.push({
                                iteratee: wo(t, 3),
                                type: n
                            }), e.__filtered__ = e.__filtered__ || r, e
                        }
                    }), c(["head", "last"], function(t, e) {
                        var n = "take" + (e ? "Right" : "");
                        E.prototype[t] = function() {
                            return this[n](1).value()[0]
                        }
                    }), c(["initial", "tail"], function(t, e) {
                        var n = "drop" + (e ? "" : "Right");
                        E.prototype[t] = function() {
                            return this.__filtered__ ? new E(this) : this[n](1)
                        }
                    }), E.prototype.compact = function() {
                        return this.filter(ju)
                    }, E.prototype.find = function(t) {
                        return this.filter(t).head()
                    }, E.prototype.findLast = function(t) {
                        return this.reverse().find(t)
                    }, E.prototype.invokeMap = si(function(t, e) {
                        return "function" == typeof t ? new E(this) : this.map(function(n) {
                            return Rr(n, t, e)
                        })
                    }), E.prototype.reject = function(t) {
                        return this.filter(Na(wo(t)))
                    }, E.prototype.slice = function(t, e) {
                        t = Cl(t);
                        var n = this;
                        return n.__filtered__ && (t > 0 || e < 0) ? new E(n) : (t < 0 ? n = n.takeRight(-t) : t && (n = n.drop(t)), e !== ot && (e = Cl(e), n = e < 0 ? n.dropRight(-e) : n.take(e - t)), n)
                    }, E.prototype.takeRightWhile = function(t) {
                        return this.reverse().takeWhile(t).reverse()
                    }, E.prototype.toArray = function() {
                        return this.take(Ht)
                    }, rr(E.prototype, function(t, e) {
                        var r = /^(?:filter|find|map|reject)|While$/.test(e),
                            o = /^(?:head|last)$/.test(e),
                            s = n[o ? "take" + ("last" == e ? "Right" : "") : e],
                            a = o || /^find/.test(e);
                        s && (n.prototype[e] = function() {
                            var e = this.__wrapped__,
                                l = o ? [1] : arguments,
                                u = e instanceof E,
                                c = l[0],
                                f = u || Sh(e),
                                h = function(t) {
                                    var e = s.apply(n, v([t], l));
                                    return o && d ? e[0] : e
                                };
                            f && r && "function" == typeof c && 1 != c.length && (u = f = !1);
                            var d = this.__chain__,
                                p = !!this.__actions__.length,
                                g = a && !d,
                                _ = u && !p;
                            if (!a && f) {
                                e = _ ? e : new E(this);
                                var b = t.apply(e, l);
                                return b.__actions__.push({
                                    func: ra,
                                    args: [h],
                                    thisArg: ot
                                }), new i(b, d)
                            }
                            return g && _ ? t.apply(this, l) : (b = this.thru(h), g ? o ? b.value()[0] : b.value() : b)
                        })
                    }), c(["pop", "push", "shift", "sort", "splice", "unshift"], function(t) {
                        var e = _c[t],
                            r = /^(?:push|sort|unshift)$/.test(t) ? "tap" : "thru",
                            i = /^(?:pop|shift)$/.test(t);
                        n.prototype[t] = function() {
                            var t = arguments;
                            if (i && !this.__chain__) {
                                var n = this.value();
                                return e.apply(Sh(n) ? n : [], t)
                            }
                            return this[r](function(n) {
                                return e.apply(Sh(n) ? n : [], t)
                            })
                        }
                    }), rr(E.prototype, function(t, e) {
                        var r = n[e];
                        if (r) {
                            var i = r.name + "",
                                o = cf[i] || (cf[i] = []);
                            o.push({
                                name: e,
                                func: r
                            })
                        }
                    }), cf[no(ot, yt).name] = [{
                        name: "wrapper",
                        func: ot
                    }], E.prototype.clone = A, E.prototype.reverse = Q, E.prototype.value = nt, n.prototype.at = eh, n.prototype.chain = ia, n.prototype.commit = oa, n.prototype.next = sa, n.prototype.plant = la, n.prototype.reverse = ua, n.prototype.toJSON = n.prototype.valueOf = n.prototype.value = ca, n.prototype.first = n.prototype.head, Nc && (n.prototype[Nc] = aa), n
                },
                xr = Tr();
            "object" == o(n(9)) && n(9) ? (lr._ = xr, r = function() {
                return xr
            }.call(e, n, e, i), !(r !== ot && (i.exports = r))) : cr ? ((cr.exports = xr)._ = xr, ur._ = xr) : lr._ = xr
        }).call(void 0)
    }).call(e, function() {
        return this
    }(), n(8)(t))
}, function(t, e) {
    "use strict";
    t.exports = function(t) {
        return t.webpackPolyfill || (t.deprecate = function() {}, t.paths = [], t.children = [], t.webpackPolyfill = 1), t
    }
}, function(t, e) {
    (function(e) {
        t.exports = e
    }).call(e, {})
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.initApp = e.loadResources = e.loadConfig = void 0;
    var o = n(11),
        s = n(57),
        a = i(s),
        l = n(7),
        u = i(l),
        c = n(2),
        f = i(c),
        h = n(93),
        d = i(h),
        p = n(136),
        g = i(p),
        _ = n(230),
        v = r(_),
        b = n(169),
        y = i(b),
        m = n(199),
        E = i(m),
        S = n(183),
        O = i(S),
        T = n(3),
        x = n(5),
        w = n(109),
        C = i(w),
        I = n(168),
        R = r(I),
        A = e.loadConfig = function(t) {
            return new a.default(function(e, n) {
                a.default.all([v.get(x.CONFIG_SERVER_PATH + "/" + x.DEFAULT_CONFIG_NAME + "." + x.CONFIG_EXTENSION), v.get(x.CONFIG_SERVER_PATH + "/" + t + "." + x.CONFIG_EXTENSION)]).then(function(t) {
                    e(u.default.merge(t[0], t[1]))
                }).catch(function(t) {
                    n(t)
                })
            })
        },
        P = e.loadResources = function(t) {
            return new a.default(function(e, n) {
                var r = [],
                    i = {};
                t.forEach(function(t) {
                    r.push(new a.default(function(e, n) {
                        o.fabric.Image.fromURL(T.PRODUCTION_SERVER_CONFIG.URL + "/" + x.CONFIG_RESOURCES_PATH + "/" + t, function(r) {
                            r && r._element ? (i[t] = r, e()) : n()
                        }, {
                            crossOrigin: "Anonymous"
                        })
                    }))
                }), a.default.all(r).then(function(t) {
                    e(i)
                }).catch(function(t) {
                    n(t)
                })
            })
        };
    e.initApp = function(t, e) {
        d.default.navigateToLoadingPage(), g.default.saveId(t), A(t).then(function(t) {
            return f.default.debug("config loaded success"), g.default.init(t), C.default.init(e, t), a.default.all([P(x.RESOURCES), P(u.default.values(x.CABINET_COLLECTION_ITEMS)), P(u.default.values(x.PANTOGRAPH_PARTS)), P([t.backgroundUrl]), P([x.DEFAULT_DOORS_MATERIAL]), P(u.default.values(g.default.getDoorsSelectedGroupUrlMap()))])
        }).then(function(t) {
            f.default.debug("loaded images groups count: " + t.length), g.default.initCollectionItems(y.default.createCabinetCollectionItems(t[1])), g.default.savePantographParts(t[2]), g.default.saveBackgroundImage(t[3]), g.default.saveDoorsResources(t[4]), g.default.saveDoorsResources(t[5]), g.default.saveLoadedDoorsResourcesIndex(g.default.getDoorsGroupsSelectedItemIndex()), E.default.getTranslatedDoorsGroupsItemsForSpyCanvas(g.default.getDoorsGroupsItemsForSpyCanvas()), g.default.initDoorsGroupsCollectionItems(E.default.getTranslatedDoorsGroupsItemsForRendering(g.default.getDoorsGroupsCollectionItemsKeys())), g.default.initDoorsCollectionItems(y.default.createDoorsCollectionItems(g.default.getDoorsItemsOfSelectedGroupForSpyCanvas())), d.default.navigateToInsidePage()
        }).catch(function(t) {
            console.error(t), O.default.openConfirmationModal({
                message: C.default.KEYS.NETWORK_ERROR,
                icon: R.ERROR_ICON,
                class: "fail"
            })
        })
    }
}, function(module, exports, __webpack_require__) {
    (function(Buffer, process) {
        "use strict";
        var _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                return typeof t
            } : function(t) {
                return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
            },
            fabric = fabric || {
                version: "1.4.13"
            };
        exports.fabric = fabric, "undefined" != typeof document && "undefined" != typeof window ? (fabric.document = document, fabric.window = window, window.fabric = fabric) : (fabric.document = __webpack_require__(17).jsdom("<!DOCTYPE html><html><head></head><body></body></html>"), fabric.document.createWindow ? fabric.window = fabric.document.createWindow() : fabric.window = fabric.document.parentWindow), fabric.isTouchSupported = "ontouchstart" in fabric.document.documentElement, fabric.isLikelyNode = "undefined" != typeof Buffer && "undefined" == typeof window, fabric.SHARED_ATTRIBUTES = ["display", "transform", "fill", "fill-opacity", "fill-rule", "opacity", "stroke", "stroke-dasharray", "stroke-linecap", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke-width"], fabric.DPI = 96, fabric.reNum = "(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)",
            function() {
                function t(t, e) {
                    this.__eventListeners[t] && (e ? fabric.util.removeFromArray(this.__eventListeners[t], e) : this.__eventListeners[t].length = 0)
                }

                function e(t, e) {
                    if (this.__eventListeners || (this.__eventListeners = {}), 1 === arguments.length)
                        for (var n in t) this.on(n, t[n]);
                    else this.__eventListeners[t] || (this.__eventListeners[t] = []), this.__eventListeners[t].push(e);
                    return this
                }

                function n(e, n) {
                    if (this.__eventListeners) {
                        if (0 === arguments.length) this.__eventListeners = {};
                        else if (1 === arguments.length && "object" === _typeof(arguments[0]))
                            for (var r in e) t.call(this, r, e[r]);
                        else t.call(this, e, n);
                        return this
                    }
                }

                function r(t, e) {
                    if (this.__eventListeners) {
                        var n = this.__eventListeners[t];
                        if (n) {
                            for (var r = 0, i = n.length; r < i; r++) n[r].call(this, e || {});
                            return this
                        }
                    }
                }
                fabric.Observable = {
                    observe: e,
                    stopObserving: n,
                    fire: r,
                    on: e,
                    off: n,
                    trigger: r
                }
            }(), fabric.Collection = {
            add: function() {
                this._objects.push.apply(this._objects, arguments);
                for (var t = 0, e = arguments.length; t < e; t++) this._onObjectAdded(arguments[t]);
                return this.renderOnAddRemove && this.renderAll(), this
            },
            insertAt: function(t, e, n) {
                var r = this.getObjects();
                return n ? r[e] = t : r.splice(e, 0, t), this._onObjectAdded(t), this.renderOnAddRemove && this.renderAll(), this
            },
            remove: function() {
                for (var t, e = this.getObjects(), n = 0, r = arguments.length; n < r; n++) t = e.indexOf(arguments[n]), t !== -1 && (e.splice(t, 1), this._onObjectRemoved(arguments[n]));
                return this.renderOnAddRemove && this.renderAll(), this
            },
            forEachObject: function(t, e) {
                for (var n = this.getObjects(), r = n.length; r--;) t.call(e, n[r], r, n);
                return this
            },
            getObjects: function(t) {
                return "undefined" == typeof t ? this._objects : this._objects.filter(function(e) {
                    return e.type === t
                })
            },
            item: function(t) {
                return this.getObjects()[t]
            },
            isEmpty: function() {
                return 0 === this.getObjects().length
            },
            size: function() {
                return this.getObjects().length
            },
            contains: function(t) {
                return this.getObjects().indexOf(t) > -1
            },
            complexity: function() {
                return this.getObjects().reduce(function(t, e) {
                    return t += e.complexity ? e.complexity() : 0
                }, 0)
            }
        },
            function(t) {
                var e = Math.sqrt,
                    n = Math.atan2,
                    r = Math.PI / 180;
                fabric.util = {
                    removeFromArray: function(t, e) {
                        var n = t.indexOf(e);
                        return n !== -1 && t.splice(n, 1), t
                    },
                    getRandomInt: function(t, e) {
                        return Math.floor(Math.random() * (e - t + 1)) + t
                    },
                    degreesToRadians: function(t) {
                        return t * r
                    },
                    radiansToDegrees: function(t) {
                        return t / r
                    },
                    rotatePoint: function(t, e, n) {
                        var r = Math.sin(n),
                            i = Math.cos(n);
                        t.subtractEquals(e);
                        var o = t.x * i - t.y * r,
                            s = t.x * r + t.y * i;
                        return new fabric.Point(o, s).addEquals(e)
                    },
                    transformPoint: function(t, e, n) {
                        return n ? new fabric.Point(e[0] * t.x + e[1] * t.y, e[2] * t.x + e[3] * t.y) : new fabric.Point(e[0] * t.x + e[1] * t.y + e[4], e[2] * t.x + e[3] * t.y + e[5])
                    },
                    invertTransform: function(t) {
                        var e = t.slice(),
                            n = 1 / (t[0] * t[3] - t[1] * t[2]);
                        e = [n * t[3], -n * t[1], -n * t[2], n * t[0], 0, 0];
                        var r = fabric.util.transformPoint({
                            x: t[4],
                            y: t[5]
                        }, e);
                        return e[4] = -r.x, e[5] = -r.y, e
                    },
                    toFixed: function(t, e) {
                        return parseFloat(Number(t).toFixed(e))
                    },
                    parseUnit: function(t, e) {
                        var n = /\D{0,2}$/.exec(t),
                            r = parseFloat(t);
                        switch (e || (e = fabric.Text.DEFAULT_SVG_FONT_SIZE), n[0]) {
                            case "mm":
                                return r * fabric.DPI / 25.4;
                            case "cm":
                                return r * fabric.DPI / 2.54;
                            case "in":
                                return r * fabric.DPI;
                            case "pt":
                                return r * fabric.DPI / 72;
                            case "pc":
                                return r * fabric.DPI / 72 * 12;
                            case "em":
                                return r * e;
                            default:
                                return r
                        }
                    },
                    falseFunction: function() {
                        return !1
                    },
                    getKlass: function(t, e) {
                        return t = fabric.util.string.camelize(t.charAt(0).toUpperCase() + t.slice(1)), fabric.util.resolveNamespace(e)[t]
                    },
                    resolveNamespace: function(e) {
                        if (!e) return fabric;
                        for (var n = e.split("."), r = n.length, i = t || fabric.window, o = 0; o < r; ++o) i = i[n[o]];
                        return i
                    },
                    loadImage: function(t, e, n, r) {
                        if (!t) return void(e && e.call(n, t));
                        var i = fabric.util.createImage();
                        i.onload = function() {
                            e && e.call(n, i), i = i.onload = i.onerror = null
                        }, i.onerror = function() {
                            fabric.log("Error loading " + i.src), e && e.call(n, null, !0), i = i.onload = i.onerror = null
                        }, 0 !== t.indexOf("data") && "undefined" != typeof r && (i.crossOrigin = r), i.src = t
                    },
                    enlivenObjects: function(t, e, n, r) {
                        function i() {
                            ++s === a && e && e(o)
                        }
                        t = t || [];
                        var o = [],
                            s = 0,
                            a = t.length;
                        return a ? void t.forEach(function(t, e) {
                            if (!t || !t.type) return void i();
                            var s = fabric.util.getKlass(t.type, n);
                            s.async ? s.fromObject(t, function(n, s) {
                                s || (o[e] = n, r && r(t, o[e])), i()
                            }) : (o[e] = s.fromObject(t), r && r(t, o[e]), i())
                        }) : void(e && e(o))
                    },
                    groupSVGElements: function(t, e, n) {
                        var r;
                        return r = new fabric.PathGroup(t, e), "undefined" != typeof n && r.setSourcePath(n), r
                    },
                    populateWithProperties: function(t, e, n) {
                        if (n && "[object Array]" === Object.prototype.toString.call(n))
                            for (var r = 0, i = n.length; r < i; r++) n[r] in t && (e[n[r]] = t[n[r]])
                    },
                    drawDashedLine: function(t, r, i, o, s, a) {
                        var l = o - r,
                            u = s - i,
                            c = e(l * l + u * u),
                            f = n(u, l),
                            h = a.length,
                            d = 0,
                            p = !0;
                        for (t.save(), t.translate(r, i), t.moveTo(0, 0), t.rotate(f), r = 0; c > r;) r += a[d++ % h], r > c && (r = c), t[p ? "lineTo" : "moveTo"](r, 0), p = !p;
                        t.restore()
                    },
                    createCanvasElement: function(t) {
                        return t || (t = fabric.document.createElement("canvas")), t.getContext || "undefined" == typeof G_vmlCanvasManager || G_vmlCanvasManager.initElement(t), t
                    },
                    createImage: function() {
                        return fabric.isLikelyNode ? new(__webpack_require__(18).Image) : fabric.document.createElement("img")
                    },
                    createAccessors: function(t) {
                        for (var e = t.prototype, n = e.stateProperties.length; n--;) {
                            var r = e.stateProperties[n],
                                i = r.charAt(0).toUpperCase() + r.slice(1),
                                o = "set" + i,
                                s = "get" + i;
                            e[s] || (e[s] = function(t) {
                                return new Function('return this.get("' + t + '")')
                            }(r)), e[o] || (e[o] = function(t) {
                                return new Function("value", 'return this.set("' + t + '", value)')
                            }(r))
                        }
                    },
                    clipContext: function(t, e) {
                        e.save(), e.beginPath(), t.clipTo(e), e.clip()
                    },
                    multiplyTransformMatrices: function(t, e) {
                        for (var n = [
                            [t[0], t[2], t[4]],
                            [t[1], t[3], t[5]],
                            [0, 0, 1]
                        ], r = [
                            [e[0], e[2], e[4]],
                            [e[1], e[3], e[5]],
                            [0, 0, 1]
                        ], i = [], o = 0; o < 3; o++) {
                            i[o] = [];
                            for (var s = 0; s < 3; s++) {
                                for (var a = 0, l = 0; l < 3; l++) a += n[o][l] * r[l][s];
                                i[o][s] = a
                            }
                        }
                        return [i[0][0], i[1][0], i[0][1], i[1][1], i[0][2], i[1][2]]
                    },
                    getFunctionBody: function(t) {
                        return (String(t).match(/function[^{]*\{([\s\S]*)\}/) || {})[1]
                    },
                    isTransparent: function(t, e, n, r) {
                        r > 0 && (e > r ? e -= r : e = 0, n > r ? n -= r : n = 0);
                        for (var i = !0, o = t.getImageData(e, n, 2 * r || 1, 2 * r || 1), s = 3, a = o.data.length; s < a; s += 4) {
                            var l = o.data[s];
                            if (i = l <= 0, i === !1) break
                        }
                        return o = null, i
                    }
                }
            }(exports),
            function() {
                function t(t, r, o, s, l, u, c) {
                    var f = a.call(arguments);
                    if (i[f]) return i[f];
                    var h = Math.PI,
                        d = c * h / 180,
                        p = Math.sin(d),
                        g = Math.cos(d),
                        _ = 0,
                        v = 0;
                    o = Math.abs(o), s = Math.abs(s);
                    var b = -g * t * .5 - p * r * .5,
                        y = -g * r * .5 + p * t * .5,
                        m = o * o,
                        E = s * s,
                        S = y * y,
                        O = b * b,
                        T = m * E - m * S - E * O,
                        x = 0;
                    if (T < 0) {
                        var w = Math.sqrt(1 - T / (m * E));
                        o *= w, s *= w
                    } else x = (l === u ? -1 : 1) * Math.sqrt(T / (m * S + E * O));
                    var C = x * o * y / s,
                        I = -x * s * b / o,
                        R = g * C - p * I + .5 * t,
                        A = p * C + g * I + .5 * r,
                        P = n(1, 0, (b - C) / o, (y - I) / s),
                        L = n((b - C) / o, (y - I) / s, (-b - C) / o, (-y - I) / s);
                    0 === u && L > 0 ? L -= 2 * h : 1 === u && L < 0 && (L += 2 * h);
                    for (var k = Math.ceil(Math.abs(L / h * 2)), D = [], j = L / k, M = 8 / 3 * Math.sin(j / 4) * Math.sin(j / 4) / Math.sin(j / 2), N = P + j, B = 0; B < k; B++) D[B] = e(P, N, g, p, o, s, R, A, M, _, v), _ = D[B][4], v = D[B][5], P = N, N += j;
                    return i[f] = D, D
                }

                function e(t, e, n, r, i, s, l, u, c, f, h) {
                    var d = a.call(arguments);
                    if (o[d]) return o[d];
                    var p = Math.cos(t),
                        g = Math.sin(t),
                        _ = Math.cos(e),
                        v = Math.sin(e),
                        b = n * i * _ - r * s * v + l,
                        y = r * i * _ + n * s * v + u,
                        m = f + c * (-n * i * g - r * s * p),
                        E = h + c * (-r * i * g + n * s * p),
                        S = b + c * (n * i * v + r * s * _),
                        O = y + c * (r * i * v - n * s * _);
                    return o[d] = [m, E, S, O, b, y], o[d]
                }

                function n(t, e, n, r) {
                    var i = Math.atan2(e, t),
                        o = Math.atan2(r, n);
                    return o >= i ? o - i : 2 * Math.PI - (i - o)
                }

                function r(t, e, n, r, i, o, l, u) {
                    var c = a.call(arguments);
                    if (s[c]) return s[c];
                    var f, h, d, p, g, _, v, b, y = Math.sqrt,
                        m = Math.min,
                        E = Math.max,
                        S = Math.abs,
                        O = [],
                        T = [
                            [],
                            []
                        ];
                    h = 6 * t - 12 * n + 6 * i, f = -3 * t + 9 * n - 9 * i + 3 * l, d = 3 * n - 3 * t;
                    for (var x = 0; x < 2; ++x)
                        if (x > 0 && (h = 6 * e - 12 * r + 6 * o, f = -3 * e + 9 * r - 9 * o + 3 * u, d = 3 * r - 3 * e), S(f) < 1e-12) {
                            if (S(h) < 1e-12) continue;
                            p = -d / h, 0 < p && p < 1 && O.push(p)
                        } else v = h * h - 4 * d * f, v < 0 || (b = y(v), g = (-h + b) / (2 * f), 0 < g && g < 1 && O.push(g), _ = (-h - b) / (2 * f), 0 < _ && _ < 1 && O.push(_));
                    for (var w, C, I, R = O.length, A = R; R--;) p = O[R], I = 1 - p, w = I * I * I * t + 3 * I * I * p * n + 3 * I * p * p * i + p * p * p * l, T[0][R] = w, C = I * I * I * e + 3 * I * I * p * r + 3 * I * p * p * o + p * p * p * u, T[1][R] = C;
                    T[0][A] = t, T[1][A] = e, T[0][A + 1] = l, T[1][A + 1] = u;
                    var P = [{
                        x: m.apply(null, T[0]),
                        y: m.apply(null, T[1])
                    }, {
                        x: E.apply(null, T[0]),
                        y: E.apply(null, T[1])
                    }];
                    return s[c] = P, P
                }
                var i = {},
                    o = {},
                    s = {},
                    a = Array.prototype.join;
                fabric.util.drawArc = function(e, n, r, i) {
                    for (var o = i[0], s = i[1], a = i[2], l = i[3], u = i[4], c = i[5], f = i[6], h = [
                        [],
                        [],
                        [],
                        []
                    ], d = t(c - n, f - r, o, s, l, u, a), p = 0, g = d.length; p < g; p++) h[p][0] = d[p][0] + n, h[p][1] = d[p][1] + r, h[p][2] = d[p][2] + n, h[p][3] = d[p][3] + r, h[p][4] = d[p][4] + n, h[p][5] = d[p][5] + r, e.bezierCurveTo.apply(e, h[p])
                }, fabric.util.getBoundsOfArc = function(e, n, i, o, s, a, l, u, c) {
                    for (var f = 0, h = 0, d = [], p = [], g = t(u - e, c - n, i, o, a, l, s), _ = 0, v = g.length; _ < v; _++) d = r(f, h, g[_][0], g[_][1], g[_][2], g[_][3], g[_][4], g[_][5]), d[0].x += e, d[0].y += n, d[1].x += e, d[1].y += n, p.push(d[0]), p.push(d[1]), f = g[_][4], h = g[_][5];
                    return p
                }, fabric.util.getBoundsOfCurve = r
            }(),
            function() {
                function t(t, e) {
                    for (var n = i.call(arguments, 2), r = [], o = 0, s = t.length; o < s; o++) r[o] = n.length ? t[o][e].apply(t[o], n) : t[o][e].call(t[o]);
                    return r
                }

                function e(t, e) {
                    return r(t, e, function(t, e) {
                        return t >= e
                    })
                }

                function n(t, e) {
                    return r(t, e, function(t, e) {
                        return t < e
                    })
                }

                function r(t, e, n) {
                    if (t && 0 !== t.length) {
                        var r = t.length - 1,
                            i = e ? t[r][e] : t[r];
                        if (e)
                            for (; r--;) n(t[r][e], i) && (i = t[r][e]);
                        else
                            for (; r--;) n(t[r], i) && (i = t[r]);
                        return i
                    }
                }
                var i = Array.prototype.slice;
                Array.prototype.indexOf || (Array.prototype.indexOf = function(t) {
                    if (void 0 === this || null === this) throw new TypeError;
                    var e = Object(this),
                        n = e.length >>> 0;
                    if (0 === n) return -1;
                    var r = 0;
                    if (arguments.length > 0 && (r = Number(arguments[1]), r !== r ? r = 0 : 0 !== r && r !== Number.POSITIVE_INFINITY && r !== Number.NEGATIVE_INFINITY && (r = (r > 0 || -1) * Math.floor(Math.abs(r)))), r >= n) return -1;
                    for (var i = r >= 0 ? r : Math.max(n - Math.abs(r), 0); i < n; i++)
                        if (i in e && e[i] === t) return i;
                    return -1
                }), Array.prototype.forEach || (Array.prototype.forEach = function(t, e) {
                    for (var n = 0, r = this.length >>> 0; n < r; n++) n in this && t.call(e, this[n], n, this)
                }), Array.prototype.map || (Array.prototype.map = function(t, e) {
                    for (var n = [], r = 0, i = this.length >>> 0; r < i; r++) r in this && (n[r] = t.call(e, this[r], r, this));
                    return n
                }), Array.prototype.every || (Array.prototype.every = function(t, e) {
                    for (var n = 0, r = this.length >>> 0; n < r; n++)
                        if (n in this && !t.call(e, this[n], n, this)) return !1;
                    return !0
                }), Array.prototype.some || (Array.prototype.some = function(t, e) {
                    for (var n = 0, r = this.length >>> 0; n < r; n++)
                        if (n in this && t.call(e, this[n], n, this)) return !0;
                    return !1
                }), Array.prototype.filter || (Array.prototype.filter = function(t, e) {
                    for (var n, r = [], i = 0, o = this.length >>> 0; i < o; i++) i in this && (n = this[i], t.call(e, n, i, this) && r.push(n));
                    return r
                }), Array.prototype.reduce || (Array.prototype.reduce = function(t) {
                    var e, n = this.length >>> 0,
                        r = 0;
                    if (arguments.length > 1) e = arguments[1];
                    else
                        for (;;) {
                            if (r in this) {
                                e = this[r++];
                                break
                            }
                            if (++r >= n) throw new TypeError
                        }
                    for (; r < n; r++) r in this && (e = t.call(null, e, this[r], r, this));
                    return e
                }), fabric.util.array = {
                    invoke: t,
                    min: n,
                    max: e
                }
            }(),
            function() {
                function t(t, e) {
                    for (var n in e) t[n] = e[n];
                    return t
                }

                function e(e) {
                    return t({}, e)
                }
                fabric.util.object = {
                    extend: t,
                    clone: e
                }
            }(),
            function() {
                function t(t) {
                    return t.replace(/-+(.)?/g, function(t, e) {
                        return e ? e.toUpperCase() : ""
                    })
                }

                function e(t, e) {
                    return t.charAt(0).toUpperCase() + (e ? t.slice(1) : t.slice(1).toLowerCase())
                }

                function n(t) {
                    return t.replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/'/g, "&apos;").replace(/</g, "&lt;").replace(/>/g, "&gt;")
                }
                String.prototype.trim || (String.prototype.trim = function() {
                    return this.replace(/^[\s\xA0]+/, "").replace(/[\s\xA0]+$/, "")
                }), fabric.util.string = {
                    camelize: t,
                    capitalize: e,
                    escapeXml: n
                }
            }(),
            function() {
                var t = Array.prototype.slice,
                    e = Function.prototype.apply,
                    n = function() {};
                Function.prototype.bind || (Function.prototype.bind = function(r) {
                    var i, o = this,
                        s = t.call(arguments, 1);
                    return i = s.length ? function() {
                        return e.call(o, this instanceof n ? this : r, s.concat(t.call(arguments)))
                    } : function() {
                        return e.call(o, this instanceof n ? this : r, arguments)
                    }, n.prototype = this.prototype, i.prototype = new n, i
                })
            }(),
            function() {
                function t() {}

                function e(t) {
                    var e = this.constructor.superclass.prototype[t];
                    return arguments.length > 1 ? e.apply(this, r.call(arguments, 1)) : e.call(this)
                }

                function n() {
                    function n() {
                        this.initialize.apply(this, arguments)
                    }
                    var o = null,
                        a = r.call(arguments, 0);
                    "function" == typeof a[0] && (o = a.shift()), n.superclass = o, n.subclasses = [], o && (t.prototype = o.prototype, n.prototype = new t, o.subclasses.push(n));
                    for (var l = 0, u = a.length; l < u; l++) s(n, a[l], o);
                    return n.prototype.initialize || (n.prototype.initialize = i), n.prototype.constructor = n, n.prototype.callSuper = e, n
                }
                var r = Array.prototype.slice,
                    i = function() {},
                    o = function() {
                        for (var t in {
                            toString: 1
                        })
                            if ("toString" === t) return !1;
                        return !0
                    }(),
                    s = function(t, e, n) {
                        for (var r in e) r in t.prototype && "function" == typeof t.prototype[r] && (e[r] + "").indexOf("callSuper") > -1 ? t.prototype[r] = function(t) {
                            return function() {
                                var r = this.constructor.superclass;
                                this.constructor.superclass = n;
                                var i = e[t].apply(this, arguments);
                                if (this.constructor.superclass = r, "initialize" !== t) return i
                            }
                        }(r) : t.prototype[r] = e[r], o && (e.toString !== Object.prototype.toString && (t.prototype.toString = e.toString), e.valueOf !== Object.prototype.valueOf && (t.prototype.valueOf = e.valueOf))
                    };
                fabric.util.createClass = n
            }(),
            function() {
                function t(t) {
                    var e, n, r = Array.prototype.slice.call(arguments, 1),
                        i = r.length;
                    for (n = 0; n < i; n++)
                        if (e = _typeof(t[r[n]]), !/^(?:function|object|unknown)$/.test(e)) return !1;
                    return !0
                }

                function e(t, e) {
                    return {
                        handler: e,
                        wrappedHandler: n(t, e)
                    }
                }

                function n(t, e) {
                    return function(n) {
                        e.call(s(t), n || fabric.window.event)
                    }
                }

                function r(t, e) {
                    return function(n) {
                        if (g[t] && g[t][e])
                            for (var r = g[t][e], i = 0, o = r.length; i < o; i++) r[i].call(this, n || fabric.window.event)
                    }
                }

                function i(t, e) {
                    t || (t = fabric.window.event);
                    var n = t.target || (_typeof(t.srcElement) !== l ? t.srcElement : null),
                        r = fabric.util.getScrollLeftTop(n, e);
                    return {
                        x: _(t) + r.left,
                        y: v(t) + r.top
                    }
                }

                function o(t, e, n) {
                    var r = "touchend" === t.type ? "changedTouches" : "touches";
                    return t[r] && t[r][0] ? t[r][0][e] - (t[r][0][e] - t[r][0][n]) || t[n] : t[n]
                }
                var s, a, l = "unknown",
                    u = function() {
                        var t = 0;
                        return function(e) {
                            return e.__uniqueID || (e.__uniqueID = "uniqueID__" + t++)
                        }
                    }();
                ! function() {
                    var t = {};
                    s = function(e) {
                        return t[e]
                    }, a = function(e, n) {
                        t[e] = n
                    }
                }();
                var c, f, h = t(fabric.document.documentElement, "addEventListener", "removeEventListener") && t(fabric.window, "addEventListener", "removeEventListener"),
                    d = t(fabric.document.documentElement, "attachEvent", "detachEvent") && t(fabric.window, "attachEvent", "detachEvent"),
                    p = {},
                    g = {};
                h ? (c = function(t, e, n) {
                    t.addEventListener(e, n, !1)
                }, f = function(t, e, n) {
                    t.removeEventListener(e, n, !1)
                }) : d ? (c = function(t, n, r) {
                    var i = u(t);
                    a(i, t), p[i] || (p[i] = {}), p[i][n] || (p[i][n] = []);
                    var o = e(i, r);
                    p[i][n].push(o), t.attachEvent("on" + n, o.wrappedHandler)
                }, f = function(t, e, n) {
                    var r, i = u(t);
                    if (p[i] && p[i][e])
                        for (var o = 0, s = p[i][e].length; o < s; o++) r = p[i][e][o], r && r.handler === n && (t.detachEvent("on" + e, r.wrappedHandler), p[i][e][o] = null)
                }) : (c = function(t, e, n) {
                    var i = u(t);
                    if (g[i] || (g[i] = {}), !g[i][e]) {
                        g[i][e] = [];
                        var o = t["on" + e];
                        o && g[i][e].push(o), t["on" + e] = r(i, e)
                    }
                    g[i][e].push(n)
                }, f = function(t, e, n) {
                    var r = u(t);
                    if (g[r] && g[r][e])
                        for (var i = g[r][e], o = 0, s = i.length; o < s; o++) i[o] === n && i.splice(o, 1)
                }), fabric.util.addListener = c, fabric.util.removeListener = f;
                var _ = function(t) {
                        return _typeof(t.clientX) !== l ? t.clientX : 0
                    },
                    v = function(t) {
                        return _typeof(t.clientY) !== l ? t.clientY : 0
                    };
                fabric.isTouchSupported && (_ = function(t) {
                    return o(t, "pageX", "clientX")
                }, v = function(t) {
                    return o(t, "pageY", "clientY")
                }), fabric.util.getPointer = i, fabric.util.object.extend(fabric.util, fabric.Observable)
            }(),
            function() {
                function t(t, e) {
                    var n = t.style;
                    if (!n) return t;
                    if ("string" == typeof e) return t.style.cssText += ";" + e, e.indexOf("opacity") > -1 ? o(t, e.match(/opacity:\s*(\d?\.?\d*)/)[1]) : t;
                    for (var r in e)
                        if ("opacity" === r) o(t, e[r]);
                        else {
                            var i = "float" === r || "cssFloat" === r ? "undefined" == typeof n.styleFloat ? "cssFloat" : "styleFloat" : r;
                            n[i] = e[r]
                        }
                    return t
                }
                var e = fabric.document.createElement("div"),
                    n = "string" == typeof e.style.opacity,
                    r = "string" == typeof e.style.filter,
                    i = /alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,
                    o = function(t) {
                        return t
                    };
                n ? o = function(t, e) {
                    return t.style.opacity = e, t
                } : r && (o = function(t, e) {
                    var n = t.style;
                    return t.currentStyle && !t.currentStyle.hasLayout && (n.zoom = 1), i.test(n.filter) ? (e = e >= .9999 ? "" : "alpha(opacity=" + 100 * e + ")", n.filter = n.filter.replace(i, e)) : n.filter += " alpha(opacity=" + 100 * e + ")", t
                }), fabric.util.setStyle = t
            }(),
            function() {
                function t(t) {
                    return "string" == typeof t ? fabric.document.getElementById(t) : t
                }

                function e(t, e) {
                    var n = fabric.document.createElement(t);
                    for (var r in e) "class" === r ? n.className = e[r] : "for" === r ? n.htmlFor = e[r] : n.setAttribute(r, e[r]);
                    return n
                }

                function n(t, e) {
                    t && (" " + t.className + " ").indexOf(" " + e + " ") === -1 && (t.className += (t.className ? " " : "") + e)
                }

                function r(t, n, r) {
                    return "string" == typeof n && (n = e(n, r)), t.parentNode && t.parentNode.replaceChild(n, t), n.appendChild(t), n
                }

                function i(t, e) {
                    var n, r, i = 0,
                        o = 0,
                        s = fabric.document.documentElement,
                        a = fabric.document.body || {
                            scrollLeft: 0,
                            scrollTop: 0
                        };
                    for (r = t; t && t.parentNode && !n;) t = t.parentNode, 1 === t.nodeType && "fixed" === fabric.util.getElementStyle(t, "position") && (n = t), 1 === t.nodeType && r !== e && "absolute" === fabric.util.getElementStyle(t, "position") ? (i = 0, o = 0) : t === fabric.document ? (i = a.scrollLeft || s.scrollLeft || 0, o = a.scrollTop || s.scrollTop || 0) : (i += t.scrollLeft || 0, o += t.scrollTop || 0);
                    return {
                        left: i,
                        top: o
                    }
                }

                function o(t) {
                    var e, n, r = t && t.ownerDocument,
                        i = {
                            left: 0,
                            top: 0
                        },
                        o = {
                            left: 0,
                            top: 0
                        },
                        s = {
                            borderLeftWidth: "left",
                            borderTopWidth: "top",
                            paddingLeft: "left",
                            paddingTop: "top"
                        };
                    if (!r) return {
                        left: 0,
                        top: 0
                    };
                    for (var a in s) o[s[a]] += parseInt(u(t, a), 10) || 0;
                    return e = r.documentElement, "undefined" != typeof t.getBoundingClientRect && (i = t.getBoundingClientRect()), n = fabric.util.getScrollLeftTop(t, null), {
                        left: i.left + n.left - (e.clientLeft || 0) + o.left,
                        top: i.top + n.top - (e.clientTop || 0) + o.top
                    }
                }
                var s, a = Array.prototype.slice,
                    l = function(t) {
                        return a.call(t, 0)
                    };
                try {
                    s = l(fabric.document.childNodes) instanceof Array
                } catch (t) {}
                s || (l = function(t) {
                    for (var e = new Array(t.length), n = t.length; n--;) e[n] = t[n];
                    return e
                });
                var u;
                u = fabric.document.defaultView && fabric.document.defaultView.getComputedStyle ? function(t, e) {
                    var n = fabric.document.defaultView.getComputedStyle(t, null);
                    return n ? n[e] : void 0
                } : function(t, e) {
                    var n = t.style[e];
                    return !n && t.currentStyle && (n = t.currentStyle[e]), n
                },
                    function() {
                        function t(t) {
                            return "undefined" != typeof t.onselectstart && (t.onselectstart = fabric.util.falseFunction), r ? t.style[r] = "none" : "string" == typeof t.unselectable && (t.unselectable = "on"), t
                        }

                        function e(t) {
                            return "undefined" != typeof t.onselectstart && (t.onselectstart = null), r ? t.style[r] = "" : "string" == typeof t.unselectable && (t.unselectable = ""), t
                        }
                        var n = fabric.document.documentElement.style,
                            r = "userSelect" in n ? "userSelect" : "MozUserSelect" in n ? "MozUserSelect" : "WebkitUserSelect" in n ? "WebkitUserSelect" : "KhtmlUserSelect" in n ? "KhtmlUserSelect" : "";
                        fabric.util.makeElementUnselectable = t, fabric.util.makeElementSelectable = e
                    }(),
                    function() {
                        function t(t, e) {
                            var n = fabric.document.getElementsByTagName("head")[0],
                                r = fabric.document.createElement("script"),
                                i = !0;
                            r.onload = r.onreadystatechange = function(t) {
                                if (i) {
                                    if ("string" == typeof this.readyState && "loaded" !== this.readyState && "complete" !== this.readyState) return;
                                    i = !1, e(t || fabric.window.event), r = r.onload = r.onreadystatechange = null
                                }
                            }, r.src = t, n.appendChild(r)
                        }
                        fabric.util.getScript = t
                    }(), fabric.util.getById = t, fabric.util.toArray = l, fabric.util.makeElement = e, fabric.util.addClass = n, fabric.util.wrapElement = r, fabric.util.getScrollLeftTop = i, fabric.util.getElementOffset = o, fabric.util.getElementStyle = u
            }(),
            function() {
                function t(t, e) {
                    return t + (/\?/.test(t) ? "&" : "?") + e
                }

                function e() {}

                function n(n, i) {
                    i || (i = {});
                    var o, s = i.method ? i.method.toUpperCase() : "GET",
                        a = i.onComplete || function() {},
                        l = r();
                    return l.onreadystatechange = function() {
                        4 === l.readyState && (a(l), l.onreadystatechange = e)
                    }, "GET" === s && (o = null, "string" == typeof i.parameters && (n = t(n, i.parameters))), l.open(s, n, !0), "POST" !== s && "PUT" !== s || l.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), l.send(o), l
                }
                var r = function() {
                    for (var t = [function() {
                        return new ActiveXObject("Microsoft.XMLHTTP")
                    }, function() {
                        return new ActiveXObject("Msxml2.XMLHTTP")
                    }, function() {
                        return new ActiveXObject("Msxml2.XMLHTTP.3.0")
                    }, function() {
                        return new XMLHttpRequest
                    }], e = t.length; e--;) try {
                        var n = t[e]();
                        if (n) return t[e]
                    } catch (t) {}
                }();
                fabric.util.request = n
            }(), fabric.log = function() {}, fabric.warn = function() {}, "undefined" != typeof console && ["log", "warn"].forEach(function(t) {
            "undefined" != typeof console[t] && "function" == typeof console[t].apply && (fabric[t] = function() {
                return console[t].apply(console, arguments)
            })
        }),
            function() {
                function t(t) {
                    e(function(n) {
                        t || (t = {});
                        var r, i = n || +new Date,
                            o = t.duration || 500,
                            s = i + o,
                            a = t.onChange || function() {},
                            l = t.abort || function() {
                                return !1
                            },
                            u = t.easing || function(t, e, n, r) {
                                return -n * Math.cos(t / r * (Math.PI / 2)) + n + e
                            },
                            c = "startValue" in t ? t.startValue : 0,
                            f = "endValue" in t ? t.endValue : 100,
                            h = t.byValue || f - c;
                        t.onStart && t.onStart(),
                            function n(f) {
                                r = f || +new Date;
                                var d = r > s ? o : r - i;
                                return l() ? void(t.onComplete && t.onComplete()) : (a(u(d, c, h, o)), r > s ? void(t.onComplete && t.onComplete()) : void e(n))
                            }(i)
                    })
                }

                function e() {
                    return n.apply(fabric.window, arguments)
                }
                var n = fabric.window.requestAnimationFrame || fabric.window.webkitRequestAnimationFrame || fabric.window.mozRequestAnimationFrame || fabric.window.oRequestAnimationFrame || fabric.window.msRequestAnimationFrame || function(t) {
                    fabric.window.setTimeout(t, 1e3 / 60)
                };
                fabric.util.animate = t, fabric.util.requestAnimFrame = e
            }(),
            function() {
                function t(t, e, n, r) {
                    return t < Math.abs(e) ? (t = e, r = n / 4) : r = n / (2 * Math.PI) * Math.asin(e / t), {
                        a: t,
                        c: e,
                        p: n,
                        s: r
                    }
                }

                function e(t, e, n) {
                    return t.a * Math.pow(2, 10 * (e -= 1)) * Math.sin((e * n - t.s) * (2 * Math.PI) / t.p)
                }

                function n(t, e, n, r) {
                    return n * ((t = t / r - 1) * t * t + 1) + e
                }

                function r(t, e, n, r) {
                    return t /= r / 2, t < 1 ? n / 2 * t * t * t + e : n / 2 * ((t -= 2) * t * t + 2) + e
                }

                function i(t, e, n, r) {
                    return n * (t /= r) * t * t * t + e
                }

                function o(t, e, n, r) {
                    return -n * ((t = t / r - 1) * t * t * t - 1) + e
                }

                function s(t, e, n, r) {
                    return t /= r / 2, t < 1 ? n / 2 * t * t * t * t + e : -n / 2 * ((t -= 2) * t * t * t - 2) + e
                }

                function a(t, e, n, r) {
                    return n * (t /= r) * t * t * t * t + e
                }

                function l(t, e, n, r) {
                    return n * ((t = t / r - 1) * t * t * t * t + 1) + e
                }

                function u(t, e, n, r) {
                    return t /= r / 2, t < 1 ? n / 2 * t * t * t * t * t + e : n / 2 * ((t -= 2) * t * t * t * t + 2) + e
                }

                function c(t, e, n, r) {
                    return -n * Math.cos(t / r * (Math.PI / 2)) + n + e
                }

                function f(t, e, n, r) {
                    return n * Math.sin(t / r * (Math.PI / 2)) + e
                }

                function h(t, e, n, r) {
                    return -n / 2 * (Math.cos(Math.PI * t / r) - 1) + e
                }

                function d(t, e, n, r) {
                    return 0 === t ? e : n * Math.pow(2, 10 * (t / r - 1)) + e
                }

                function p(t, e, n, r) {
                    return t === r ? e + n : n * (-Math.pow(2, -10 * t / r) + 1) + e
                }

                function g(t, e, n, r) {
                    return 0 === t ? e : t === r ? e + n : (t /= r / 2, t < 1 ? n / 2 * Math.pow(2, 10 * (t - 1)) + e : n / 2 * (-Math.pow(2, -10 * --t) + 2) + e)
                }

                function _(t, e, n, r) {
                    return -n * (Math.sqrt(1 - (t /= r) * t) - 1) + e
                }

                function v(t, e, n, r) {
                    return n * Math.sqrt(1 - (t = t / r - 1) * t) + e
                }

                function b(t, e, n, r) {
                    return t /= r / 2, t < 1 ? -n / 2 * (Math.sqrt(1 - t * t) - 1) + e : n / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + e
                }

                function y(n, r, i, o) {
                    var s = 1.70158,
                        a = 0,
                        l = i;
                    if (0 === n) return r;
                    if (n /= o, 1 === n) return r + i;
                    a || (a = .3 * o);
                    var u = t(l, i, a, s);
                    return -e(u, n, o) + r
                }

                function m(e, n, r, i) {
                    var o = 1.70158,
                        s = 0,
                        a = r;
                    if (0 === e) return n;
                    if (e /= i, 1 === e) return n + r;
                    s || (s = .3 * i);
                    var l = t(a, r, s, o);
                    return l.a * Math.pow(2, -10 * e) * Math.sin((e * i - l.s) * (2 * Math.PI) / l.p) + l.c + n
                }

                function E(n, r, i, o) {
                    var s = 1.70158,
                        a = 0,
                        l = i;
                    if (0 === n) return r;
                    if (n /= o / 2, 2 === n) return r + i;
                    a || (a = o * (.3 * 1.5));
                    var u = t(l, i, a, s);
                    return n < 1 ? -.5 * e(u, n, o) + r : u.a * Math.pow(2, -10 * (n -= 1)) * Math.sin((n * o - u.s) * (2 * Math.PI) / u.p) * .5 + u.c + r
                }

                function S(t, e, n, r, i) {
                    return void 0 === i && (i = 1.70158), n * (t /= r) * t * ((i + 1) * t - i) + e
                }

                function O(t, e, n, r, i) {
                    return void 0 === i && (i = 1.70158), n * ((t = t / r - 1) * t * ((i + 1) * t + i) + 1) + e
                }

                function T(t, e, n, r, i) {
                    return void 0 === i && (i = 1.70158), t /= r / 2, t < 1 ? n / 2 * (t * t * (((i *= 1.525) + 1) * t - i)) + e : n / 2 * ((t -= 2) * t * (((i *= 1.525) + 1) * t + i) + 2) + e
                }

                function x(t, e, n, r) {
                    return n - w(r - t, 0, n, r) + e
                }

                function w(t, e, n, r) {
                    return (t /= r) < 1 / 2.75 ? n * (7.5625 * t * t) + e : t < 2 / 2.75 ? n * (7.5625 * (t -= 1.5 / 2.75) * t + .75) + e : t < 2.5 / 2.75 ? n * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) + e : n * (7.5625 * (t -= 2.625 / 2.75) * t + .984375) + e
                }

                function C(t, e, n, r) {
                    return t < r / 2 ? .5 * x(2 * t, 0, n, r) + e : .5 * w(2 * t - r, 0, n, r) + .5 * n + e
                }
                fabric.util.ease = {
                    easeInQuad: function(t, e, n, r) {
                        return n * (t /= r) * t + e
                    },
                    easeOutQuad: function(t, e, n, r) {
                        return -n * (t /= r) * (t - 2) + e
                    },
                    easeInOutQuad: function(t, e, n, r) {
                        return t /= r / 2, t < 1 ? n / 2 * t * t + e : -n / 2 * (--t * (t - 2) - 1) + e
                    },
                    easeInCubic: function(t, e, n, r) {
                        return n * (t /= r) * t * t + e
                    },
                    easeOutCubic: n,
                    easeInOutCubic: r,
                    easeInQuart: i,
                    easeOutQuart: o,
                    easeInOutQuart: s,
                    easeInQuint: a,
                    easeOutQuint: l,
                    easeInOutQuint: u,
                    easeInSine: c,
                    easeOutSine: f,
                    easeInOutSine: h,
                    easeInExpo: d,
                    easeOutExpo: p,
                    easeInOutExpo: g,
                    easeInCirc: _,
                    easeOutCirc: v,
                    easeInOutCirc: b,
                    easeInElastic: y,
                    easeOutElastic: m,
                    easeInOutElastic: E,
                    easeInBack: S,
                    easeOutBack: O,
                    easeInOutBack: T,
                    easeInBounce: x,
                    easeOutBounce: w,
                    easeInOutBounce: C
                }
            }(),
            function(t) {
                function e(t) {
                    return t in E ? E[t] : t
                }

                function n(t, e, n, r) {
                    var i, o = "[object Array]" === Object.prototype.toString.call(e);
                    return "fill" !== t && "stroke" !== t || "none" !== e ? "strokeDashArray" === t ? e = e.replace(/,/g, " ").split(/\s+/).map(function(t) {
                        return parseFloat(t)
                    }) : "transformMatrix" === t ? e = n && n.transformMatrix ? m(n.transformMatrix, p.parseTransformAttribute(e)) : p.parseTransformAttribute(e) : "visible" === t ? (e = "none" !== e && "hidden" !== e, n && n.visible === !1 && (e = !1)) : "originX" === t ? e = "start" === e ? "left" : "end" === e ? "right" : "center" : i = o ? e.map(y) : y(e, r) : e = "", !o && isNaN(i) ? e : i
                }

                function r(t) {
                    for (var e in S)
                        if (t[e] && "undefined" != typeof t[S[e]] && 0 !== t[e].indexOf("url(")) {
                            var n = new p.Color(t[e]);
                            t[e] = n.setAlpha(b(n.getAlpha() * t[S[e]], 2)).toRgba()
                        }
                    return t
                }

                function i(t, r) {
                    var i, o;
                    t.replace(/;$/, "").split(";").forEach(function(t) {
                        var s = t.split(":");
                        i = e(s[0].trim().toLowerCase()), o = n(i, s[1].trim()), r[i] = o
                    })
                }

                function o(t, r) {
                    var i, o;
                    for (var s in t) "undefined" != typeof t[s] && (i = e(s.toLowerCase()), o = n(i, t[s]), r[i] = o)
                }

                function s(t, e) {
                    var n = {};
                    for (var r in p.cssRules[e])
                        if (a(t, r.split(" ")))
                            for (var i in p.cssRules[e][r]) n[i] = p.cssRules[e][r][i];
                    return n
                }

                function a(t, e) {
                    var n, r = !0;
                    return n = u(t, e.pop()), n && e.length && (r = l(t, e)), n && r && 0 === e.length
                }

                function l(t, e) {
                    for (var n, r = !0; t.parentNode && 1 === t.parentNode.nodeType && e.length;) r && (n = e.pop()), t = t.parentNode, r = u(t, n);
                    return 0 === e.length
                }

                function u(t, e) {
                    var n, r = t.nodeName,
                        i = t.getAttribute("class"),
                        o = t.getAttribute("id");
                    if (n = new RegExp("^" + r, "i"), e = e.replace(n, ""), o && e.length && (n = new RegExp("#" + o + "(?![a-zA-Z\\-]+)", "i"), e = e.replace(n, "")), i && e.length) {
                        i = i.split(" ");
                        for (var s = i.length; s--;) n = new RegExp("\\." + i[s] + "(?![a-zA-Z\\-]+)", "i"), e = e.replace(n, "")
                    }
                    return 0 === e.length
                }

                function c(t) {
                    for (var e = t.getElementsByTagName("use"); e.length;) {
                        for (var n, r = e[0], i = r.getAttribute("xlink:href").substr(1), o = r.getAttribute("x") || 0, s = r.getAttribute("y") || 0, a = t.getElementById(i).cloneNode(!0), l = (a.getAttribute("transform") || "") + " translate(" + o + ", " + s + ")", u = 0, c = r.attributes, f = c.length; u < f; u++) {
                            var h = c.item(u);
                            "x" !== h.nodeName && "y" !== h.nodeName && "xlink:href" !== h.nodeName && ("transform" === h.nodeName ? l = h.nodeValue + " " + l : a.setAttribute(h.nodeName, h.nodeValue))
                        }
                        a.setAttribute("transform", l), a.setAttribute("instantiated_by_use", "1"), a.removeAttribute("id"), n = r.parentNode, n.replaceChild(a, r)
                    }
                }

                function f(t, e, n) {
                    var r, i, o, s, a = t.getAttribute("viewBox"),
                        l = 1,
                        u = 1,
                        c = 0,
                        f = 0;
                    if (a && (a = a.match(O)) && (c = -parseFloat(a[1]), f = -parseFloat(a[2]), r = parseFloat(a[3]), i = parseFloat(a[4]), e && e !== r && (l = e / r), n && n !== i && (u = n / i), u = l = l > u ? u : l, 1 !== l || 1 !== u || 0 !== c || 0 !== f)) {
                        if (o = "matrix(" + l + " 0 0 " + u + " " + c * l + " " + f * u + ")", "svg" === t.tagName) {
                            for (s = t.ownerDocument.createElement("g"); null != t.firstChild;) s.appendChild(t.firstChild);
                            t.appendChild(s)
                        } else s = t, o += s.getAttribute("transform");
                        s.setAttribute("transform", o)
                    }
                }

                function h(t) {
                    var e = t.objects,
                        n = t.options;
                    return e = e.map(function(t) {
                        return p[_(t.type)].fromObject(t)
                    }), {
                        objects: e,
                        options: n
                    }
                }

                function d(t, e, n) {
                    e[n] && e[n].toSVG && t.push('<pattern x="0" y="0" id="', n, 'Pattern" ', 'width="', e[n].source.width, '" height="', e[n].source.height, '" patternUnits="userSpaceOnUse">', '<image x="0" y="0" ', 'width="', e[n].source.width, '" height="', e[n].source.height, '" xlink:href="', e[n].source.src, '"></image></pattern>')
                }
                var p = t.fabric || (t.fabric = {}),
                    g = p.util.object.extend,
                    _ = p.util.string.capitalize,
                    v = p.util.object.clone,
                    b = p.util.toFixed,
                    y = p.util.parseUnit,
                    m = p.util.multiplyTransformMatrices,
                    E = {
                        cx: "left",
                        x: "left",
                        r: "radius",
                        cy: "top",
                        y: "top",
                        display: "visible",
                        visibility: "visible",
                        transform: "transformMatrix",
                        "fill-opacity": "fillOpacity",
                        "fill-rule": "fillRule",
                        "font-family": "fontFamily",
                        "font-size": "fontSize",
                        "font-style": "fontStyle",
                        "font-weight": "fontWeight",
                        "stroke-dasharray": "strokeDashArray",
                        "stroke-linecap": "strokeLineCap",
                        "stroke-linejoin": "strokeLineJoin",
                        "stroke-miterlimit": "strokeMiterLimit",
                        "stroke-opacity": "strokeOpacity",
                        "stroke-width": "strokeWidth",
                        "text-decoration": "textDecoration",
                        "text-anchor": "originX"
                    },
                    S = {
                        stroke: "strokeOpacity",
                        fill: "fillOpacity"
                    };
                p.cssRules = {}, p.gradientDefs = {}, p.parseTransformAttribute = function() {
                    function t(t, e) {
                        var n = e[0];
                        t[0] = Math.cos(n), t[1] = Math.sin(n), t[2] = -Math.sin(n), t[3] = Math.cos(n)
                    }

                    function e(t, e) {
                        var n = e[0],
                            r = 2 === e.length ? e[1] : e[0];
                        t[0] = n, t[3] = r
                    }

                    function n(t, e) {
                        t[2] = Math.tan(p.util.degreesToRadians(e[0]))
                    }

                    function r(t, e) {
                        t[1] = Math.tan(p.util.degreesToRadians(e[0]))
                    }

                    function i(t, e) {
                        t[4] = e[0], 2 === e.length && (t[5] = e[1])
                    }
                    var o = [1, 0, 0, 1, 0, 0],
                        s = p.reNum,
                        a = "(?:\\s+,?\\s*|,\\s*)",
                        l = "(?:(skewX)\\s*\\(\\s*(" + s + ")\\s*\\))",
                        u = "(?:(skewY)\\s*\\(\\s*(" + s + ")\\s*\\))",
                        c = "(?:(rotate)\\s*\\(\\s*(" + s + ")(?:" + a + "(" + s + ")" + a + "(" + s + "))?\\s*\\))",
                        f = "(?:(scale)\\s*\\(\\s*(" + s + ")(?:" + a + "(" + s + "))?\\s*\\))",
                        h = "(?:(translate)\\s*\\(\\s*(" + s + ")(?:" + a + "(" + s + "))?\\s*\\))",
                        d = "(?:(matrix)\\s*\\(\\s*(" + s + ")" + a + "(" + s + ")" + a + "(" + s + ")" + a + "(" + s + ")" + a + "(" + s + ")" + a + "(" + s + ")\\s*\\))",
                        g = "(?:" + d + "|" + h + "|" + f + "|" + c + "|" + l + "|" + u + ")",
                        _ = "(?:" + g + "(?:" + a + g + ")*)",
                        v = "^\\s*(?:" + _ + "?)\\s*$",
                        b = new RegExp(v),
                        y = new RegExp(g, "g");
                    return function(s) {
                        var a = o.concat(),
                            l = [];
                        if (!s || s && !b.test(s)) return a;
                        s.replace(y, function(s) {
                            var u = new RegExp(g).exec(s).filter(function(t) {
                                    return "" !== t && null != t
                                }),
                                c = u[1],
                                f = u.slice(2).map(parseFloat);
                            switch (c) {
                                case "translate":
                                    i(a, f);
                                    break;
                                case "rotate":
                                    f[0] = p.util.degreesToRadians(f[0]), t(a, f);
                                    break;
                                case "scale":
                                    e(a, f);
                                    break;
                                case "skewX":
                                    n(a, f);
                                    break;
                                case "skewY":
                                    r(a, f);
                                    break;
                                case "matrix":
                                    a = f
                            }
                            l.push(a.concat()), a = o.concat()
                        });
                        for (var u = l[0]; l.length > 1;) l.shift(), u = p.util.multiplyTransformMatrices(u, l[0]);
                        return u
                    }
                }();
                var O = new RegExp("^\\s*(" + p.reNum + "+)\\s*,?\\s*(" + p.reNum + "+)\\s*,?\\s*(" + p.reNum + "+)\\s*,?\\s*(" + p.reNum + "+)\\s*$");
                p.parseSVGDocument = function() {
                    function t(t, e) {
                        for (; t && (t = t.parentNode);)
                            if (e.test(t.nodeName) && !t.getAttribute("instantiated_by_use")) return !0;
                        return !1
                    }
                    var e = /^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/,
                        n = /^(symbol|image|marker|pattern|view)$/;
                    return function(r, i, o) {
                        if (r) {
                            c(r);
                            var s = new Date,
                                a = p.Object.__uid++,
                                l = y(r.getAttribute("width") || "100%"),
                                u = y(r.getAttribute("height") || "100%");
                            f(r, l, u);
                            var h = p.util.toArray(r.getElementsByTagName("*"));
                            if (0 === h.length && p.isLikelyNode) {
                                h = r.selectNodes('//*[name(.)!="svg"]');
                                for (var d = [], g = 0, _ = h.length; g < _; g++) d[g] = h[g];
                                h = d
                            }
                            var b = h.filter(function(r) {
                                return n.test(r.tagName) && f(r, 0, 0), e.test(r.tagName) && !t(r, /^(?:pattern|defs|symbol)$/)
                            });
                            if (!b || b && !b.length) return void(i && i([], {}));
                            var m = {
                                width: l,
                                height: u,
                                widthAttr: l,
                                heightAttr: u,
                                svgUid: a
                            };
                            p.gradientDefs[a] = p.getGradientDefs(r), p.cssRules[a] = p.getCSSRules(r), p.parseElements(b, function(t) {
                                p.documentParsingTime = new Date - s, i && i(t, m)
                            }, v(m), o)
                        }
                    }
                }();
                var T = {
                        has: function(t, e) {
                            e(!1)
                        },
                        get: function() {},
                        set: function() {}
                    },
                    x = new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*(" + p.reNum + "(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|" + p.reNum + "))?\\s+(.*)");
                g(p, {
                    parseFontDeclaration: function(t, e) {
                        var n = t.match(x);
                        if (n) {
                            var r = n[1],
                                i = n[3],
                                o = n[4],
                                s = n[5],
                                a = n[6];
                            r && (e.fontStyle = r), i && (e.fontWeight = isNaN(parseFloat(i)) ? i : parseFloat(i)), o && (e.fontSize = y(o)), a && (e.fontFamily = a), s && (e.lineHeight = "normal" === s ? 1 : s)
                        }
                    },
                    getGradientDefs: function(t) {
                        var e, n, r, i, o = t.getElementsByTagName("linearGradient"),
                            s = t.getElementsByTagName("radialGradient"),
                            a = 0,
                            l = [],
                            u = {},
                            c = {};
                        for (l.length = o.length + s.length, n = o.length; n--;) l[a++] = o[n];
                        for (n = s.length; n--;) l[a++] = s[n];
                        for (; a--;) e = l[a], i = e.getAttribute("xlink:href"), r = e.getAttribute("id"), i && (c[r] = i.substr(1)), u[r] = e;
                        for (r in c) {
                            var f = u[c[r]].cloneNode(!0);
                            for (e = u[r]; f.firstChild;) e.appendChild(f.firstChild)
                        }
                        return u
                    },
                    parseAttributes: function(t, i, o) {
                        if (t) {
                            var a, l, u = {};
                            "undefined" == typeof o && (o = t.getAttribute("svgUid")), t.parentNode && /^symbol|[g|a]$/i.test(t.parentNode.nodeName) && (u = p.parseAttributes(t.parentNode, i, o)), l = u && u.fontSize || t.getAttribute("font-size") || p.Text.DEFAULT_SVG_FONT_SIZE;
                            var c = i.reduce(function(r, i) {
                                return a = t.getAttribute(i), a && (i = e(i), a = n(i, a, u, l), r[i] = a), r
                            }, {});
                            return c = g(c, g(s(t, o), p.parseStyleAttribute(t))), c.font && p.parseFontDeclaration(c.font, c), r(g(u, c))
                        }
                    },
                    parseElements: function(t, e, n, r) {
                        new p.ElementsParser(t, e, n, r).parse()
                    },
                    parseStyleAttribute: function(t) {
                        var e = {},
                            n = t.getAttribute("style");
                        return n ? ("string" == typeof n ? i(n, e) : o(n, e), e) : e
                    },
                    parsePointsAttribute: function(t) {
                        if (!t) return null;
                        t = t.replace(/,/g, " ").trim(), t = t.split(/\s+/);
                        var e, n, r = [];
                        for (e = 0, n = t.length; e < n; e += 2) r.push({
                            x: parseFloat(t[e]),
                            y: parseFloat(t[e + 1])
                        });
                        return r
                    },
                    getCSSRules: function(t) {
                        for (var r, i = t.getElementsByTagName("style"), o = {}, s = 0, a = i.length; s < a; s++) {
                            var l = i[s].textContent;
                            l = l.replace(/\/\*[\s\S]*?\*\//g, ""), "" !== l.trim() && (r = l.match(/[^{]*\{[\s\S]*?\}/g), r = r.map(function(t) {
                                return t.trim()
                            }), r.forEach(function(t) {
                                for (var r = t.match(/([\s\S]*?)\s*\{([^}]*)\}/), i = {}, s = r[2].trim(), a = s.replace(/;$/, "").split(/\s*;\s*/), l = 0, u = a.length; l < u; l++) {
                                    var c = a[l].split(/\s*:\s*/),
                                        f = e(c[0]),
                                        h = n(f, c[1], c[0]);
                                    i[f] = h
                                }
                                t = r[1], t.split(",").forEach(function(t) {
                                    t = t.replace(/^svg/i, "").trim(), "" !== t && (o[t] = p.util.object.clone(i))
                                })
                            }))
                        }
                        return o
                    },
                    loadSVGFromURL: function(t, e, n) {
                        function r(r) {
                            var i = r.responseXML;
                            i && !i.documentElement && p.window.ActiveXObject && r.responseText && (i = new ActiveXObject("Microsoft.XMLDOM"), i.async = "false", i.loadXML(r.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i, ""))), i && i.documentElement && p.parseSVGDocument(i.documentElement, function(n, r) {
                                T.set(t, {
                                    objects: p.util.array.invoke(n, "toObject"),
                                    options: r
                                }), e(n, r)
                            }, n)
                        }
                        t = t.replace(/^\n\s*/, "").trim(), T.has(t, function(n) {
                            n ? T.get(t, function(t) {
                                var n = h(t);
                                e(n.objects, n.options)
                            }) : new p.util.request(t, {
                                method: "get",
                                onComplete: r
                            })
                        })
                    },
                    loadSVGFromString: function(t, e, n) {
                        t = t.trim();
                        var r;
                        if ("undefined" != typeof DOMParser) {
                            var i = new DOMParser;
                            i && i.parseFromString && (r = i.parseFromString(t, "text/xml"))
                        } else p.window.ActiveXObject && (r = new ActiveXObject("Microsoft.XMLDOM"), r.async = "false", r.loadXML(t.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i, "")));
                        p.parseSVGDocument(r.documentElement, function(t, n) {
                            e(t, n)
                        }, n)
                    },
                    createSVGFontFacesMarkup: function(t) {
                        for (var e = "", n = 0, r = t.length; n < r; n++) "text" === t[n].type && t[n].path && (e += ["@font-face {", "font-family: ", t[n].fontFamily, "; ", "src: url('", t[n].path, "')", "}"].join(""));
                        return e && (e = ['<style type="text/css">', "<![CDATA[", e, "]]>", "</style>"].join("")), e
                    },
                    createSVGRefElementsMarkup: function(t) {
                        var e = [];
                        return d(e, t, "backgroundColor"), d(e, t, "overlayColor"), e.join("")
                    }
                })
            }(exports), fabric.ElementsParser = function(t, e, n, r) {
            this.elements = t, this.callback = e, this.options = n, this.reviver = r, this.svgUid = n && n.svgUid || 0
        }, fabric.ElementsParser.prototype.parse = function() {
            this.instances = new Array(this.elements.length), this.numElements = this.elements.length, this.createObjects()
        }, fabric.ElementsParser.prototype.createObjects = function() {
            for (var t = 0, e = this.elements.length; t < e; t++) this.elements[t].setAttribute("svgUid", this.svgUid),
                function(t, e) {
                    setTimeout(function() {
                        t.createObject(t.elements[e], e)
                    }, 0)
                }(this, t)
        }, fabric.ElementsParser.prototype.createObject = function(t, e) {
            var n = fabric[fabric.util.string.capitalize(t.tagName)];
            if (n && n.fromElement) try {
                this._createObject(n, t, e)
            } catch (t) {
                fabric.log(t)
            } else this.checkIfDone()
        }, fabric.ElementsParser.prototype._createObject = function(t, e, n) {
            if (t.async) t.fromElement(e, this.createCallback(n, e), this.options);
            else {
                var r = t.fromElement(e, this.options);
                this.resolveGradient(r, "fill"), this.resolveGradient(r, "stroke"), this.reviver && this.reviver(e, r), this.instances[n] = r, this.checkIfDone()
            }
        }, fabric.ElementsParser.prototype.createCallback = function(t, e) {
            var n = this;
            return function(r) {
                n.resolveGradient(r, "fill"), n.resolveGradient(r, "stroke"), n.reviver && n.reviver(e, r), n.instances[t] = r, n.checkIfDone()
            }
        }, fabric.ElementsParser.prototype.resolveGradient = function(t, e) {
            var n = t.get(e);
            if (/^url\(/.test(n)) {
                var r = n.slice(5, n.length - 1);
                fabric.gradientDefs[this.svgUid][r] && t.set(e, fabric.Gradient.fromElement(fabric.gradientDefs[this.svgUid][r], t))
            }
        }, fabric.ElementsParser.prototype.checkIfDone = function() {
            0 === --this.numElements && (this.instances = this.instances.filter(function(t) {
                return null != t
            }), this.callback(this.instances))
        },
            function(t) {
                function e(t, e) {
                    this.x = t, this.y = e
                }
                var n = t.fabric || (t.fabric = {});
                return n.Point ? void n.warn("fabric.Point is already defined") : (n.Point = e, void(e.prototype = {
                    constructor: e,
                    add: function(t) {
                        return new e(this.x + t.x, this.y + t.y)
                    },
                    addEquals: function(t) {
                        return this.x += t.x, this.y += t.y, this
                    },
                    scalarAdd: function(t) {
                        return new e(this.x + t, this.y + t)
                    },
                    scalarAddEquals: function(t) {
                        return this.x += t, this.y += t, this
                    },
                    subtract: function(t) {
                        return new e(this.x - t.x, this.y - t.y)
                    },
                    subtractEquals: function(t) {
                        return this.x -= t.x, this.y -= t.y, this
                    },
                    scalarSubtract: function(t) {
                        return new e(this.x - t, this.y - t)
                    },
                    scalarSubtractEquals: function(t) {
                        return this.x -= t, this.y -= t, this
                    },
                    multiply: function(t) {
                        return new e(this.x * t, this.y * t)
                    },
                    multiplyEquals: function(t) {
                        return this.x *= t, this.y *= t, this
                    },
                    divide: function(t) {
                        return new e(this.x / t, this.y / t)
                    },
                    divideEquals: function(t) {
                        return this.x /= t, this.y /= t, this
                    },
                    eq: function(t) {
                        return this.x === t.x && this.y === t.y
                    },
                    lt: function(t) {
                        return this.x < t.x && this.y < t.y
                    },
                    lte: function(t) {
                        return this.x <= t.x && this.y <= t.y
                    },
                    gt: function(t) {
                        return this.x > t.x && this.y > t.y
                    },
                    gte: function(t) {
                        return this.x >= t.x && this.y >= t.y
                    },
                    lerp: function(t, n) {
                        return new e(this.x + (t.x - this.x) * n, this.y + (t.y - this.y) * n)
                    },
                    distanceFrom: function(t) {
                        var e = this.x - t.x,
                            n = this.y - t.y;
                        return Math.sqrt(e * e + n * n)
                    },
                    midPointFrom: function(t) {
                        return new e(this.x + (t.x - this.x) / 2, this.y + (t.y - this.y) / 2)
                    },
                    min: function(t) {
                        return new e(Math.min(this.x, t.x), Math.min(this.y, t.y))
                    },
                    max: function(t) {
                        return new e(Math.max(this.x, t.x), Math.max(this.y, t.y))
                    },
                    toString: function() {
                        return this.x + "," + this.y
                    },
                    setXY: function(t, e) {
                        this.x = t, this.y = e
                    },
                    setFromPoint: function(t) {
                        this.x = t.x, this.y = t.y
                    },
                    swap: function(t) {
                        var e = this.x,
                            n = this.y;
                        this.x = t.x, this.y = t.y, t.x = e, t.y = n
                    }
                }))
            }(exports),
            function(t) {
                function e(t) {
                    this.status = t, this.points = []
                }
                var n = t.fabric || (t.fabric = {});
                return n.Intersection ? void n.warn("fabric.Intersection is already defined") : (n.Intersection = e, n.Intersection.prototype = {
                    appendPoint: function(t) {
                        this.points.push(t)
                    },
                    appendPoints: function(t) {
                        this.points = this.points.concat(t)
                    }
                }, n.Intersection.intersectLineLine = function(t, r, i, o) {
                    var s, a = (o.x - i.x) * (t.y - i.y) - (o.y - i.y) * (t.x - i.x),
                        l = (r.x - t.x) * (t.y - i.y) - (r.y - t.y) * (t.x - i.x),
                        u = (o.y - i.y) * (r.x - t.x) - (o.x - i.x) * (r.y - t.y);
                    if (0 !== u) {
                        var c = a / u,
                            f = l / u;
                        0 <= c && c <= 1 && 0 <= f && f <= 1 ? (s = new e("Intersection"), s.points.push(new n.Point(t.x + c * (r.x - t.x), t.y + c * (r.y - t.y)))) : s = new e
                    } else s = new e(0 === a || 0 === l ? "Coincident" : "Parallel");
                    return s
                }, n.Intersection.intersectLinePolygon = function(t, n, r) {
                    for (var i = new e, o = r.length, s = 0; s < o; s++) {
                        var a = r[s],
                            l = r[(s + 1) % o],
                            u = e.intersectLineLine(t, n, a, l);
                        i.appendPoints(u.points)
                    }
                    return i.points.length > 0 && (i.status = "Intersection"), i
                }, n.Intersection.intersectPolygonPolygon = function(t, n) {
                    for (var r = new e, i = t.length, o = 0; o < i; o++) {
                        var s = t[o],
                            a = t[(o + 1) % i],
                            l = e.intersectLinePolygon(s, a, n);
                        r.appendPoints(l.points)
                    }
                    return r.points.length > 0 && (r.status = "Intersection"), r
                }, void(n.Intersection.intersectPolygonRectangle = function(t, r, i) {
                    var o = r.min(i),
                        s = r.max(i),
                        a = new n.Point(s.x, o.y),
                        l = new n.Point(o.x, s.y),
                        u = e.intersectLinePolygon(o, a, t),
                        c = e.intersectLinePolygon(a, s, t),
                        f = e.intersectLinePolygon(s, l, t),
                        h = e.intersectLinePolygon(l, o, t),
                        d = new e;
                    return d.appendPoints(u.points), d.appendPoints(c.points), d.appendPoints(f.points), d.appendPoints(h.points), d.points.length > 0 && (d.status = "Intersection"), d
                }))
            }(exports),
            function(t) {
                function e(t) {
                    t ? this._tryParsingColor(t) : this.setSource([0, 0, 0, 1])
                }

                function n(t, e, n) {
                    return n < 0 && (n += 1), n > 1 && (n -= 1), n < 1 / 6 ? t + 6 * (e - t) * n : n < .5 ? e : n < 2 / 3 ? t + (e - t) * (2 / 3 - n) * 6 : t
                }
                var r = t.fabric || (t.fabric = {});
                return r.Color ? void r.warn("fabric.Color is already defined.") : (r.Color = e, r.Color.prototype = {
                    _tryParsingColor: function(t) {
                        var n;
                        return t in e.colorNameMap && (t = e.colorNameMap[t]), "transparent" === t ? void this.setSource([255, 255, 255, 0]) : (n = e.sourceFromHex(t), n || (n = e.sourceFromRgb(t)), n || (n = e.sourceFromHsl(t)), void(n && this.setSource(n)))
                    },
                    _rgbToHsl: function(t, e, n) {
                        t /= 255, e /= 255, n /= 255;
                        var i, o, s, a = r.util.array.max([t, e, n]),
                            l = r.util.array.min([t, e, n]);
                        if (s = (a + l) / 2, a === l) i = o = 0;
                        else {
                            var u = a - l;
                            switch (o = s > .5 ? u / (2 - a - l) : u / (a + l), a) {
                                case t:
                                    i = (e - n) / u + (e < n ? 6 : 0);
                                    break;
                                case e:
                                    i = (n - t) / u + 2;
                                    break;
                                case n:
                                    i = (t - e) / u + 4
                            }
                            i /= 6
                        }
                        return [Math.round(360 * i), Math.round(100 * o), Math.round(100 * s)]
                    },
                    getSource: function() {
                        return this._source
                    },
                    setSource: function(t) {
                        this._source = t
                    },
                    toRgb: function() {
                        var t = this.getSource();
                        return "rgb(" + t[0] + "," + t[1] + "," + t[2] + ")"
                    },
                    toRgba: function() {
                        var t = this.getSource();
                        return "rgba(" + t[0] + "," + t[1] + "," + t[2] + "," + t[3] + ")"
                    },
                    toHsl: function() {
                        var t = this.getSource(),
                            e = this._rgbToHsl(t[0], t[1], t[2]);
                        return "hsl(" + e[0] + "," + e[1] + "%," + e[2] + "%)"
                    },
                    toHsla: function() {
                        var t = this.getSource(),
                            e = this._rgbToHsl(t[0], t[1], t[2]);
                        return "hsla(" + e[0] + "," + e[1] + "%," + e[2] + "%," + t[3] + ")"
                    },
                    toHex: function() {
                        var t, e, n, r = this.getSource();
                        return t = r[0].toString(16), t = 1 === t.length ? "0" + t : t, e = r[1].toString(16), e = 1 === e.length ? "0" + e : e, n = r[2].toString(16), n = 1 === n.length ? "0" + n : n, t.toUpperCase() + e.toUpperCase() + n.toUpperCase()
                    },
                    getAlpha: function() {
                        return this.getSource()[3]
                    },
                    setAlpha: function(t) {
                        var e = this.getSource();
                        return e[3] = t, this.setSource(e), this
                    },
                    toGrayscale: function() {
                        var t = this.getSource(),
                            e = parseInt((.3 * t[0] + .59 * t[1] + .11 * t[2]).toFixed(0), 10),
                            n = t[3];
                        return this.setSource([e, e, e, n]), this
                    },
                    toBlackWhite: function(t) {
                        var e = this.getSource(),
                            n = (.3 * e[0] + .59 * e[1] + .11 * e[2]).toFixed(0),
                            r = e[3];
                        return t = t || 127, n = Number(n) < Number(t) ? 0 : 255, this.setSource([n, n, n, r]), this
                    },
                    overlayWith: function(t) {
                        t instanceof e || (t = new e(t));
                        for (var n = [], r = this.getAlpha(), i = .5, o = this.getSource(), s = t.getSource(), a = 0; a < 3; a++) n.push(Math.round(o[a] * (1 - i) + s[a] * i));
                        return n[3] = r, this.setSource(n), this
                    }
                }, r.Color.reRGBa = /^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/, r.Color.reHSLa = /^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/, r.Color.reHex = /^#?([0-9a-f]{6}|[0-9a-f]{3})$/i, r.Color.colorNameMap = {
                    aqua: "#00FFFF",
                    black: "#000000",
                    blue: "#0000FF",
                    fuchsia: "#FF00FF",
                    gray: "#808080",
                    green: "#008000",
                    lime: "#00FF00",
                    maroon: "#800000",
                    navy: "#000080",
                    olive: "#808000",
                    orange: "#FFA500",
                    purple: "#800080",
                    red: "#FF0000",
                    silver: "#C0C0C0",
                    teal: "#008080",
                    white: "#FFFFFF",
                    yellow: "#FFFF00"
                }, r.Color.fromRgb = function(t) {
                    return e.fromSource(e.sourceFromRgb(t))
                }, r.Color.sourceFromRgb = function(t) {
                    var n = t.match(e.reRGBa);
                    if (n) {
                        var r = parseInt(n[1], 10) / (/%$/.test(n[1]) ? 100 : 1) * (/%$/.test(n[1]) ? 255 : 1),
                            i = parseInt(n[2], 10) / (/%$/.test(n[2]) ? 100 : 1) * (/%$/.test(n[2]) ? 255 : 1),
                            o = parseInt(n[3], 10) / (/%$/.test(n[3]) ? 100 : 1) * (/%$/.test(n[3]) ? 255 : 1);
                        return [parseInt(r, 10), parseInt(i, 10), parseInt(o, 10), n[4] ? parseFloat(n[4]) : 1]
                    }
                }, r.Color.fromRgba = e.fromRgb, r.Color.fromHsl = function(t) {
                    return e.fromSource(e.sourceFromHsl(t))
                }, r.Color.sourceFromHsl = function(t) {
                    var r = t.match(e.reHSLa);
                    if (r) {
                        var i, o, s, a = (parseFloat(r[1]) % 360 + 360) % 360 / 360,
                            l = parseFloat(r[2]) / (/%$/.test(r[2]) ? 100 : 1),
                            u = parseFloat(r[3]) / (/%$/.test(r[3]) ? 100 : 1);
                        if (0 === l) i = o = s = u;
                        else {
                            var c = u <= .5 ? u * (l + 1) : u + l - u * l,
                                f = 2 * u - c;
                            i = n(f, c, a + 1 / 3), o = n(f, c, a), s = n(f, c, a - 1 / 3)
                        }
                        return [Math.round(255 * i), Math.round(255 * o), Math.round(255 * s), r[4] ? parseFloat(r[4]) : 1]
                    }
                }, r.Color.fromHsla = e.fromHsl, r.Color.fromHex = function(t) {
                    return e.fromSource(e.sourceFromHex(t))
                }, r.Color.sourceFromHex = function(t) {
                    if (t.match(e.reHex)) {
                        var n = t.slice(t.indexOf("#") + 1),
                            r = 3 === n.length,
                            i = r ? n.charAt(0) + n.charAt(0) : n.substring(0, 2),
                            o = r ? n.charAt(1) + n.charAt(1) : n.substring(2, 4),
                            s = r ? n.charAt(2) + n.charAt(2) : n.substring(4, 6);
                        return [parseInt(i, 16), parseInt(o, 16), parseInt(s, 16), 1]
                    }
                }, void(r.Color.fromSource = function(t) {
                    var n = new e;
                    return n.setSource(t), n
                }))
            }(exports),
            function() {
                function t(t) {
                    var e, n, r, i = t.getAttribute("style"),
                        o = t.getAttribute("offset");
                    if (o = parseFloat(o) / (/%$/.test(o) ? 100 : 1), o = o < 0 ? 0 : o > 1 ? 1 : o, i) {
                        var s = i.split(/\s*;\s*/);
                        "" === s[s.length - 1] && s.pop();
                        for (var a = s.length; a--;) {
                            var l = s[a].split(/\s*:\s*/),
                                u = l[0].trim(),
                                c = l[1].trim();
                            "stop-color" === u ? e = c : "stop-opacity" === u && (r = c)
                        }
                    }
                    return e || (e = t.getAttribute("stop-color") || "rgb(0,0,0)"), r || (r = t.getAttribute("stop-opacity")), e = new fabric.Color(e), n = e.getAlpha(), r = isNaN(parseFloat(r)) ? 1 : parseFloat(r), r *= n, {
                        offset: o,
                        color: e.toRgb(),
                        opacity: r
                    }
                }

                function e(t) {
                    return {
                        x1: t.getAttribute("x1") || 0,
                        y1: t.getAttribute("y1") || 0,
                        x2: t.getAttribute("x2") || "100%",
                        y2: t.getAttribute("y2") || 0
                    }
                }

                function n(t) {
                    return {
                        x1: t.getAttribute("fx") || t.getAttribute("cx") || "50%",
                        y1: t.getAttribute("fy") || t.getAttribute("cy") || "50%",
                        r1: 0,
                        x2: t.getAttribute("cx") || "50%",
                        y2: t.getAttribute("cy") || "50%",
                        r2: t.getAttribute("r") || "50%"
                    }
                }

                function r(t, e, n) {
                    var r, i = 0,
                        o = 1,
                        s = "";
                    for (var a in e) r = parseFloat(e[a], 10), o = "string" == typeof e[a] && /^\d+%$/.test(e[a]) ? .01 : 1, "x1" === a || "x2" === a || "r2" === a ? (o *= "objectBoundingBox" === n ? t.width : 1, i = "objectBoundingBox" === n ? t.left || 0 : 0) : "y1" !== a && "y2" !== a || (o *= "objectBoundingBox" === n ? t.height : 1, i = "objectBoundingBox" === n ? t.top || 0 : 0), e[a] = r * o + i;
                    if ("ellipse" === t.type && null !== e.r2 && "objectBoundingBox" === n && t.rx !== t.ry) {
                        var l = t.ry / t.rx;
                        s = " scale(1, " + l + ")", e.y1 && (e.y1 /= l), e.y2 && (e.y2 /= l)
                    }
                    return s
                }
                fabric.Gradient = fabric.util.createClass({
                    offsetX: 0,
                    offsetY: 0,
                    initialize: function(t) {
                        t || (t = {});
                        var e = {};
                        this.id = fabric.Object.__uid++, this.type = t.type || "linear", e = {
                            x1: t.coords.x1 || 0,
                            y1: t.coords.y1 || 0,
                            x2: t.coords.x2 || 0,
                            y2: t.coords.y2 || 0
                        }, "radial" === this.type && (e.r1 = t.coords.r1 || 0, e.r2 = t.coords.r2 || 0), this.coords = e, this.colorStops = t.colorStops.slice(), t.gradientTransform && (this.gradientTransform = t.gradientTransform), this.offsetX = t.offsetX || this.offsetX, this.offsetY = t.offsetY || this.offsetY
                    },
                    addColorStop: function(t) {
                        for (var e in t) {
                            var n = new fabric.Color(t[e]);
                            this.colorStops.push({
                                offset: e,
                                color: n.toRgb(),
                                opacity: n.getAlpha()
                            })
                        }
                        return this
                    },
                    toObject: function() {
                        return {
                            type: this.type,
                            coords: this.coords,
                            colorStops: this.colorStops,
                            offsetX: this.offsetX,
                            offsetY: this.offsetY
                        }
                    },
                    toSVG: function(t) {
                        var e, n, r = fabric.util.object.clone(this.coords);
                        if (this.colorStops.sort(function(t, e) {
                                return t.offset - e.offset
                            }), !t.group || "path-group" !== t.group.type)
                            for (var i in r) "x1" === i || "x2" === i || "r2" === i ? r[i] += this.offsetX - t.width / 2 : "y1" !== i && "y2" !== i || (r[i] += this.offsetY - t.height / 2);
                        n = 'id="SVGID_' + this.id + '" gradientUnits="userSpaceOnUse"', this.gradientTransform && (n += ' gradientTransform="matrix(' + this.gradientTransform.join(" ") + ')" '), "linear" === this.type ? e = ["<linearGradient ", n, ' x1="', r.x1, '" y1="', r.y1, '" x2="', r.x2, '" y2="', r.y2, '">\n'] : "radial" === this.type && (e = ["<radialGradient ", n, ' cx="', r.x2, '" cy="', r.y2, '" r="', r.r2, '" fx="', r.x1, '" fy="', r.y1, '">\n']);
                        for (var o = 0; o < this.colorStops.length; o++) e.push("<stop ", 'offset="', 100 * this.colorStops[o].offset + "%", '" style="stop-color:', this.colorStops[o].color, null != this.colorStops[o].opacity ? ";stop-opacity: " + this.colorStops[o].opacity : ";", '"/>\n');
                        return e.push("linear" === this.type ? "</linearGradient>\n" : "</radialGradient>\n"), e.join("")
                    },
                    toLive: function(t, e) {
                        var n, r, i = fabric.util.object.clone(this.coords);
                        if (this.type) {
                            if (e.group && "path-group" === e.group.type)
                                for (r in i) "x1" === r || "x2" === r ? i[r] += -this.offsetX + e.width / 2 : "y1" !== r && "y2" !== r || (i[r] += -this.offsetY + e.height / 2);
                            if ("text" === e.type)
                                for (r in i) "x1" === r || "x2" === r ? i[r] -= e.width / 2 : "y1" !== r && "y2" !== r || (i[r] -= e.height / 2);
                            "linear" === this.type ? n = t.createLinearGradient(i.x1, i.y1, i.x2, i.y2) : "radial" === this.type && (n = t.createRadialGradient(i.x1, i.y1, i.r1, i.x2, i.y2, i.r2));
                            for (var o = 0, s = this.colorStops.length; o < s; o++) {
                                var a = this.colorStops[o].color,
                                    l = this.colorStops[o].opacity,
                                    u = this.colorStops[o].offset;
                                "undefined" != typeof l && (a = new fabric.Color(a).setAlpha(l).toRgba()), n.addColorStop(parseFloat(u), a)
                            }
                            return n
                        }
                    }
                }), fabric.util.object.extend(fabric.Gradient, {
                    fromElement: function(i, o) {
                        var s, a = i.getElementsByTagName("stop"),
                            l = "linearGradient" === i.nodeName ? "linear" : "radial",
                            u = i.getAttribute("gradientUnits") || "objectBoundingBox",
                            c = i.getAttribute("gradientTransform"),
                            f = [],
                            h = {};
                        "linear" === l ? h = e(i) : "radial" === l && (h = n(i));
                        for (var d = a.length; d--;) f.push(t(a[d]));
                        s = r(o, h, u);
                        var p = new fabric.Gradient({
                            type: l,
                            coords: h,
                            colorStops: f,
                            offsetX: -o.left,
                            offsetY: -o.top
                        });
                        return (c || "" !== s) && (p.gradientTransform = fabric.parseTransformAttribute((c || "") + s)), p
                    },
                    forObject: function(t, e) {
                        return e || (e = {}), r(t, e.coords, "userSpaceOnUse"), new fabric.Gradient(e)
                    }
                })
            }(), fabric.Pattern = fabric.util.createClass({
            repeat: "repeat",
            offsetX: 0,
            offsetY: 0,
            initialize: function(t) {
                if (t || (t = {}), this.id = fabric.Object.__uid++, t.source)
                    if ("string" == typeof t.source)
                        if ("undefined" != typeof fabric.util.getFunctionBody(t.source)) this.source = new Function(fabric.util.getFunctionBody(t.source));
                        else {
                            var e = this;
                            this.source = fabric.util.createImage(), fabric.util.loadImage(t.source, function(t) {
                                e.source = t
                            })
                        } else this.source = t.source;
                t.repeat && (this.repeat = t.repeat), t.offsetX && (this.offsetX = t.offsetX), t.offsetY && (this.offsetY = t.offsetY)
            },
            toObject: function() {
                var t;
                return "function" == typeof this.source ? t = String(this.source) : "string" == typeof this.source.src && (t = this.source.src), {
                    source: t,
                    repeat: this.repeat,
                    offsetX: this.offsetX,
                    offsetY: this.offsetY
                }
            },
            toSVG: function(t) {
                var e = "function" == typeof this.source ? this.source() : this.source,
                    n = e.width / t.getWidth(),
                    r = e.height / t.getHeight(),
                    i = this.offsetX / t.getWidth(),
                    o = this.offsetY / t.getHeight(),
                    s = "";
                return "repeat-x" !== this.repeat && "no-repeat" !== this.repeat || (r = 1), "repeat-y" !== this.repeat && "no-repeat" !== this.repeat || (n = 1), e.src ? s = e.src : e.toDataURL && (s = e.toDataURL()), '<pattern id="SVGID_' + this.id + '" x="' + i + '" y="' + o + '" width="' + n + '" height="' + r + '">\n<image x="0" y="0" width="' + e.width + '" height="' + e.height + '" xlink:href="' + s + '"></image>\n</pattern>\n'
            },
            toLive: function(t) {
                var e = "function" == typeof this.source ? this.source() : this.source;
                if (!e) return "";
                if ("undefined" != typeof e.src) {
                    if (!e.complete) return "";
                    if (0 === e.naturalWidth || 0 === e.naturalHeight) return ""
                }
                return t.createPattern(e, this.repeat)
            }
        }),
            function(t) {
                var e = t.fabric || (t.fabric = {}),
                    n = e.util.toFixed;
                return e.Shadow ? void e.warn("fabric.Shadow is already defined.") : (e.Shadow = e.util.createClass({
                    color: "rgb(0,0,0)",
                    blur: 0,
                    offsetX: 0,
                    offsetY: 0,
                    affectStroke: !1,
                    includeDefaultValues: !0,
                    initialize: function(t) {
                        "string" == typeof t && (t = this._parseShadow(t));
                        for (var n in t) this[n] = t[n];
                        this.id = e.Object.__uid++
                    },
                    _parseShadow: function(t) {
                        var n = t.trim(),
                            r = e.Shadow.reOffsetsAndBlur.exec(n) || [],
                            i = n.replace(e.Shadow.reOffsetsAndBlur, "") || "rgb(0,0,0)";
                        return {
                            color: i.trim(),
                            offsetX: parseInt(r[1], 10) || 0,
                            offsetY: parseInt(r[2], 10) || 0,
                            blur: parseInt(r[3], 10) || 0
                        }
                    },
                    toString: function() {
                        return [this.offsetX, this.offsetY, this.blur, this.color].join("px ")
                    },
                    toSVG: function(t) {
                        var e = "SourceAlpha",
                            r = 40,
                            i = 40;
                        return !t || t.fill !== this.color && t.stroke !== this.color || (e = "SourceGraphic"), t.width && t.height && (r = 100 * n(Math.abs(this.offsetX / t.getWidth()), 2) + 20, i = 100 * n(Math.abs(this.offsetY / t.getHeight()), 2) + 20), '<filter id="SVGID_' + this.id + '" y="-' + i + '%" height="' + (100 + 2 * i) + '%" x="-' + r + '%" width="' + (100 + 2 * r) + '%" >\n\t<feGaussianBlur in="' + e + '" stdDeviation="' + n(this.blur ? this.blur / 2 : 0, 3) + '" result="blurOut"></feGaussianBlur>\n\t<feColorMatrix result="matrixOut" in="blurOut" type="matrix" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0.30 0" /></feColorMatrix >\n\t<feOffset dx="' + this.offsetX + '" dy="' + this.offsetY + '"></feOffset>\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'
                    },
                    toObject: function() {
                        if (this.includeDefaultValues) return {
                            color: this.color,
                            blur: this.blur,
                            offsetX: this.offsetX,
                            offsetY: this.offsetY
                        };
                        var t = {},
                            n = e.Shadow.prototype;
                        return this.color !== n.color && (t.color = this.color), this.blur !== n.blur && (t.blur = this.blur), this.offsetX !== n.offsetX && (t.offsetX = this.offsetX), this.offsetY !== n.offsetY && (t.offsetY = this.offsetY), t
                    }
                }), void(e.Shadow.reOffsetsAndBlur = /(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/))
            }(exports),
            function() {
                if (fabric.StaticCanvas) return void fabric.warn("fabric.StaticCanvas is already defined.");
                var t = fabric.util.object.extend,
                    e = fabric.util.getElementOffset,
                    n = fabric.util.removeFromArray,
                    r = new Error("Could not initialize `canvas` element");
                fabric.StaticCanvas = fabric.util.createClass({
                    initialize: function(t, e) {
                        e || (e = {}), this._initStatic(t, e), fabric.StaticCanvas.activeInstance = this
                    },
                    backgroundColor: "",
                    backgroundImage: null,
                    overlayColor: "",
                    overlayImage: null,
                    includeDefaultValues: !0,
                    stateful: !0,
                    renderOnAddRemove: !0,
                    clipTo: null,
                    controlsAboveOverlay: !1,
                    allowTouchScrolling: !1,
                    imageSmoothingEnabled: !0,
                    preserveObjectStacking: !1,
                    viewportTransform: [1, 0, 0, 1, 0, 0],
                    onBeforeScaleRotate: function() {},
                    _initStatic: function(t, e) {
                        this._objects = [], this._createLowerCanvas(t), this._initOptions(e), this._setImageSmoothing(), e.overlayImage && this.setOverlayImage(e.overlayImage, this.renderAll.bind(this)), e.backgroundImage && this.setBackgroundImage(e.backgroundImage, this.renderAll.bind(this)), e.backgroundColor && this.setBackgroundColor(e.backgroundColor, this.renderAll.bind(this)), e.overlayColor && this.setOverlayColor(e.overlayColor, this.renderAll.bind(this)), this.calcOffset()
                    },
                    calcOffset: function() {
                        return this._offset = e(this.lowerCanvasEl), this
                    },
                    setOverlayImage: function(t, e, n) {
                        return this.__setBgOverlayImage("overlayImage", t, e, n)
                    },
                    setBackgroundImage: function(t, e, n) {
                        return this.__setBgOverlayImage("backgroundImage", t, e, n)
                    },
                    setOverlayColor: function(t, e) {
                        return this.__setBgOverlayColor("overlayColor", t, e)
                    },
                    setBackgroundColor: function(t, e) {
                        return this.__setBgOverlayColor("backgroundColor", t, e)
                    },
                    _setImageSmoothing: function() {
                        var t = this.getContext();
                        t.imageSmoothingEnabled = this.imageSmoothingEnabled, t.webkitImageSmoothingEnabled = this.imageSmoothingEnabled, t.mozImageSmoothingEnabled = this.imageSmoothingEnabled, t.msImageSmoothingEnabled = this.imageSmoothingEnabled, t.oImageSmoothingEnabled = this.imageSmoothingEnabled
                    },
                    __setBgOverlayImage: function(t, e, n, r) {
                        return "string" == typeof e ? fabric.util.loadImage(e, function(e) {
                            this[t] = new fabric.Image(e, r), n && n()
                        }, this, r && r.crossOrigin) : (this[t] = e, n && n()), this
                    },
                    __setBgOverlayColor: function(t, e, n) {
                        if (e && e.source) {
                            var r = this;
                            fabric.util.loadImage(e.source, function(i) {
                                r[t] = new fabric.Pattern({
                                    source: i,
                                    repeat: e.repeat,
                                    offsetX: e.offsetX,
                                    offsetY: e.offsetY
                                }), n && n()
                            })
                        } else this[t] = e, n && n();
                        return this
                    },
                    _createCanvasElement: function() {
                        var t = fabric.document.createElement("canvas");
                        if (t.style || (t.style = {}), !t) throw r;
                        return this._initCanvasElement(t), t
                    },
                    _initCanvasElement: function(t) {
                        if (fabric.util.createCanvasElement(t), "undefined" == typeof t.getContext) throw r
                    },
                    _initOptions: function(t) {
                        for (var e in t) this[e] = t[e];
                        this.width = this.width || parseInt(this.lowerCanvasEl.width, 10) || 0, this.height = this.height || parseInt(this.lowerCanvasEl.height, 10) || 0, this.lowerCanvasEl.style && (this.lowerCanvasEl.width = this.width, this.lowerCanvasEl.height = this.height, this.lowerCanvasEl.style.width = this.width + "px", this.lowerCanvasEl.style.height = this.height + "px", this.viewportTransform = this.viewportTransform.slice())
                    },
                    _createLowerCanvas: function(t) {
                        this.lowerCanvasEl = fabric.util.getById(t) || this._createCanvasElement(), this._initCanvasElement(this.lowerCanvasEl), fabric.util.addClass(this.lowerCanvasEl, "lower-canvas"), this.interactive && this._applyCanvasStyle(this.lowerCanvasEl), this.contextContainer = this.lowerCanvasEl.getContext("2d")
                    },
                    getWidth: function() {
                        return this.width
                    },
                    getHeight: function() {
                        return this.height
                    },
                    setWidth: function(t, e) {
                        return this.setDimensions({
                            width: t
                        }, e)
                    },
                    setHeight: function(t, e) {
                        return this.setDimensions({
                            height: t
                        }, e)
                    },
                    setDimensions: function(t, e) {
                        var n;
                        e = e || {};
                        for (var r in t) n = t[r], e.cssOnly || (this._setBackstoreDimension(r, t[r]), n += "px"), e.backstoreOnly || this._setCssDimension(r, n);
                        return e.cssOnly || this.renderAll(), this.calcOffset(), this
                    },
                    _setBackstoreDimension: function(t, e) {
                        return this.lowerCanvasEl[t] = e, this.upperCanvasEl && (this.upperCanvasEl[t] = e), this.cacheCanvasEl && (this.cacheCanvasEl[t] = e), this[t] = e, this
                    },
                    _setCssDimension: function(t, e) {
                        return this.lowerCanvasEl.style[t] = e, this.upperCanvasEl && (this.upperCanvasEl.style[t] = e), this.wrapperEl && (this.wrapperEl.style[t] = e), this
                    },
                    getZoom: function() {
                        return Math.sqrt(this.viewportTransform[0] * this.viewportTransform[3])
                    },
                    setViewportTransform: function(t) {
                        this.viewportTransform = t, this.renderAll();
                        for (var e = 0, n = this._objects.length; e < n; e++) this._objects[e].setCoords();
                        return this
                    },
                    zoomToPoint: function(t, e) {
                        var n = t;
                        t = fabric.util.transformPoint(t, fabric.util.invertTransform(this.viewportTransform)), this.viewportTransform[0] = e, this.viewportTransform[3] = e;
                        var r = fabric.util.transformPoint(t, this.viewportTransform);
                        this.viewportTransform[4] += n.x - r.x, this.viewportTransform[5] += n.y - r.y, this.renderAll();
                        for (var i = 0, o = this._objects.length; i < o; i++) this._objects[i].setCoords();
                        return this
                    },
                    setZoom: function(t) {
                        return this.zoomToPoint(new fabric.Point(0, 0), t), this
                    },
                    absolutePan: function(t) {
                        this.viewportTransform[4] = -t.x, this.viewportTransform[5] = -t.y, this.renderAll();
                        for (var e = 0, n = this._objects.length; e < n; e++) this._objects[e].setCoords();
                        return this
                    },
                    relativePan: function(t) {
                        return this.absolutePan(new fabric.Point(-t.x - this.viewportTransform[4], -t.y - this.viewportTransform[5]))
                    },
                    getElement: function() {
                        return this.lowerCanvasEl
                    },
                    getActiveObject: function() {
                        return null
                    },
                    getActiveGroup: function() {
                        return null
                    },
                    _draw: function(t, e) {
                        if (e) {
                            t.save();
                            var n = this.viewportTransform;
                            t.transform(n[0], n[1], n[2], n[3], n[4], n[5]), this._shouldRenderObject(e) && e.render(t), t.restore(), this.controlsAboveOverlay || e._renderControls(t)
                        }
                    },
                    _shouldRenderObject: function(t) {
                        return !!t && (t !== this.getActiveGroup() || !this.preserveObjectStacking)
                    },
                    _onObjectAdded: function(t) {
                        this.stateful && t.setupState(), t.canvas = this, t.setCoords(), this.fire("object:added", {
                            target: t
                        }), t.fire("added")
                    },
                    _onObjectRemoved: function(t) {
                        this.getActiveObject() === t && (this.fire("before:selection:cleared", {
                            target: t
                        }), this._discardActiveObject(), this.fire("selection:cleared")), this.fire("object:removed", {
                            target: t
                        }), t.fire("removed")
                    },
                    clearContext: function(t) {
                        return t.clearRect(0, 0, this.width, this.height), this
                    },
                    getContext: function() {
                        return this.contextContainer
                    },
                    clear: function() {
                        return this._objects.length = 0, this.discardActiveGroup && this.discardActiveGroup(), this.discardActiveObject && this.discardActiveObject(), this.clearContext(this.contextContainer), this.contextTop && this.clearContext(this.contextTop), this.fire("canvas:cleared"), this.renderAll(), this
                    },
                    renderAll: function(t) {
                        var e = this[t === !0 && this.interactive ? "contextTop" : "contextContainer"],
                            n = this.getActiveGroup();
                        return this.contextTop && this.selection && !this._groupSelector && this.clearContext(this.contextTop), t || this.clearContext(e), this.fire("before:render"), this.clipTo && fabric.util.clipContext(this, e), this._renderBackground(e), this._renderObjects(e, n), this._renderActiveGroup(e, n), this.clipTo && e.restore(), this._renderOverlay(e), this.controlsAboveOverlay && this.interactive && this.drawControls(e), this.fire("after:render"), this
                    },
                    _renderObjects: function(t, e) {
                        var n, r;
                        if (!e || this.preserveObjectStacking)
                            for (n = 0, r = this._objects.length; n < r; ++n) this._draw(t, this._objects[n]);
                        else
                            for (n = 0, r = this._objects.length; n < r; ++n) this._objects[n] && !e.contains(this._objects[n]) && this._draw(t, this._objects[n])
                    },
                    _renderActiveGroup: function(t, e) {
                        if (e) {
                            var n = [];
                            this.forEachObject(function(t) {
                                e.contains(t) && n.push(t)
                            }), e._set("objects", n), this._draw(t, e)
                        }
                    },
                    _renderBackground: function(t) {
                        this.backgroundColor && (t.fillStyle = this.backgroundColor.toLive ? this.backgroundColor.toLive(t) : this.backgroundColor, t.fillRect(this.backgroundColor.offsetX || 0, this.backgroundColor.offsetY || 0, this.width, this.height)), this.backgroundImage && this._draw(t, this.backgroundImage)
                    },
                    _renderOverlay: function(t) {
                        this.overlayColor && (t.fillStyle = this.overlayColor.toLive ? this.overlayColor.toLive(t) : this.overlayColor, t.fillRect(this.overlayColor.offsetX || 0, this.overlayColor.offsetY || 0, this.width, this.height)), this.overlayImage && this._draw(t, this.overlayImage)
                    },
                    renderTop: function() {
                        var t = this.contextTop || this.contextContainer;
                        this.clearContext(t), this.selection && this._groupSelector && this._drawSelection();
                        var e = this.getActiveGroup();
                        return e && e.render(t), this._renderOverlay(t), this.fire("after:render"), this
                    },
                    getCenter: function() {
                        return {
                            top: this.getHeight() / 2,
                            left: this.getWidth() / 2
                        }
                    },
                    centerObjectH: function(t) {
                        return this._centerObject(t, new fabric.Point(this.getCenter().left, t.getCenterPoint().y)), this.renderAll(), this
                    },
                    centerObjectV: function(t) {
                        return this._centerObject(t, new fabric.Point(t.getCenterPoint().x, this.getCenter().top)), this.renderAll(), this
                    },
                    centerObject: function(t) {
                        var e = this.getCenter();
                        return this._centerObject(t, new fabric.Point(e.left, e.top)), this.renderAll(), this
                    },
                    _centerObject: function(t, e) {
                        return t.setPositionByOrigin(e, "center", "center"), this
                    },
                    toDatalessJSON: function(t) {
                        return this.toDatalessObject(t)
                    },
                    toObject: function(t) {
                        return this._toObjectMethod("toObject", t)
                    },
                    toDatalessObject: function(t) {
                        return this._toObjectMethod("toDatalessObject", t)
                    },
                    _toObjectMethod: function(e, n) {
                        var r = this.getActiveGroup();
                        r && this.discardActiveGroup();
                        var i = {
                            objects: this._toObjects(e, n)
                        };
                        return t(i, this.__serializeBgOverlay()), fabric.util.populateWithProperties(this, i, n), r && (this.setActiveGroup(new fabric.Group(r.getObjects(), {
                            originX: "center",
                            originY: "center"
                        })), r.forEachObject(function(t) {
                            t.set("active", !0)
                        }), this._currentTransform && (this._currentTransform.target = this.getActiveGroup())), i
                    },
                    _toObjects: function(t, e) {
                        return this.getObjects().map(function(n) {
                            return this._toObject(n, t, e)
                        }, this)
                    },
                    _toObject: function(t, e, n) {
                        var r;
                        this.includeDefaultValues || (r = t.includeDefaultValues, t.includeDefaultValues = !1);
                        var i = t[e](n);
                        return this.includeDefaultValues || (t.includeDefaultValues = r), i
                    },
                    __serializeBgOverlay: function() {
                        var t = {
                            background: this.backgroundColor && this.backgroundColor.toObject ? this.backgroundColor.toObject() : this.backgroundColor
                        };
                        return this.overlayColor && (t.overlay = this.overlayColor.toObject ? this.overlayColor.toObject() : this.overlayColor), this.backgroundImage && (t.backgroundImage = this.backgroundImage.toObject()), this.overlayImage && (t.overlayImage = this.overlayImage.toObject()), t
                    },
                    svgViewportTransformation: !0,
                    toSVG: function(t, e) {
                        t || (t = {});
                        var n = [];
                        return this._setSVGPreamble(n, t), this._setSVGHeader(n, t), this._setSVGBgOverlayColor(n, "backgroundColor"), this._setSVGBgOverlayImage(n, "backgroundImage"), this._setSVGObjects(n, e), this._setSVGBgOverlayColor(n, "overlayColor"), this._setSVGBgOverlayImage(n, "overlayImage"), n.push("</svg>"), n.join("")
                    },
                    _setSVGPreamble: function(t, e) {
                        e.suppressPreamble || t.push('<?xml version="1.0" encoding="', e.encoding || "UTF-8", '" standalone="no" ?>', '<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ', '"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')
                    },
                    _setSVGHeader: function(t, e) {
                        var n, r, i;
                        e.viewBox ? (n = e.viewBox.width, r = e.viewBox.height) : (n = this.width, r = this.height, this.svgViewportTransformation || (i = this.viewportTransform, n /= i[0], r /= i[3])), t.push("<svg ", 'xmlns="http://www.w3.org/2000/svg" ', 'xmlns:xlink="http://www.w3.org/1999/xlink" ', 'version="1.1" ', 'width="', n, '" ', 'height="', r, '" ', this.backgroundColor && !this.backgroundColor.toLive ? 'style="background-color: ' + this.backgroundColor + '" ' : null, e.viewBox ? 'viewBox="' + e.viewBox.x + " " + e.viewBox.y + " " + e.viewBox.width + " " + e.viewBox.height + '" ' : null, 'xml:space="preserve">', "<desc>Created with Fabric.js ", fabric.version, "</desc>", "<defs>", fabric.createSVGFontFacesMarkup(this.getObjects()), fabric.createSVGRefElementsMarkup(this), "</defs>")
                    },
                    _setSVGObjects: function(t, e) {
                        var n = this.getActiveGroup();
                        n && this.discardActiveGroup();
                        for (var r = 0, i = this.getObjects(), o = i.length; r < o; r++) t.push(i[r].toSVG(e));
                        n && (this.setActiveGroup(new fabric.Group(n.getObjects())), n.forEachObject(function(t) {
                            t.set("active", !0)
                        }))
                    },
                    _setSVGBgOverlayImage: function(t, e) {
                        this[e] && this[e].toSVG && t.push(this[e].toSVG())
                    },
                    _setSVGBgOverlayColor: function(t, e) {
                        this[e] && this[e].source ? t.push('<rect x="', this[e].offsetX, '" y="', this[e].offsetY, '" ', 'width="', "repeat-y" === this[e].repeat || "no-repeat" === this[e].repeat ? this[e].source.width : this.width, '" height="', "repeat-x" === this[e].repeat || "no-repeat" === this[e].repeat ? this[e].source.height : this.height, '" fill="url(#' + e + 'Pattern)"', "></rect>") : this[e] && "overlayColor" === e && t.push('<rect x="0" y="0" ', 'width="', this.width, '" height="', this.height, '" fill="', this[e], '"', "></rect>")
                    },
                    sendToBack: function(t) {
                        return n(this._objects, t), this._objects.unshift(t), this.renderAll && this.renderAll()
                    },
                    bringToFront: function(t) {
                        return n(this._objects, t), this._objects.push(t), this.renderAll && this.renderAll()
                    },
                    sendBackwards: function(t, e) {
                        var r = this._objects.indexOf(t);
                        if (0 !== r) {
                            var i = this._findNewLowerIndex(t, r, e);
                            n(this._objects, t), this._objects.splice(i, 0, t), this.renderAll && this.renderAll()
                        }
                        return this
                    },
                    _findNewLowerIndex: function(t, e, n) {
                        var r;
                        if (n) {
                            r = e;
                            for (var i = e - 1; i >= 0; --i) {
                                var o = t.intersectsWithObject(this._objects[i]) || t.isContainedWithinObject(this._objects[i]) || this._objects[i].isContainedWithinObject(t);
                                if (o) {
                                    r = i;
                                    break
                                }
                            }
                        } else r = e - 1;
                        return r
                    },
                    bringForward: function(t, e) {
                        var r = this._objects.indexOf(t);
                        if (r !== this._objects.length - 1) {
                            var i = this._findNewUpperIndex(t, r, e);
                            n(this._objects, t), this._objects.splice(i, 0, t), this.renderAll && this.renderAll()
                        }
                        return this
                    },
                    _findNewUpperIndex: function(t, e, n) {
                        var r;
                        if (n) {
                            r = e;
                            for (var i = e + 1; i < this._objects.length; ++i) {
                                var o = t.intersectsWithObject(this._objects[i]) || t.isContainedWithinObject(this._objects[i]) || this._objects[i].isContainedWithinObject(t);
                                if (o) {
                                    r = i;
                                    break
                                }
                            }
                        } else r = e + 1;
                        return r
                    },
                    moveTo: function(t, e) {
                        return n(this._objects, t), this._objects.splice(e, 0, t), this.renderAll && this.renderAll()
                    },
                    dispose: function() {
                        return this.clear(), this.interactive && this.removeListeners(), this
                    },
                    toString: function() {
                        return "#<fabric.Canvas (" + this.complexity() + "): { objects: " + this.getObjects().length + " }>"
                    }
                }), t(fabric.StaticCanvas.prototype, fabric.Observable), t(fabric.StaticCanvas.prototype, fabric.Collection), t(fabric.StaticCanvas.prototype, fabric.DataURLExporter), t(fabric.StaticCanvas, {
                    EMPTY_JSON: '{"objects": [], "background": "white"}',
                    supports: function(t) {
                        var e = fabric.util.createCanvasElement();
                        if (!e || !e.getContext) return null;
                        var n = e.getContext("2d");
                        if (!n) return null;
                        switch (t) {
                            case "getImageData":
                                return "undefined" != typeof n.getImageData;
                            case "setLineDash":
                                return "undefined" != typeof n.setLineDash;
                            case "toDataURL":
                                return "undefined" != typeof e.toDataURL;
                            case "toDataURLWithQuality":
                                try {
                                    return e.toDataURL("image/jpeg", 0), !0
                                } catch (t) {}
                                return !1;
                            default:
                                return null
                        }
                    }
                }), fabric.StaticCanvas.prototype.toJSON = fabric.StaticCanvas.prototype.toObject
            }(), fabric.BaseBrush = fabric.util.createClass({
            color: "rgb(0, 0, 0)",
            width: 1,
            shadow: null,
            strokeLineCap: "round",
            strokeLineJoin: "round",
            strokeDashArray: null,
            setShadow: function(t) {
                return this.shadow = new fabric.Shadow(t), this
            },
            _setBrushStyles: function() {
                var t = this.canvas.contextTop;
                t.strokeStyle = this.color, t.lineWidth = this.width, t.lineCap = this.strokeLineCap, t.lineJoin = this.strokeLineJoin, t.setLineDash(this.strokeDashArray)
            },
            _setShadow: function() {
                if (this.shadow) {
                    var t = this.canvas.contextTop;
                    t.shadowColor = this.shadow.color, t.shadowBlur = this.shadow.blur, t.shadowOffsetX = this.shadow.offsetX, t.shadowOffsetY = this.shadow.offsetY
                }
            },
            _resetShadow: function() {
                var t = this.canvas.contextTop;
                t.shadowColor = "", t.shadowBlur = t.shadowOffsetX = t.shadowOffsetY = 0
            }
        }),
            function() {
                fabric.PencilBrush = fabric.util.createClass(fabric.BaseBrush, {
                    initialize: function(t) {
                        this.canvas = t, this._points = []
                    },
                    onMouseDown: function(t) {
                        this._prepareForDrawing(t), this._captureDrawingPath(t), this._render()
                    },
                    onMouseMove: function(t) {
                        this._captureDrawingPath(t), this.canvas.clearContext(this.canvas.contextTop), this._render()
                    },
                    onMouseUp: function() {
                        this._finalizeAndAddPath()
                    },
                    _prepareForDrawing: function(t) {
                        var e = new fabric.Point(t.x, t.y);
                        this._reset(), this._addPoint(e), this.canvas.contextTop.moveTo(e.x, e.y)
                    },
                    _addPoint: function(t) {
                        this._points.push(t)
                    },
                    _reset: function() {
                        this._points.length = 0, this._setBrushStyles(), this._setShadow()
                    },
                    _captureDrawingPath: function(t) {
                        var e = new fabric.Point(t.x, t.y);
                        this._addPoint(e)
                    },
                    _render: function() {
                        var t = this.canvas.contextTop,
                            e = this.canvas.viewportTransform,
                            n = this._points[0],
                            r = this._points[1];
                        t.save(), t.transform(e[0], e[1], e[2], e[3], e[4], e[5]), t.beginPath(), 2 === this._points.length && n.x === r.x && n.y === r.y && (n.x -= .5, r.x += .5), t.moveTo(n.x, n.y);
                        for (var i = 1, o = this._points.length; i < o; i++) {
                            var s = n.midPointFrom(r);
                            t.quadraticCurveTo(n.x, n.y, s.x, s.y), n = this._points[i], r = this._points[i + 1]
                        }
                        t.lineTo(n.x, n.y), t.stroke(), t.restore()
                    },
                    convertPointsToSVGPath: function(t) {
                        var e = [],
                            n = new fabric.Point(t[0].x, t[0].y),
                            r = new fabric.Point(t[1].x, t[1].y);
                        e.push("M ", t[0].x, " ", t[0].y, " ");
                        for (var i = 1, o = t.length; i < o; i++) {
                            var s = n.midPointFrom(r);
                            e.push("Q ", n.x, " ", n.y, " ", s.x, " ", s.y, " "), n = new fabric.Point(t[i].x, t[i].y), i + 1 < t.length && (r = new fabric.Point(t[i + 1].x, t[i + 1].y))
                        }
                        return e.push("L ", n.x, " ", n.y, " "), e
                    },
                    createPath: function(t) {
                        var e = new fabric.Path(t, {
                            fill: null,
                            stroke: this.color,
                            strokeWidth: this.width,
                            strokeLineCap: this.strokeLineCap,
                            strokeLineJoin: this.strokeLineJoin,
                            strokeDashArray: this.strokeDashArray,
                            originX: "center",
                            originY: "center"
                        });
                        return this.shadow && (this.shadow.affectStroke = !0, e.setShadow(this.shadow)), e
                    },
                    _finalizeAndAddPath: function() {
                        var t = this.canvas.contextTop;
                        t.closePath();
                        var e = this.convertPointsToSVGPath(this._points).join("");
                        if ("M 0 0 Q 0 0 0 0 L 0 0" === e) return void this.canvas.renderAll();
                        var n = this.createPath(e);
                        this.canvas.add(n), n.setCoords(), this.canvas.clearContext(this.canvas.contextTop), this._resetShadow(), this.canvas.renderAll(), this.canvas.fire("path:created", {
                            path: n
                        })
                    }
                })
            }(), fabric.CircleBrush = fabric.util.createClass(fabric.BaseBrush, {
            width: 10,
            initialize: function(t) {
                this.canvas = t, this.points = []
            },
            drawDot: function(t) {
                var e = this.addPoint(t),
                    n = this.canvas.contextTop,
                    r = this.canvas.viewportTransform;
                n.save(), n.transform(r[0], r[1], r[2], r[3], r[4], r[5]), n.fillStyle = e.fill, n.beginPath(), n.arc(e.x, e.y, e.radius, 0, 2 * Math.PI, !1), n.closePath(), n.fill(), n.restore()
            },
            onMouseDown: function(t) {
                this.points.length = 0, this.canvas.clearContext(this.canvas.contextTop), this._setShadow(), this.drawDot(t)
            },
            onMouseMove: function(t) {
                this.drawDot(t)
            },
            onMouseUp: function() {
                var t = this.canvas.renderOnAddRemove;
                this.canvas.renderOnAddRemove = !1;
                for (var e = [], n = 0, r = this.points.length; n < r; n++) {
                    var i = this.points[n],
                        o = new fabric.Circle({
                            radius: i.radius,
                            left: i.x,
                            top: i.y,
                            originX: "center",
                            originY: "center",
                            fill: i.fill
                        });
                    this.shadow && o.setShadow(this.shadow), e.push(o)
                }
                var s = new fabric.Group(e, {
                    originX: "center",
                    originY: "center"
                });
                s.canvas = this.canvas, this.canvas.add(s), this.canvas.fire("path:created", {
                    path: s
                }), this.canvas.clearContext(this.canvas.contextTop), this._resetShadow(), this.canvas.renderOnAddRemove = t, this.canvas.renderAll()
            },
            addPoint: function(t) {
                var e = new fabric.Point(t.x, t.y),
                    n = fabric.util.getRandomInt(Math.max(0, this.width - 20), this.width + 20) / 2,
                    r = new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0, 100) / 100).toRgba();
                return e.radius = n, e.fill = r, this.points.push(e), e
            }
        }), fabric.SprayBrush = fabric.util.createClass(fabric.BaseBrush, {
            width: 10,
            density: 20,
            dotWidth: 1,
            dotWidthVariance: 1,
            randomOpacity: !1,
            optimizeOverlapping: !0,
            initialize: function(t) {
                this.canvas = t, this.sprayChunks = []
            },
            onMouseDown: function(t) {
                this.sprayChunks.length = 0, this.canvas.clearContext(this.canvas.contextTop), this._setShadow(), this.addSprayChunk(t), this.render()
            },
            onMouseMove: function(t) {
                this.addSprayChunk(t), this.render()
            },
            onMouseUp: function() {
                var t = this.canvas.renderOnAddRemove;
                this.canvas.renderOnAddRemove = !1;
                for (var e = [], n = 0, r = this.sprayChunks.length; n < r; n++)
                    for (var i = this.sprayChunks[n], o = 0, s = i.length; o < s; o++) {
                        var a = new fabric.Rect({
                            width: i[o].width,
                            height: i[o].width,
                            left: i[o].x + 1,
                            top: i[o].y + 1,
                            originX: "center",
                            originY: "center",
                            fill: this.color
                        });
                        this.shadow && a.setShadow(this.shadow), e.push(a)
                    }
                this.optimizeOverlapping && (e = this._getOptimizedRects(e));
                var l = new fabric.Group(e, {
                    originX: "center",
                    originY: "center"
                });
                l.canvas = this.canvas, this.canvas.add(l), this.canvas.fire("path:created", {
                    path: l
                }), this.canvas.clearContext(this.canvas.contextTop), this._resetShadow(), this.canvas.renderOnAddRemove = t, this.canvas.renderAll()
            },
            _getOptimizedRects: function(t) {
                for (var e, n = {}, r = 0, i = t.length; r < i; r++) e = t[r].left + "" + t[r].top, n[e] || (n[e] = t[r]);
                var o = [];
                for (e in n) o.push(n[e]);
                return o
            },
            render: function() {
                var t = this.canvas.contextTop;
                t.fillStyle = this.color;
                var e = this.canvas.viewportTransform;
                t.save(), t.transform(e[0], e[1], e[2], e[3], e[4], e[5]);
                for (var n = 0, r = this.sprayChunkPoints.length; n < r; n++) {
                    var i = this.sprayChunkPoints[n];
                    "undefined" != typeof i.opacity && (t.globalAlpha = i.opacity), t.fillRect(i.x, i.y, i.width, i.width)
                }
                t.restore()
            },
            addSprayChunk: function(t) {
                this.sprayChunkPoints = [];
                for (var e, n, r, i = this.width / 2, o = 0; o < this.density; o++) {
                    e = fabric.util.getRandomInt(t.x - i, t.x + i), n = fabric.util.getRandomInt(t.y - i, t.y + i), r = this.dotWidthVariance ? fabric.util.getRandomInt(Math.max(1, this.dotWidth - this.dotWidthVariance), this.dotWidth + this.dotWidthVariance) : this.dotWidth;
                    var s = new fabric.Point(e, n);
                    s.width = r, this.randomOpacity && (s.opacity = fabric.util.getRandomInt(0, 100) / 100), this.sprayChunkPoints.push(s)
                }
                this.sprayChunks.push(this.sprayChunkPoints)
            }
        }), fabric.PatternBrush = fabric.util.createClass(fabric.PencilBrush, {
            getPatternSrc: function() {
                var t = 20,
                    e = 5,
                    n = fabric.document.createElement("canvas"),
                    r = n.getContext("2d");
                return n.width = n.height = t + e, r.fillStyle = this.color, r.beginPath(), r.arc(t / 2, t / 2, t / 2, 0, 2 * Math.PI, !1), r.closePath(), r.fill(), n
            },
            getPatternSrcFunction: function() {
                return String(this.getPatternSrc).replace("this.color", '"' + this.color + '"')
            },
            getPattern: function() {
                return this.canvas.contextTop.createPattern(this.source || this.getPatternSrc(), "repeat")
            },
            _setBrushStyles: function() {
                this.callSuper("_setBrushStyles"), this.canvas.contextTop.strokeStyle = this.getPattern()
            },
            createPath: function(t) {
                var e = this.callSuper("createPath", t);
                return e.stroke = new fabric.Pattern({
                    source: this.source || this.getPatternSrcFunction()
                }), e
            }
        }),
            function() {
                var t = fabric.util.getPointer,
                    e = fabric.util.degreesToRadians,
                    n = fabric.util.radiansToDegrees,
                    r = Math.atan2,
                    i = Math.abs,
                    o = .5;
                fabric.Canvas = fabric.util.createClass(fabric.StaticCanvas, {
                    initialize: function(t, e) {
                        e || (e = {}), this._initStatic(t, e), this._initInteractive(), this._createCacheCanvas(), fabric.Canvas.activeInstance = this
                    },
                    uniScaleTransform: !1,
                    centeredScaling: !1,
                    centeredRotation: !1,
                    interactive: !0,
                    selection: !0,
                    selectionColor: "rgba(100, 100, 255, 0.3)",
                    selectionDashArray: [],
                    selectionBorderColor: "rgba(255, 255, 255, 0.3)",
                    selectionLineWidth: 1,
                    hoverCursor: "move",
                    moveCursor: "move",
                    defaultCursor: "default",
                    freeDrawingCursor: "crosshair",
                    rotationCursor: "crosshair",
                    containerClass: "canvas-container",
                    perPixelTargetFind: !1,
                    targetFindTolerance: 0,
                    skipTargetFind: !1,
                    _initInteractive: function() {
                        this._currentTransform = null, this._groupSelector = null, this._initWrapperElement(), this._createUpperCanvas(), this._initEventListeners(), this.freeDrawingBrush = fabric.PencilBrush && new fabric.PencilBrush(this), this.calcOffset()
                    },
                    _resetCurrentTransform: function(t) {
                        var e = this._currentTransform;
                        e.target.set({
                            scaleX: e.original.scaleX,
                            scaleY: e.original.scaleY,
                            left: e.original.left,
                            top: e.original.top
                        }), this._shouldCenterTransform(t, e.target) ? "rotate" === e.action ? this._setOriginToCenter(e.target) : ("center" !== e.originX && ("right" === e.originX ? e.mouseXSign = -1 : e.mouseXSign = 1), "center" !== e.originY && ("bottom" === e.originY ? e.mouseYSign = -1 : e.mouseYSign = 1), e.originX = "center", e.originY = "center") : (e.originX = e.original.originX, e.originY = e.original.originY)
                    },
                    containsPoint: function(t, e) {
                        var n = this.getPointer(t, !0),
                            r = this._normalizePointer(e, n);
                        return e.containsPoint(r) || e._findTargetCorner(n)
                    },
                    _normalizePointer: function(t, e) {
                        var n, r = this.getActiveGroup(),
                            i = e.x,
                            o = e.y,
                            s = r && "group" !== t.type && r.contains(t);
                        return s && (n = new fabric.Point(r.left, r.top), n = fabric.util.transformPoint(n, this.viewportTransform, !0), i -= n.x, o -= n.y), {
                            x: i,
                            y: o
                        }
                    },
                    isTargetTransparent: function(t, e, n) {
                        var r = t.hasBorders,
                            i = t.transparentCorners;
                        t.hasBorders = t.transparentCorners = !1, this._draw(this.contextCache, t), t.hasBorders = r, t.transparentCorners = i;
                        var o = fabric.util.isTransparent(this.contextCache, e, n, this.targetFindTolerance);
                        return this.clearContext(this.contextCache), o
                    },
                    _shouldClearSelection: function(t, e) {
                        var n = this.getActiveGroup(),
                            r = this.getActiveObject();
                        return !e || e && n && !n.contains(e) && n !== e && !t.shiftKey || e && !e.evented || e && !e.selectable && r && r !== e
                    },
                    _shouldCenterTransform: function(t, e) {
                        if (e) {
                            var n, r = this._currentTransform;
                            return "scale" === r.action || "scaleX" === r.action || "scaleY" === r.action ? n = this.centeredScaling || e.centeredScaling : "rotate" === r.action && (n = this.centeredRotation || e.centeredRotation), n ? !t.altKey : t.altKey
                        }
                    },
                    _getOriginFromCorner: function(t, e) {
                        var n = {
                            x: t.originX,
                            y: t.originY
                        };
                        return "ml" === e || "tl" === e || "bl" === e ? n.x = "right" : "mr" !== e && "tr" !== e && "br" !== e || (n.x = "left"), "tl" === e || "mt" === e || "tr" === e ? n.y = "bottom" : "bl" !== e && "mb" !== e && "br" !== e || (n.y = "top"), n
                    },
                    _getActionFromCorner: function(t, e) {
                        var n = "drag";
                        return e && (n = "ml" === e || "mr" === e ? "scaleX" : "mt" === e || "mb" === e ? "scaleY" : "mtr" === e ? "rotate" : "scale"), n
                    },
                    _setupCurrentTransform: function(t, n) {
                        if (n) {
                            var r = this.getPointer(t),
                                i = n._findTargetCorner(this.getPointer(t, !0)),
                                o = this._getActionFromCorner(n, i),
                                s = this._getOriginFromCorner(n, i);
                            this._currentTransform = {
                                target: n,
                                action: o,
                                scaleX: n.scaleX,
                                scaleY: n.scaleY,
                                offsetX: r.x - n.left,
                                offsetY: r.y - n.top,
                                originX: s.x,
                                originY: s.y,
                                ex: r.x,
                                ey: r.y,
                                left: n.left,
                                top: n.top,
                                theta: e(n.angle),
                                width: n.width * n.scaleX,
                                mouseXSign: 1,
                                mouseYSign: 1
                            }, this._currentTransform.original = {
                                left: n.left,
                                top: n.top,
                                scaleX: n.scaleX,
                                scaleY: n.scaleY,
                                originX: s.x,
                                originY: s.y
                            }, this._resetCurrentTransform(t)
                        }
                    },
                    _translateObject: function(t, e) {
                        var n = this._currentTransform.target;
                        n.get("lockMovementX") || n.set("left", t - this._currentTransform.offsetX), n.get("lockMovementY") || n.set("top", e - this._currentTransform.offsetY)
                    },
                    _scaleObject: function(t, e, n) {
                        var r = this._currentTransform,
                            i = r.target,
                            o = i.get("lockScalingX"),
                            s = i.get("lockScalingY"),
                            a = i.get("lockScalingFlip");
                        if (!o || !s) {
                            var l = i.translateToOriginPoint(i.getCenterPoint(), r.originX, r.originY),
                                u = i.toLocalPoint(new fabric.Point(t, e), r.originX, r.originY);
                            this._setLocalMouse(u, r),
                                this._setObjectScale(u, r, o, s, n, a), i.setPositionByOrigin(l, r.originX, r.originY)
                        }
                    },
                    _setObjectScale: function(t, e, n, r, i, o) {
                        var s = e.target,
                            a = !1,
                            l = !1,
                            u = s.stroke ? s.strokeWidth : 0;
                        e.newScaleX = t.x / (s.width + u / 2), e.newScaleY = t.y / (s.height + u / 2), o && e.newScaleX <= 0 && e.newScaleX < s.scaleX && (a = !0), o && e.newScaleY <= 0 && e.newScaleY < s.scaleY && (l = !0), "equally" !== i || n || r ? i ? "x" !== i || s.get("lockUniScaling") ? "y" !== i || s.get("lockUniScaling") || l || r || s.set("scaleY", e.newScaleY) : a || n || s.set("scaleX", e.newScaleX) : (a || n || s.set("scaleX", e.newScaleX), l || r || s.set("scaleY", e.newScaleY)) : a || l || this._scaleObjectEqually(t, s, e), a || l || this._flipObject(e, i)
                    },
                    _scaleObjectEqually: function(t, e, n) {
                        var r = t.y + t.x,
                            i = e.stroke ? e.strokeWidth : 0,
                            o = (e.height + i / 2) * n.original.scaleY + (e.width + i / 2) * n.original.scaleX;
                        n.newScaleX = n.original.scaleX * r / o, n.newScaleY = n.original.scaleY * r / o, e.set("scaleX", n.newScaleX), e.set("scaleY", n.newScaleY)
                    },
                    _flipObject: function(t, e) {
                        t.newScaleX < 0 && "y" !== e && ("left" === t.originX ? t.originX = "right" : "right" === t.originX && (t.originX = "left")), t.newScaleY < 0 && "x" !== e && ("top" === t.originY ? t.originY = "bottom" : "bottom" === t.originY && (t.originY = "top"))
                    },
                    _setLocalMouse: function(t, e) {
                        var n = e.target;
                        "right" === e.originX ? t.x *= -1 : "center" === e.originX && (t.x *= 2 * e.mouseXSign, t.x < 0 && (e.mouseXSign = -e.mouseXSign)), "bottom" === e.originY ? t.y *= -1 : "center" === e.originY && (t.y *= 2 * e.mouseYSign, t.y < 0 && (e.mouseYSign = -e.mouseYSign)), i(t.x) > n.padding ? t.x < 0 ? t.x += n.padding : t.x -= n.padding : t.x = 0, i(t.y) > n.padding ? t.y < 0 ? t.y += n.padding : t.y -= n.padding : t.y = 0
                    },
                    _rotateObject: function(t, e) {
                        var i = this._currentTransform;
                        if (!i.target.get("lockRotation")) {
                            var o = r(i.ey - i.top, i.ex - i.left),
                                s = r(e - i.top, t - i.left),
                                a = n(s - o + i.theta);
                            a < 0 && (a = 360 + a), i.target.angle = a % 360
                        }
                    },
                    setCursor: function(t) {
                        this.upperCanvasEl.style.cursor = t
                    },
                    _resetObjectTransform: function(t) {
                        t.scaleX = 1, t.scaleY = 1, t.setAngle(0)
                    },
                    _drawSelection: function() {
                        var t = this.contextTop,
                            e = this._groupSelector,
                            n = e.left,
                            r = e.top,
                            s = i(n),
                            a = i(r);
                        if (t.fillStyle = this.selectionColor, t.fillRect(e.ex - (n > 0 ? 0 : -n), e.ey - (r > 0 ? 0 : -r), s, a), t.lineWidth = this.selectionLineWidth, t.strokeStyle = this.selectionBorderColor, this.selectionDashArray.length > 1) {
                            var l = e.ex + o - (n > 0 ? 0 : s),
                                u = e.ey + o - (r > 0 ? 0 : a);
                            t.beginPath(), fabric.util.drawDashedLine(t, l, u, l + s, u, this.selectionDashArray), fabric.util.drawDashedLine(t, l, u + a - 1, l + s, u + a - 1, this.selectionDashArray), fabric.util.drawDashedLine(t, l, u, l, u + a, this.selectionDashArray), fabric.util.drawDashedLine(t, l + s - 1, u, l + s - 1, u + a, this.selectionDashArray), t.closePath(), t.stroke()
                        } else t.strokeRect(e.ex + o - (n > 0 ? 0 : s), e.ey + o - (r > 0 ? 0 : a), s, a)
                    },
                    _isLastRenderedObject: function(t) {
                        return this.controlsAboveOverlay && this.lastRenderedObjectWithControlsAboveOverlay && this.lastRenderedObjectWithControlsAboveOverlay.visible && this.containsPoint(t, this.lastRenderedObjectWithControlsAboveOverlay) && this.lastRenderedObjectWithControlsAboveOverlay._findTargetCorner(this.getPointer(t, !0))
                    },
                    findTarget: function(t, e) {
                        if (!this.skipTargetFind) {
                            if (this._isLastRenderedObject(t)) return this.lastRenderedObjectWithControlsAboveOverlay;
                            var n = this.getActiveGroup();
                            if (n && !e && this.containsPoint(t, n)) return n;
                            var r = this._searchPossibleTargets(t);
                            return this._fireOverOutEvents(r), r
                        }
                    },
                    _fireOverOutEvents: function(t) {
                        t ? this._hoveredTarget !== t && (this.fire("mouse:over", {
                            target: t
                        }), t.fire("mouseover"), this._hoveredTarget && (this.fire("mouse:out", {
                            target: this._hoveredTarget
                        }), this._hoveredTarget.fire("mouseout")), this._hoveredTarget = t) : this._hoveredTarget && (this.fire("mouse:out", {
                            target: this._hoveredTarget
                        }), this._hoveredTarget.fire("mouseout"), this._hoveredTarget = null)
                    },
                    _checkTarget: function(t, e, n) {
                        if (e && e.visible && e.evented && this.containsPoint(t, e)) {
                            if (!this.perPixelTargetFind && !e.perPixelTargetFind || e.isEditing) return !0;
                            var r = this.isTargetTransparent(e, n.x, n.y);
                            if (!r) return !0
                        }
                    },
                    _searchPossibleTargets: function(t) {
                        for (var e, n = this.getPointer(t, !0), r = this._objects.length; r--;)
                            if (this._checkTarget(t, this._objects[r], n)) {
                                this.relatedTarget = this._objects[r], e = this._objects[r];
                                break
                            }
                        return e
                    },
                    getPointer: function(e, n, r) {
                        r || (r = this.upperCanvasEl);
                        var i, o = t(e, r),
                            s = r.getBoundingClientRect(),
                            a = s.width || 0,
                            l = s.height || 0;
                        return a && l || ("top" in s && "bottom" in s && (l = Math.abs(s.top - s.bottom)), "right" in s && "left" in s && (a = Math.abs(s.right - s.left))), this.calcOffset(), o.x = o.x - this._offset.left, o.y = o.y - this._offset.top, n || (o = fabric.util.transformPoint(o, fabric.util.invertTransform(this.viewportTransform))), i = 0 === a || 0 === l ? {
                            width: 1,
                            height: 1
                        } : {
                            width: r.width / a,
                            height: r.height / l
                        }, {
                            x: o.x * i.width,
                            y: o.y * i.height
                        }
                    },
                    _createUpperCanvas: function() {
                        var t = this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/, "");
                        this.upperCanvasEl = this._createCanvasElement(), fabric.util.addClass(this.upperCanvasEl, "upper-canvas " + t), this.wrapperEl.appendChild(this.upperCanvasEl), this._copyCanvasStyle(this.lowerCanvasEl, this.upperCanvasEl), this._applyCanvasStyle(this.upperCanvasEl), this.contextTop = this.upperCanvasEl.getContext("2d")
                    },
                    _createCacheCanvas: function() {
                        this.cacheCanvasEl = this._createCanvasElement(), this.cacheCanvasEl.setAttribute("width", this.width), this.cacheCanvasEl.setAttribute("height", this.height), this.contextCache = this.cacheCanvasEl.getContext("2d")
                    },
                    _initWrapperElement: function() {
                        this.wrapperEl = fabric.util.wrapElement(this.lowerCanvasEl, "div", {
                            class: this.containerClass
                        }), fabric.util.setStyle(this.wrapperEl, {
                            width: this.getWidth() + "px",
                            height: this.getHeight() + "px",
                            position: "relative"
                        }), fabric.util.makeElementUnselectable(this.wrapperEl)
                    },
                    _applyCanvasStyle: function(t) {
                        var e = this.getWidth() || t.width,
                            n = this.getHeight() || t.height;
                        fabric.util.setStyle(t, {
                            position: "absolute",
                            width: e + "px",
                            height: n + "px",
                            left: 0,
                            top: 0
                        }), t.width = e, t.height = n, fabric.util.makeElementUnselectable(t)
                    },
                    _copyCanvasStyle: function(t, e) {
                        e.style.cssText = t.style.cssText
                    },
                    getSelectionContext: function() {
                        return this.contextTop
                    },
                    getSelectionElement: function() {
                        return this.upperCanvasEl
                    },
                    _setActiveObject: function(t) {
                        this._activeObject && this._activeObject.set("active", !1), this._activeObject = t, t.set("active", !0)
                    },
                    setActiveObject: function(t, e) {
                        return this._setActiveObject(t), this.renderAll(), this.fire("object:selected", {
                            target: t,
                            e: e
                        }), t.fire("selected", {
                            e: e
                        }), this
                    },
                    getActiveObject: function() {
                        return this._activeObject
                    },
                    _discardActiveObject: function() {
                        this._activeObject && this._activeObject.set("active", !1), this._activeObject = null
                    },
                    discardActiveObject: function(t) {
                        return this._discardActiveObject(), this.renderAll(), this.fire("selection:cleared", {
                            e: t
                        }), this
                    },
                    _setActiveGroup: function(t) {
                        this._activeGroup = t, t && t.set("active", !0)
                    },
                    setActiveGroup: function(t, e) {
                        return this._setActiveGroup(t), t && (this.fire("object:selected", {
                            target: t,
                            e: e
                        }), t.fire("selected", {
                            e: e
                        })), this
                    },
                    getActiveGroup: function() {
                        return this._activeGroup
                    },
                    _discardActiveGroup: function() {
                        var t = this.getActiveGroup();
                        t && t.destroy(), this.setActiveGroup(null)
                    },
                    discardActiveGroup: function(t) {
                        return this._discardActiveGroup(), this.fire("selection:cleared", {
                            e: t
                        }), this
                    },
                    deactivateAll: function() {
                        for (var t = this.getObjects(), e = 0, n = t.length; e < n; e++) t[e].set("active", !1);
                        return this._discardActiveGroup(), this._discardActiveObject(), this
                    },
                    deactivateAllWithDispatch: function(t) {
                        var e = this.getActiveGroup() || this.getActiveObject();
                        return e && this.fire("before:selection:cleared", {
                            target: e,
                            e: t
                        }), this.deactivateAll(), e && this.fire("selection:cleared", {
                            e: t
                        }), this
                    },
                    drawControls: function(t) {
                        var e = this.getActiveGroup();
                        e ? this._drawGroupControls(t, e) : this._drawObjectsControls(t)
                    },
                    _drawGroupControls: function(t, e) {
                        e._renderControls(t)
                    },
                    _drawObjectsControls: function(t) {
                        for (var e = 0, n = this._objects.length; e < n; ++e) this._objects[e] && this._objects[e].active && (this._objects[e]._renderControls(t), this.lastRenderedObjectWithControlsAboveOverlay = this._objects[e])
                    }
                });
                for (var s in fabric.StaticCanvas) "prototype" !== s && (fabric.Canvas[s] = fabric.StaticCanvas[s]);
                fabric.isTouchSupported && (fabric.Canvas.prototype._setCursorFromEvent = function() {}), fabric.Element = fabric.Canvas
            }(),
            function() {
                var t = {
                        mt: 0,
                        tr: 1,
                        mr: 2,
                        br: 3,
                        mb: 4,
                        bl: 5,
                        ml: 6,
                        tl: 7
                    },
                    e = fabric.util.addListener,
                    n = fabric.util.removeListener;
                fabric.util.object.extend(fabric.Canvas.prototype, {
                    cursorMap: ["n-resize", "ne-resize", "e-resize", "se-resize", "s-resize", "sw-resize", "w-resize", "nw-resize"],
                    _initEventListeners: function() {
                        this._bindEvents(), e(fabric.window, "resize", this._onResize), e(this.upperCanvasEl, "mousedown", this._onMouseDown), e(this.upperCanvasEl, "mousemove", this._onMouseMove), e(this.upperCanvasEl, "mousewheel", this._onMouseWheel), e(this.upperCanvasEl, "touchstart", this._onMouseDown), e(this.upperCanvasEl, "touchmove", this._onMouseMove), "undefined" != typeof eventjs && "add" in eventjs && (eventjs.add(this.upperCanvasEl, "gesture", this._onGesture), eventjs.add(this.upperCanvasEl, "drag", this._onDrag), eventjs.add(this.upperCanvasEl, "orientation", this._onOrientationChange), eventjs.add(this.upperCanvasEl, "shake", this._onShake), eventjs.add(this.upperCanvasEl, "longpress", this._onLongPress))
                    },
                    _bindEvents: function() {
                        this._onMouseDown = this._onMouseDown.bind(this), this._onMouseMove = this._onMouseMove.bind(this), this._onMouseUp = this._onMouseUp.bind(this), this._onResize = this._onResize.bind(this), this._onGesture = this._onGesture.bind(this), this._onDrag = this._onDrag.bind(this), this._onShake = this._onShake.bind(this), this._onLongPress = this._onLongPress.bind(this), this._onOrientationChange = this._onOrientationChange.bind(this), this._onMouseWheel = this._onMouseWheel.bind(this)
                    },
                    removeListeners: function() {
                        n(fabric.window, "resize", this._onResize), n(this.upperCanvasEl, "mousedown", this._onMouseDown), n(this.upperCanvasEl, "mousemove", this._onMouseMove), n(this.upperCanvasEl, "mousewheel", this._onMouseWheel), n(this.upperCanvasEl, "touchstart", this._onMouseDown), n(this.upperCanvasEl, "touchmove", this._onMouseMove), "undefined" != typeof eventjs && "remove" in eventjs && (eventjs.remove(this.upperCanvasEl, "gesture", this._onGesture), eventjs.remove(this.upperCanvasEl, "drag", this._onDrag), eventjs.remove(this.upperCanvasEl, "orientation", this._onOrientationChange), eventjs.remove(this.upperCanvasEl, "shake", this._onShake), eventjs.remove(this.upperCanvasEl, "longpress", this._onLongPress))
                    },
                    _onGesture: function(t, e) {
                        this.__onTransformGesture && this.__onTransformGesture(t, e)
                    },
                    _onDrag: function(t, e) {
                        this.__onDrag && this.__onDrag(t, e)
                    },
                    _onMouseWheel: function(t, e) {
                        this.__onMouseWheel && this.__onMouseWheel(t, e)
                    },
                    _onOrientationChange: function(t, e) {
                        this.__onOrientationChange && this.__onOrientationChange(t, e)
                    },
                    _onShake: function(t, e) {
                        this.__onShake && this.__onShake(t, e)
                    },
                    _onLongPress: function(t, e) {
                        this.__onLongPress && this.__onLongPress(t, e)
                    },
                    _onMouseDown: function(t) {
                        this.__onMouseDown(t), e(fabric.document, "touchend", this._onMouseUp), e(fabric.document, "touchmove", this._onMouseMove), n(this.upperCanvasEl, "mousemove", this._onMouseMove), n(this.upperCanvasEl, "touchmove", this._onMouseMove), "touchstart" === t.type ? n(this.upperCanvasEl, "mousedown", this._onMouseDown) : (e(fabric.document, "mouseup", this._onMouseUp), e(fabric.document, "mousemove", this._onMouseMove))
                    },
                    _onMouseUp: function(t) {
                        if (this.__onMouseUp(t), n(fabric.document, "mouseup", this._onMouseUp), n(fabric.document, "touchend", this._onMouseUp), n(fabric.document, "mousemove", this._onMouseMove), n(fabric.document, "touchmove", this._onMouseMove), e(this.upperCanvasEl, "mousemove", this._onMouseMove), e(this.upperCanvasEl, "touchmove", this._onMouseMove), "touchend" === t.type) {
                            var r = this;
                            setTimeout(function() {
                                e(r.upperCanvasEl, "mousedown", r._onMouseDown)
                            }, 400)
                        }
                    },
                    _onMouseMove: function(t) {
                        !this.allowTouchScrolling && t.preventDefault && t.preventDefault(), this.__onMouseMove(t)
                    },
                    _onResize: function() {
                        this.calcOffset()
                    },
                    _shouldRender: function(t, e) {
                        var n = this.getActiveGroup() || this.getActiveObject();
                        return !!(t && (t.isMoving || t !== n) || !t && n || !t && !n && !this._groupSelector || e && this._previousPointer && this.selection && (e.x !== this._previousPointer.x || e.y !== this._previousPointer.y))
                    },
                    __onMouseUp: function(t) {
                        var e;
                        if (this.isDrawingMode && this._isCurrentlyDrawing) return void this._onMouseUpInDrawingMode(t);
                        this._currentTransform ? (this._finalizeCurrentTransform(), e = this._currentTransform.target) : e = this.findTarget(t, !0);
                        var n = this._shouldRender(e, this.getPointer(t));
                        this._maybeGroupObjects(t), e && (e.isMoving = !1), n && this.renderAll(), this._handleCursorAndEvent(t, e)
                    },
                    _handleCursorAndEvent: function(t, e) {
                        this._setCursorFromEvent(t, e);
                        var n = this;
                        setTimeout(function() {
                            n._setCursorFromEvent(t, e)
                        }, 50), this.fire("mouse:up", {
                            target: e,
                            e: t
                        }), e && e.fire("mouseup", {
                            e: t
                        })
                    },
                    _finalizeCurrentTransform: function() {
                        var t = this._currentTransform,
                            e = t.target;
                        e._scaling && (e._scaling = !1), e.setCoords(), this.stateful && e.hasStateChanged() && (this.fire("object:modified", {
                            target: e
                        }), e.fire("modified")), this._restoreOriginXY(e)
                    },
                    _restoreOriginXY: function(t) {
                        if (this._previousOriginX && this._previousOriginY) {
                            var e = t.translateToOriginPoint(t.getCenterPoint(), this._previousOriginX, this._previousOriginY);
                            t.originX = this._previousOriginX, t.originY = this._previousOriginY, t.left = e.x, t.top = e.y, this._previousOriginX = null, this._previousOriginY = null
                        }
                    },
                    _onMouseDownInDrawingMode: function(t) {
                        this._isCurrentlyDrawing = !0, this.discardActiveObject(t).renderAll(), this.clipTo && fabric.util.clipContext(this, this.contextTop);
                        var e = fabric.util.invertTransform(this.viewportTransform),
                            n = fabric.util.transformPoint(this.getPointer(t, !0), e);
                        this.freeDrawingBrush.onMouseDown(n), this.fire("mouse:down", {
                            e: t
                        });
                        var r = this.findTarget(t);
                        "undefined" != typeof r && r.fire("mousedown", {
                            e: t,
                            target: r
                        })
                    },
                    _onMouseMoveInDrawingMode: function(t) {
                        if (this._isCurrentlyDrawing) {
                            var e = fabric.util.invertTransform(this.viewportTransform),
                                n = fabric.util.transformPoint(this.getPointer(t, !0), e);
                            this.freeDrawingBrush.onMouseMove(n)
                        }
                        this.setCursor(this.freeDrawingCursor), this.fire("mouse:move", {
                            e: t
                        });
                        var r = this.findTarget(t);
                        "undefined" != typeof r && r.fire("mousemove", {
                            e: t,
                            target: r
                        })
                    },
                    _onMouseUpInDrawingMode: function(t) {
                        this._isCurrentlyDrawing = !1, this.clipTo && this.contextTop.restore(), this.freeDrawingBrush.onMouseUp(), this.fire("mouse:up", {
                            e: t
                        });
                        var e = this.findTarget(t);
                        "undefined" != typeof e && e.fire("mouseup", {
                            e: t,
                            target: e
                        })
                    },
                    __onMouseDown: function(t) {
                        var e = "which" in t ? 1 === t.which : 1 === t.button;
                        if (e || fabric.isTouchSupported) {
                            if (this.isDrawingMode) return void this._onMouseDownInDrawingMode(t);
                            if (!this._currentTransform) {
                                var n = this.findTarget(t),
                                    r = this.getPointer(t, !0);
                                this._previousPointer = r;
                                var i = this._shouldRender(n, r),
                                    o = this._shouldGroup(t, n);
                                this._shouldClearSelection(t, n) ? this._clearSelection(t, n, r) : o && (this._handleGrouping(t, n), n = this.getActiveGroup()), n && n.selectable && !o && (this._beforeTransform(t, n), this._setupCurrentTransform(t, n)), i && this.renderAll(), this.fire("mouse:down", {
                                    target: n,
                                    e: t
                                }), n && n.fire("mousedown", {
                                    e: t
                                })
                            }
                        }
                    },
                    _beforeTransform: function(t, e) {
                        var n;
                        this.stateful && e.saveState(), (n = e._findTargetCorner(this.getPointer(t))) && this.onBeforeScaleRotate(e), e !== this.getActiveGroup() && e !== this.getActiveObject() && (this.deactivateAll(), this.setActiveObject(e, t))
                    },
                    _clearSelection: function(t, e, n) {
                        this.deactivateAllWithDispatch(t), e && e.selectable ? this.setActiveObject(e, t) : this.selection && (this._groupSelector = {
                            ex: n.x,
                            ey: n.y,
                            top: 0,
                            left: 0
                        })
                    },
                    _setOriginToCenter: function(t) {
                        this._previousOriginX = this._currentTransform.target.originX, this._previousOriginY = this._currentTransform.target.originY;
                        var e = t.getCenterPoint();
                        t.originX = "center", t.originY = "center", t.left = e.x, t.top = e.y, this._currentTransform.left = t.left, this._currentTransform.top = t.top
                    },
                    _setCenterToOrigin: function(t) {
                        var e = t.translateToOriginPoint(t.getCenterPoint(), this._previousOriginX, this._previousOriginY);
                        t.originX = this._previousOriginX, t.originY = this._previousOriginY, t.left = e.x, t.top = e.y, this._previousOriginX = null, this._previousOriginY = null
                    },
                    __onMouseMove: function(t) {
                        var e, n;
                        if (this.isDrawingMode) return void this._onMouseMoveInDrawingMode(t);
                        if (!("undefined" != typeof t.touches && t.touches.length > 1)) {
                            var r = this._groupSelector;
                            r ? (n = this.getPointer(t, !0), r.left = n.x - r.ex, r.top = n.y - r.ey, this.renderTop()) : this._currentTransform ? this._transformObject(t) : (e = this.findTarget(t), !e || e && !e.selectable ? this.setCursor(this.defaultCursor) : this._setCursorFromEvent(t, e)), this.fire("mouse:move", {
                                target: e,
                                e: t
                            }), e && e.fire("mousemove", {
                                e: t
                            })
                        }
                    },
                    _transformObject: function(t) {
                        var e = this.getPointer(t),
                            n = this._currentTransform;
                        n.reset = !1, n.target.isMoving = !0, this._beforeScaleTransform(t, n), this._performTransformAction(t, n, e), this.renderAll()
                    },
                    _performTransformAction: function(t, e, n) {
                        var r = n.x,
                            i = n.y,
                            o = e.target,
                            s = e.action;
                        "rotate" === s ? (this._rotateObject(r, i), this._fire("rotating", o, t)) : "scale" === s ? (this._onScale(t, e, r, i), this._fire("scaling", o, t)) : "scaleX" === s ? (this._scaleObject(r, i, "x"), this._fire("scaling", o, t)) : "scaleY" === s ? (this._scaleObject(r, i, "y"), this._fire("scaling", o, t)) : (this._translateObject(r, i), this._fire("moving", o, t), this.setCursor(this.moveCursor))
                    },
                    _fire: function(t, e, n) {
                        this.fire("object:" + t, {
                            target: e,
                            e: n
                        }), e.fire(t, {
                            e: n
                        })
                    },
                    _beforeScaleTransform: function(t, e) {
                        if ("scale" === e.action || "scaleX" === e.action || "scaleY" === e.action) {
                            var n = this._shouldCenterTransform(t, e.target);
                            (n && ("center" !== e.originX || "center" !== e.originY) || !n && "center" === e.originX && "center" === e.originY) && (this._resetCurrentTransform(t), e.reset = !0)
                        }
                    },
                    _onScale: function(t, e, n, r) {
                        !t.shiftKey && !this.uniScaleTransform || e.target.get("lockUniScaling") ? (e.reset || "scale" !== e.currentAction || this._resetCurrentTransform(t, e.target), e.currentAction = "scaleEqually", this._scaleObject(n, r, "equally")) : (e.currentAction = "scale", this._scaleObject(n, r))
                    },
                    _setCursorFromEvent: function(t, e) {
                        if (!e || !e.selectable) return this.setCursor(this.defaultCursor), !1;
                        var n = this.getActiveGroup(),
                            r = e._findTargetCorner && (!n || !n.contains(e)) && e._findTargetCorner(this.getPointer(t, !0));
                        return r ? this._setCornerCursor(r, e) : this.setCursor(e.hoverCursor || this.hoverCursor), !0
                    },
                    _setCornerCursor: function(e, n) {
                        if (e in t) this.setCursor(this._getRotatedCornerCursor(e, n));
                        else {
                            if ("mtr" !== e || !n.hasRotatingPoint) return this.setCursor(this.defaultCursor), !1;
                            this.setCursor(this.rotationCursor)
                        }
                    },
                    _getRotatedCornerCursor: function(e, n) {
                        var r = Math.round(n.getAngle() % 360 / 45);
                        return r < 0 && (r += 8), r += t[e], r %= 8, this.cursorMap[r]
                    }
                })
            }(),
            function() {
                var t = Math.min,
                    e = Math.max;
                fabric.util.object.extend(fabric.Canvas.prototype, {
                    _shouldGroup: function(t, e) {
                        var n = this.getActiveObject();
                        return t.shiftKey && (this.getActiveGroup() || n && n !== e) && this.selection
                    },
                    _handleGrouping: function(t, e) {
                        e === this.getActiveGroup() && (e = this.findTarget(t, !0), !e || e.isType("group")) || (this.getActiveGroup() ? this._updateActiveGroup(e, t) : this._createActiveGroup(e, t), this._activeGroup && this._activeGroup.saveCoords())
                    },
                    _updateActiveGroup: function(t, e) {
                        var n = this.getActiveGroup();
                        if (n.contains(t)) {
                            if (n.removeWithUpdate(t), this._resetObjectTransform(n), t.set("active", !1), 1 === n.size()) return this.discardActiveGroup(e), void this.setActiveObject(n.item(0))
                        } else n.addWithUpdate(t), this._resetObjectTransform(n);
                        this.fire("selection:created", {
                            target: n,
                            e: e
                        }), n.set("active", !0)
                    },
                    _createActiveGroup: function(t, e) {
                        if (this._activeObject && t !== this._activeObject) {
                            var n = this._createGroup(t);
                            n.addWithUpdate(), this.setActiveGroup(n), this._activeObject = null, this.fire("selection:created", {
                                target: n,
                                e: e
                            })
                        }
                        t.set("active", !0)
                    },
                    _createGroup: function(t) {
                        var e = this.getObjects(),
                            n = e.indexOf(this._activeObject) < e.indexOf(t),
                            r = n ? [this._activeObject, t] : [t, this._activeObject];
                        return new fabric.Group(r, {
                            canvas: this
                        })
                    },
                    _groupSelectedObjects: function(t) {
                        var e = this._collectObjects();
                        1 === e.length ? this.setActiveObject(e[0], t) : e.length > 1 && (e = new fabric.Group(e.reverse(), {
                            canvas: this
                        }), e.addWithUpdate(), this.setActiveGroup(e, t), e.saveCoords(), this.fire("selection:created", {
                            target: e
                        }), this.renderAll())
                    },
                    _collectObjects: function() {
                        for (var n, r = [], i = this._groupSelector.ex, o = this._groupSelector.ey, s = i + this._groupSelector.left, a = o + this._groupSelector.top, l = new fabric.Point(t(i, s), t(o, a)), u = new fabric.Point(e(i, s), e(o, a)), c = i === s && o === a, f = this._objects.length; f-- && (n = this._objects[f], !(n && n.selectable && n.visible && (n.intersectsWithRect(l, u) || n.isContainedWithinRect(l, u) || n.containsPoint(l) || n.containsPoint(u)) && (n.set("active", !0), r.push(n), c))););
                        return r
                    },
                    _maybeGroupObjects: function(t) {
                        this.selection && this._groupSelector && this._groupSelectedObjects(t);
                        var e = this.getActiveGroup();
                        e && (e.setObjectsCoords().setCoords(), e.isMoving = !1, this.setCursor(this.defaultCursor)), this._groupSelector = null, this._currentTransform = null
                    }
                })
            }(), fabric.util.object.extend(fabric.StaticCanvas.prototype, {
            toDataURL: function(t) {
                t || (t = {});
                var e = t.format || "png",
                    n = t.quality || 1,
                    r = t.multiplier || 1,
                    i = {
                        left: t.left,
                        top: t.top,
                        width: t.width,
                        height: t.height
                    };
                return 1 !== r ? this.__toDataURLWithMultiplier(e, n, i, r) : this.__toDataURL(e, n, i)
            },
            __toDataURL: function(t, e, n) {
                this.renderAll(!0);
                var r = this.upperCanvasEl || this.lowerCanvasEl,
                    i = this.__getCroppedCanvas(r, n);
                "jpg" === t && (t = "jpeg");
                var o = fabric.StaticCanvas.supports("toDataURLWithQuality") ? (i || r).toDataURL("image/" + t, e) : (i || r).toDataURL("image/" + t);
                return this.contextTop && this.clearContext(this.contextTop), this.renderAll(), i && (i = null), o
            },
            __getCroppedCanvas: function(t, e) {
                var n, r, i = "left" in e || "top" in e || "width" in e || "height" in e;
                return i && (n = fabric.util.createCanvasElement(), r = n.getContext("2d"), n.width = e.width || this.width, n.height = e.height || this.height, r.drawImage(t, -e.left || 0, -e.top || 0)), n
            },
            __toDataURLWithMultiplier: function(t, e, n, r) {
                var i = this.getWidth(),
                    o = this.getHeight(),
                    s = i * r,
                    a = o * r,
                    l = this.getActiveObject(),
                    u = this.getActiveGroup(),
                    c = this.contextTop || this.contextContainer;
                r > 1 && this.setWidth(s).setHeight(a), c.scale(r, r), n.left && (n.left *= r), n.top && (n.top *= r), n.width ? n.width *= r : r < 1 && (n.width = s), n.height ? n.height *= r : r < 1 && (n.height = a), u ? this._tempRemoveBordersControlsFromGroup(u) : l && this.deactivateAll && this.deactivateAll(), this.renderAll(!0);
                var f = this.__toDataURL(t, e, n);
                return this.width = i, this.height = o, c.scale(1 / r, 1 / r), this.setWidth(i).setHeight(o), u ? this._restoreBordersControlsOnGroup(u) : l && this.setActiveObject && this.setActiveObject(l), this.contextTop && this.clearContext(this.contextTop), this.renderAll(), f
            },
            toDataURLWithMultiplier: function(t, e, n) {
                return this.toDataURL({
                    format: t,
                    multiplier: e,
                    quality: n
                })
            },
            _tempRemoveBordersControlsFromGroup: function(t) {
                t.origHasControls = t.hasControls, t.origBorderColor = t.borderColor, t.hasControls = !0, t.borderColor = "rgba(0,0,0,0)", t.forEachObject(function(t) {
                    t.origBorderColor = t.borderColor, t.borderColor = "rgba(0,0,0,0)"
                })
            },
            _restoreBordersControlsOnGroup: function(t) {
                t.hideControls = t.origHideControls, t.borderColor = t.origBorderColor, t.forEachObject(function(t) {
                    t.borderColor = t.origBorderColor, delete t.origBorderColor
                })
            }
        }), fabric.util.object.extend(fabric.StaticCanvas.prototype, {
            loadFromDatalessJSON: function(t, e, n) {
                return this.loadFromJSON(t, e, n)
            },
            loadFromJSON: function(t, e, n) {
                if (t) {
                    var r = "string" == typeof t ? JSON.parse(t) : t;
                    this.clear();
                    var i = this;
                    return this._enlivenObjects(r.objects, function() {
                        i._setBgOverlay(r, e)
                    }, n), this
                }
            },
            _setBgOverlay: function(t, e) {
                var n = this,
                    r = {
                        backgroundColor: !1,
                        overlayColor: !1,
                        backgroundImage: !1,
                        overlayImage: !1
                    };
                if (!(t.backgroundImage || t.overlayImage || t.background || t.overlay)) return void(e && e());
                var i = function() {
                    r.backgroundImage && r.overlayImage && r.backgroundColor && r.overlayColor && (n.renderAll(), e && e())
                };
                this.__setBgOverlay("backgroundImage", t.backgroundImage, r, i), this.__setBgOverlay("overlayImage", t.overlayImage, r, i), this.__setBgOverlay("backgroundColor", t.background, r, i), this.__setBgOverlay("overlayColor", t.overlay, r, i), i()
            },
            __setBgOverlay: function(t, e, n, r) {
                var i = this;
                return e ? void("backgroundImage" === t || "overlayImage" === t ? fabric.Image.fromObject(e, function(e) {
                    i[t] = e, n[t] = !0, r && r()
                }) : this["set" + fabric.util.string.capitalize(t, !0)](e, function() {
                    n[t] = !0, r && r()
                })) : void(n[t] = !0)
            },
            _enlivenObjects: function(t, e, n) {
                var r = this;
                if (!t || 0 === t.length) return void(e && e());
                var i = this.renderOnAddRemove;
                this.renderOnAddRemove = !1, fabric.util.enlivenObjects(t, function(t) {
                    t.forEach(function(t, e) {
                        r.insertAt(t, e, !0)
                    }), r.renderOnAddRemove = i, e && e()
                }, null, n)
            },
            _toDataURL: function(t, e) {
                this.clone(function(n) {
                    e(n.toDataURL(t))
                })
            },
            _toDataURLWithMultiplier: function(t, e, n) {
                this.clone(function(r) {
                    n(r.toDataURLWithMultiplier(t, e))
                })
            },
            clone: function(t, e) {
                var n = JSON.stringify(this.toJSON(e));
                this.cloneWithoutData(function(e) {
                    e.loadFromJSON(n, function() {
                        t && t(e)
                    })
                })
            },
            cloneWithoutData: function(t) {
                var e = fabric.document.createElement("canvas");
                e.width = this.getWidth(), e.height = this.getHeight();
                var n = new fabric.Canvas(e);
                n.clipTo = this.clipTo, this.backgroundImage ? (n.setBackgroundImage(this.backgroundImage.src, function() {
                    n.renderAll(), t && t(n)
                }), n.backgroundImageOpacity = this.backgroundImageOpacity, n.backgroundImageStretch = this.backgroundImageStretch) : t && t(n)
            }
        }),
            function(t) {
                var e = t.fabric || (t.fabric = {}),
                    n = e.util.object.extend,
                    r = e.util.toFixed,
                    i = e.util.string.capitalize,
                    o = e.util.degreesToRadians,
                    s = e.StaticCanvas.supports("setLineDash");
                e.Object || (e.Object = e.util.createClass({
                    type: "object",
                    originX: "left",
                    originY: "top",
                    top: 0,
                    left: 0,
                    width: 0,
                    height: 0,
                    scaleX: 1,
                    scaleY: 1,
                    flipX: !1,
                    flipY: !1,
                    opacity: 1,
                    angle: 0,
                    cornerSize: 12,
                    transparentCorners: !0,
                    hoverCursor: null,
                    padding: 0,
                    borderColor: "rgba(102,153,255,0.75)",
                    cornerColor: "rgba(102,153,255,0.5)",
                    centeredScaling: !1,
                    centeredRotation: !0,
                    fill: "rgb(0,0,0)",
                    fillRule: "nonzero",
                    globalCompositeOperation: "source-over",
                    backgroundColor: "",
                    stroke: null,
                    strokeWidth: 1,
                    strokeDashArray: null,
                    strokeLineCap: "butt",
                    strokeLineJoin: "miter",
                    strokeMiterLimit: 10,
                    shadow: null,
                    borderOpacityWhenMoving: .4,
                    borderScaleFactor: 1,
                    transformMatrix: null,
                    minScaleLimit: .01,
                    selectable: !0,
                    evented: !0,
                    visible: !0,
                    hasControls: !0,
                    hasBorders: !0,
                    hasRotatingPoint: !0,
                    rotatingPointOffset: 40,
                    perPixelTargetFind: !1,
                    includeDefaultValues: !0,
                    clipTo: null,
                    lockMovementX: !1,
                    lockMovementY: !1,
                    lockRotation: !1,
                    lockScalingX: !1,
                    lockScalingY: !1,
                    lockUniScaling: !1,
                    lockScalingFlip: !1,
                    stateProperties: "top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill fillRule globalCompositeOperation shadow clipTo visible backgroundColor".split(" "),
                    initialize: function(t) {
                        t && this.setOptions(t)
                    },
                    _initGradient: function(t) {
                        !t.fill || !t.fill.colorStops || t.fill instanceof e.Gradient || this.set("fill", new e.Gradient(t.fill))
                    },
                    _initPattern: function(t) {
                        !t.fill || !t.fill.source || t.fill instanceof e.Pattern || this.set("fill", new e.Pattern(t.fill)), !t.stroke || !t.stroke.source || t.stroke instanceof e.Pattern || this.set("stroke", new e.Pattern(t.stroke))
                    },
                    _initClipping: function(t) {
                        if (t.clipTo && "string" == typeof t.clipTo) {
                            var n = e.util.getFunctionBody(t.clipTo);
                            "undefined" != typeof n && (this.clipTo = new Function("ctx", n))
                        }
                    },
                    setOptions: function(t) {
                        for (var e in t) this.set(e, t[e]);
                        this._initGradient(t), this._initPattern(t), this._initClipping(t)
                    },
                    transform: function(t, e) {
                        this.group && this.group.transform(t, e);
                        var n = e ? this._getLeftTopCoords() : this.getCenterPoint();
                        t.translate(n.x, n.y), t.rotate(o(this.angle)), t.scale(this.scaleX * (this.flipX ? -1 : 1), this.scaleY * (this.flipY ? -1 : 1))
                    },
                    toObject: function(t) {
                        var n = e.Object.NUM_FRACTION_DIGITS,
                            i = {
                                type: this.type,
                                originX: this.originX,
                                originY: this.originY,
                                left: r(this.left, n),
                                top: r(this.top, n),
                                width: r(this.width, n),
                                height: r(this.height, n),
                                fill: this.fill && this.fill.toObject ? this.fill.toObject() : this.fill,
                                stroke: this.stroke && this.stroke.toObject ? this.stroke.toObject() : this.stroke,
                                strokeWidth: r(this.strokeWidth, n),
                                strokeDashArray: this.strokeDashArray,
                                strokeLineCap: this.strokeLineCap,
                                strokeLineJoin: this.strokeLineJoin,
                                strokeMiterLimit: r(this.strokeMiterLimit, n),
                                scaleX: r(this.scaleX, n),
                                scaleY: r(this.scaleY, n),
                                angle: r(this.getAngle(), n),
                                flipX: this.flipX,
                                flipY: this.flipY,
                                opacity: r(this.opacity, n),
                                shadow: this.shadow && this.shadow.toObject ? this.shadow.toObject() : this.shadow,
                                visible: this.visible,
                                clipTo: this.clipTo && String(this.clipTo),
                                backgroundColor: this.backgroundColor,
                                fillRule: this.fillRule,
                                globalCompositeOperation: this.globalCompositeOperation
                            };
                        return this.includeDefaultValues || (i = this._removeDefaultValues(i)), e.util.populateWithProperties(this, i, t), i
                    },
                    toDatalessObject: function(t) {
                        return this.toObject(t)
                    },
                    _removeDefaultValues: function(t) {
                        var n = e.util.getKlass(t.type).prototype,
                            r = n.stateProperties;
                        return r.forEach(function(e) {
                            t[e] === n[e] && delete t[e]
                        }), t
                    },
                    toString: function() {
                        return "#<fabric." + i(this.type) + ">"
                    },
                    get: function(t) {
                        return this[t]
                    },
                    _setObject: function(t) {
                        for (var e in t) this._set(e, t[e])
                    },
                    set: function(t, e) {
                        return "object" === ("undefined" == typeof t ? "undefined" : _typeof(t)) ? this._setObject(t) : "function" == typeof e && "clipTo" !== t ? this._set(t, e(this.get(t))) : this._set(t, e), this
                    },
                    _set: function(t, n) {
                        var i = "scaleX" === t || "scaleY" === t;
                        return i && (n = this._constrainScale(n)), "scaleX" === t && n < 0 ? (this.flipX = !this.flipX, n *= -1) : "scaleY" === t && n < 0 ? (this.flipY = !this.flipY, n *= -1) : "width" === t || "height" === t ? this.minScaleLimit = r(Math.min(.1, 1 / Math.max(this.width, this.height)), 2) : "shadow" !== t || !n || n instanceof e.Shadow || (n = new e.Shadow(n)), this[t] = n, this
                    },
                    toggle: function(t) {
                        var e = this.get(t);
                        return "boolean" == typeof e && this.set(t, !e), this
                    },
                    setSourcePath: function(t) {
                        return this.sourcePath = t, this
                    },
                    getViewportTransform: function() {
                        return this.canvas && this.canvas.viewportTransform ? this.canvas.viewportTransform : [1, 0, 0, 1, 0, 0]
                    },
                    render: function(t, n) {
                        0 === this.width && 0 === this.height || !this.visible || (t.save(), this._setupCompositeOperation(t), n || this.transform(t), this._setStrokeStyles(t), this._setFillStyles(t), this.group && "path-group" === this.group.type && t.translate(-this.group.width / 2, -this.group.height / 2), this.transformMatrix && t.transform.apply(t, this.transformMatrix), this._setOpacity(t), this._setShadow(t), this.clipTo && e.util.clipContext(this, t), this._render(t, n), this.clipTo && t.restore(), this._removeShadow(t), this._restoreCompositeOperation(t), t.restore())
                    },
                    _setOpacity: function(t) {
                        this.group && this.group._setOpacity(t), t.globalAlpha *= this.opacity
                    },
                    _setStrokeStyles: function(t) {
                        this.stroke && (t.lineWidth = this.strokeWidth, t.lineCap = this.strokeLineCap, t.lineJoin = this.strokeLineJoin, t.miterLimit = this.strokeMiterLimit, t.strokeStyle = this.stroke.toLive ? this.stroke.toLive(t, this) : this.stroke)
                    },
                    _setFillStyles: function(t) {
                        this.fill && (t.fillStyle = this.fill.toLive ? this.fill.toLive(t, this) : this.fill)
                    },
                    _renderControls: function(t, n) {
                        var r = this.getViewportTransform();
                        if (t.save(), this.active && !n) {
                            var i;
                            this.group && (i = e.util.transformPoint(this.group.getCenterPoint(), r), t.translate(i.x, i.y), t.rotate(o(this.group.angle))), i = e.util.transformPoint(this.getCenterPoint(), r, null != this.group), this.group && (i.x *= this.group.scaleX, i.y *= this.group.scaleY), t.translate(i.x, i.y), t.rotate(o(this.angle)), this.drawBorders(t), this.drawControls(t)
                        }
                        t.restore()
                    },
                    _setShadow: function(t) {
                        if (this.shadow) {
                            var e = this.canvas && this.canvas._currentMultiplier || 1;
                            t.shadowColor = this.shadow.color, t.shadowBlur = this.shadow.blur * e * (this.scaleX + this.scaleY) / 2, t.shadowOffsetX = this.shadow.offsetX * e * this.scaleX, t.shadowOffsetY = this.shadow.offsetY * e * this.scaleY
                        }
                    },
                    _removeShadow: function(t) {
                        this.shadow && (t.shadowColor = "", t.shadowBlur = t.shadowOffsetX = t.shadowOffsetY = 0)
                    },
                    _renderFill: function(t) {
                        if (this.fill) {
                            if (t.save(), this.fill.gradientTransform) {
                                var e = this.fill.gradientTransform;
                                t.transform.apply(t, e)
                            }
                            this.fill.toLive && t.translate(-this.width / 2 + this.fill.offsetX || 0, -this.height / 2 + this.fill.offsetY || 0), "evenodd" === this.fillRule ? t.fill("evenodd") : t.fill(), t.restore(), this.shadow && !this.shadow.affectStroke && this._removeShadow(t)
                        }
                    },
                    _renderStroke: function(t) {
                        if (this.stroke && 0 !== this.strokeWidth) {
                            if (t.save(), this.strokeDashArray) 1 & this.strokeDashArray.length && this.strokeDashArray.push.apply(this.strokeDashArray, this.strokeDashArray), s ? (t.setLineDash(this.strokeDashArray), this._stroke && this._stroke(t)) : this._renderDashedStroke && this._renderDashedStroke(t), t.stroke();
                            else {
                                if (this.stroke.gradientTransform) {
                                    var e = this.stroke.gradientTransform;
                                    t.transform.apply(t, e)
                                }
                                this._stroke ? this._stroke(t) : t.stroke()
                            }
                            this._removeShadow(t), t.restore()
                        }
                    },
                    clone: function(t, n) {
                        return this.constructor.fromObject ? this.constructor.fromObject(this.toObject(n), t) : new e.Object(this.toObject(n))
                    },
                    cloneAsImage: function(t) {
                        var n = this.toDataURL();
                        return e.util.loadImage(n, function(n) {
                            t && t(new e.Image(n))
                        }), this
                    },
                    toDataURL: function(t) {
                        t || (t = {});
                        var n = e.util.createCanvasElement(),
                            r = this.getBoundingRect();
                        n.width = r.width, n.height = r.height, e.util.wrapElement(n, "div");
                        var i = new e.StaticCanvas(n);
                        "jpg" === t.format && (t.format = "jpeg"), "jpeg" === t.format && (i.backgroundColor = "#fff");
                        var o = {
                            active: this.get("active"),
                            left: this.getLeft(),
                            top: this.getTop()
                        };
                        this.set("active", !1), this.setPositionByOrigin(new e.Point(n.width / 2, n.height / 2), "center", "center");
                        var s = this.canvas;
                        i.add(this);
                        var a = i.toDataURL(t);
                        return this.set(o).setCoords(), this.canvas = s, i.dispose(), i = null, a
                    },
                    isType: function(t) {
                        return this.type === t
                    },
                    complexity: function() {
                        return 0
                    },
                    toJSON: function(t) {
                        return this.toObject(t)
                    },
                    setGradient: function(t, n) {
                        n || (n = {});
                        var r = {
                            colorStops: []
                        };
                        r.type = n.type || (n.r1 || n.r2 ? "radial" : "linear"), r.coords = {
                            x1: n.x1,
                            y1: n.y1,
                            x2: n.x2,
                            y2: n.y2
                        }, (n.r1 || n.r2) && (r.coords.r1 = n.r1, r.coords.r2 = n.r2);
                        for (var i in n.colorStops) {
                            var o = new e.Color(n.colorStops[i]);
                            r.colorStops.push({
                                offset: i,
                                color: o.toRgb(),
                                opacity: o.getAlpha()
                            })
                        }
                        return this.set(t, e.Gradient.forObject(this, r))
                    },
                    setPatternFill: function(t) {
                        return this.set("fill", new e.Pattern(t))
                    },
                    setShadow: function(t) {
                        return this.set("shadow", t ? new e.Shadow(t) : null)
                    },
                    setColor: function(t) {
                        return this.set("fill", t), this
                    },
                    setAngle: function(t) {
                        var e = ("center" !== this.originX || "center" !== this.originY) && this.centeredRotation;
                        return e && this._setOriginToCenter(), this.set("angle", t), e && this._resetOrigin(), this
                    },
                    centerH: function() {
                        return this.canvas.centerObjectH(this), this
                    },
                    centerV: function() {
                        return this.canvas.centerObjectV(this), this
                    },
                    center: function() {
                        return this.canvas.centerObject(this), this
                    },
                    remove: function() {
                        return this.canvas.remove(this), this
                    },
                    getLocalPointer: function(t, e) {
                        e = e || this.canvas.getPointer(t);
                        var n = this.translateToOriginPoint(this.getCenterPoint(), "left", "top");
                        return {
                            x: e.x - n.x,
                            y: e.y - n.y
                        }
                    },
                    _setupCompositeOperation: function(t) {
                        this.globalCompositeOperation && (this._prevGlobalCompositeOperation = t.globalCompositeOperation, t.globalCompositeOperation = this.globalCompositeOperation)
                    },
                    _restoreCompositeOperation: function(t) {
                        this.globalCompositeOperation && this._prevGlobalCompositeOperation && (t.globalCompositeOperation = this._prevGlobalCompositeOperation)
                    }
                }), e.util.createAccessors(e.Object), e.Object.prototype.rotate = e.Object.prototype.setAngle, n(e.Object.prototype, e.Observable), e.Object.NUM_FRACTION_DIGITS = 2, e.Object.__uid = 0)
            }(exports),
            function() {
                var t = fabric.util.degreesToRadians;
                fabric.util.object.extend(fabric.Object.prototype, {
                    translateToCenterPoint: function(e, n, r) {
                        var i = e.x,
                            o = e.y,
                            s = this.stroke ? this.strokeWidth : 0;
                        return "left" === n ? i = e.x + (this.getWidth() + s * this.scaleX) / 2 : "right" === n && (i = e.x - (this.getWidth() + s * this.scaleX) / 2), "top" === r ? o = e.y + (this.getHeight() + s * this.scaleY) / 2 : "bottom" === r && (o = e.y - (this.getHeight() + s * this.scaleY) / 2), fabric.util.rotatePoint(new fabric.Point(i, o), e, t(this.angle))
                    },
                    translateToOriginPoint: function(e, n, r) {
                        var i = e.x,
                            o = e.y,
                            s = this.stroke ? this.strokeWidth : 0;
                        return "left" === n ? i = e.x - (this.getWidth() + s * this.scaleX) / 2 : "right" === n && (i = e.x + (this.getWidth() + s * this.scaleX) / 2), "top" === r ? o = e.y - (this.getHeight() + s * this.scaleY) / 2 : "bottom" === r && (o = e.y + (this.getHeight() + s * this.scaleY) / 2), fabric.util.rotatePoint(new fabric.Point(i, o), e, t(this.angle))
                    },
                    getCenterPoint: function() {
                        var t = new fabric.Point(this.left, this.top);
                        return this.translateToCenterPoint(t, this.originX, this.originY)
                    },
                    getPointByOrigin: function(t, e) {
                        var n = this.getCenterPoint();
                        return this.translateToOriginPoint(n, t, e)
                    },
                    toLocalPoint: function(e, n, r) {
                        var i, o, s = this.getCenterPoint(),
                            a = this.stroke ? this.strokeWidth : 0;
                        return n && r ? (i = "left" === n ? s.x - (this.getWidth() + a * this.scaleX) / 2 : "right" === n ? s.x + (this.getWidth() + a * this.scaleX) / 2 : s.x, o = "top" === r ? s.y - (this.getHeight() + a * this.scaleY) / 2 : "bottom" === r ? s.y + (this.getHeight() + a * this.scaleY) / 2 : s.y) : (i = this.left, o = this.top), fabric.util.rotatePoint(new fabric.Point(e.x, e.y), s, -t(this.angle)).subtractEquals(new fabric.Point(i, o))
                    },
                    setPositionByOrigin: function(t, e, n) {
                        var r = this.translateToCenterPoint(t, e, n),
                            i = this.translateToOriginPoint(r, this.originX, this.originY);
                        this.set("left", i.x), this.set("top", i.y)
                    },
                    adjustPosition: function(e) {
                        var n = t(this.angle),
                            r = this.getWidth() / 2,
                            i = Math.cos(n) * r,
                            o = Math.sin(n) * r,
                            s = this.getWidth(),
                            a = Math.cos(n) * s,
                            l = Math.sin(n) * s;
                        "center" === this.originX && "left" === e || "right" === this.originX && "center" === e ? (this.left -= i, this.top -= o) : "left" === this.originX && "center" === e || "center" === this.originX && "right" === e ? (this.left += i, this.top += o) : "left" === this.originX && "right" === e ? (this.left += a, this.top += l) : "right" === this.originX && "left" === e && (this.left -= a, this.top -= l), this.setCoords(), this.originX = e
                    },
                    _setOriginToCenter: function() {
                        this._originalOriginX = this.originX, this._originalOriginY = this.originY;
                        var t = this.getCenterPoint();
                        this.originX = "center", this.originY = "center", this.left = t.x, this.top = t.y
                    },
                    _resetOrigin: function() {
                        var t = this.translateToOriginPoint(this.getCenterPoint(), this._originalOriginX, this._originalOriginY);
                        this.originX = this._originalOriginX, this.originY = this._originalOriginY, this.left = t.x, this.top = t.y, this._originalOriginX = null, this._originalOriginY = null
                    },
                    _getLeftTopCoords: function() {
                        return this.translateToOriginPoint(this.getCenterPoint(), "left", "center")
                    }
                })
            }(),
            function() {
                var t = fabric.util.degreesToRadians;
                fabric.util.object.extend(fabric.Object.prototype, {
                    oCoords: null,
                    intersectsWithRect: function(t, e) {
                        var n = this.oCoords,
                            r = new fabric.Point(n.tl.x, n.tl.y),
                            i = new fabric.Point(n.tr.x, n.tr.y),
                            o = new fabric.Point(n.bl.x, n.bl.y),
                            s = new fabric.Point(n.br.x, n.br.y),
                            a = fabric.Intersection.intersectPolygonRectangle([r, i, s, o], t, e);
                        return "Intersection" === a.status
                    },
                    intersectsWithObject: function(t) {
                        function e(t) {
                            return {
                                tl: new fabric.Point(t.tl.x, t.tl.y),
                                tr: new fabric.Point(t.tr.x, t.tr.y),
                                bl: new fabric.Point(t.bl.x, t.bl.y),
                                br: new fabric.Point(t.br.x, t.br.y)
                            }
                        }
                        var n = e(this.oCoords),
                            r = e(t.oCoords),
                            i = fabric.Intersection.intersectPolygonPolygon([n.tl, n.tr, n.br, n.bl], [r.tl, r.tr, r.br, r.bl]);
                        return "Intersection" === i.status
                    },
                    isContainedWithinObject: function(t) {
                        var e = t.getBoundingRect(),
                            n = new fabric.Point(e.left, e.top),
                            r = new fabric.Point(e.left + e.width, e.top + e.height);
                        return this.isContainedWithinRect(n, r)
                    },
                    isContainedWithinRect: function(t, e) {
                        var n = this.getBoundingRect();
                        return n.left >= t.x && n.left + n.width <= e.x && n.top >= t.y && n.top + n.height <= e.y
                    },
                    containsPoint: function(t) {
                        var e = this._getImageLines(this.oCoords),
                            n = this._findCrossPoints(t, e);
                        return 0 !== n && n % 2 === 1
                    },
                    _getImageLines: function(t) {
                        return {
                            topline: {
                                o: t.tl,
                                d: t.tr
                            },
                            rightline: {
                                o: t.tr,
                                d: t.br
                            },
                            bottomline: {
                                o: t.br,
                                d: t.bl
                            },
                            leftline: {
                                o: t.bl,
                                d: t.tl
                            }
                        }
                    },
                    _findCrossPoints: function(t, e) {
                        var n, r, i, o, s, a, l, u = 0;
                        for (var c in e)
                            if (l = e[c], !(l.o.y < t.y && l.d.y < t.y || l.o.y >= t.y && l.d.y >= t.y || (l.o.x === l.d.x && l.o.x >= t.x ? (s = l.o.x, a = t.y) : (n = 0, r = (l.d.y - l.o.y) / (l.d.x - l.o.x), i = t.y - n * t.x, o = l.o.y - r * l.o.x, s = -(i - o) / (n - r), a = i + n * s), s >= t.x && (u += 1), 2 !== u))) break;
                        return u
                    },
                    getBoundingRectWidth: function() {
                        return this.getBoundingRect().width
                    },
                    getBoundingRectHeight: function() {
                        return this.getBoundingRect().height
                    },
                    getBoundingRect: function() {
                        this.oCoords || this.setCoords();
                        var t = [this.oCoords.tl.x, this.oCoords.tr.x, this.oCoords.br.x, this.oCoords.bl.x],
                            e = fabric.util.array.min(t),
                            n = fabric.util.array.max(t),
                            r = Math.abs(e - n),
                            i = [this.oCoords.tl.y, this.oCoords.tr.y, this.oCoords.br.y, this.oCoords.bl.y],
                            o = fabric.util.array.min(i),
                            s = fabric.util.array.max(i),
                            a = Math.abs(o - s);
                        return {
                            left: e,
                            top: o,
                            width: r,
                            height: a
                        }
                    },
                    getWidth: function() {
                        return this.width * this.scaleX
                    },
                    getHeight: function() {
                        return this.height * this.scaleY
                    },
                    _constrainScale: function(t) {
                        return Math.abs(t) < this.minScaleLimit ? t < 0 ? -this.minScaleLimit : this.minScaleLimit : t
                    },
                    scale: function(t) {
                        return t = this._constrainScale(t), t < 0 && (this.flipX = !this.flipX, this.flipY = !this.flipY, t *= -1), this.scaleX = t, this.scaleY = t, this.setCoords(), this
                    },
                    scaleToWidth: function(t) {
                        var e = this.getBoundingRectWidth() / this.getWidth();
                        return this.scale(t / this.width / e)
                    },
                    scaleToHeight: function(t) {
                        var e = this.getBoundingRectHeight() / this.getHeight();
                        return this.scale(t / this.height / e)
                    },
                    setCoords: function() {
                        var e = t(this.angle),
                            n = this.getViewportTransform(),
                            r = function(t) {
                                return fabric.util.transformPoint(t, n)
                            },
                            i = this._calculateCurrentDimensions(!1),
                            o = i.x,
                            s = i.y;
                        o < 0 && (o = Math.abs(o));
                        var a = Math.sqrt(Math.pow(o / 2, 2) + Math.pow(s / 2, 2)),
                            l = Math.atan(isFinite(s / o) ? s / o : 0),
                            u = Math.cos(l + e) * a,
                            c = Math.sin(l + e) * a,
                            f = Math.sin(e),
                            h = Math.cos(e),
                            d = this.getCenterPoint(),
                            p = new fabric.Point(o, s),
                            g = new fabric.Point(d.x - u, d.y - c),
                            _ = new fabric.Point(g.x + p.x * h, g.y + p.x * f),
                            v = r(new fabric.Point(g.x - p.y * f, g.y + p.y * h)),
                            b = r(new fabric.Point(_.x - p.y * f, _.y + p.y * h)),
                            y = r(g),
                            m = r(_),
                            E = new fabric.Point((y.x + v.x) / 2, (y.y + v.y) / 2),
                            S = new fabric.Point((m.x + y.x) / 2, (m.y + y.y) / 2),
                            O = new fabric.Point((b.x + m.x) / 2, (b.y + m.y) / 2),
                            T = new fabric.Point((b.x + v.x) / 2, (b.y + v.y) / 2),
                            x = new fabric.Point(S.x + f * this.rotatingPointOffset, S.y - h * this.rotatingPointOffset);
                        return this.oCoords = {
                            tl: y,
                            tr: m,
                            br: b,
                            bl: v,
                            ml: E,
                            mt: S,
                            mr: O,
                            mb: T,
                            mtr: x
                        }, this._setCornerCoords && this._setCornerCoords(), this
                    }
                })
            }(), fabric.util.object.extend(fabric.Object.prototype, {
            sendToBack: function() {
                return this.group ? fabric.StaticCanvas.prototype.sendToBack.call(this.group, this) : this.canvas.sendToBack(this), this
            },
            bringToFront: function() {
                return this.group ? fabric.StaticCanvas.prototype.bringToFront.call(this.group, this) : this.canvas.bringToFront(this), this
            },
            sendBackwards: function(t) {
                return this.group ? fabric.StaticCanvas.prototype.sendBackwards.call(this.group, this, t) : this.canvas.sendBackwards(this, t), this
            },
            bringForward: function(t) {
                return this.group ? fabric.StaticCanvas.prototype.bringForward.call(this.group, this, t) : this.canvas.bringForward(this, t), this
            },
            moveTo: function(t) {
                return this.group ? fabric.StaticCanvas.prototype.moveTo.call(this.group, this, t) : this.canvas.moveTo(this, t), this
            }
        }), fabric.util.object.extend(fabric.Object.prototype, {
            getSvgStyles: function() {
                var t = this.fill ? this.fill.toLive ? "url(#SVGID_" + this.fill.id + ")" : this.fill : "none",
                    e = this.fillRule,
                    n = this.stroke ? this.stroke.toLive ? "url(#SVGID_" + this.stroke.id + ")" : this.stroke : "none",
                    r = this.strokeWidth ? this.strokeWidth : "0",
                    i = this.strokeDashArray ? this.strokeDashArray.join(" ") : "",
                    o = this.strokeLineCap ? this.strokeLineCap : "butt",
                    s = this.strokeLineJoin ? this.strokeLineJoin : "miter",
                    a = this.strokeMiterLimit ? this.strokeMiterLimit : "4",
                    l = "undefined" != typeof this.opacity ? this.opacity : "1",
                    u = this.visible ? "" : " visibility: hidden;",
                    c = this.shadow ? "filter: url(#SVGID_" + this.shadow.id + ");" : "";
                return ["stroke: ", n, "; ", "stroke-width: ", r, "; ", "stroke-dasharray: ", i, "; ", "stroke-linecap: ", o, "; ", "stroke-linejoin: ", s, "; ", "stroke-miterlimit: ", a, "; ", "fill: ", t, "; ", "fill-rule: ", e, "; ", "opacity: ", l, ";", c, u].join("")
            },
            getSvgTransform: function() {
                if (this.group && "path-group" === this.group.type) return "";
                var t = fabric.util.toFixed,
                    e = this.getAngle(),
                    n = !this.canvas || this.canvas.svgViewportTransformation ? this.getViewportTransform() : [1, 0, 0, 1, 0, 0],
                    r = fabric.util.transformPoint(this.getCenterPoint(), n),
                    i = fabric.Object.NUM_FRACTION_DIGITS,
                    o = "path-group" === this.type ? "" : "translate(" + t(r.x, i) + " " + t(r.y, i) + ")",
                    s = 0 !== e ? " rotate(" + t(e, i) + ")" : "",
                    a = 1 === this.scaleX && 1 === this.scaleY && 1 === n[0] && 1 === n[3] ? "" : " scale(" + t(this.scaleX * n[0], i) + " " + t(this.scaleY * n[3], i) + ")",
                    l = "path-group" === this.type ? this.width * n[0] : 0,
                    u = this.flipX ? " matrix(-1 0 0 1 " + l + " 0) " : "",
                    c = "path-group" === this.type ? this.height * n[3] : 0,
                    f = this.flipY ? " matrix(1 0 0 -1 0 " + c + ")" : "";
                return [o, s, a, u, f].join("")
            },
            getSvgTransformMatrix: function() {
                return this.transformMatrix ? " matrix(" + this.transformMatrix.join(" ") + ") " : ""
            },
            _createBaseSVGMarkup: function() {
                var t = [];
                return this.fill && this.fill.toLive && t.push(this.fill.toSVG(this, !1)), this.stroke && this.stroke.toLive && t.push(this.stroke.toSVG(this, !1)), this.shadow && t.push(this.shadow.toSVG(this)), t
            }
        }), fabric.util.object.extend(fabric.Object.prototype, {
            hasStateChanged: function() {
                return this.stateProperties.some(function(t) {
                    return this.get(t) !== this.originalState[t]
                }, this)
            },
            saveState: function(t) {
                return this.stateProperties.forEach(function(t) {
                    this.originalState[t] = this.get(t)
                }, this), t && t.stateProperties && t.stateProperties.forEach(function(t) {
                    this.originalState[t] = this.get(t)
                }, this), this
            },
            setupState: function() {
                return this.originalState = {}, this.saveState(), this
            }
        }),
            function() {
                var t = fabric.util.degreesToRadians,
                    e = function() {
                        return "undefined" != typeof G_vmlCanvasManager
                    };
                fabric.util.object.extend(fabric.Object.prototype, {
                    _controlsVisibility: null,
                    _findTargetCorner: function(t) {
                        if (!this.hasControls || !this.active) return !1;
                        var e, n, r = t.x,
                            i = t.y;
                        for (var o in this.oCoords)
                            if (this.isControlVisible(o) && ("mtr" !== o || this.hasRotatingPoint) && (!this.get("lockUniScaling") || "mt" !== o && "mr" !== o && "mb" !== o && "ml" !== o) && (n = this._getImageLines(this.oCoords[o].corner), e = this._findCrossPoints({
                                    x: r,
                                    y: i
                                }, n), 0 !== e && e % 2 === 1)) return this.__corner = o, o;
                        return !1
                    },
                    _setCornerCoords: function() {
                        var e, n, r = this.oCoords,
                            i = t(45 - this.angle),
                            o = Math.sqrt(2 * Math.pow(this.cornerSize, 2)) / 2,
                            s = o * Math.cos(i),
                            a = o * Math.sin(i);
                        for (var l in r) e = r[l].x, n = r[l].y, r[l].corner = {
                            tl: {
                                x: e - a,
                                y: n - s
                            },
                            tr: {
                                x: e + s,
                                y: n - a
                            },
                            bl: {
                                x: e - s,
                                y: n + a
                            },
                            br: {
                                x: e + a,
                                y: n + s
                            }
                        }
                    },
                    _calculateCurrentDimensions: function(t) {
                        var e = this.getViewportTransform(),
                            n = this.strokeWidth,
                            r = this.width,
                            i = this.height,
                            o = "round" === this.strokeLineCap || "square" === this.strokeLineCap,
                            s = "line" === this.type && 0 === this.width,
                            a = "line" === this.type && 0 === this.height,
                            l = s || a,
                            u = o && a || !l,
                            c = o && s || !l;
                        return s ? r = n : a && (i = n), u && (r += r < 0 ? -n : n), c && (i += i < 0 ? -n : n), r = r * this.scaleX + 2 * this.padding, i = i * this.scaleY + 2 * this.padding, t ? fabric.util.transformPoint(new fabric.Point(r, i), e, !0) : {
                            x: r,
                            y: i
                        }
                    },
                    drawBorders: function(t) {
                        if (!this.hasBorders) return this;
                        t.save(), t.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1, t.strokeStyle = this.borderColor, t.lineWidth = 1 / this.borderScaleFactor;
                        var e = this._calculateCurrentDimensions(!0),
                            n = e.x,
                            r = e.y;
                        if (this.group && (n *= this.group.scaleX, r *= this.group.scaleY), t.strokeRect(~~-(n / 2) - .5, ~~-(r / 2) - .5, ~~n + 1, ~~r + 1), this.hasRotatingPoint && this.isControlVisible("mtr") && !this.get("lockRotation") && this.hasControls) {
                            var i = -r / 2;
                            t.beginPath(), t.moveTo(0, i), t.lineTo(0, i - this.rotatingPointOffset), t.closePath(), t.stroke()
                        }
                        return t.restore(), this
                    },
                    drawControls: function(t) {
                        if (!this.hasControls) return this;
                        var e = this._calculateCurrentDimensions(!0),
                            n = e.x,
                            r = e.y,
                            i = -(n / 2),
                            o = -(r / 2),
                            s = this.cornerSize / 2,
                            a = this.transparentCorners ? "strokeRect" : "fillRect";
                        return t.save(), t.lineWidth = 1, t.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1, t.strokeStyle = t.fillStyle = this.cornerColor, this._drawControl("tl", t, a, i - s, o - s), this._drawControl("tr", t, a, i + n - s, o - s), this._drawControl("bl", t, a, i - s, o + r - s), this._drawControl("br", t, a, i + n - s, o + r - s), this.get("lockUniScaling") || (this._drawControl("mt", t, a, i + n / 2 - s, o - s), this._drawControl("mb", t, a, i + n / 2 - s, o + r - s), this._drawControl("mr", t, a, i + n - s, o + r / 2 - s), this._drawControl("ml", t, a, i - s, o + r / 2 - s)), this.hasRotatingPoint && this._drawControl("mtr", t, a, i + n / 2 - s, o - this.rotatingPointOffset - s), t.restore(), this
                    },
                    _drawControl: function(t, n, r, i, o) {
                        var s = this.cornerSize;
                        this.isControlVisible(t) && (e() || this.transparentCorners || n.clearRect(i, o, s, s), n[r](i, o, s, s))
                    },
                    isControlVisible: function(t) {
                        return this._getControlsVisibility()[t]
                    },
                    setControlVisible: function(t, e) {
                        return this._getControlsVisibility()[t] = e, this
                    },
                    setControlsVisibility: function(t) {
                        t || (t = {});
                        for (var e in t) this.setControlVisible(e, t[e]);
                        return this
                    },
                    _getControlsVisibility: function() {
                        return this._controlsVisibility || (this._controlsVisibility = {
                            tl: !0,
                            tr: !0,
                            br: !0,
                            bl: !0,
                            ml: !0,
                            mt: !0,
                            mr: !0,
                            mb: !0,
                            mtr: !0
                        }), this._controlsVisibility
                    }
                })
            }(), fabric.util.object.extend(fabric.StaticCanvas.prototype, {
            FX_DURATION: 500,
            fxCenterObjectH: function(t, e) {
                e = e || {};
                var n = function() {},
                    r = e.onComplete || n,
                    i = e.onChange || n,
                    o = this;
                return fabric.util.animate({
                    startValue: t.get("left"),
                    endValue: this.getCenter().left,
                    duration: this.FX_DURATION,
                    onChange: function(e) {
                        t.set("left", e), o.renderAll(), i()
                    },
                    onComplete: function() {
                        t.setCoords(), r()
                    }
                }), this
            },
            fxCenterObjectV: function(t, e) {
                e = e || {};
                var n = function() {},
                    r = e.onComplete || n,
                    i = e.onChange || n,
                    o = this;
                return fabric.util.animate({
                    startValue: t.get("top"),
                    endValue: this.getCenter().top,
                    duration: this.FX_DURATION,
                    onChange: function(e) {
                        t.set("top", e), o.renderAll(), i()
                    },
                    onComplete: function() {
                        t.setCoords(), r()
                    }
                }), this
            },
            fxRemove: function(t, e) {
                e = e || {};
                var n = function() {},
                    r = e.onComplete || n,
                    i = e.onChange || n,
                    o = this;
                return fabric.util.animate({
                    startValue: t.get("opacity"),
                    endValue: 0,
                    duration: this.FX_DURATION,
                    onStart: function() {
                        t.set("active", !1)
                    },
                    onChange: function(e) {
                        t.set("opacity", e), o.renderAll(), i()
                    },
                    onComplete: function() {
                        o.remove(t), r()
                    }
                }), this
            }
        }), fabric.util.object.extend(fabric.Object.prototype, {
            animate: function() {
                if (arguments[0] && "object" === _typeof(arguments[0])) {
                    var t, e, n = [];
                    for (t in arguments[0]) n.push(t);
                    for (var r = 0, i = n.length; r < i; r++) t = n[r], e = r !== i - 1, this._animate(t, arguments[0][t], arguments[1], e)
                } else this._animate.apply(this, arguments);
                return this
            },
            _animate: function(t, e, n, r) {
                var i, o = this;
                e = e.toString(), n = n ? fabric.util.object.clone(n) : {}, ~t.indexOf(".") && (i = t.split("."));
                var s = i ? this.get(i[0])[i[1]] : this.get(t);
                "from" in n || (n.from = s), e = ~e.indexOf("=") ? s + parseFloat(e.replace("=", "")) : parseFloat(e), fabric.util.animate({
                    startValue: n.from,
                    endValue: e,
                    byValue: n.by,
                    easing: n.easing,
                    duration: n.duration,
                    abort: n.abort && function() {
                        return n.abort.call(o)
                    },
                    onChange: function(e) {
                        i ? o[i[0]][i[1]] = e : o.set(t, e), r || n.onChange && n.onChange()
                    },
                    onComplete: function() {
                        r || (o.setCoords(), n.onComplete && n.onComplete())
                    }
                })
            }
        }),
            function(t) {
                function e(t, e) {
                    var n = t.origin,
                        r = t.axis1,
                        i = t.axis2,
                        o = t.dimension,
                        s = e.nearest,
                        a = e.center,
                        l = e.farthest;
                    return function() {
                        switch (this.get(n)) {
                            case s:
                                return Math.min(this.get(r), this.get(i));
                            case a:
                                return Math.min(this.get(r), this.get(i)) + .5 * this.get(o);
                            case l:
                                return Math.max(this.get(r), this.get(i))
                        }
                    }
                }
                var n = t.fabric || (t.fabric = {}),
                    r = n.util.object.extend,
                    i = {
                        x1: 1,
                        x2: 1,
                        y1: 1,
                        y2: 1
                    },
                    o = n.StaticCanvas.supports("setLineDash");
                return n.Line ? void n.warn("fabric.Line is already defined") : (n.Line = n.util.createClass(n.Object, {
                    type: "line",
                    x1: 0,
                    y1: 0,
                    x2: 0,
                    y2: 0,
                    initialize: function(t, e) {
                        e = e || {}, t || (t = [0, 0, 0, 0]), this.callSuper("initialize", e), this.set("x1", t[0]), this.set("y1", t[1]), this.set("x2", t[2]), this.set("y2", t[3]), this._setWidthHeight(e)
                    },
                    _setWidthHeight: function(t) {
                        t || (t = {}), this.width = Math.abs(this.x2 - this.x1), this.height = Math.abs(this.y2 - this.y1), this.left = "left" in t ? t.left : this._getLeftToOriginX(), this.top = "top" in t ? t.top : this._getTopToOriginY()
                    },
                    _set: function(t, e) {
                        return this.callSuper("_set", t, e), "undefined" != typeof i[t] && this._setWidthHeight(), this
                    },
                    _getLeftToOriginX: e({
                        origin: "originX",
                        axis1: "x1",
                        axis2: "x2",
                        dimension: "width"
                    }, {
                        nearest: "left",
                        center: "center",
                        farthest: "right"
                    }),
                    _getTopToOriginY: e({
                        origin: "originY",
                        axis1: "y1",
                        axis2: "y2",
                        dimension: "height"
                    }, {
                        nearest: "top",
                        center: "center",
                        farthest: "bottom"
                    }),
                    _render: function(t, e) {
                        if (t.beginPath(), e) {
                            var n = this.getCenterPoint();
                            t.translate(n.x - this.strokeWidth / 2, n.y - this.strokeWidth / 2)
                        }
                        if (!this.strokeDashArray || this.strokeDashArray && o) {
                            var r = this.calcLinePoints();
                            t.moveTo(r.x1, r.y1), t.lineTo(r.x2, r.y2)
                        }
                        t.lineWidth = this.strokeWidth;
                        var i = t.strokeStyle;
                        t.strokeStyle = this.stroke || t.fillStyle, this.stroke && this._renderStroke(t), t.strokeStyle = i
                    },
                    _renderDashedStroke: function(t) {
                        var e = this.calcLinePoints();
                        t.beginPath(), n.util.drawDashedLine(t, e.x1, e.y1, e.x2, e.y2, this.strokeDashArray), t.closePath()
                    },
                    toObject: function(t) {
                        return r(this.callSuper("toObject", t), this.calcLinePoints())
                    },
                    calcLinePoints: function() {
                        var t = this.x1 <= this.x2 ? -1 : 1,
                            e = this.y1 <= this.y2 ? -1 : 1,
                            n = t * this.width * .5,
                            r = e * this.height * .5,
                            i = t * this.width * -.5,
                            o = e * this.height * -.5;
                        return {
                            x1: n,
                            x2: i,
                            y1: r,
                            y2: o
                        }
                    },
                    toSVG: function(t) {
                        var e = this._createBaseSVGMarkup(),
                            n = {
                                x1: this.x1,
                                x2: this.x2,
                                y1: this.y1,
                                y2: this.y2
                            };
                        return this.group && "path-group" === this.group.type || (n = this.calcLinePoints()), e.push("<line ", 'x1="', n.x1, '" y1="', n.y1, '" x2="', n.x2, '" y2="', n.y2, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), this.getSvgTransformMatrix(), '"/>\n'), t ? t(e.join("")) : e.join("")
                    },
                    complexity: function() {
                        return 1
                    }
                }), n.Line.ATTRIBUTE_NAMES = n.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")), n.Line.fromElement = function(t, e) {
                    var i = n.parseAttributes(t, n.Line.ATTRIBUTE_NAMES),
                        o = [i.x1 || 0, i.y1 || 0, i.x2 || 0, i.y2 || 0];
                    return new n.Line(o, r(i, e))
                }, void(n.Line.fromObject = function(t) {
                    var e = [t.x1, t.y1, t.x2, t.y2];
                    return new n.Line(e, t)
                }))
            }(exports),
            function(t) {
                function e(t) {
                    return "radius" in t && t.radius >= 0
                }
                var n = t.fabric || (t.fabric = {}),
                    r = Math.PI,
                    i = n.util.object.extend;
                return n.Circle ? void n.warn("fabric.Circle is already defined.") : (n.Circle = n.util.createClass(n.Object, {
                    type: "circle",
                    radius: 0,
                    startAngle: 0,
                    endAngle: 2 * r,
                    initialize: function(t) {
                        t = t || {}, this.callSuper("initialize", t), this.set("radius", t.radius || 0), this.startAngle = t.startAngle || this.startAngle, this.endAngle = t.endAngle || this.endAngle
                    },
                    _set: function(t, e) {
                        return this.callSuper("_set", t, e), "radius" === t && this.setRadius(e), this
                    },
                    toObject: function(t) {
                        return i(this.callSuper("toObject", t), {
                            radius: this.get("radius"),
                            startAngle: this.startAngle,
                            endAngle: this.endAngle
                        })
                    },
                    toSVG: function(t) {
                        var e = this._createBaseSVGMarkup(),
                            n = 0,
                            i = 0,
                            o = (this.endAngle - this.startAngle) % (2 * r);
                        if (0 === o) this.group && "path-group" === this.group.type && (n = this.left + this.radius, i = this.top + this.radius), e.push("<circle ", 'cx="' + n + '" cy="' + i + '" ', 'r="', this.radius, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), " ", this.getSvgTransformMatrix(), '"/>\n');
                        else {
                            var s = Math.cos(this.startAngle) * this.radius,
                                a = Math.sin(this.startAngle) * this.radius,
                                l = Math.cos(this.endAngle) * this.radius,
                                u = Math.sin(this.endAngle) * this.radius,
                                c = o > r ? "1" : "0";
                            e.push('<path d="M ' + s + " " + a, " A " + this.radius + " " + this.radius, " 0 ", +c + " 1", " " + l + " " + u, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), " ", this.getSvgTransformMatrix(), '"/>\n')
                        }
                        return t ? t(e.join("")) : e.join("")
                    },
                    _render: function(t, e) {
                        t.beginPath(), t.arc(e ? this.left + this.radius : 0, e ? this.top + this.radius : 0, this.radius, this.startAngle, this.endAngle, !1), this._renderFill(t), this._renderStroke(t)
                    },
                    getRadiusX: function() {
                        return this.get("radius") * this.get("scaleX")
                    },
                    getRadiusY: function() {
                        return this.get("radius") * this.get("scaleY")
                    },
                    setRadius: function(t) {
                        this.radius = t, this.set("width", 2 * t).set("height", 2 * t)
                    },
                    complexity: function() {
                        return 1
                    }
                }), n.Circle.ATTRIBUTE_NAMES = n.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")), n.Circle.fromElement = function(t, r) {
                    r || (r = {});
                    var o = n.parseAttributes(t, n.Circle.ATTRIBUTE_NAMES);
                    if (!e(o)) throw new Error("value of `r` attribute is required and can not be negative");
                    o.left = o.left || 0, o.top = o.top || 0;
                    var s = new n.Circle(i(o, r));
                    return s.left -= s.radius, s.top -= s.radius, s
                }, void(n.Circle.fromObject = function(t) {
                    return new n.Circle(t)
                }))
            }(exports),
            function(t) {
                var e = t.fabric || (t.fabric = {});
                return e.Triangle ? void e.warn("fabric.Triangle is already defined") : (e.Triangle = e.util.createClass(e.Object, {
                    type: "triangle",
                    initialize: function(t) {
                        t = t || {}, this.callSuper("initialize", t), this.set("width", t.width || 100).set("height", t.height || 100)
                    },
                    _render: function(t) {
                        var e = this.width / 2,
                            n = this.height / 2;
                        t.beginPath(), t.moveTo(-e, n), t.lineTo(0, -n), t.lineTo(e, n), t.closePath(), this._renderFill(t), this._renderStroke(t)
                    },
                    _renderDashedStroke: function(t) {
                        var n = this.width / 2,
                            r = this.height / 2;
                        t.beginPath(), e.util.drawDashedLine(t, -n, r, 0, -r, this.strokeDashArray), e.util.drawDashedLine(t, 0, -r, n, r, this.strokeDashArray), e.util.drawDashedLine(t, n, r, -n, r, this.strokeDashArray), t.closePath()
                    },
                    toSVG: function(t) {
                        var e = this._createBaseSVGMarkup(),
                            n = this.width / 2,
                            r = this.height / 2,
                            i = [-n + " " + r, "0 " + -r, n + " " + r].join(",");
                        return e.push("<polygon ", 'points="', i, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), '"/>'), t ? t(e.join("")) : e.join("")
                    },
                    complexity: function() {
                        return 1
                    }
                }), void(e.Triangle.fromObject = function(t) {
                    return new e.Triangle(t)
                }))
            }(exports),
            function(t) {
                var e = t.fabric || (t.fabric = {}),
                    n = 2 * Math.PI,
                    r = e.util.object.extend;
                return e.Ellipse ? void e.warn("fabric.Ellipse is already defined.") : (e.Ellipse = e.util.createClass(e.Object, {
                    type: "ellipse",
                    rx: 0,
                    ry: 0,
                    initialize: function(t) {
                        t = t || {}, this.callSuper("initialize", t), this.set("rx", t.rx || 0), this.set("ry", t.ry || 0)
                    },
                    _set: function(t, e) {
                        switch (this.callSuper("_set", t, e), t) {
                            case "rx":
                                this.rx = e, this.set("width", 2 * e);
                                break;
                            case "ry":
                                this.ry = e, this.set("height", 2 * e)
                        }
                        return this
                    },
                    getRx: function() {
                        return this.get("rx") * this.get("scaleX")
                    },
                    getRy: function() {
                        return this.get("ry") * this.get("scaleY")
                    },
                    toObject: function(t) {
                        return r(this.callSuper("toObject", t), {
                            rx: this.get("rx"),
                            ry: this.get("ry")
                        })
                    },
                    toSVG: function(t) {
                        var e = this._createBaseSVGMarkup(),
                            n = 0,
                            r = 0;
                        return this.group && "path-group" === this.group.type && (n = this.left + this.rx, r = this.top + this.ry), e.push("<ellipse ", 'cx="', n, '" cy="', r, '" ', 'rx="', this.rx, '" ry="', this.ry, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), this.getSvgTransformMatrix(), '"/>\n'), t ? t(e.join("")) : e.join("")
                    },
                    _render: function(t, e) {
                        t.beginPath(), t.save(), t.transform(1, 0, 0, this.ry / this.rx, 0, 0), t.arc(e ? this.left + this.rx : 0, e ? (this.top + this.ry) * this.rx / this.ry : 0, this.rx, 0, n, !1), t.restore(), this._renderFill(t), this._renderStroke(t)
                    },
                    complexity: function() {
                        return 1
                    }
                }), e.Ellipse.ATTRIBUTE_NAMES = e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")), e.Ellipse.fromElement = function(t, n) {
                    n || (n = {});
                    var i = e.parseAttributes(t, e.Ellipse.ATTRIBUTE_NAMES);
                    i.left = i.left || 0, i.top = i.top || 0;
                    var o = new e.Ellipse(r(i, n));
                    return o.top -= o.ry, o.left -= o.rx, o
                }, void(e.Ellipse.fromObject = function(t) {
                    return new e.Ellipse(t)
                }))
            }(exports),
            function(t) {
                var e = t.fabric || (t.fabric = {}),
                    n = e.util.object.extend;
                if (e.Rect) return void console.warn("fabric.Rect is already defined");
                var r = e.Object.prototype.stateProperties.concat();
                r.push("rx", "ry", "x", "y"), e.Rect = e.util.createClass(e.Object, {
                    stateProperties: r,
                    type: "rect",
                    rx: 0,
                    ry: 0,
                    strokeDashArray: null,
                    initialize: function(t) {
                        t = t || {}, this.callSuper("initialize", t), this._initRxRy()
                    },
                    _initRxRy: function() {
                        this.rx && !this.ry ? this.ry = this.rx : this.ry && !this.rx && (this.rx = this.ry)
                    },
                    _render: function(t, e) {
                        if (1 === this.width && 1 === this.height) return void t.fillRect(0, 0, 1, 1);
                        var n = this.rx ? Math.min(this.rx, this.width / 2) : 0,
                            r = this.ry ? Math.min(this.ry, this.height / 2) : 0,
                            i = this.width,
                            o = this.height,
                            s = e ? this.left : -this.width / 2,
                            a = e ? this.top : -this.height / 2,
                            l = 0 !== n || 0 !== r,
                            u = .4477152502;
                        t.beginPath(), t.moveTo(s + n, a), t.lineTo(s + i - n, a), l && t.bezierCurveTo(s + i - u * n, a, s + i, a + u * r, s + i, a + r), t.lineTo(s + i, a + o - r), l && t.bezierCurveTo(s + i, a + o - u * r, s + i - u * n, a + o, s + i - n, a + o), t.lineTo(s + n, a + o), l && t.bezierCurveTo(s + u * n, a + o, s, a + o - u * r, s, a + o - r), t.lineTo(s, a + r), l && t.bezierCurveTo(s, a + u * r, s + u * n, a, s + n, a), t.closePath(), this._renderFill(t), this._renderStroke(t)
                    },
                    _renderDashedStroke: function(t) {
                        var n = -this.width / 2,
                            r = -this.height / 2,
                            i = this.width,
                            o = this.height;
                        t.beginPath(), e.util.drawDashedLine(t, n, r, n + i, r, this.strokeDashArray), e.util.drawDashedLine(t, n + i, r, n + i, r + o, this.strokeDashArray), e.util.drawDashedLine(t, n + i, r + o, n, r + o, this.strokeDashArray), e.util.drawDashedLine(t, n, r + o, n, r, this.strokeDashArray), t.closePath()
                    },
                    toObject: function(t) {
                        var e = n(this.callSuper("toObject", t), {
                            rx: this.get("rx") || 0,
                            ry: this.get("ry") || 0
                        });
                        return this.includeDefaultValues || this._removeDefaultValues(e), e
                    },
                    toSVG: function(t) {
                        var e = this._createBaseSVGMarkup(),
                            n = this.left,
                            r = this.top;
                        return this.group && "path-group" === this.group.type || (n = -this.width / 2, r = -this.height / 2), e.push("<rect ", 'x="', n, '" y="', r, '" rx="', this.get("rx"), '" ry="', this.get("ry"), '" width="', this.width, '" height="', this.height, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), this.getSvgTransformMatrix(), '"/>\n'), t ? t(e.join("")) : e.join("")
                    },
                    complexity: function() {
                        return 1
                    }
                }), e.Rect.ATTRIBUTE_NAMES = e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")), e.Rect.fromElement = function(t, r) {
                    if (!t) return null;
                    r = r || {};
                    var i = e.parseAttributes(t, e.Rect.ATTRIBUTE_NAMES);
                    i.left = i.left || 0, i.top = i.top || 0;
                    var o = new e.Rect(n(r ? e.util.object.clone(r) : {}, i));
                    return o.visible = o.width > 0 && o.height > 0, o
                }, e.Rect.fromObject = function(t) {
                    return new e.Rect(t)
                }
            }(exports),
            function(t) {
                var e = t.fabric || (t.fabric = {});
                return e.Polyline ? void e.warn("fabric.Polyline is already defined") : (e.Polyline = e.util.createClass(e.Object, {
                    type: "polyline",
                    points: null,
                    minX: 0,
                    minY: 0,
                    initialize: function(t, n) {
                        return e.Polygon.prototype.initialize.call(this, t, n)
                    },
                    _calcDimensions: function() {
                        return e.Polygon.prototype._calcDimensions.call(this)
                    },
                    _applyPointOffset: function() {
                        return e.Polygon.prototype._applyPointOffset.call(this)
                    },
                    toObject: function(t) {
                        return e.Polygon.prototype.toObject.call(this, t)
                    },
                    toSVG: function(t) {
                        return e.Polygon.prototype.toSVG.call(this, t)
                    },
                    _render: function(t) {
                        e.Polygon.prototype.commonRender.call(this, t) && (this._renderFill(t), this._renderStroke(t))
                    },
                    _renderDashedStroke: function(t) {
                        var n, r;
                        t.beginPath();
                        for (var i = 0, o = this.points.length; i < o; i++) n = this.points[i], r = this.points[i + 1] || n, e.util.drawDashedLine(t, n.x, n.y, r.x, r.y, this.strokeDashArray)
                    },
                    complexity: function() {
                        return this.get("points").length
                    }
                }), e.Polyline.ATTRIBUTE_NAMES = e.SHARED_ATTRIBUTES.concat(), e.Polyline.fromElement = function(t, n) {
                    if (!t) return null;
                    n || (n = {});
                    var r = e.parsePointsAttribute(t.getAttribute("points")),
                        i = e.parseAttributes(t, e.Polyline.ATTRIBUTE_NAMES);
                    return new e.Polyline(r, e.util.object.extend(i, n))
                }, void(e.Polyline.fromObject = function(t) {
                    var n = t.points;
                    return new e.Polyline(n, t, !0)
                }))
            }(exports),
            function(t) {
                var e = t.fabric || (t.fabric = {}),
                    n = e.util.object.extend,
                    r = e.util.array.min,
                    i = e.util.array.max,
                    o = e.util.toFixed;
                return e.Polygon ? void e.warn("fabric.Polygon is already defined") : (e.Polygon = e.util.createClass(e.Object, {
                    type: "polygon",
                    points: null,
                    minX: 0,
                    minY: 0,
                    initialize: function(t, e) {
                        e = e || {}, this.points = t || [], this.callSuper("initialize", e), this._calcDimensions(), "top" in e || (this.top = this.minY), "left" in e || (this.left = this.minX)
                    },
                    _calcDimensions: function() {
                        var t = this.points,
                            e = r(t, "x"),
                            n = r(t, "y"),
                            o = i(t, "x"),
                            s = i(t, "y");
                        this.width = o - e || 0, this.height = s - n || 0, this.minX = e || 0, this.minY = n || 0
                    },
                    _applyPointOffset: function() {
                        this.points.forEach(function(t) {
                            t.x -= this.minX + this.width / 2, t.y -= this.minY + this.height / 2
                        }, this)
                    },
                    toObject: function(t) {
                        return n(this.callSuper("toObject", t), {
                            points: this.points.concat()
                        })
                    },
                    toSVG: function(t) {
                        for (var e = [], n = this._createBaseSVGMarkup(), r = 0, i = this.points.length; r < i; r++) e.push(o(this.points[r].x, 2), ",", o(this.points[r].y, 2), " ");
                        return n.push("<", this.type, " ", 'points="', e.join(""), '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), " ", this.getSvgTransformMatrix(), '"/>\n'), t ? t(n.join("")) : n.join("")
                    },
                    _render: function(t) {
                        this.commonRender(t) && (this._renderFill(t), (this.stroke || this.strokeDashArray) && (t.closePath(), this._renderStroke(t)))
                    },
                    commonRender: function(t) {
                        var e, n = this.points.length;
                        if (!n || isNaN(this.points[n - 1].y)) return !1;
                        t.beginPath(), this._applyPointOffset && (this.group && "path-group" === this.group.type || this._applyPointOffset(), this._applyPointOffset = null), t.moveTo(this.points[0].x, this.points[0].y);
                        for (var r = 0; r < n; r++) e = this.points[r], t.lineTo(e.x, e.y);
                        return !0
                    },
                    _renderDashedStroke: function(t) {
                        e.Polyline.prototype._renderDashedStroke.call(this, t), t.closePath()
                    },
                    complexity: function() {
                        return this.points.length
                    }
                }), e.Polygon.ATTRIBUTE_NAMES = e.SHARED_ATTRIBUTES.concat(), e.Polygon.fromElement = function(t, r) {
                    if (!t) return null;
                    r || (r = {});
                    var i = e.parsePointsAttribute(t.getAttribute("points")),
                        o = e.parseAttributes(t, e.Polygon.ATTRIBUTE_NAMES);
                    return new e.Polygon(i, n(o, r))
                }, void(e.Polygon.fromObject = function(t) {
                    return new e.Polygon(t.points, t, !0)
                }))
            }(exports),
            function(t) {
                var e = t.fabric || (t.fabric = {}),
                    n = e.util.array.min,
                    r = e.util.array.max,
                    i = e.util.object.extend,
                    o = Object.prototype.toString,
                    s = e.util.drawArc,
                    a = {
                        m: 2,
                        l: 2,
                        h: 1,
                        v: 1,
                        c: 6,
                        s: 4,
                        q: 4,
                        t: 2,
                        a: 7
                    },
                    l = {
                        m: "l",
                        M: "L"
                    };
                return e.Path ? void e.warn("fabric.Path is already defined") : (e.Path = e.util.createClass(e.Object, {
                    type: "path",
                    path: null,
                    minX: 0,
                    minY: 0,
                    initialize: function(t, e) {
                        if (e = e || {}, this.setOptions(e), !t) throw new Error("`path` argument is required");
                        var n = "[object Array]" === o.call(t);
                        this.path = n ? t : t.match && t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi), this.path && (n || (this.path = this._parsePath()), this._setPositionDimensions(), e.sourcePath && this.setSourcePath(e.sourcePath))
                    },
                    _setPositionDimensions: function() {
                        var t = this._parseDimensions();
                        this.minX = t.left, this.minY = t.top, this.width = t.width, this.height = t.height, t.left += "center" === this.originX ? this.width / 2 : "right" === this.originX ? this.width : 0, t.top += "center" === this.originY ? this.height / 2 : "bottom" === this.originY ? this.height : 0, this.top = this.top || t.top, this.left = this.left || t.left,
                            this.pathOffset = this.pathOffset || {
                                x: this.minX + this.width / 2,
                                y: this.minY + this.height / 2
                            }
                    },
                    _render: function(t) {
                        var e, n, r, i = null,
                            o = 0,
                            a = 0,
                            l = 0,
                            u = 0,
                            c = 0,
                            f = 0,
                            h = -this.pathOffset.x,
                            d = -this.pathOffset.y;
                        this.group && "path-group" === this.group.type && (h = 0, d = 0), t.beginPath();
                        for (var p = 0, g = this.path.length; p < g; ++p) {
                            switch (e = this.path[p], e[0]) {
                                case "l":
                                    l += e[1], u += e[2], t.lineTo(l + h, u + d);
                                    break;
                                case "L":
                                    l = e[1], u = e[2], t.lineTo(l + h, u + d);
                                    break;
                                case "h":
                                    l += e[1], t.lineTo(l + h, u + d);
                                    break;
                                case "H":
                                    l = e[1], t.lineTo(l + h, u + d);
                                    break;
                                case "v":
                                    u += e[1], t.lineTo(l + h, u + d);
                                    break;
                                case "V":
                                    u = e[1], t.lineTo(l + h, u + d);
                                    break;
                                case "m":
                                    l += e[1], u += e[2], o = l, a = u, t.moveTo(l + h, u + d);
                                    break;
                                case "M":
                                    l = e[1], u = e[2], o = l, a = u, t.moveTo(l + h, u + d);
                                    break;
                                case "c":
                                    n = l + e[5], r = u + e[6], c = l + e[3], f = u + e[4], t.bezierCurveTo(l + e[1] + h, u + e[2] + d, c + h, f + d, n + h, r + d), l = n, u = r;
                                    break;
                                case "C":
                                    l = e[5], u = e[6], c = e[3], f = e[4], t.bezierCurveTo(e[1] + h, e[2] + d, c + h, f + d, l + h, u + d);
                                    break;
                                case "s":
                                    n = l + e[3], r = u + e[4], null === i[0].match(/[CcSs]/) ? (c = l, f = u) : (c = 2 * l - c, f = 2 * u - f), t.bezierCurveTo(c + h, f + d, l + e[1] + h, u + e[2] + d, n + h, r + d), c = l + e[1], f = u + e[2], l = n, u = r;
                                    break;
                                case "S":
                                    n = e[3], r = e[4], null === i[0].match(/[CcSs]/) ? (c = l, f = u) : (c = 2 * l - c, f = 2 * u - f), t.bezierCurveTo(c + h, f + d, e[1] + h, e[2] + d, n + h, r + d), l = n, u = r, c = e[1], f = e[2];
                                    break;
                                case "q":
                                    n = l + e[3], r = u + e[4], c = l + e[1], f = u + e[2], t.quadraticCurveTo(c + h, f + d, n + h, r + d), l = n, u = r;
                                    break;
                                case "Q":
                                    n = e[3], r = e[4], t.quadraticCurveTo(e[1] + h, e[2] + d, n + h, r + d), l = n, u = r, c = e[1], f = e[2];
                                    break;
                                case "t":
                                    n = l + e[1], r = u + e[2], null === i[0].match(/[QqTt]/) ? (c = l, f = u) : (c = 2 * l - c, f = 2 * u - f), t.quadraticCurveTo(c + h, f + d, n + h, r + d), l = n, u = r;
                                    break;
                                case "T":
                                    n = e[1], r = e[2], null === i[0].match(/[QqTt]/) ? (c = l, f = u) : (c = 2 * l - c, f = 2 * u - f), t.quadraticCurveTo(c + h, f + d, n + h, r + d), l = n, u = r;
                                    break;
                                case "a":
                                    s(t, l + h, u + d, [e[1], e[2], e[3], e[4], e[5], e[6] + l + h, e[7] + u + d]), l += e[6], u += e[7];
                                    break;
                                case "A":
                                    s(t, l + h, u + d, [e[1], e[2], e[3], e[4], e[5], e[6] + h, e[7] + d]), l = e[6], u = e[7];
                                    break;
                                case "z":
                                case "Z":
                                    l = o, u = a, t.closePath()
                            }
                            i = e
                        }
                        this._renderFill(t), this._renderStroke(t)
                    },
                    render: function(t, n) {
                        this.visible && (t.save(), this._setupCompositeOperation(t), n || this.transform(t), this._setStrokeStyles(t), this._setFillStyles(t), this.group && "path-group" === this.group.type && t.translate(-this.group.width / 2, -this.group.height / 2), this.transformMatrix && t.transform.apply(t, this.transformMatrix), this._setOpacity(t), this._setShadow(t), this.clipTo && e.util.clipContext(this, t), this._render(t, n), this.clipTo && t.restore(), this._removeShadow(t), this._restoreCompositeOperation(t), t.restore())
                    },
                    toString: function() {
                        return "#<fabric.Path (" + this.complexity() + '): { "top": ' + this.top + ', "left": ' + this.left + " }>"
                    },
                    toObject: function(t) {
                        var e = i(this.callSuper("toObject", t), {
                            path: this.path.map(function(t) {
                                return t.slice()
                            }),
                            pathOffset: this.pathOffset
                        });
                        return this.sourcePath && (e.sourcePath = this.sourcePath), this.transformMatrix && (e.transformMatrix = this.transformMatrix), e
                    },
                    toDatalessObject: function(t) {
                        var e = this.toObject(t);
                        return this.sourcePath && (e.path = this.sourcePath), delete e.sourcePath, e
                    },
                    toSVG: function(t) {
                        for (var e = [], n = this._createBaseSVGMarkup(), r = "", i = 0, o = this.path.length; i < o; i++) e.push(this.path[i].join(" "));
                        var s = e.join(" ");
                        return this.group && "path-group" === this.group.type || (r = " translate(" + -this.pathOffset.x + ", " + -this.pathOffset.y + ") "), n.push("<path ", 'd="', s, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), r, this.getSvgTransformMatrix(), '" stroke-linecap="round" ', "/>\n"), t ? t(n.join("")) : n.join("")
                    },
                    complexity: function() {
                        return this.path.length
                    },
                    _parsePath: function() {
                        for (var t, e, n, r, i, o = [], s = [], u = /([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi, c = 0, f = this.path.length; c < f; c++) {
                            for (t = this.path[c], r = t.slice(1).trim(), s.length = 0; n = u.exec(r);) s.push(n[0]);
                            i = [t.charAt(0)];
                            for (var h = 0, d = s.length; h < d; h++) e = parseFloat(s[h]), isNaN(e) || i.push(e);
                            var p = i[0],
                                g = a[p.toLowerCase()],
                                _ = l[p] || p;
                            if (i.length - 1 > g)
                                for (var v = 1, b = i.length; v < b; v += g) o.push([p].concat(i.slice(v, v + g))), p = _;
                            else o.push(i)
                        }
                        return o
                    },
                    _parseDimensions: function() {
                        for (var t, i, o, s, a = [], l = [], u = null, c = 0, f = 0, h = 0, d = 0, p = 0, g = 0, _ = 0, v = this.path.length; _ < v; ++_) {
                            switch (t = this.path[_], t[0]) {
                                case "l":
                                    h += t[1], d += t[2], s = [];
                                    break;
                                case "L":
                                    h = t[1], d = t[2], s = [];
                                    break;
                                case "h":
                                    h += t[1], s = [];
                                    break;
                                case "H":
                                    h = t[1], s = [];
                                    break;
                                case "v":
                                    d += t[1], s = [];
                                    break;
                                case "V":
                                    d = t[1], s = [];
                                    break;
                                case "m":
                                    h += t[1], d += t[2], c = h, f = d, s = [];
                                    break;
                                case "M":
                                    h = t[1], d = t[2], c = h, f = d, s = [];
                                    break;
                                case "c":
                                    i = h + t[5], o = d + t[6], p = h + t[3], g = d + t[4], s = e.util.getBoundsOfCurve(h, d, h + t[1], d + t[2], p, g, i, o), h = i, d = o;
                                    break;
                                case "C":
                                    h = t[5], d = t[6], p = t[3], g = t[4], s = e.util.getBoundsOfCurve(h, d, t[1], t[2], p, g, h, d);
                                    break;
                                case "s":
                                    i = h + t[3], o = d + t[4], null === u[0].match(/[CcSs]/) ? (p = h, g = d) : (p = 2 * h - p, g = 2 * d - g), s = e.util.getBoundsOfCurve(h, d, p, g, h + t[1], d + t[2], i, o), p = h + t[1], g = d + t[2], h = i, d = o;
                                    break;
                                case "S":
                                    i = t[3], o = t[4], null === u[0].match(/[CcSs]/) ? (p = h, g = d) : (p = 2 * h - p, g = 2 * d - g), s = e.util.getBoundsOfCurve(h, d, p, g, t[1], t[2], i, o), h = i, d = o, p = t[1], g = t[2];
                                    break;
                                case "q":
                                    i = h + t[3], o = d + t[4], p = h + t[1], g = d + t[2], s = e.util.getBoundsOfCurve(h, d, p, g, p, g, i, o), h = i, d = o;
                                    break;
                                case "Q":
                                    p = t[1], g = t[2], s = e.util.getBoundsOfCurve(h, d, p, g, p, g, t[3], t[4]), h = t[3], d = t[4];
                                    break;
                                case "t":
                                    i = h + t[1], o = d + t[2], null === u[0].match(/[QqTt]/) ? (p = h, g = d) : (p = 2 * h - p, g = 2 * d - g), s = e.util.getBoundsOfCurve(h, d, p, g, p, g, i, o), h = i, d = o;
                                    break;
                                case "T":
                                    i = t[1], o = t[2], null === u[0].match(/[QqTt]/) ? (p = h, g = d) : (p = 2 * h - p, g = 2 * d - g), s = e.util.getBoundsOfCurve(h, d, p, g, p, g, i, o), h = i, d = o;
                                    break;
                                case "a":
                                    s = e.util.getBoundsOfArc(h, d, t[1], t[2], t[3], t[4], t[5], t[6] + h, t[7] + d), h += t[6], d += t[7];
                                    break;
                                case "A":
                                    s = e.util.getBoundsOfArc(h, d, t[1], t[2], t[3], t[4], t[5], t[6], t[7]), h = t[6], d = t[7];
                                    break;
                                case "z":
                                case "Z":
                                    h = c, d = f
                            }
                            u = t, s.forEach(function(t) {
                                a.push(t.x), l.push(t.y)
                            }), a.push(h), l.push(d)
                        }
                        var b = n(a),
                            y = n(l),
                            m = r(a),
                            E = r(l),
                            S = m - b,
                            O = E - y,
                            T = {
                                left: b,
                                top: y,
                                width: S,
                                height: O
                            };
                        return T
                    }
                }), e.Path.fromObject = function(t, n) {
                    "string" == typeof t.path ? e.loadSVGFromURL(t.path, function(r) {
                        var i = r[0],
                            o = t.path;
                        delete t.path, e.util.object.extend(i, t), i.setSourcePath(o), n(i)
                    }) : n(new e.Path(t.path, t))
                }, e.Path.ATTRIBUTE_NAMES = e.SHARED_ATTRIBUTES.concat(["d"]), e.Path.fromElement = function(t, n, r) {
                    var o = e.parseAttributes(t, e.Path.ATTRIBUTE_NAMES);
                    n && n(new e.Path(o.d, i(o, r)))
                }, void(e.Path.async = !0))
            }(exports),
            function(t) {
                var e = t.fabric || (t.fabric = {}),
                    n = e.util.object.extend,
                    r = e.util.array.invoke,
                    i = e.Object.prototype.toObject;
                return e.PathGroup ? void e.warn("fabric.PathGroup is already defined") : (e.PathGroup = e.util.createClass(e.Path, {
                    type: "path-group",
                    fill: "",
                    initialize: function(t, e) {
                        e = e || {}, this.paths = t || [];
                        for (var n = this.paths.length; n--;) this.paths[n].group = this;
                        this.setOptions(e), e.widthAttr && (this.scaleX = e.widthAttr / e.width), e.heightAttr && (this.scaleY = e.heightAttr / e.height), this.setCoords(), e.sourcePath && this.setSourcePath(e.sourcePath)
                    },
                    render: function(t) {
                        if (this.visible) {
                            t.save();
                            var n = this.transformMatrix;
                            n && t.transform(n[0], n[1], n[2], n[3], n[4], n[5]), this.transform(t), this._setShadow(t), this.clipTo && e.util.clipContext(this, t);
                            for (var r = 0, i = this.paths.length; r < i; ++r) this.paths[r].render(t, !0);
                            this.clipTo && t.restore(), this._removeShadow(t), t.restore()
                        }
                    },
                    _set: function(t, e) {
                        if ("fill" === t && e && this.isSameColor())
                            for (var n = this.paths.length; n--;) this.paths[n]._set(t, e);
                        return this.callSuper("_set", t, e)
                    },
                    toObject: function(t) {
                        var e = n(i.call(this, t), {
                            paths: r(this.getObjects(), "toObject", t)
                        });
                        return this.sourcePath && (e.sourcePath = this.sourcePath), e
                    },
                    toDatalessObject: function(t) {
                        var e = this.toObject(t);
                        return this.sourcePath && (e.paths = this.sourcePath), e
                    },
                    toSVG: function(t) {
                        for (var e = this.getObjects(), n = "translate(" + this.left + " " + this.top + ")", r = ["<g ", 'style="', this.getSvgStyles(), '" ', 'transform="', this.getSvgTransformMatrix(), n, this.getSvgTransform(), '" ', ">\n"], i = 0, o = e.length; i < o; i++) r.push(e[i].toSVG(t));
                        return r.push("</g>\n"), t ? t(r.join("")) : r.join("")
                    },
                    toString: function() {
                        return "#<fabric.PathGroup (" + this.complexity() + "): { top: " + this.top + ", left: " + this.left + " }>"
                    },
                    isSameColor: function() {
                        var t = (this.getObjects()[0].get("fill") || "").toLowerCase();
                        return this.getObjects().every(function(e) {
                            return (e.get("fill") || "").toLowerCase() === t
                        })
                    },
                    complexity: function() {
                        return this.paths.reduce(function(t, e) {
                            return t + (e && e.complexity ? e.complexity() : 0)
                        }, 0)
                    },
                    getObjects: function() {
                        return this.paths
                    }
                }), e.PathGroup.fromObject = function(t, n) {
                    "string" == typeof t.paths ? e.loadSVGFromURL(t.paths, function(r) {
                        var i = t.paths;
                        delete t.paths;
                        var o = e.util.groupSVGElements(r, t, i);
                        n(o)
                    }) : e.util.enlivenObjects(t.paths, function(r) {
                        delete t.paths, n(new e.PathGroup(r, t))
                    })
                }, void(e.PathGroup.async = !0))
            }(exports),
            function(t) {
                var e = t.fabric || (t.fabric = {}),
                    n = e.util.object.extend,
                    r = e.util.array.min,
                    i = e.util.array.max,
                    o = e.util.array.invoke;
                if (!e.Group) {
                    var s = {
                        lockMovementX: !0,
                        lockMovementY: !0,
                        lockRotation: !0,
                        lockScalingX: !0,
                        lockScalingY: !0,
                        lockUniScaling: !0
                    };
                    e.Group = e.util.createClass(e.Object, e.Collection, {
                        type: "group",
                        initialize: function(t, e) {
                            e = e || {}, this._objects = t || [];
                            for (var n = this._objects.length; n--;) this._objects[n].group = this;
                            this.originalState = {}, this.callSuper("initialize"), e.originX && (this.originX = e.originX), e.originY && (this.originY = e.originY), this._calcBounds(), this._updateObjectsCoords(), this.callSuper("initialize", e), this.setCoords(), this.saveCoords()
                        },
                        _updateObjectsCoords: function() {
                            this.forEachObject(this._updateObjectCoords, this)
                        },
                        _updateObjectCoords: function(t) {
                            var e = t.getLeft(),
                                n = t.getTop(),
                                r = this.getCenterPoint();
                            t.set({
                                originalLeft: e,
                                originalTop: n,
                                left: e - r.x,
                                top: n - r.y
                            }), t.setCoords(), t.__origHasControls = t.hasControls, t.hasControls = !1
                        },
                        toString: function() {
                            return "#<fabric.Group: (" + this.complexity() + ")>"
                        },
                        addWithUpdate: function(t) {
                            return this._restoreObjectsState(), t && (this._objects.push(t), t.group = this), this.forEachObject(this._setObjectActive, this), this._calcBounds(), this._updateObjectsCoords(), this
                        },
                        _setObjectActive: function(t) {
                            t.set("active", !0), t.group = this
                        },
                        removeWithUpdate: function(t) {
                            return this._moveFlippedObject(t), this._restoreObjectsState(), this.forEachObject(this._setObjectActive, this), this.remove(t), this._calcBounds(), this._updateObjectsCoords(), this
                        },
                        _onObjectAdded: function(t) {
                            t.group = this
                        },
                        _onObjectRemoved: function(t) {
                            delete t.group, t.set("active", !1)
                        },
                        delegatedProperties: {
                            fill: !0,
                            opacity: !0,
                            fontFamily: !0,
                            fontWeight: !0,
                            fontSize: !0,
                            fontStyle: !0,
                            lineHeight: !0,
                            textDecoration: !0,
                            textAlign: !0,
                            backgroundColor: !0
                        },
                        _set: function(t, e) {
                            if (t in this.delegatedProperties)
                                for (var n = this._objects.length; n--;) this._objects[n].set(t, e);
                            this.callSuper("_set", t, e)
                        },
                        toObject: function(t) {
                            return n(this.callSuper("toObject", t), {
                                objects: o(this._objects, "toObject", t)
                            })
                        },
                        render: function(t) {
                            if (this.visible) {
                                t.save(), this.clipTo && e.util.clipContext(this, t);
                                for (var n = 0, r = this._objects.length; n < r; n++) this._renderObject(this._objects[n], t);
                                this.clipTo && t.restore(), t.restore()
                            }
                        },
                        _renderControls: function(t, e) {
                            this.callSuper("_renderControls", t, e);
                            for (var n = 0, r = this._objects.length; n < r; n++) this._objects[n]._renderControls(t)
                        },
                        _renderObject: function(t, e) {
                            var n = t.hasRotatingPoint;
                            t.visible && (t.hasRotatingPoint = !1, t.render(e), t.hasRotatingPoint = n)
                        },
                        _restoreObjectsState: function() {
                            return this._objects.forEach(this._restoreObjectState, this), this
                        },
                        _moveFlippedObject: function(t) {
                            var e = t.get("originX"),
                                n = t.get("originY"),
                                r = t.getCenterPoint();
                            t.set({
                                originX: "center",
                                originY: "center",
                                left: r.x,
                                top: r.y
                            }), this._toggleFlipping(t);
                            var i = t.getPointByOrigin(e, n);
                            return t.set({
                                originX: e,
                                originY: n,
                                left: i.x,
                                top: i.y
                            }), this
                        },
                        _toggleFlipping: function(t) {
                            this.flipX && (t.toggle("flipX"), t.set("left", -t.get("left")), t.setAngle(-t.getAngle())), this.flipY && (t.toggle("flipY"), t.set("top", -t.get("top")), t.setAngle(-t.getAngle()))
                        },
                        _restoreObjectState: function(t) {
                            return this._setObjectPosition(t), t.setCoords(), t.hasControls = t.__origHasControls, delete t.__origHasControls, t.set("active", !1), t.setCoords(), delete t.group, this
                        },
                        _setObjectPosition: function(t) {
                            var e = this.getCenterPoint(),
                                n = this._getRotatedLeftTop(t);
                            t.set({
                                angle: t.getAngle() + this.getAngle(),
                                left: e.x + n.left,
                                top: e.y + n.top,
                                scaleX: t.get("scaleX") * this.get("scaleX"),
                                scaleY: t.get("scaleY") * this.get("scaleY")
                            })
                        },
                        _getRotatedLeftTop: function(t) {
                            var e = this.getAngle() * (Math.PI / 180);
                            return {
                                left: -Math.sin(e) * t.getTop() * this.get("scaleY") + Math.cos(e) * t.getLeft() * this.get("scaleX"),
                                top: Math.cos(e) * t.getTop() * this.get("scaleY") + Math.sin(e) * t.getLeft() * this.get("scaleX")
                            }
                        },
                        destroy: function() {
                            return this._objects.forEach(this._moveFlippedObject, this), this._restoreObjectsState()
                        },
                        saveCoords: function() {
                            return this._originalLeft = this.get("left"), this._originalTop = this.get("top"), this
                        },
                        hasMoved: function() {
                            return this._originalLeft !== this.get("left") || this._originalTop !== this.get("top")
                        },
                        setObjectsCoords: function() {
                            return this.forEachObject(function(t) {
                                t.setCoords()
                            }), this
                        },
                        _calcBounds: function(t) {
                            for (var e, n, r = [], i = [], o = ["tr", "br", "bl", "tl"], s = 0, a = this._objects.length; s < a; ++s) {
                                e = this._objects[s], e.setCoords();
                                for (var l = 0; l < o.length; l++) n = o[l], r.push(e.oCoords[n].x), i.push(e.oCoords[n].y)
                            }
                            this.set(this._getBounds(r, i, t))
                        },
                        _getBounds: function(t, n, o) {
                            var s = e.util.invertTransform(this.getViewportTransform()),
                                a = e.util.transformPoint(new e.Point(r(t), r(n)), s),
                                l = e.util.transformPoint(new e.Point(i(t), i(n)), s),
                                u = {
                                    width: l.x - a.x || 0,
                                    height: l.y - a.y || 0
                                };
                            return o || (u.left = a.x || 0, u.top = a.y || 0, "center" === this.originX && (u.left += u.width / 2), "right" === this.originX && (u.left += u.width), "center" === this.originY && (u.top += u.height / 2), "bottom" === this.originY && (u.top += u.height)), u
                        },
                        toSVG: function(t) {
                            for (var e = ["<g ", 'transform="', this.getSvgTransform(), '">\n'], n = 0, r = this._objects.length; n < r; n++) e.push(this._objects[n].toSVG(t));
                            return e.push("</g>\n"), t ? t(e.join("")) : e.join("")
                        },
                        get: function(t) {
                            if (t in s) {
                                if (this[t]) return this[t];
                                for (var e = 0, n = this._objects.length; e < n; e++)
                                    if (this._objects[e][t]) return !0;
                                return !1
                            }
                            return t in this.delegatedProperties ? this._objects[0] && this._objects[0].get(t) : this[t]
                        }
                    }), e.Group.fromObject = function(t, n) {
                        e.util.enlivenObjects(t.objects, function(r) {
                            delete t.objects, n && n(new e.Group(r, t))
                        })
                    }, e.Group.async = !0
                }
            }(exports),
            function(t) {
                var e = fabric.util.object.extend;
                return t.fabric || (t.fabric = {}), t.fabric.Image ? void fabric.warn("fabric.Image is already defined.") : (fabric.Image = fabric.util.createClass(fabric.Object, {
                    type: "image",
                    crossOrigin: "",
                    alignX: "none",
                    alignY: "none",
                    meetOrSlice: "meet",
                    _lastScaleX: 1,
                    _lastScaleY: 1,
                    initialize: function(t, e) {
                        e || (e = {}), this.filters = [], this.resizeFilters = [], this.callSuper("initialize", e), this._initElement(t, e), this._initConfig(e), e.filters && (this.filters = e.filters, this.applyFilters())
                    },
                    getElement: function() {
                        return this._element
                    },
                    setElement: function(t, e, n) {
                        return this._element = t, this._originalElement = t, this._initConfig(n), 0 !== this.filters.length ? this.applyFilters(e) : e && e(), this
                    },
                    setCrossOrigin: function(t) {
                        return this.crossOrigin = t, this._element.crossOrigin = t, this
                    },
                    getOriginalSize: function() {
                        var t = this.getElement();
                        return {
                            width: t.width,
                            height: t.height
                        }
                    },
                    _stroke: function(t) {
                        t.save(), this._setStrokeStyles(t), t.beginPath(), t.strokeRect(-this.width / 2, -this.height / 2, this.width, this.height), t.closePath(), t.restore()
                    },
                    _renderDashedStroke: function(t) {
                        var e = -this.width / 2,
                            n = -this.height / 2,
                            r = this.width,
                            i = this.height;
                        t.save(), this._setStrokeStyles(t), t.beginPath(), fabric.util.drawDashedLine(t, e, n, e + r, n, this.strokeDashArray), fabric.util.drawDashedLine(t, e + r, n, e + r, n + i, this.strokeDashArray), fabric.util.drawDashedLine(t, e + r, n + i, e, n + i, this.strokeDashArray), fabric.util.drawDashedLine(t, e, n + i, e, n, this.strokeDashArray), t.closePath(), t.restore()
                    },
                    toObject: function(t) {
                        return e(this.callSuper("toObject", t), {
                            src: this._originalElement.src || this._originalElement._src,
                            filters: this.filters.map(function(t) {
                                return t && t.toObject()
                            }),
                            crossOrigin: this.crossOrigin,
                            alignX: this.alignX,
                            alignY: this.alignY,
                            meetOrSlice: this.meetOrSlice
                        })
                    },
                    toSVG: function(t) {
                        var e = [],
                            n = -this.width / 2,
                            r = -this.height / 2,
                            i = "none";
                        if (this.group && "path-group" === this.group.type && (n = this.left, r = this.top), "none" !== this.alignX && "none" !== this.alignY && (i = "x" + this.alignX + "Y" + this.alignY + " " + this.meetOrSlice), e.push('<g transform="', this.getSvgTransform(), this.getSvgTransformMatrix(), '">\n', '<image xlink:href="', this.getSvgSrc(), '" x="', n, '" y="', r, '" style="', this.getSvgStyles(), '" width="', this.width, '" height="', this.height, '" preserveAspectRatio="', i, '"', "></image>\n"), this.stroke || this.strokeDashArray) {
                            var o = this.fill;
                            this.fill = null, e.push("<rect ", 'x="', n, '" y="', r, '" width="', this.width, '" height="', this.height, '" style="', this.getSvgStyles(), '"/>\n'), this.fill = o
                        }
                        return e.push("</g>\n"), t ? t(e.join("")) : e.join("")
                    },
                    getSrc: function() {
                        if (this.getElement()) return this.getElement().src || this.getElement()._src
                    },
                    setSrc: function(t, e, n) {
                        fabric.util.loadImage(t, function(t) {
                            return this.setElement(t, e, n)
                        }, this, n && n.crossOrigin)
                    },
                    toString: function() {
                        return '#<fabric.Image: { src: "' + this.getSrc() + '" }>'
                    },
                    clone: function(t, e) {
                        this.constructor.fromObject(this.toObject(e), t)
                    },
                    applyFilters: function(t, e, n, r) {
                        if (e = e || this.filters, n = n || this._originalElement) {
                            var i = n,
                                o = fabric.util.createCanvasElement(),
                                s = fabric.util.createImage(),
                                a = this;
                            return o.width = i.width, o.height = i.height, o.getContext("2d").drawImage(i, 0, 0, i.width, i.height), 0 === e.length ? (this._element = n, t && t(), o) : (e.forEach(function(t) {
                                t && t.applyTo(o, t.scaleX || a.scaleX, t.scaleY || a.scaleY), r || "Resize" !== t.type || (a.width *= t.scaleX, a.height *= t.scaleY)
                            }), s.width = o.width, s.height = o.height, fabric.isLikelyNode ? (s.src = o.toBuffer(void 0, fabric.Image.pngCompression), a._element = s, !r && (a._filteredEl = s), t && t()) : (s.onload = function() {
                                a._element = s, !r && (a._filteredEl = s), t && t(), s.onload = o = i = null
                            }, s.src = o.toDataURL("image/png")), o)
                        }
                    },
                    _render: function(t, e) {
                        var n, r, i, o = this._findMargins();
                        n = e ? this.left : -this.width / 2, r = e ? this.top : -this.height / 2, "slice" === this.meetOrSlice && (t.beginPath(), t.rect(n, r, this.width, this.height), t.clip()), this.isMoving === !1 && this.resizeFilters.length && this._needsResize() ? (this._lastScaleX = this.scaleX, this._lastScaleY = this.scaleY, i = this.applyFilters(null, this.resizeFilters, this._filteredEl || this._originalElement, !0)) : i = this._element, i && t.drawImage(i, n + o.marginX, r + o.marginY, o.width, o.height), this._renderStroke(t)
                    },
                    _needsResize: function() {
                        return this.scaleX !== this._lastScaleX || this.scaleY !== this._lastScaleY
                    },
                    _findMargins: function() {
                        var t, e, n = this.width,
                            r = this.height,
                            i = 0,
                            o = 0;
                        return "none" === this.alignX && "none" === this.alignY || (t = [this.width / this._element.width, this.height / this._element.height], e = "meet" === this.meetOrSlice ? Math.min.apply(null, t) : Math.max.apply(null, t), n = this._element.width * e, r = this._element.height * e, "Mid" === this.alignX && (i = (this.width - n) / 2), "Max" === this.alignX && (i = this.width - n), "Mid" === this.alignY && (o = (this.height - r) / 2), "Max" === this.alignY && (o = this.height - r)), {
                            width: n,
                            height: r,
                            marginX: i,
                            marginY: o
                        }
                    },
                    _resetWidthHeight: function() {
                        var t = this.getElement();
                        this.set("width", t.width), this.set("height", t.height)
                    },
                    _initElement: function(t) {
                        this.setElement(fabric.util.getById(t)), fabric.util.addClass(this.getElement(), fabric.Image.CSS_CANVAS)
                    },
                    _initConfig: function(t) {
                        t || (t = {}), this.setOptions(t), this._setWidthHeight(t), this._element && this.crossOrigin && (this._element.crossOrigin = this.crossOrigin)
                    },
                    _initFilters: function(t, e) {
                        t.filters && t.filters.length ? fabric.util.enlivenObjects(t.filters, function(t) {
                            e && e(t)
                        }, "fabric.Image.filters") : e && e()
                    },
                    _setWidthHeight: function(t) {
                        this.width = "width" in t ? t.width : this.getElement() ? this.getElement().width || 0 : 0, this.height = "height" in t ? t.height : this.getElement() ? this.getElement().height || 0 : 0
                    },
                    complexity: function() {
                        return 1
                    }
                }), fabric.Image.CSS_CANVAS = "canvas-img", fabric.Image.prototype.getSvgSrc = fabric.Image.prototype.getSrc, fabric.Image.fromObject = function(t, e) {
                    fabric.util.loadImage(t.src, function(n) {
                        fabric.Image.prototype._initFilters.call(t, t, function(r) {
                            t.filters = r || [];
                            var i = new fabric.Image(n, t);
                            e && e(i)
                        })
                    }, null, t.crossOrigin)
                }, fabric.Image.fromURL = function(t, e, n) {
                    fabric.util.loadImage(t, function(t) {
                        e(new fabric.Image(t, n))
                    }, null, n && n.crossOrigin)
                }, fabric.Image.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href".split(" ")), fabric.Image.fromElement = function(t, n, r) {
                    var i, o, s, a = fabric.parseAttributes(t, fabric.Image.ATTRIBUTE_NAMES),
                        l = "xMidYMid",
                        u = "meet";
                    a.preserveAspectRatio && (s = a.preserveAspectRatio.split(" ")), s && s.length && (u = s.pop(), "meet" !== u && "slice" !== u ? (l = u, u = "meet") : s.length && (l = s.pop())), i = "none" !== l ? l.slice(1, 4) : "none", o = "none" !== l ? l.slice(5, 8) : "none", a.alignX = i, a.alignY = o, a.meetOrSlice = u, fabric.Image.fromURL(a["xlink:href"], n, e(r ? fabric.util.object.clone(r) : {}, a))
                }, fabric.Image.async = !0, void(fabric.Image.pngCompression = 1))
            }(exports), fabric.util.object.extend(fabric.Object.prototype, {
            _getAngleValueForStraighten: function() {
                var t = this.getAngle() % 360;
                return t > 0 ? 90 * Math.round((t - 1) / 90) : 90 * Math.round(t / 90)
            },
            straighten: function() {
                return this.setAngle(this._getAngleValueForStraighten()), this
            },
            fxStraighten: function(t) {
                t = t || {};
                var e = function() {},
                    n = t.onComplete || e,
                    r = t.onChange || e,
                    i = this;
                return fabric.util.animate({
                    startValue: this.get("angle"),
                    endValue: this._getAngleValueForStraighten(),
                    duration: this.FX_DURATION,
                    onChange: function(t) {
                        i.setAngle(t), r()
                    },
                    onComplete: function() {
                        i.setCoords(), n()
                    },
                    onStart: function() {
                        i.set("active", !1)
                    }
                }), this
            }
        }), fabric.util.object.extend(fabric.StaticCanvas.prototype, {
            straightenObject: function(t) {
                return t.straighten(), this.renderAll(), this
            },
            fxStraightenObject: function(t) {
                return t.fxStraighten({
                    onChange: this.renderAll.bind(this)
                }), this
            }
        }), fabric.Image.filters = fabric.Image.filters || {}, fabric.Image.filters.BaseFilter = fabric.util.createClass({
            type: "BaseFilter",
            initialize: function(t) {
                t && this.setOptions(t)
            },
            setOptions: function(t) {
                for (var e in t) this[e] = t[e]
            },
            toObject: function() {
                return {
                    type: this.type
                }
            },
            toJSON: function() {
                return this.toObject()
            }
        }),
            function(t) {
                var e = t.fabric || (t.fabric = {}),
                    n = e.util.object.extend;
                e.Image.filters.Brightness = e.util.createClass(e.Image.filters.BaseFilter, {
                    type: "Brightness",
                    initialize: function(t) {
                        t = t || {}, this.brightness = t.brightness || 0
                    },
                    applyTo: function(t) {
                        for (var e = t.getContext("2d"), n = e.getImageData(0, 0, t.width, t.height), r = n.data, i = this.brightness, o = 0, s = r.length; o < s; o += 4) r[o] += i, r[o + 1] += i, r[o + 2] += i;
                        e.putImageData(n, 0, 0)
                    },
                    toObject: function() {
                        return n(this.callSuper("toObject"), {
                            brightness: this.brightness
                        })
                    }
                }), e.Image.filters.Brightness.fromObject = function(t) {
                    return new e.Image.filters.Brightness(t)
                }
            }(exports),
            function(t) {
                var e = t.fabric || (t.fabric = {}),
                    n = e.util.object.extend;
                e.Image.filters.Convolute = e.util.createClass(e.Image.filters.BaseFilter, {
                    type: "Convolute",
                    initialize: function(t) {
                        t = t || {}, this.opaque = t.opaque, this.matrix = t.matrix || [0, 0, 0, 0, 1, 0, 0, 0, 0];
                        var n = e.util.createCanvasElement();
                        this.tmpCtx = n.getContext("2d")
                    },
                    _createImageData: function(t, e) {
                        return this.tmpCtx.createImageData(t, e)
                    },
                    applyTo: function(t) {
                        for (var e = this.matrix, n = t.getContext("2d"), r = n.getImageData(0, 0, t.width, t.height), i = Math.round(Math.sqrt(e.length)), o = Math.floor(i / 2), s = r.data, a = r.width, l = r.height, u = a, c = l, f = this._createImageData(u, c), h = f.data, d = this.opaque ? 1 : 0, p = 0; p < c; p++)
                            for (var g = 0; g < u; g++) {
                                for (var _ = p, v = g, b = 4 * (p * u + g), y = 0, m = 0, E = 0, S = 0, O = 0; O < i; O++)
                                    for (var T = 0; T < i; T++) {
                                        var x = _ + O - o,
                                            w = v + T - o;
                                        if (!(x < 0 || x > l || w < 0 || w > a)) {
                                            var C = 4 * (x * a + w),
                                                I = e[O * i + T];
                                            y += s[C] * I, m += s[C + 1] * I, E += s[C + 2] * I, S += s[C + 3] * I
                                        }
                                    }
                                h[b] = y, h[b + 1] = m, h[b + 2] = E, h[b + 3] = S + d * (255 - S)
                            }
                        n.putImageData(f, 0, 0)
                    },
                    toObject: function() {
                        return n(this.callSuper("toObject"), {
                            opaque: this.opaque,
                            matrix: this.matrix
                        })
                    }
                }), e.Image.filters.Convolute.fromObject = function(t) {
                    return new e.Image.filters.Convolute(t)
                }
            }(exports),
            function(t) {
                var e = t.fabric || (t.fabric = {}),
                    n = e.util.object.extend;
                e.Image.filters.GradientTransparency = e.util.createClass(e.Image.filters.BaseFilter, {
                    type: "GradientTransparency",
                    initialize: function(t) {
                        t = t || {}, this.threshold = t.threshold || 100
                    },
                    applyTo: function(t) {
                        for (var e = t.getContext("2d"), n = e.getImageData(0, 0, t.width, t.height), r = n.data, i = this.threshold, o = r.length, s = 0, a = r.length; s < a; s += 4) r[s + 3] = i + 255 * (o - s) / o;
                        e.putImageData(n, 0, 0)
                    },
                    toObject: function() {
                        return n(this.callSuper("toObject"), {
                            threshold: this.threshold
                        })
                    }
                }), e.Image.filters.GradientTransparency.fromObject = function(t) {
                    return new e.Image.filters.GradientTransparency(t)
                }
            }(exports),
            function(t) {
                var e = t.fabric || (t.fabric = {});
                e.Image.filters.Grayscale = e.util.createClass(e.Image.filters.BaseFilter, {
                    type: "Grayscale",
                    applyTo: function(t) {
                        for (var e, n = t.getContext("2d"), r = n.getImageData(0, 0, t.width, t.height), i = r.data, o = r.width * r.height * 4, s = 0; s < o;) e = (i[s] + i[s + 1] + i[s + 2]) / 3, i[s] = e, i[s + 1] = e, i[s + 2] = e, s += 4;
                        n.putImageData(r, 0, 0)
                    }
                }), e.Image.filters.Grayscale.fromObject = function() {
                    return new e.Image.filters.Grayscale
                }
            }(exports),
            function(t) {
                var e = t.fabric || (t.fabric = {});
                e.Image.filters.Invert = e.util.createClass(e.Image.filters.BaseFilter, {
                    type: "Invert",
                    applyTo: function(t) {
                        var e, n = t.getContext("2d"),
                            r = n.getImageData(0, 0, t.width, t.height),
                            i = r.data,
                            o = i.length;
                        for (e = 0; e < o; e += 4) i[e] = 255 - i[e], i[e + 1] = 255 - i[e + 1], i[e + 2] = 255 - i[e + 2];
                        n.putImageData(r, 0, 0)
                    }
                }), e.Image.filters.Invert.fromObject = function() {
                    return new e.Image.filters.Invert
                }
            }(exports),
            function(t) {
                var e = t.fabric || (t.fabric = {}),
                    n = e.util.object.extend;
                e.Image.filters.Mask = e.util.createClass(e.Image.filters.BaseFilter, {
                    type: "Mask",
                    initialize: function(t) {
                        t = t || {}, this.mask = t.mask, this.channel = [0, 1, 2, 3].indexOf(t.channel) > -1 ? t.channel : 0
                    },
                    applyTo: function(t) {
                        if (this.mask) {
                            var n, r = t.getContext("2d"),
                                i = r.getImageData(0, 0, t.width, t.height),
                                o = i.data,
                                s = this.mask.getElement(),
                                a = e.util.createCanvasElement(),
                                l = this.channel,
                                u = i.width * i.height * 4;
                            a.width = s.width, a.height = s.height, a.getContext("2d").drawImage(s, 0, 0, s.width, s.height);
                            var c = a.getContext("2d").getImageData(0, 0, s.width, s.height),
                                f = c.data;
                            for (n = 0; n < u; n += 4) o[n + 3] = f[n + l];
                            r.putImageData(i, 0, 0)
                        }
                    },
                    toObject: function() {
                        return n(this.callSuper("toObject"), {
                            mask: this.mask.toObject(),
                            channel: this.channel
                        })
                    }
                }), e.Image.filters.Mask.fromObject = function(t, n) {
                    e.util.loadImage(t.mask.src, function(r) {
                        t.mask = new e.Image(r, t.mask), n && n(new e.Image.filters.Mask(t))
                    })
                }, e.Image.filters.Mask.async = !0
            }(exports),
            function(t) {
                var e = t.fabric || (t.fabric = {}),
                    n = e.util.object.extend;
                e.Image.filters.Noise = e.util.createClass(e.Image.filters.BaseFilter, {
                    type: "Noise",
                    initialize: function(t) {
                        t = t || {}, this.noise = t.noise || 0
                    },
                    applyTo: function(t) {
                        for (var e, n = t.getContext("2d"), r = n.getImageData(0, 0, t.width, t.height), i = r.data, o = this.noise, s = 0, a = i.length; s < a; s += 4) e = (.5 - Math.random()) * o, i[s] += e, i[s + 1] += e, i[s + 2] += e;
                        n.putImageData(r, 0, 0)
                    },
                    toObject: function() {
                        return n(this.callSuper("toObject"), {
                            noise: this.noise
                        })
                    }
                }), e.Image.filters.Noise.fromObject = function(t) {
                    return new e.Image.filters.Noise(t)
                }
            }(exports),
            function(t) {
                var e = t.fabric || (t.fabric = {}),
                    n = e.util.object.extend;
                e.Image.filters.Pixelate = e.util.createClass(e.Image.filters.BaseFilter, {
                    type: "Pixelate",
                    initialize: function(t) {
                        t = t || {}, this.blocksize = t.blocksize || 4
                    },
                    applyTo: function(t) {
                        var e, n, r, i, o, s, a, l = t.getContext("2d"),
                            u = l.getImageData(0, 0, t.width, t.height),
                            c = u.data,
                            f = u.height,
                            h = u.width;
                        for (n = 0; n < f; n += this.blocksize)
                            for (r = 0; r < h; r += this.blocksize) {
                                e = 4 * n * h + 4 * r, i = c[e], o = c[e + 1], s = c[e + 2], a = c[e + 3];
                                for (var d = n, p = n + this.blocksize; d < p; d++)
                                    for (var g = r, _ = r + this.blocksize; g < _; g++) e = 4 * d * h + 4 * g, c[e] = i, c[e + 1] = o, c[e + 2] = s, c[e + 3] = a
                            }
                        l.putImageData(u, 0, 0)
                    },
                    toObject: function() {
                        return n(this.callSuper("toObject"), {
                            blocksize: this.blocksize
                        })
                    }
                }), e.Image.filters.Pixelate.fromObject = function(t) {
                    return new e.Image.filters.Pixelate(t)
                }
            }(exports),
            function(t) {
                var e = t.fabric || (t.fabric = {}),
                    n = e.util.object.extend;
                e.Image.filters.RemoveWhite = e.util.createClass(e.Image.filters.BaseFilter, {
                    type: "RemoveWhite",
                    initialize: function(t) {
                        t = t || {}, this.threshold = t.threshold || 30, this.distance = t.distance || 20
                    },
                    applyTo: function(t) {
                        for (var e, n, r, i = t.getContext("2d"), o = i.getImageData(0, 0, t.width, t.height), s = o.data, a = this.threshold, l = this.distance, u = 255 - a, c = Math.abs, f = 0, h = s.length; f < h; f += 4) e = s[f], n = s[f + 1], r = s[f + 2], e > u && n > u && r > u && c(e - n) < l && c(e - r) < l && c(n - r) < l && (s[f + 3] = 1);
                        i.putImageData(o, 0, 0)
                    },
                    toObject: function() {
                        return n(this.callSuper("toObject"), {
                            threshold: this.threshold,
                            distance: this.distance
                        })
                    }
                }), e.Image.filters.RemoveWhite.fromObject = function(t) {
                    return new e.Image.filters.RemoveWhite(t)
                }
            }(exports),
            function(t) {
                var e = t.fabric || (t.fabric = {});
                e.Image.filters.Sepia = e.util.createClass(e.Image.filters.BaseFilter, {
                    type: "Sepia",
                    applyTo: function(t) {
                        var e, n, r = t.getContext("2d"),
                            i = r.getImageData(0, 0, t.width, t.height),
                            o = i.data,
                            s = o.length;
                        for (e = 0; e < s; e += 4) n = .3 * o[e] + .59 * o[e + 1] + .11 * o[e + 2], o[e] = n + 100, o[e + 1] = n + 50, o[e + 2] = n + 255;
                        r.putImageData(i, 0, 0)
                    }
                }), e.Image.filters.Sepia.fromObject = function() {
                    return new e.Image.filters.Sepia
                }
            }(exports),
            function(t) {
                var e = t.fabric || (t.fabric = {});
                e.Image.filters.Sepia2 = e.util.createClass(e.Image.filters.BaseFilter, {
                    type: "Sepia2",
                    applyTo: function(t) {
                        var e, n, r, i, o = t.getContext("2d"),
                            s = o.getImageData(0, 0, t.width, t.height),
                            a = s.data,
                            l = a.length;
                        for (e = 0; e < l; e += 4) n = a[e], r = a[e + 1], i = a[e + 2], a[e] = (.393 * n + .769 * r + .189 * i) / 1.351, a[e + 1] = (.349 * n + .686 * r + .168 * i) / 1.203, a[e + 2] = (.272 * n + .534 * r + .131 * i) / 2.14;
                        o.putImageData(s, 0, 0)
                    }
                }), e.Image.filters.Sepia2.fromObject = function() {
                    return new e.Image.filters.Sepia2
                }
            }(exports),
            function(t) {
                var e = t.fabric || (t.fabric = {}),
                    n = e.util.object.extend;
                e.Image.filters.Tint = e.util.createClass(e.Image.filters.BaseFilter, {
                    type: "Tint",
                    initialize: function(t) {
                        t = t || {}, this.color = t.color || "#000000", this.opacity = "undefined" != typeof t.opacity ? t.opacity : new e.Color(this.color).getAlpha()
                    },
                    applyTo: function(t) {
                        var n, r, i, o, s, a, l, u, c, f = t.getContext("2d"),
                            h = f.getImageData(0, 0, t.width, t.height),
                            d = h.data,
                            p = d.length;
                        for (c = new e.Color(this.color).getSource(), r = c[0] * this.opacity, i = c[1] * this.opacity, o = c[2] * this.opacity, u = 1 - this.opacity, n = 0; n < p; n += 4) s = d[n], a = d[n + 1], l = d[n + 2], d[n] = r + s * u, d[n + 1] = i + a * u, d[n + 2] = o + l * u;
                        f.putImageData(h, 0, 0)
                    },
                    toObject: function() {
                        return n(this.callSuper("toObject"), {
                            color: this.color,
                            opacity: this.opacity
                        })
                    }
                }), e.Image.filters.Tint.fromObject = function(t) {
                    return new e.Image.filters.Tint(t)
                }
            }(exports),
            function(t) {
                var e = t.fabric || (t.fabric = {}),
                    n = e.util.object.extend;
                e.Image.filters.Multiply = e.util.createClass(e.Image.filters.BaseFilter, {
                    type: "Multiply",
                    initialize: function(t) {
                        t = t || {}, this.color = t.color || "#000000"
                    },
                    applyTo: function(t) {
                        var n, r, i = t.getContext("2d"),
                            o = i.getImageData(0, 0, t.width, t.height),
                            s = o.data,
                            a = s.length;
                        for (r = new e.Color(this.color).getSource(), n = 0; n < a; n += 4) s[n] *= r[0] / 255, s[n + 1] *= r[1] / 255, s[n + 2] *= r[2] / 255;
                        i.putImageData(o, 0, 0)
                    },
                    toObject: function() {
                        return n(this.callSuper("toObject"), {
                            color: this.color
                        })
                    }
                }), e.Image.filters.Multiply.fromObject = function(t) {
                    return new e.Image.filters.Multiply(t)
                }
            }(exports),
            function(t) {
                var e = t.fabric;
                e.Image.filters.Blend = e.util.createClass({
                    type: "Blend",
                    initialize: function(t) {
                        t = t || {}, this.color = t.color || "#000", this.image = t.image || !1, this.mode = t.mode || "multiply", this.alpha = t.alpha || 1
                    },
                    applyTo: function(t) {
                        var n, r, i, o, s, a, l, u = t.getContext("2d"),
                            c = u.getImageData(0, 0, t.width, t.height),
                            f = c.data,
                            h = !1;
                        if (this.image) {
                            h = !0;
                            var d = e.util.createCanvasElement();
                            d.width = this.image.width, d.height = this.image.height;
                            var p = new e.StaticCanvas(d);
                            p.add(this.image);
                            var g = p.getContext("2d");
                            l = g.getImageData(0, 0, p.width, p.height).data
                        } else l = new e.Color(this.color).getSource(), n = l[0] * this.alpha, r = l[1] * this.alpha, i = l[2] * this.alpha;
                        for (var _ = 0, v = f.length; _ < v; _ += 4) switch (o = f[_], s = f[_ + 1], a = f[_ + 2], h && (n = l[_] * this.alpha, r = l[_ + 1] * this.alpha, i = l[_ + 2] * this.alpha), this.mode) {
                            case "multiply":
                                f[_] = o * n / 255, f[_ + 1] = s * r / 255, f[_ + 2] = a * i / 255;
                                break;
                            case "screen":
                                f[_] = 1 - (1 - o) * (1 - n), f[_ + 1] = 1 - (1 - s) * (1 - r), f[_ + 2] = 1 - (1 - a) * (1 - i);
                                break;
                            case "add":
                                f[_] = Math.min(255, o + n), f[_ + 1] = Math.min(255, s + r), f[_ + 2] = Math.min(255, a + i);
                                break;
                            case "diff":
                            case "difference":
                                f[_] = Math.abs(o - n), f[_ + 1] = Math.abs(s - r), f[_ + 2] = Math.abs(a - i);
                                break;
                            case "subtract":
                                var b = o - n,
                                    y = s - r,
                                    m = a - i;
                                f[_] = b < 0 ? 0 : b, f[_ + 1] = y < 0 ? 0 : y, f[_ + 2] = m < 0 ? 0 : m;
                                break;
                            case "darken":
                                f[_] = Math.min(o, n), f[_ + 1] = Math.min(s, r), f[_ + 2] = Math.min(a, i);
                                break;
                            case "lighten":
                                f[_] = Math.max(o, n), f[_ + 1] = Math.max(s, r), f[_ + 2] = Math.max(a, i)
                        }
                        u.putImageData(c, 0, 0)
                    },
                    toObject: function() {
                        return {
                            color: this.color,
                            image: this.image,
                            mode: this.mode,
                            alpha: this.alpha
                        }
                    }
                }), e.Image.filters.Blend.fromObject = function(t) {
                    return new e.Image.filters.Blend(t)
                }
            }(exports),
            function(t) {
                var e = t.fabric || (t.fabric = {}),
                    n = Math.pow,
                    r = Math.floor,
                    i = Math.sqrt,
                    o = Math.abs,
                    s = Math.max,
                    a = Math.round,
                    l = Math.sin,
                    u = Math.ceil;
                e.Image.filters.Resize = e.util.createClass(e.Image.filters.BaseFilter, {
                    type: "Resize",
                    resizeType: "hermite",
                    scaleX: 0,
                    scaleY: 0,
                    lanczosLobes: 3,
                    applyTo: function(t, e, n) {
                        this.rcpScaleX = 1 / e, this.rcpScaleY = 1 / n;
                        var r, i = t.width,
                            o = t.height,
                            s = a(i * e),
                            l = a(o * n);
                        "sliceHack" === this.resizeType && (r = this.sliceByTwo(t, i, o, s, l)), "hermite" === this.resizeType && (r = this.hermiteFastResize(t, i, o, s, l)), "bilinear" === this.resizeType && (r = this.bilinearFiltering(t, i, o, s, l)), "lanczos" === this.resizeType && (r = this.lanczosResize(t, i, o, s, l)), t.width = s, t.height = l, t.getContext("2d").putImageData(r, 0, 0)
                    },
                    sliceByTwo: function(t, n, i, o, a) {
                        var l, u = t.getContext("2d"),
                            c = .5,
                            f = .5,
                            h = 1,
                            d = 1,
                            p = !1,
                            g = !1,
                            _ = n,
                            v = i,
                            b = e.util.createCanvasElement(),
                            y = b.getContext("2d");
                        for (o = r(o), a = r(a), b.width = s(o, n), b.height = s(a, i), o > n && (c = 2, h = -1), a > i && (f = 2, d = -1), l = u.getImageData(0, 0, n, i), t.width = s(o, n), t.height = s(a, i), u.putImageData(l, 0, 0); !p || !g;) n = _, i = v, o * h < r(_ * c * h) ? _ = r(_ * c) : (_ = o, p = !0), a * d < r(v * f * d) ? v = r(v * f) : (v = a, g = !0), l = u.getImageData(0, 0, n, i), y.putImageData(l, 0, 0), u.clearRect(0, 0, _, v), u.drawImage(b, 0, 0, n, i, 0, 0, _, v);
                        return u.getImageData(0, 0, o, a)
                    },
                    lanczosResize: function(t, e, s, a, c) {
                        function f(t) {
                            return function(e) {
                                if (e > t) return 0;
                                if (e *= Math.PI, o(e) < 1e-16) return 1;
                                var n = e / t;
                                return l(e) * l(n) / e / n
                            }
                        }

                        function h(t) {
                            var l, u, f, d, p, I, R, A, P, L, k;
                            for (w.x = (t + .5) * y, C.x = r(w.x), l = 0; l < c; l++) {
                                for (w.y = (l + .5) * m, C.y = r(w.y), p = 0, I = 0, R = 0, A = 0, P = 0, u = C.x - O; u <= C.x + O; u++)
                                    if (!(u < 0 || u >= e)) {
                                        L = r(1e3 * o(u - w.x)), x[L] || (x[L] = {});
                                        for (var D = C.y - T; D <= C.y + T; D++) D < 0 || D >= s || (k = r(1e3 * o(D - w.y)), x[L][k] || (x[L][k] = b(i(n(L * E, 2) + n(k * S, 2)) / 1e3)), f = x[L][k], f > 0 && (d = 4 * (D * e + u), p += f, I += f * _[d], R += f * _[d + 1], A += f * _[d + 2], P += f * _[d + 3]))
                                    }
                                d = 4 * (l * a + t), v[d] = I / p, v[d + 1] = R / p, v[d + 2] = A / p, v[d + 3] = P / p
                            }
                            return ++t < a ? h(t) : g
                        }
                        var d = t.getContext("2d"),
                            p = d.getImageData(0, 0, e, s),
                            g = d.getImageData(0, 0, a, c),
                            _ = p.data,
                            v = g.data,
                            b = f(this.lanczosLobes),
                            y = this.rcpScaleX,
                            m = this.rcpScaleY,
                            E = 2 / this.rcpScaleX,
                            S = 2 / this.rcpScaleY,
                            O = u(y * this.lanczosLobes / 2),
                            T = u(m * this.lanczosLobes / 2),
                            x = {},
                            w = {},
                            C = {};
                        return h(0)
                    },
                    bilinearFiltering: function(t, e, n, i, o) {
                        var s, a, l, u, c, f, h, d, p, g, _, v, b, y = 0,
                            m = this.rcpScaleX,
                            E = this.rcpScaleY,
                            S = t.getContext("2d"),
                            O = 4 * (e - 1),
                            T = S.getImageData(0, 0, e, n),
                            x = T.data,
                            w = S.getImageData(0, 0, i, o),
                            C = w.data;
                        for (h = 0; h < o; h++)
                            for (d = 0; d < i; d++)
                                for (c = r(m * d), f = r(E * h), p = m * d - c, g = E * h - f, b = 4 * (f * e + c), _ = 0; _ < 4; _++) s = x[b + _], a = x[b + 4 + _], l = x[b + O + _], u = x[b + O + 4 + _], v = s * (1 - p) * (1 - g) + a * p * (1 - g) + l * g * (1 - p) + u * p * g, C[y++] = v;
                        return w
                    },
                    hermiteFastResize: function(t, e, n, s, a) {
                        for (var l = this.rcpScaleX, c = this.rcpScaleY, f = u(l / 2), h = u(c / 2), d = t.getContext("2d"), p = d.getImageData(0, 0, e, n), g = p.data, _ = d.getImageData(0, 0, s, a), v = _.data, b = 0; b < a; b++)
                            for (var y = 0; y < s; y++) {
                                for (var m = 4 * (y + b * s), E = 0, S = 0, O = 0, T = 0, x = 0, w = 0, C = 0, I = (b + .5) * c, R = r(b * c); R < (b + 1) * c; R++)
                                    for (var A = o(I - (R + .5)) / h, P = (y + .5) * l, L = A * A, k = r(y * l); k < (y + 1) * l; k++) {
                                        var D = o(P - (k + .5)) / f,
                                            j = i(L + D * D);
                                        j > 1 && j < -1 || (E = 2 * j * j * j - 3 * j * j + 1, E > 0 && (D = 4 * (k + R * e), C += E * g[D + 3], O += E, g[D + 3] < 255 && (E = E * g[D + 3] / 250), T += E * g[D], x += E * g[D + 1], w += E * g[D + 2], S += E))
                                    }
                                v[m] = T / S, v[m + 1] = x / S, v[m + 2] = w / S, v[m + 3] = C / O
                            }
                        return _
                    }
                }), e.Image.filters.Resize.fromObject = function() {
                    return new e.Image.filters.Resize
                }
            }(exports),
            function(t) {
                var e = t.fabric || (t.fabric = {}),
                    n = e.util.object.extend,
                    r = e.util.object.clone,
                    i = e.util.toFixed,
                    o = e.StaticCanvas.supports("setLineDash");
                if (e.Text) return void e.warn("fabric.Text is already defined");
                var s = e.Object.prototype.stateProperties.concat();
                s.push("fontFamily", "fontWeight", "fontSize", "text", "textDecoration", "textAlign", "fontStyle", "lineHeight", "textBackgroundColor"), e.Text = e.util.createClass(e.Object, {
                    _dimensionAffectingProps: {
                        fontSize: !0,
                        fontWeight: !0,
                        fontFamily: !0,
                        textDecoration: !0,
                        fontStyle: !0,
                        lineHeight: !0,
                        stroke: !0,
                        strokeWidth: !0,
                        text: !0
                    },
                    _reNewline: /\r?\n/,
                    type: "text",
                    fontSize: 40,
                    fontWeight: "normal",
                    fontFamily: "Times New Roman",
                    textDecoration: "",
                    textAlign: "left",
                    fontStyle: "",
                    lineHeight: 1.16,
                    textBackgroundColor: "",
                    stateProperties: s,
                    stroke: null,
                    shadow: null,
                    _fontSizeFraction: .25,
                    _fontSizeMult: 1.13,
                    initialize: function(t, e) {
                        e = e || {}, this.text = t, this.__skipDimension = !0, this.setOptions(e), this.__skipDimension = !1, this._initDimensions()
                    },
                    _initDimensions: function() {
                        if (!this.__skipDimension) {
                            this._clearCache();
                            var t = e.util.createCanvasElement().getContext("2d");
                            this._textLines = this.text.split(this._reNewline), this._setTextStyles(t), this.width = this._getTextWidth(t), this.height = this._getTextHeight(t)
                        }
                    },
                    toString: function() {
                        return "#<fabric.Text (" + this.complexity() + '): { "text": "' + this.text + '", "fontFamily": "' + this.fontFamily + '" }>'
                    },
                    _render: function(t) {
                        this.clipTo && e.util.clipContext(this, t), this._renderTextBackground(t), this._translateForTextAlign(t), this._renderText(t), "left" !== this.textAlign && "justify" !== this.textAlign && t.restore(), this._renderTextDecoration(t), this.clipTo && t.restore()
                    },
                    _renderText: function(t) {
                        t.save(), this._setOpacity(t), this._setShadow(t), this._setupCompositeOperation(t), this._renderTextFill(t), this._renderTextStroke(t), this._restoreCompositeOperation(t), this._removeShadow(t), t.restore()
                    },
                    _translateForTextAlign: function(t) {
                        "left" !== this.textAlign && "justify" !== this.textAlign && (t.save(), t.translate("center" === this.textAlign ? this.width / 2 : this.width, 0))
                    },
                    _setTextStyles: function(t) {
                        t.textBaseline = "alphabetic", this.skipTextAlign || (t.textAlign = this.textAlign), t.font = this._getFontDeclaration()
                    },
                    _getTextHeight: function() {
                        return this._textLines.length * this._getHeightOfLine()
                    },
                    _getTextWidth: function(t) {
                        for (var e = this._getLineWidth(t, 0), n = 1, r = this._textLines.length; n < r; n++) {
                            var i = this._getLineWidth(t, n);
                            i > e && (e = i)
                        }
                        return e
                    },
                    _renderChars: function(t, e, n, r, i) {
                        e[t](n, r, i)
                    },
                    _renderTextLine: function(t, e, n, r, i, o) {
                        if (i -= this.fontSize * this._fontSizeFraction, "justify" !== this.textAlign) return void this._renderChars(t, e, n, r, i, o);
                        var s = this._getLineWidth(e, p),
                            a = this.width;
                        if (a > s)
                            for (var l = n.split(/\s+/), u = e.measureText(n.replace(/\s+/g, "")).width, c = a - u, f = l.length - 1, h = c / f, d = 0, p = 0, g = l.length; p < g; p++) this._renderChars(t, e, l[p], r + d, i, o), d += e.measureText(l[p]).width + h;
                        else this._renderChars(t, e, n, r, i, o)
                    },
                    _getLeftOffset: function() {
                        return -this.width / 2
                    },
                    _getTopOffset: function() {
                        return -this.height / 2
                    },
                    _renderTextFill: function(t) {
                        if (this.fill || this._skipFillStrokeCheck) {
                            for (var e = 0, n = 0, r = this._textLines.length; n < r; n++) {
                                var i = this._getHeightOfLine(t, n),
                                    o = i / this.lineHeight;
                                this._renderTextLine("fillText", t, this._textLines[n], this._getLeftOffset(), this._getTopOffset() + e + o, n), e += i
                            }
                            this.shadow && !this.shadow.affectStroke && this._removeShadow(t)
                        }
                    },
                    _renderTextStroke: function(t) {
                        if (this.stroke && 0 !== this.strokeWidth || this._skipFillStrokeCheck) {
                            var e = 0;
                            t.save(), this.strokeDashArray && (1 & this.strokeDashArray.length && this.strokeDashArray.push.apply(this.strokeDashArray, this.strokeDashArray), o && t.setLineDash(this.strokeDashArray)), t.beginPath();
                            for (var n = 0, r = this._textLines.length; n < r; n++) {
                                var i = this._getHeightOfLine(t, n),
                                    s = i / this.lineHeight;
                                this._renderTextLine("strokeText", t, this._textLines[n], this._getLeftOffset(), this._getTopOffset() + e + s, n), e += i
                            }
                            t.closePath(), t.restore()
                        }
                    },
                    _getHeightOfLine: function() {
                        return this.fontSize * this._fontSizeMult * this.lineHeight
                    },
                    _renderTextBackground: function(t) {
                        this._renderTextBoxBackground(t), this._renderTextLinesBackground(t)
                    },
                    _renderTextBoxBackground: function(t) {
                        this.backgroundColor && (t.save(), t.fillStyle = this.backgroundColor, t.fillRect(this._getLeftOffset(), this._getTopOffset(), this.width, this.height), t.restore())
                    },
                    _renderTextLinesBackground: function(t) {
                        var e = 0,
                            n = this._getHeightOfLine();
                        if (this.textBackgroundColor) {
                            t.save(), t.fillStyle = this.textBackgroundColor;
                            for (var r = 0, i = this._textLines.length; r < i; r++) {
                                if ("" !== this._textLines[r]) {
                                    var o = this._getLineWidth(t, r),
                                        s = this._getLineLeftOffset(o);
                                    t.fillRect(this._getLeftOffset() + s, this._getTopOffset() + e, o, this.fontSize * this._fontSizeMult)
                                }
                                e += n
                            }
                            t.restore()
                        }
                    },
                    _getLineLeftOffset: function(t) {
                        return "center" === this.textAlign ? (this.width - t) / 2 : "right" === this.textAlign ? this.width - t : 0
                    },
                    _clearCache: function() {
                        this.__lineWidths = [], this.__lineHeights = [], this.__lineOffsets = []
                    },
                    _shouldClearCache: function() {
                        var t = !1;
                        for (var e in this._dimensionAffectingProps) this["__" + e] !== this[e] && (this["__" + e] = this[e], t = !0);
                        return t
                    },
                    _getLineWidth: function(t, e) {
                        return this.__lineWidths[e] ? this.__lineWidths[e] : (this.__lineWidths[e] = "justify" === this.textAlign ? this.width : t.measureText(this._textLines[e]).width, this.__lineWidths[e])
                    },
                    _renderTextDecoration: function(t) {
                        function e(e) {
                            var i, o, s, a, l = 0;
                            for (i = 0, o = r._textLines.length; i < o; i++) {
                                var u = r._getLineWidth(t, i),
                                    c = r._getLineLeftOffset(u),
                                    f = r._getHeightOfLine(t, i);
                                for (s = 0, a = e.length; s < a; s++) t.fillRect(r._getLeftOffset() + c, l + (r._fontSizeMult - 1 + e[s]) * r.fontSize - n, u, r.fontSize / 15);
                                l += f
                            }
                        }
                        if (this.textDecoration) {
                            var n = this.height / 2,
                                r = this,
                                i = [];
                            this.textDecoration.indexOf("underline") > -1 && i.push(.85), this.textDecoration.indexOf("line-through") > -1 && i.push(.43), this.textDecoration.indexOf("overline") > -1 && i.push(-.12), i.length > 0 && e(i)
                        }
                    },
                    _getFontDeclaration: function() {
                        return [e.isLikelyNode ? this.fontWeight : this.fontStyle, e.isLikelyNode ? this.fontStyle : this.fontWeight, this.fontSize + "px", e.isLikelyNode ? '"' + this.fontFamily + '"' : this.fontFamily].join(" ")
                    },
                    render: function(t, e) {
                        if (this.visible) {
                            t.save(), this._setTextStyles(t), this._shouldClearCache() && (this._clearCache(), this._textLines = this.text.split(this._reNewline), this.width = this._getTextWidth(t), this.height = this._getTextHeight(t)), e || this.transform(t), this._setStrokeStyles(t), this._setFillStyles(t);
                            var n = this.group && "path-group" === this.group.type;
                            n && t.translate(-this.group.width / 2, -this.group.height / 2), this.transformMatrix && t.transform.apply(t, this.transformMatrix), n && t.translate(this.left, this.top), this._render(t), t.restore()
                        }
                    },
                    toObject: function(t) {
                        var e = n(this.callSuper("toObject", t), {
                            text: this.text,
                            fontSize: this.fontSize,
                            fontWeight: this.fontWeight,
                            fontFamily: this.fontFamily,
                            fontStyle: this.fontStyle,
                            lineHeight: this.lineHeight,
                            textDecoration: this.textDecoration,
                            textAlign: this.textAlign,
                            textBackgroundColor: this.textBackgroundColor
                        });
                        return this.includeDefaultValues || this._removeDefaultValues(e), e
                    },
                    toSVG: function(t) {
                        var e = this._createBaseSVGMarkup(),
                            n = this._getSVGLeftTopOffsets(this.ctx),
                            r = this._getSVGTextAndBg(n.textTop, n.textLeft);
                        return this._wrapSVGTextAndBg(e, r), t ? t(e.join("")) : e.join("")
                    },
                    _getSVGLeftTopOffsets: function(t) {
                        var e = this._getHeightOfLine(t, 0),
                            n = -this.width / 2,
                            r = 0;
                        return {
                            textLeft: n + (this.group && "path-group" === this.group.type ? this.left : 0),
                            textTop: r + (this.group && "path-group" === this.group.type ? -this.top : 0),
                            lineTop: e
                        }
                    },
                    _wrapSVGTextAndBg: function(t, e) {
                        t.push('\t<g transform="', this.getSvgTransform(), this.getSvgTransformMatrix(), '">\n', e.textBgRects.join(""), "\t\t<text ", this.fontFamily ? 'font-family="' + this.fontFamily.replace(/"/g, "'") + '" ' : "", this.fontSize ? 'font-size="' + this.fontSize + '" ' : "", this.fontStyle ? 'font-style="' + this.fontStyle + '" ' : "", this.fontWeight ? 'font-weight="' + this.fontWeight + '" ' : "", this.textDecoration ? 'text-decoration="' + this.textDecoration + '" ' : "", 'style="', this.getSvgStyles(), '" >', e.textSpans.join(""), "</text>\n", "\t</g>\n")
                    },
                    _getSVGTextAndBg: function(t, e) {
                        var n = [],
                            r = [],
                            i = 0;
                        this._setSVGBg(r);
                        for (var o = 0, s = this._textLines.length; o < s; o++) this.textBackgroundColor && this._setSVGTextLineBg(r, o, e, t, i), this._setSVGTextLineText(o, n, i, e, t, r), i += this._getHeightOfLine(this.ctx, o);
                        return {
                            textSpans: n,
                            textBgRects: r
                        }
                    },
                    _setSVGTextLineText: function(t, n, r, o, s) {
                        var a = this.fontSize * (this._fontSizeMult - this._fontSizeFraction) - s + r - this.height / 2;
                        n.push('<tspan x="', i(o + this._getLineLeftOffset(this.__lineWidths[t]), 4), '" ', 'y="', i(a, 4), '" ', this._getFillAttributes(this.fill), ">", e.util.string.escapeXml(this._textLines[t]), "</tspan>")
                    },
                    _setSVGTextLineBg: function(t, e, n, r, o) {
                        t.push("\t\t<rect ", this._getFillAttributes(this.textBackgroundColor), ' x="', i(n + this._getLineLeftOffset(this.__lineWidths[e]), 4), '" y="', i(o - this.height / 2, 4), '" width="', i(this.__lineWidths[e], 4), '" height="', i(this._getHeightOfLine(this.ctx, e) / this.lineHeight, 4), '"></rect>\n')
                    },
                    _setSVGBg: function(t) {
                        this.backgroundColor && t.push("\t\t<rect ", this._getFillAttributes(this.backgroundColor), ' x="', i(-this.width / 2, 4), '" y="', i(-this.height / 2, 4), '" width="', i(this.width, 4), '" height="', i(this.height, 4), '"></rect>\n')
                    },
                    _getFillAttributes: function(t) {
                        var n = t && "string" == typeof t ? new e.Color(t) : "";
                        return n && n.getSource() && 1 !== n.getAlpha() ? 'opacity="' + n.getAlpha() + '" fill="' + n.setAlpha(1).toRgb() + '"' : 'fill="' + t + '"'
                    },
                    _set: function(t, e) {
                        this.callSuper("_set", t, e), t in this._dimensionAffectingProps && (this._initDimensions(), this.setCoords())
                    },
                    complexity: function() {
                        return 1
                    }
                }), e.Text.ATTRIBUTE_NAMES = e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size text-decoration text-anchor".split(" ")), e.Text.DEFAULT_SVG_FONT_SIZE = 16, e.Text.fromElement = function(t, n) {
                    if (!t) return null;
                    var r = e.parseAttributes(t, e.Text.ATTRIBUTE_NAMES);
                    n = e.util.object.extend(n ? e.util.object.clone(n) : {}, r), n.top = n.top || 0, n.left = n.left || 0, "dx" in r && (n.left += r.dx), "dy" in r && (n.top += r.dy), "fontSize" in n || (n.fontSize = e.Text.DEFAULT_SVG_FONT_SIZE), n.originX || (n.originX = "left");
                    var i = new e.Text(t.textContent, n),
                        o = 0;
                    return "left" === i.originX && (o = i.getWidth() / 2), "right" === i.originX && (o = -i.getWidth() / 2), i.set({
                        left: i.getLeft() + o,
                        top: i.getTop() - i.getHeight() / 2 + i.fontSize * (.18 + i._fontSizeFraction)
                    }), i
                }, e.Text.fromObject = function(t) {
                    return new e.Text(t.text, r(t))
                }, e.util.createAccessors(e.Text)
            }(exports),
            function() {
                var t = fabric.util.object.clone;
                fabric.IText = fabric.util.createClass(fabric.Text, fabric.Observable, {
                    type: "i-text",
                    selectionStart: 0,
                    selectionEnd: 0,
                    selectionColor: "rgba(17,119,255,0.3)",
                    isEditing: !1,
                    editable: !0,
                    editingBorderColor: "rgba(102,153,255,0.25)",
                    cursorWidth: 2,
                    cursorColor: "#333",
                    cursorDelay: 1e3,
                    cursorDuration: 600,
                    styles: null,
                    caching: !0,
                    _skipFillStrokeCheck: !1,
                    _reSpace: /\s|\n/,
                    _currentCursorOpacity: 0,
                    _selectionDirection: null,
                    _abortCursorAnimation: !1,
                    _charWidthsCache: {},
                    initialize: function(t, e) {
                        this.styles = e ? e.styles || {} : {}, this.callSuper("initialize", t, e), this.initBehavior(), fabric.IText.instances.push(this)
                    },
                    _clearCache: function() {
                        this.callSuper("_clearCache"), this.__maxFontHeights = []
                    },
                    isEmptyStyles: function() {
                        if (!this.styles) return !0;
                        var t = this.styles;
                        for (var e in t)
                            for (var n in t[e])
                                for (var r in t[e][n]) return !1;
                        return !0
                    },
                    setSelectionStart: function(t) {
                        t = Math.max(t, 0), this.selectionStart !== t && (this.fire("selection:changed"), this.canvas && this.canvas.fire("text:selection:changed", {
                            target: this
                        }), this.selectionStart = t), this._updateTextarea()
                    },
                    setSelectionEnd: function(t) {
                        t = Math.min(t, this.text.length), this.selectionEnd !== t && (this.fire("selection:changed"), this.canvas && this.canvas.fire("text:selection:changed", {
                            target: this
                        }), this.selectionEnd = t), this._updateTextarea()
                    },
                    getSelectionStyles: function(t, e) {
                        if (2 === arguments.length) {
                            for (var n = [], r = t; r < e; r++) n.push(this.getSelectionStyles(r));
                            return n
                        }
                        var i = this.get2DCursorLocation(t);
                        return this.styles[i.lineIndex] ? this.styles[i.lineIndex][i.charIndex] || {} : {}
                    },
                    setSelectionStyles: function(t) {
                        if (this.selectionStart === this.selectionEnd) this._extendStyles(this.selectionStart, t);
                        else
                            for (var e = this.selectionStart; e < this.selectionEnd; e++) this._extendStyles(e, t);
                        return this
                    },
                    _extendStyles: function(t, e) {
                        var n = this.get2DCursorLocation(t);
                        this.styles[n.lineIndex] || (this.styles[n.lineIndex] = {}), this.styles[n.lineIndex][n.charIndex] || (this.styles[n.lineIndex][n.charIndex] = {}), fabric.util.object.extend(this.styles[n.lineIndex][n.charIndex], e)
                    },
                    _render: function(t) {
                        this.callSuper("_render", t), this.ctx = t, this.isEditing && this.renderCursorOrSelection()
                    },
                    renderCursorOrSelection: function() {
                        if (this.active) {
                            var t, e = this.text.split("");
                            this.selectionStart === this.selectionEnd ? (t = this._getCursorBoundaries(e, "cursor"), this.renderCursor(t)) : (t = this._getCursorBoundaries(e, "selection"), this.renderSelection(e, t))
                        }
                    },
                    get2DCursorLocation: function(t) {
                        "undefined" == typeof t && (t = this.selectionStart);
                        var e = this.text.slice(0, t),
                            n = e.split(this._reNewline);
                        return {
                            lineIndex: n.length - 1,
                            charIndex: n[n.length - 1].length
                        }
                    },
                    getCurrentCharStyle: function(t, e) {
                        var n = this.styles[t] && this.styles[t][0 === e ? 0 : e - 1];
                        return {
                            fontSize: n && n.fontSize || this.fontSize,
                            fill: n && n.fill || this.fill,
                            textBackgroundColor: n && n.textBackgroundColor || this.textBackgroundColor,
                            textDecoration: n && n.textDecoration || this.textDecoration,
                            fontFamily: n && n.fontFamily || this.fontFamily,
                            fontWeight: n && n.fontWeight || this.fontWeight,
                            fontStyle: n && n.fontStyle || this.fontStyle,
                            stroke: n && n.stroke || this.stroke,
                            strokeWidth: n && n.strokeWidth || this.strokeWidth
                        }
                    },
                    getCurrentCharFontSize: function(t, e) {
                        return this.styles[t] && this.styles[t][0 === e ? 0 : e - 1] && this.styles[t][0 === e ? 0 : e - 1].fontSize || this.fontSize
                    },
                    getCurrentCharColor: function(t, e) {
                        return this.styles[t] && this.styles[t][0 === e ? 0 : e - 1] && this.styles[t][0 === e ? 0 : e - 1].fill || this.cursorColor
                    },
                    _getCursorBoundaries: function(t, e) {
                        var n = Math.round(this._getLeftOffset()),
                            r = this._getTopOffset(),
                            i = this._getCursorBoundariesOffsets(t, e);
                        return {
                            left: n,
                            top: r,
                            leftOffset: i.left + i.lineLeft,
                            topOffset: i.top
                        }
                    },
                    _getCursorBoundariesOffsets: function(t, e) {
                        for (var n = 0, r = 0, i = 0, o = 0, s = 0, a = 0; a < this.selectionStart; a++) "\n" === t[a] ? (s = 0, o += this._getHeightOfLine(this.ctx, r), r++, i = 0) : (s += this._getWidthOfChar(this.ctx, t[a], r, i), i++), n = this._getCachedLineOffset(r);
                        return "cursor" === e && (o += (1 - this._fontSizeFraction) * this._getHeightOfLine(this.ctx, r) / this.lineHeight - this.getCurrentCharFontSize(r, i) * (1 - this._fontSizeFraction)), {
                            top: o,
                            left: s,
                            lineLeft: n
                        }
                    },
                    _getCachedLineOffset: function(t) {
                        var e = this._getLineWidth(this.ctx, t);
                        return this.__lineOffsets[t] || (this.__lineOffsets[t] = this._getLineLeftOffset(e))
                    },
                    renderCursor: function(t) {
                        var e = this.ctx;
                        e.save();
                        var n = this.get2DCursorLocation(),
                            r = n.lineIndex,
                            i = n.charIndex,
                            o = this.getCurrentCharFontSize(r, i),
                            s = 0 === r && 0 === i ? this._getCachedLineOffset(r, this.text.split(this._reNewline)) : t.leftOffset;
                        e.fillStyle = this.getCurrentCharColor(r, i), e.globalAlpha = this.__isMousedown ? 1 : this._currentCursorOpacity, e.fillRect(t.left + s, t.top + t.topOffset, this.cursorWidth / this.scaleX, o), e.restore()
                    },
                    renderSelection: function(t, e) {
                        var n = this.ctx;
                        n.save(), n.fillStyle = this.selectionColor;
                        for (var r = this.get2DCursorLocation(this.selectionStart), i = this.get2DCursorLocation(this.selectionEnd), o = r.lineIndex, s = i.lineIndex, a = o; a <= s; a++) {
                            var l = this._getCachedLineOffset(a) || 0,
                                u = this._getHeightOfLine(this.ctx, a),
                                c = 0,
                                f = this._textLines[a];
                            if (a === o)
                                for (var h = 0, d = f.length; h < d; h++) h >= r.charIndex && (a !== s || h < i.charIndex) && (c += this._getWidthOfChar(n, f[h], a, h)), h < r.charIndex && (l += this._getWidthOfChar(n, f[h], a, h));
                            else if (a > o && a < s) c += this._getLineWidth(n, a) || 5;
                            else if (a === s)
                                for (var p = 0, g = i.charIndex; p < g; p++) c += this._getWidthOfChar(n, f[p], a, p);
                            n.fillRect(e.left + l, e.top + e.topOffset, c, u), e.topOffset += u
                        }
                        n.restore()
                    },
                    _renderChars: function(t, e, n, r, i, o) {
                        if (this.isEmptyStyles()) return this._renderCharsFast(t, e, n, r, i);
                        this.skipTextAlign = !0, r -= "center" === this.textAlign ? this.width / 2 : "right" === this.textAlign ? this.width : 0;
                        var s, a = this._getHeightOfLine(e, o),
                            l = this._getCachedLineOffset(o),
                            u = n.split(""),
                            c = "";
                        r += l || 0, e.save(), i -= a / this.lineHeight * this._fontSizeFraction;
                        for (var f = 0, h = u.length; f <= h; f++) {
                            s = s || this.getCurrentCharStyle(o, f);
                            var d = this.getCurrentCharStyle(o, f + 1);
                            (this._hasStyleChanged(s, d) || f === h) && (this._renderChar(t, e, o, f - 1, c, r, i, a), c = "", s = d), c += u[f]
                        }
                        e.restore()
                    },
                    _renderCharsFast: function(t, e, n, r, i) {
                        this.skipTextAlign = !1, "fillText" === t && this.fill && this.callSuper("_renderChars", t, e, n, r, i), "strokeText" === t && (this.stroke && this.strokeWidth > 0 || this.skipFillStrokeCheck) && this.callSuper("_renderChars", t, e, n, r, i)
                    },
                    _renderChar: function(t, e, n, r, i, o, s, a) {
                        var l, u, c, f = this._fontSizeFraction * a / this.lineHeight;
                        if (this.styles && this.styles[n] && (l = this.styles[n][r])) {
                            var h = l.stroke || this.stroke,
                                d = l.fill || this.fill;
                            e.save(), u = this._applyCharStylesGetWidth(e, i, n, r, l), c = this._getHeightOfChar(e, i, n, r), d && e.fillText(i, o, s), h && e.strokeText(i, o, s), this._renderCharDecoration(e, l, o, s, f, u, c), e.restore(), e.translate(u, 0)
                        } else "strokeText" === t && this.stroke && e[t](i, o, s), "fillText" === t && this.fill && e[t](i, o, s), u = this._applyCharStylesGetWidth(e, i, n, r), this._renderCharDecoration(e, null, o, s, f, u, this.fontSize), e.translate(e.measureText(i).width, 0)
                    },
                    _hasStyleChanged: function(t, e) {
                        return t.fill !== e.fill || t.fontSize !== e.fontSize || t.textBackgroundColor !== e.textBackgroundColor || t.textDecoration !== e.textDecoration || t.fontFamily !== e.fontFamily || t.fontWeight !== e.fontWeight || t.fontStyle !== e.fontStyle || t.stroke !== e.stroke || t.strokeWidth !== e.strokeWidth
                    },
                    _renderCharDecoration: function(t, e, n, r, i, o, s) {
                        var a = e ? e.textDecoration || this.textDecoration : this.textDecoration;
                        a && (a.indexOf("underline") > -1 && t.fillRect(n, r + s / 10, o, s / 15), a.indexOf("line-through") > -1 && t.fillRect(n, r - s * (this._fontSizeFraction + this._fontSizeMult - 1) + s / 15, o, s / 15), a.indexOf("overline") > -1 && t.fillRect(n, r - (this._fontSizeMult - this._fontSizeFraction) * s, o, s / 15))
                    },
                    _renderTextLine: function(t, e, n, r, i, o) {
                        i += this.fontSize * (this._fontSizeFraction + .03), this.callSuper("_renderTextLine", t, e, n, r, i, o)
                    },
                    _renderTextDecoration: function(t) {
                        if (this.isEmptyStyles()) return this.callSuper("_renderTextDecoration", t)
                    },
                    _renderTextLinesBackground: function(t) {
                        if (this.textBackgroundColor || this.styles) {
                            t.save(), this.textBackgroundColor && (t.fillStyle = this.textBackgroundColor);
                            for (var e = 0, n = 0, r = this._textLines.length; n < r; n++) {
                                var i = this._getHeightOfLine(t, n);
                                if ("" !== this._textLines[n]) {
                                    var o = this._getLineWidth(t, n),
                                        s = this._getCachedLineOffset(n);
                                    if (this.textBackgroundColor && (t.fillStyle = this.textBackgroundColor, t.fillRect(this._getLeftOffset() + s, this._getTopOffset() + e, o, i / this.lineHeight)), this.styles[n])
                                        for (var a = 0, l = this._textLines[n].length; a < l; a++)
                                            if (this.styles[n] && this.styles[n][a] && this.styles[n][a].textBackgroundColor) {
                                                var u = this._textLines[n][a];
                                                t.fillStyle = this.styles[n][a].textBackgroundColor, t.fillRect(this._getLeftOffset() + s + this._getWidthOfCharsAt(t, n, a), this._getTopOffset() + e, this._getWidthOfChar(t, u, n, a) + 1, i / this.lineHeight)
                                            }
                                    e += i
                                } else e += i
                            }
                            t.restore()
                        }
                    },
                    _getCacheProp: function(t, e) {
                        return t + e.fontFamily + e.fontSize + e.fontWeight + e.fontStyle + e.shadow
                    },
                    _applyCharStylesGetWidth: function(e, n, r, i, o) {
                        var s = o || this.styles[r] && this.styles[r][i];
                        s = s ? t(s) : {}, this._applyFontStyles(s);
                        var a = this._getCacheProp(n, s);
                        if (this.isEmptyStyles() && this._charWidthsCache[a] && this.caching) return this._charWidthsCache[a];
                        "string" == typeof s.shadow && (s.shadow = new fabric.Shadow(s.shadow));
                        var l = s.fill || this.fill;
                        return e.fillStyle = l.toLive ? l.toLive(e) : l, s.stroke && (e.strokeStyle = s.stroke && s.stroke.toLive ? s.stroke.toLive(e) : s.stroke), e.lineWidth = s.strokeWidth || this.strokeWidth, e.font = this._getFontDeclaration.call(s), this._setShadow.call(s, e), this.caching ? (this._charWidthsCache[a] || (this._charWidthsCache[a] = e.measureText(n).width), this._charWidthsCache[a]) : e.measureText(n).width
                    },
                    _applyFontStyles: function(t) {
                        t.fontFamily || (t.fontFamily = this.fontFamily), t.fontSize || (t.fontSize = this.fontSize), t.fontWeight || (t.fontWeight = this.fontWeight), t.fontStyle || (t.fontStyle = this.fontStyle)
                    },
                    _getStyleDeclaration: function(e, n) {
                        return this.styles[e] && this.styles[e][n] ? t(this.styles[e][n]) : {}
                    },
                    _getWidthOfChar: function(t, e, n, r) {
                        if ("justify" === this.textAlign && /\s/.test(e)) return this._getWidthOfSpace(t, n);
                        var i = this._getStyleDeclaration(n, r);
                        this._applyFontStyles(i);
                        var o = this._getCacheProp(e, i);
                        if (this._charWidthsCache[o] && this.caching) return this._charWidthsCache[o];
                        if (t) {
                            t.save();
                            var s = this._applyCharStylesGetWidth(t, e, n, r);
                            return t.restore(), s
                        }
                    },
                    _getHeightOfChar: function(t, e, n, r) {
                        return this.styles[n] && this.styles[n][r] ? this.styles[n][r].fontSize || this.fontSize : this.fontSize
                    },
                    _getWidthOfCharAt: function(t, e, n) {
                        var r = this._textLines[e].split("")[n];
                        return this._getWidthOfChar(t, r, e, n)
                    },
                    _getHeightOfCharAt: function(t, e, n) {
                        var r = this._textLines[e].split("")[n];
                        return this._getHeightOfChar(t, r, e, n)
                    },
                    _getWidthOfCharsAt: function(t, e, n) {
                        for (var r = 0, i = 0; i < n; i++) r += this._getWidthOfCharAt(t, e, i);
                        return r
                    },
                    _getLineWidth: function(t, e) {
                        return this.__lineWidths[e] ? this.__lineWidths[e] : (this.__lineWidths[e] = this._getWidthOfCharsAt(t, e, this._textLines[e].length), this.__lineWidths[e])
                    },
                    _getWidthOfSpace: function(t, e) {
                        var n = this.text.split(this._reNewline),
                            r = n[e],
                            i = r.split(/\s+/),
                            o = this._getWidthOfWords(t, r, e),
                            s = this.width - o,
                            a = i.length - 1,
                            l = s / a;
                        return l
                    },
                    _getWidthOfWords: function(t, e, n) {
                        for (var r = 0, i = 0; i < e.length; i++) {
                            var o = e[i];
                            o.match(/\s/) || (r += this._getWidthOfChar(t, o, n, i))
                        }
                        return r
                    },
                    _getHeightOfLine: function(t, e) {
                        if (this.__lineHeights[e]) return this.__lineHeights[e];
                        for (var n = this._textLines[e], r = this._getHeightOfChar(t, n[0], e, 0), i = n.split(""), o = 1, s = i.length; o < s; o++) {
                            var a = this._getHeightOfChar(t, i[o], e, o);
                            a > r && (r = a)
                        }
                        return this.__maxFontHeights[e] = r, this.__lineHeights[e] = r * this.lineHeight * this._fontSizeMult, this.__lineHeights[e]
                    },
                    _getTextHeight: function(t) {
                        for (var e = 0, n = 0, r = this._textLines.length; n < r; n++) e += this._getHeightOfLine(t, n);
                        return e
                    },
                    _renderTextBoxBackground: function(t) {
                        this.backgroundColor && (t.save(), t.fillStyle = this.backgroundColor, t.fillRect(this._getLeftOffset(), this._getTopOffset(), this.width, this.height), t.restore())
                    },
                    toObject: function(e) {
                        return fabric.util.object.extend(this.callSuper("toObject", e), {
                            styles: t(this.styles)
                        })
                    }
                }), fabric.IText.fromObject = function(e) {
                    return new fabric.IText(e.text, t(e))
                }, fabric.IText.instances = []
            }(),
            function() {
                var t = fabric.util.object.clone;
                fabric.util.object.extend(fabric.IText.prototype, {
                    initBehavior: function() {
                        this.initAddedHandler(), this.initCursorSelectionHandlers(), this.initDoubleClickSimulation()
                    },
                    initSelectedHandler: function() {
                        this.on("selected", function() {
                            var t = this;
                            setTimeout(function() {
                                t.selected = !0
                            }, 100)
                        })
                    },
                    initAddedHandler: function() {
                        this.on("added", function() {
                            this.canvas && !this.canvas._hasITextHandlers && (this.canvas._hasITextHandlers = !0, this._initCanvasHandlers())
                        })
                    },
                    _initCanvasHandlers: function() {
                        this.canvas.on("selection:cleared", function() {
                            fabric.IText.prototype.exitEditingOnOthers.call()
                        }), this.canvas.on("mouse:up", function() {
                            fabric.IText.instances.forEach(function(t) {
                                t.__isMousedown = !1
                            })
                        }), this.canvas.on("object:selected", function(t) {
                            fabric.IText.prototype.exitEditingOnOthers.call(t.target)
                        })
                    },
                    _tick: function() {
                        if (!this._abortCursorAnimation) {
                            var t = this;
                            this.animate("_currentCursorOpacity", 1, {
                                duration: this.cursorDuration,
                                onComplete: function() {
                                    t._onTickComplete()
                                },
                                onChange: function() {
                                    t.canvas && t.canvas.renderAll()
                                },
                                abort: function() {
                                    return t._abortCursorAnimation
                                }
                            })
                        }
                    },
                    _onTickComplete: function() {
                        if (!this._abortCursorAnimation) {
                            var t = this;
                            this._cursorTimeout1 && clearTimeout(this._cursorTimeout1), this._cursorTimeout1 = setTimeout(function() {
                                t.animate("_currentCursorOpacity", 0, {
                                    duration: this.cursorDuration / 2,
                                    onComplete: function() {
                                        t._tick()
                                    },
                                    onChange: function() {
                                        t.canvas && t.canvas.renderAll()
                                    },
                                    abort: function() {
                                        return t._abortCursorAnimation
                                    }
                                })
                            }, 100)
                        }
                    },
                    initDelayedCursor: function(t) {
                        var e = this,
                            n = t ? 0 : this.cursorDelay;
                        t && (this._abortCursorAnimation = !0, clearTimeout(this._cursorTimeout1), this._currentCursorOpacity = 1, this.canvas && this.canvas.renderAll()), this._cursorTimeout2 && clearTimeout(this._cursorTimeout2), this._cursorTimeout2 = setTimeout(function() {
                            e._abortCursorAnimation = !1, e._tick()
                        }, n)
                    },
                    abortCursorAnimation: function() {
                        this._abortCursorAnimation = !0, clearTimeout(this._cursorTimeout1), clearTimeout(this._cursorTimeout2), this._currentCursorOpacity = 0, this.canvas && this.canvas.renderAll();
                        var t = this;
                        setTimeout(function() {
                            t._abortCursorAnimation = !1
                        }, 10)
                    },
                    selectAll: function() {
                        this.setSelectionStart(0), this.setSelectionEnd(this.text.length)
                    },
                    getSelectedText: function() {
                        return this.text.slice(this.selectionStart, this.selectionEnd)
                    },
                    findWordBoundaryLeft: function(t) {
                        var e = 0,
                            n = t - 1;
                        if (this._reSpace.test(this.text.charAt(n)))
                            for (; this._reSpace.test(this.text.charAt(n));) e++, n--;
                        for (;
                            /\S/.test(this.text.charAt(n)) && n > -1;) e++, n--;
                        return t - e
                    },
                    findWordBoundaryRight: function(t) {
                        var e = 0,
                            n = t;
                        if (this._reSpace.test(this.text.charAt(n)))
                            for (; this._reSpace.test(this.text.charAt(n));) e++, n++;
                        for (;
                            /\S/.test(this.text.charAt(n)) && n < this.text.length;) e++, n++;
                        return t + e
                    },
                    findLineBoundaryLeft: function(t) {
                        for (var e = 0, n = t - 1; !/\n/.test(this.text.charAt(n)) && n > -1;) e++, n--;
                        return t - e
                    },
                    findLineBoundaryRight: function(t) {
                        for (var e = 0, n = t; !/\n/.test(this.text.charAt(n)) && n < this.text.length;) e++, n++;
                        return t + e
                    },
                    getNumNewLinesInSelectedText: function() {
                        for (var t = this.getSelectedText(), e = 0, n = 0, r = t.split(""), i = r.length; n < i; n++) "\n" === r[n] && e++;
                        return e
                    },
                    searchWordBoundary: function(t, e) {
                        for (var n = this._reSpace.test(this.text.charAt(t)) ? t - 1 : t, r = this.text.charAt(n), i = /[ \n\.,;!\?\-]/; !i.test(r) && n > 0 && n < this.text.length;) n += e, r = this.text.charAt(n);
                        return i.test(r) && "\n" !== r && (n += 1 === e ? 0 : 1), n
                    },
                    selectWord: function(t) {
                        var e = this.searchWordBoundary(t, -1),
                            n = this.searchWordBoundary(t, 1);
                        this.setSelectionStart(e), this.setSelectionEnd(n), this.initDelayedCursor(!0)
                    },
                    selectLine: function(t) {
                        var e = this.findLineBoundaryLeft(t),
                            n = this.findLineBoundaryRight(t);
                        this.setSelectionStart(e), this.setSelectionEnd(n), this.initDelayedCursor(!0)
                    },
                    enterEditing: function() {
                        if (!this.isEditing && this.editable) return this.exitEditingOnOthers(), this.isEditing = !0, this.initHiddenTextarea(), this.hiddenTextarea.focus(), this._updateTextarea(), this._saveEditingProps(), this._setEditingProps(), this._tick(), this.canvas && this.canvas.renderAll(), this.fire("editing:entered"), this.canvas && this.canvas.fire("text:editing:entered", {
                            target: this
                        }), this
                    },
                    exitEditingOnOthers: function() {
                        fabric.IText.instances.forEach(function(t) {
                            t.selected = !1, t.isEditing && t.exitEditing()
                        }, this)
                    },
                    _setEditingProps: function() {
                        this.hoverCursor = "text", this.canvas && (this.canvas.defaultCursor = this.canvas.moveCursor = "text"), this.borderColor = this.editingBorderColor, this.hasControls = this.selectable = !1, this.lockMovementX = this.lockMovementY = !0
                    },
                    _updateTextarea: function() {
                        this.hiddenTextarea && (this.hiddenTextarea.value = this.text, this.hiddenTextarea.selectionStart = this.selectionStart, this.hiddenTextarea.selectionEnd = this.selectionEnd)
                    },
                    _saveEditingProps: function() {
                        this._savedProps = {
                            hasControls: this.hasControls,
                            borderColor: this.borderColor,
                            lockMovementX: this.lockMovementX,
                            lockMovementY: this.lockMovementY,
                            hoverCursor: this.hoverCursor,
                            defaultCursor: this.canvas && this.canvas.defaultCursor,
                            moveCursor: this.canvas && this.canvas.moveCursor
                        }
                    },
                    _restoreEditingProps: function() {
                        this._savedProps && (this.hoverCursor = this._savedProps.overCursor, this.hasControls = this._savedProps.hasControls, this.borderColor = this._savedProps.borderColor, this.lockMovementX = this._savedProps.lockMovementX, this.lockMovementY = this._savedProps.lockMovementY, this.canvas && (this.canvas.defaultCursor = this._savedProps.defaultCursor, this.canvas.moveCursor = this._savedProps.moveCursor))
                    },
                    exitEditing: function() {
                        return this.selected = !1, this.isEditing = !1, this.selectable = !0, this.selectionEnd = this.selectionStart, this.hiddenTextarea && this.canvas && this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea), this.hiddenTextarea = null, this.abortCursorAnimation(), this._restoreEditingProps(), this._currentCursorOpacity = 0, this.fire("editing:exited"), this.canvas && this.canvas.fire("text:editing:exited", {
                            target: this
                        }), this
                    },
                    _removeExtraneousStyles: function() {
                        for (var t in this.styles) this._textLines[t] || delete this.styles[t]
                    },
                    _removeCharsFromTo: function(t, e) {
                        for (var n = e; n !== t;) {
                            var r = this.get2DCursorLocation(n).charIndex;
                            n--;
                            var i = this.get2DCursorLocation(n).charIndex,
                                o = i > r;
                            o ? this.removeStyleObject(o, n + 1) : this.removeStyleObject(0 === this.get2DCursorLocation(n).charIndex, n)
                        }
                        this.text = this.text.slice(0, t) + this.text.slice(e), this._clearCache()
                    },
                    insertChars: function(t, e) {
                        var n = "\n" === this.text.slice(this.selectionStart, this.selectionStart + 1);
                        this.text = this.text.slice(0, this.selectionStart) + t + this.text.slice(this.selectionEnd), this.selectionStart === this.selectionEnd && this.insertStyleObjects(t, n, e), this.setSelectionStart(this.selectionStart + t.length), this.setSelectionEnd(this.selectionStart), this._clearCache(), this.canvas && this.canvas.renderAll(), this.setCoords(), this.fire("changed"), this.canvas && this.canvas.fire("text:changed", {
                            target: this
                        })
                    },
                    insertNewlineStyleObject: function(e, n, r) {
                        this.shiftLineStyles(e, 1), this.styles[e + 1] || (this.styles[e + 1] = {});
                        var i = this.styles[e][n - 1],
                            o = {};
                        if (r) o[0] = t(i), this.styles[e + 1] = o;
                        else {
                            for (var s in this.styles[e]) parseInt(s, 10) >= n && (o[parseInt(s, 10) - n] = this.styles[e][s], delete this.styles[e][s]);
                            this.styles[e + 1] = o
                        }
                        this._clearCache()
                    },
                    insertCharStyleObject: function(e, n, r) {
                        var i = this.styles[e],
                            o = t(i);
                        0 !== n || r || (n = 1);
                        for (var s in o) {
                            var a = parseInt(s, 10);
                            a >= n && (i[a + 1] = o[a])
                        }
                        this.styles[e][n] = r || t(i[n - 1]), this._clearCache()
                    },
                    insertStyleObjects: function(t, e, n) {
                        var r = this.get2DCursorLocation(),
                            i = r.lineIndex,
                            o = r.charIndex;
                        this.styles[i] || (this.styles[i] = {}), "\n" === t ? this.insertNewlineStyleObject(i, o, e) : n ? this._insertStyles(this.copiedStyles) : this.insertCharStyleObject(i, o)
                    },
                    _insertStyles: function(t) {
                        for (var e = 0, n = t.length; e < n; e++) {
                            var r = this.get2DCursorLocation(this.selectionStart + e),
                                i = r.lineIndex,
                                o = r.charIndex;
                            this.insertCharStyleObject(i, o, t[e])
                        }
                    },
                    shiftLineStyles: function(e, n) {
                        var r = t(this.styles);
                        for (var i in this.styles) {
                            var o = parseInt(i, 10);
                            o > e && (this.styles[o + n] = r[o])
                        }
                    },
                    removeStyleObject: function(e, n) {
                        var r = this.get2DCursorLocation(n),
                            i = r.lineIndex,
                            o = r.charIndex;
                        if (e) {
                            var s = this._textLines[i - 1],
                                a = s ? s.length : 0;
                            this.styles[i - 1] || (this.styles[i - 1] = {});
                            for (o in this.styles[i]) this.styles[i - 1][parseInt(o, 10) + a] = this.styles[i][o];
                            this.shiftLineStyles(i, -1)
                        } else {
                            var l = this.styles[i];
                            if (l) {
                                var u = this.selectionStart === this.selectionEnd ? -1 : 0;
                                delete l[o + u]
                            }
                            var c = t(l);
                            for (var f in c) {
                                var h = parseInt(f, 10);
                                h >= o && 0 !== h && (l[h - 1] = c[h], delete l[h])
                            }
                        }
                    },
                    insertNewline: function() {
                        this.insertChars("\n")
                    }
                })
            }(), fabric.util.object.extend(fabric.IText.prototype, {
            initDoubleClickSimulation: function() {
                this.__lastClickTime = +new Date, this.__lastLastClickTime = +new Date, this.__lastPointer = {}, this.on("mousedown", this.onMouseDown.bind(this))
            },
            onMouseDown: function(t) {
                this.__newClickTime = +new Date;
                var e = this.canvas.getPointer(t.e);
                this.isTripleClick(e) ? (this.fire("tripleclick", t), this._stopEvent(t.e)) : this.isDoubleClick(e) && (this.fire("dblclick", t), this._stopEvent(t.e)), this.__lastLastClickTime = this.__lastClickTime, this.__lastClickTime = this.__newClickTime, this.__lastPointer = e, this.__lastIsEditing = this.isEditing, this.__lastSelected = this.selected
            },
            isDoubleClick: function(t) {
                return this.__newClickTime - this.__lastClickTime < 500 && this.__lastPointer.x === t.x && this.__lastPointer.y === t.y && this.__lastIsEditing
            },
            isTripleClick: function(t) {
                return this.__newClickTime - this.__lastClickTime < 500 && this.__lastClickTime - this.__lastLastClickTime < 500 && this.__lastPointer.x === t.x && this.__lastPointer.y === t.y
            },
            _stopEvent: function(t) {
                t.preventDefault && t.preventDefault(), t.stopPropagation && t.stopPropagation()
            },
            initCursorSelectionHandlers: function() {
                this.initSelectedHandler(), this.initMousedownHandler(), this.initMousemoveHandler(), this.initMouseupHandler(), this.initClicks()
            },
            initClicks: function() {
                this.on("dblclick", function(t) {
                    this.selectWord(this.getSelectionStartFromPointer(t.e))
                }), this.on("tripleclick", function(t) {
                    this.selectLine(this.getSelectionStartFromPointer(t.e))
                })
            },
            initMousedownHandler: function() {
                this.on("mousedown", function(t) {
                    var e = this.canvas.getPointer(t.e);
                    this.__mousedownX = e.x, this.__mousedownY = e.y, this.__isMousedown = !0, this.hiddenTextarea && this.canvas && this.canvas.wrapperEl.appendChild(this.hiddenTextarea), this.selected && this.setCursorByClick(t.e), this.isEditing && (this.__selectionStartOnMouseDown = this.selectionStart, this.initDelayedCursor(!0))
                })
            },
            initMousemoveHandler: function() {
                this.on("mousemove", function(t) {
                    if (this.__isMousedown && this.isEditing) {
                        var e = this.getSelectionStartFromPointer(t.e);
                        e >= this.__selectionStartOnMouseDown ? (this.setSelectionStart(this.__selectionStartOnMouseDown), this.setSelectionEnd(e)) : (this.setSelectionStart(e), this.setSelectionEnd(this.__selectionStartOnMouseDown))
                    }
                })
            },
            _isObjectMoved: function(t) {
                var e = this.canvas.getPointer(t);
                return this.__mousedownX !== e.x || this.__mousedownY !== e.y
            },
            initMouseupHandler: function() {
                this.on("mouseup", function(t) {
                    this.__isMousedown = !1, this._isObjectMoved(t.e) || (this.__lastSelected && (this.enterEditing(), this.initDelayedCursor(!0)), this.selected = !0)
                })
            },
            setCursorByClick: function(t) {
                var e = this.getSelectionStartFromPointer(t);
                t.shiftKey ? e < this.selectionStart ? (this.setSelectionEnd(this.selectionStart), this.setSelectionStart(e)) : this.setSelectionEnd(e) : (this.setSelectionStart(e), this.setSelectionEnd(e))
            },
            _getLocalRotatedPointer: function(t) {
                var e = this.canvas.getPointer(t),
                    n = new fabric.Point(e.x, e.y),
                    r = new fabric.Point(this.left, this.top),
                    i = fabric.util.rotatePoint(n, r, fabric.util.degreesToRadians(-this.angle));
                return this.getLocalPointer(t, i)
            },
            getSelectionStartFromPointer: function(t) {
                for (var e, n, r = this._getLocalRotatedPointer(t), i = 0, o = 0, s = 0, a = 0, l = 0, u = this._textLines.length; l < u; l++) {
                    n = this._textLines[l].split(""), s += this._getHeightOfLine(this.ctx, l) * this.scaleY;
                    var c = this._getLineWidth(this.ctx, l),
                        f = this._getLineLeftOffset(c);
                    o = f * this.scaleX, this.flipX && (this._textLines[l] = n.split("").reverse().join(""));
                    for (var h = 0, d = n.length; h < d; h++) {
                        var p = n[h];
                        if (i = o, o += this._getWidthOfChar(this.ctx, p, l, this.flipX ? d - h : h) * this.scaleX, !(s <= r.y || o <= r.x)) return this._getNewSelectionStartFromOffset(r, i, o, a + l, d);
                        a++
                    }
                    if (r.y < s) return this._getNewSelectionStartFromOffset(r, i, o, a + l, d)
                }
                if ("undefined" == typeof e) return this.text.length
            },
            _getNewSelectionStartFromOffset: function(t, e, n, r, i) {
                var o = t.x - e,
                    s = n - t.x,
                    a = s > o ? 0 : 1,
                    l = r + a;
                return this.flipX && (l = i - l), l > this.text.length && (l = this.text.length), l
            }
        }), fabric.util.object.extend(fabric.IText.prototype, {
            initHiddenTextarea: function() {
                this.hiddenTextarea = fabric.document.createElement("textarea"), this.hiddenTextarea.setAttribute("autocapitalize", "off"), this.hiddenTextarea.style.cssText = "position: fixed; bottom: 20px; left: 0px; opacity: 0; width: 0px; height: 0px; z-index: -999;", fabric.document.body.appendChild(this.hiddenTextarea), fabric.util.addListener(this.hiddenTextarea, "keydown", this.onKeyDown.bind(this)), fabric.util.addListener(this.hiddenTextarea, "keypress", this.onKeyPress.bind(this)), fabric.util.addListener(this.hiddenTextarea, "copy", this.copy.bind(this)), fabric.util.addListener(this.hiddenTextarea, "paste", this.paste.bind(this))
            },
            _keysMap: {
                8: "removeChars",
                9: "exitEditing",
                27: "exitEditing",
                13: "insertNewline",
                33: "moveCursorUp",
                34: "moveCursorDown",
                35: "moveCursorRight",
                36: "moveCursorLeft",
                37: "moveCursorLeft",
                38: "moveCursorUp",
                39: "moveCursorRight",
                40: "moveCursorDown",
                46: "forwardDelete"
            },
            _ctrlKeysMap: {
                65: "selectAll",
                88: "cut"
            },
            onKeyDown: function(t) {
                if (this.isEditing) {
                    if (t.keyCode in this._keysMap) this[this._keysMap[t.keyCode]](t);
                    else {
                        if (!(t.keyCode in this._ctrlKeysMap && (t.ctrlKey || t.metaKey))) return;
                        this[this._ctrlKeysMap[t.keyCode]](t)
                    }
                    t.stopImmediatePropagation(), t.preventDefault(), this.canvas && this.canvas.renderAll()
                }
            },
            forwardDelete: function(t) {
                this.selectionStart === this.selectionEnd && this.moveCursorRight(t), this.removeChars(t)
            },
            copy: function(t) {
                var e = this.getSelectedText(),
                    n = this._getClipboardData(t);
                n && n.setData("text", e), this.copiedText = e, this.copiedStyles = this.getSelectionStyles(this.selectionStart, this.selectionEnd)
            },
            paste: function(t) {
                var e = null,
                    n = this._getClipboardData(t);
                e = n ? n.getData("text") : this.copiedText, e && this.insertChars(e, !0)
            },
            cut: function(t) {
                this.selectionStart !== this.selectionEnd && (this.copy(), this.removeChars(t))
            },
            _getClipboardData: function(t) {
                return t && (t.clipboardData || fabric.window.clipboardData)
            },
            onKeyPress: function(t) {
                !this.isEditing || t.metaKey || t.ctrlKey || (0 !== t.which && this.insertChars(String.fromCharCode(t.which)), t.stopPropagation())
            },
            getDownCursorOffset: function(t, e) {
                var n, r, i = e ? this.selectionEnd : this.selectionStart,
                    o = this.text.slice(0, i),
                    s = this.text.slice(i),
                    a = o.slice(o.lastIndexOf("\n") + 1),
                    l = s.match(/(.*)\n?/)[1],
                    u = (s.match(/.*\n(.*)\n?/) || {})[1] || "",
                    c = this.get2DCursorLocation(i);
                if (c.lineIndex === this._textLines.length - 1 || t.metaKey || 34 === t.keyCode) return this.text.length - i;
                var f = this._getLineWidth(this.ctx, c.lineIndex);
                r = this._getLineLeftOffset(f);
                for (var h = r, d = c.lineIndex, p = 0, g = a.length; p < g; p++) n = a[p], h += this._getWidthOfChar(this.ctx, n, d, p);
                var _ = this._getIndexOnNextLine(c, u, h);
                return l.length + 1 + _
            },
            _getIndexOnNextLine: function(t, e, n) {
                for (var r, i = t.lineIndex + 1, o = this._getLineWidth(this.ctx, i), s = this._getLineLeftOffset(o), a = s, l = 0, u = 0, c = e.length; u < c; u++) {
                    var f = e[u],
                        h = this._getWidthOfChar(this.ctx, f, i, u);
                    if (a += h, a > n) {
                        r = !0;
                        var d = a - h,
                            p = a,
                            g = Math.abs(d - n),
                            _ = Math.abs(p - n);
                        l = _ < g ? u + 1 : u;
                        break
                    }
                }
                return r || (l = e.length), l
            },
            moveCursorDown: function(t) {
                this.abortCursorAnimation(), this._currentCursorOpacity = 1;
                var e = this.getDownCursorOffset(t, "right" === this._selectionDirection);
                t.shiftKey ? this.moveCursorDownWithShift(e) : this.moveCursorDownWithoutShift(e), this.initDelayedCursor()
            },
            moveCursorDownWithoutShift: function(t) {
                this._selectionDirection = "right", this.setSelectionStart(this.selectionStart + t), this.setSelectionEnd(this.selectionStart)
            },
            swapSelectionPoints: function() {
                var t = this.selectionEnd;
                this.setSelectionEnd(this.selectionStart), this.setSelectionStart(t)
            },
            moveCursorDownWithShift: function(t) {
                this.selectionEnd === this.selectionStart && (this._selectionDirection = "right"), "right" === this._selectionDirection ? this.setSelectionEnd(this.selectionEnd + t) : this.setSelectionStart(this.selectionStart + t), this.selectionEnd < this.selectionStart && "left" === this._selectionDirection && (this.swapSelectionPoints(), this._selectionDirection = "right"), this.selectionEnd > this.text.length && this.setSelectionEnd(this.text.length)
            },
            getUpCursorOffset: function(t, e) {
                var n = e ? this.selectionEnd : this.selectionStart,
                    r = this.get2DCursorLocation(n);
                if (0 === r.lineIndex || t.metaKey || 33 === t.keyCode) return n;
                for (var i, o = this.text.slice(0, n), s = o.slice(o.lastIndexOf("\n") + 1), a = (o.match(/\n?(.*)\n.*$/) || {})[1] || "", l = this._getLineWidth(this.ctx, r.lineIndex), u = this._getLineLeftOffset(l), c = u, f = r.lineIndex, h = 0, d = s.length; h < d; h++) i = s[h], c += this._getWidthOfChar(this.ctx, i, f, h);
                var p = this._getIndexOnPrevLine(r, a, c);
                return a.length - p + s.length
            },
            _getIndexOnPrevLine: function(t, e, n) {
                for (var r, i = t.lineIndex - 1, o = this._getLineWidth(this.ctx, i), s = this._getLineLeftOffset(o), a = s, l = 0, u = 0, c = e.length; u < c; u++) {
                    var f = e[u],
                        h = this._getWidthOfChar(this.ctx, f, i, u);
                    if (a += h, a > n) {
                        r = !0;
                        var d = a - h,
                            p = a,
                            g = Math.abs(d - n),
                            _ = Math.abs(p - n);
                        l = _ < g ? u : u - 1;
                        break
                    }
                }
                return r || (l = e.length - 1), l
            },
            moveCursorUp: function(t) {
                this.abortCursorAnimation(), this._currentCursorOpacity = 1;
                var e = this.getUpCursorOffset(t, "right" === this._selectionDirection);
                t.shiftKey ? this.moveCursorUpWithShift(e) : this.moveCursorUpWithoutShift(e), this.initDelayedCursor()
            },
            moveCursorUpWithShift: function(t) {
                this.selectionEnd === this.selectionStart && (this._selectionDirection = "left"), "right" === this._selectionDirection ? this.setSelectionEnd(this.selectionEnd - t) : this.setSelectionStart(this.selectionStart - t), this.selectionEnd < this.selectionStart && "right" === this._selectionDirection && (this.swapSelectionPoints(), this._selectionDirection = "left")
            },
            moveCursorUpWithoutShift: function(t) {
                this.selectionStart === this.selectionEnd && this.setSelectionStart(this.selectionStart - t), this.setSelectionEnd(this.selectionStart), this._selectionDirection = "left"
            },
            moveCursorLeft: function(t) {
                0 === this.selectionStart && 0 === this.selectionEnd || (this.abortCursorAnimation(), this._currentCursorOpacity = 1, t.shiftKey ? this.moveCursorLeftWithShift(t) : this.moveCursorLeftWithoutShift(t), this.initDelayedCursor())
            },
            _move: function(t, e, n) {
                var r = "selectionStart" === e ? "setSelectionStart" : "setSelectionEnd";
                t.altKey ? this[r](this["findWordBoundary" + n](this[e])) : t.metaKey || 35 === t.keyCode || 36 === t.keyCode ? this[r](this["findLineBoundary" + n](this[e])) : this[r](this[e] + ("Left" === n ? -1 : 1))
            },
            _moveLeft: function(t, e) {
                this._move(t, e, "Left")
            },
            _moveRight: function(t, e) {
                this._move(t, e, "Right")
            },
            moveCursorLeftWithoutShift: function(t) {
                this._selectionDirection = "left", this.selectionEnd === this.selectionStart && this._moveLeft(t, "selectionStart"), this.setSelectionEnd(this.selectionStart)
            },
            moveCursorLeftWithShift: function(t) {
                "right" === this._selectionDirection && this.selectionStart !== this.selectionEnd ? this._moveLeft(t, "selectionEnd") : (this._selectionDirection = "left", this._moveLeft(t, "selectionStart"), "\n" === this.text.charAt(this.selectionStart) && this.setSelectionStart(this.selectionStart - 1))
            },
            moveCursorRight: function(t) {
                this.selectionStart >= this.text.length && this.selectionEnd >= this.text.length || (this.abortCursorAnimation(), this._currentCursorOpacity = 1, t.shiftKey ? this.moveCursorRightWithShift(t) : this.moveCursorRightWithoutShift(t), this.initDelayedCursor())
            },
            moveCursorRightWithShift: function(t) {
                "left" === this._selectionDirection && this.selectionStart !== this.selectionEnd ? this._moveRight(t, "selectionStart") : (this._selectionDirection = "right", this._moveRight(t, "selectionEnd"), "\n" === this.text.charAt(this.selectionEnd - 1) && this.setSelectionEnd(this.selectionEnd + 1))
            },
            moveCursorRightWithoutShift: function(t) {
                this._selectionDirection = "right", this.selectionStart === this.selectionEnd ? (this._moveRight(t, "selectionStart"), this.setSelectionEnd(this.selectionStart)) : (this.setSelectionEnd(this.selectionEnd + this.getNumNewLinesInSelectedText()), this.setSelectionStart(this.selectionEnd))
            },
            removeChars: function(t) {
                this.selectionStart === this.selectionEnd ? this._removeCharsNearCursor(t) : this._removeCharsFromTo(this.selectionStart, this.selectionEnd), this.setSelectionEnd(this.selectionStart), this._removeExtraneousStyles(), this._clearCache(), this.canvas && this.canvas.renderAll(), this.setCoords(), this.fire("changed"), this.canvas && this.canvas.fire("text:changed", {
                    target: this
                })
            },
            _removeCharsNearCursor: function(t) {
                if (0 !== this.selectionStart)
                    if (t.metaKey) {
                        var e = this.findLineBoundaryLeft(this.selectionStart);
                        this._removeCharsFromTo(e, this.selectionStart), this.setSelectionStart(e)
                    } else if (t.altKey) {
                        var n = this.findWordBoundaryLeft(this.selectionStart);
                        this._removeCharsFromTo(n, this.selectionStart), this.setSelectionStart(n)
                    } else {
                        var r = "\n" === this.text.slice(this.selectionStart - 1, this.selectionStart);
                        this.removeStyleObject(r), this.setSelectionStart(this.selectionStart - 1), this.text = this.text.slice(0, this.selectionStart) + this.text.slice(this.selectionStart + 1)
                    }
            }
        }), fabric.util.object.extend(fabric.IText.prototype, {
            _setSVGTextLineText: function(t, e, n, r, i, o) {
                this.styles[t] ? this._setSVGTextLineChars(t, e, n, r, o) : this.callSuper("_setSVGTextLineText", t, e, n, r, i)
            },
            _setSVGTextLineChars: function(t, e, n, r, i) {
                for (var o = this._textLines[t].split(""), s = 0, a = this._getSVGLineLeftOffset(t) - this.width / 2, l = this._getSVGLineTopOffset(t), u = this._getHeightOfLine(this.ctx, t), c = 0, f = o.length; c < f; c++) {
                    var h = this.styles[t][c] || {};
                    e.push(this._createTextCharSpan(o[c], h, a, l.lineTop + l.offset, s));
                    var d = this._getWidthOfChar(this.ctx, o[c], t, c);
                    h.textBackgroundColor && i.push(this._createTextCharBg(h, a, l.lineTop, u, d, s)), s += d
                }
            },
            _getSVGLineLeftOffset: function(t) {
                return fabric.util.toFixed(this._getLineLeftOffset(this.__lineWidths[t]), 2)
            },
            _getSVGLineTopOffset: function(t) {
                for (var e = 0, n = 0, r = 0; r < t; r++) e += this._getHeightOfLine(this.ctx, r);
                return n = this._getHeightOfLine(this.ctx, r), {
                    lineTop: e,
                    offset: (this._fontSizeMult - this._fontSizeFraction) * n / (this.lineHeight * this._fontSizeMult)
                }
            },
            _createTextCharBg: function(t, e, n, r, i, o) {
                return ['<rect fill="', t.textBackgroundColor, '" x="', e + o, '" y="', n - this.height / 2, '" width="', i, '" height="', r / this.lineHeight, '"></rect>'].join("")
            },
            _createTextCharSpan: function(t, e, n, r, i) {
                var o = this.getSvgStyles.call(fabric.util.object.extend({
                    visible: !0,
                    fill: this.fill,
                    stroke: this.stroke,
                    type: "text"
                }, e));
                return ['<tspan x="', n + i, '" y="', r - this.height / 2, '" ', e.fontFamily ? 'font-family="' + e.fontFamily.replace(/"/g, "'") + '" ' : "", e.fontSize ? 'font-size="' + e.fontSize + '" ' : "", e.fontStyle ? 'font-style="' + e.fontStyle + '" ' : "", e.fontWeight ? 'font-weight="' + e.fontWeight + '" ' : "", e.textDecoration ? 'text-decoration="' + e.textDecoration + '" ' : "", 'style="', o, '">', fabric.util.string.escapeXml(t), "</tspan>"].join("")
            }
        }),
            function() {
                function request(t, e, n) {
                    var r = URL.parse(t);
                    r.port || (r.port = 0 === r.protocol.indexOf("https:") ? 443 : 80);
                    var i = 0 === r.protocol.indexOf("https:") ? HTTPS : HTTP,
                        o = i.request({
                            hostname: r.hostname,
                            port: r.port,
                            path: r.path,
                            method: "GET"
                        }, function(t) {
                            var r = "";
                            e && t.setEncoding(e), t.on("end", function() {
                                n(r)
                            }), t.on("data", function(e) {
                                200 === t.statusCode && (r += e)
                            })
                        });
                    o.on("error", function(t) {
                        t.errno === process.ECONNREFUSED ? fabric.log("ECONNREFUSED: connection refused to " + r.hostname + ":" + r.port) : fabric.log(t.message)
                    }), o.end()
                }

                function requestFs(t, e) {
                    var n = __webpack_require__(56);
                    n.readFile(t, function(t, n) {
                        if (t) throw fabric.log(t), t;
                        e(n)
                    })
                }
                if ("undefined" == typeof document || "undefined" == typeof window) {
                    var DOMParser = __webpack_require__(19).DOMParser,
                        URL = __webpack_require__(20),
                        HTTP = __webpack_require__(26),
                        HTTPS = __webpack_require__(55),
                        Canvas = __webpack_require__(18),
                        Image = __webpack_require__(18).Image;
                    fabric.util.loadImage = function(t, e, n) {
                        function r(r) {
                            i.src = new Buffer(r, "binary"), i._src = t, e && e.call(n, i)
                        }
                        var i = new Image;
                        t && (t instanceof Buffer || 0 === t.indexOf("data")) ? (i.src = i._src = t, e && e.call(n, i)) : t && 0 !== t.indexOf("http") ? requestFs(t, r) : t ? request(t, "binary", r) : e && e.call(n, t)
                    }, fabric.loadSVGFromURL = function(t, e, n) {
                        t = t.replace(/^\n\s*/, "").replace(/\?.*$/, "").trim(), 0 !== t.indexOf("http") ? requestFs(t, function(t) {
                            fabric.loadSVGFromString(t.toString(), e, n)
                        }) : request(t, "", function(t) {
                            fabric.loadSVGFromString(t, e, n)
                        })
                    }, fabric.loadSVGFromString = function(t, e, n) {
                        var r = (new DOMParser).parseFromString(t);
                        fabric.parseSVGDocument(r.documentElement, function(t, n) {
                            e && e(t, n)
                        }, n)
                    }, fabric.util.getScript = function(url, callback) {
                        request(url, "", function(body) {
                            eval(body), callback && callback()
                        })
                    }, fabric.Image.fromObject = function(t, e) {
                        fabric.util.loadImage(t.src, function(n) {
                            var r = new fabric.Image(n);
                            r._initConfig(t), r._initFilters(t, function(t) {
                                r.filters = t || [], e && e(r)
                            })
                        })
                    }, fabric.createCanvasForNode = function(t, e, n, r) {
                        r = r || n;
                        var i = fabric.document.createElement("canvas"),
                            o = new Canvas(t || 600, e || 600, r);
                        i.style = {}, i.width = o.width, i.height = o.height;
                        var s = fabric.Canvas || fabric.StaticCanvas,
                            a = new s(i, n);
                        return a.contextContainer = o.getContext("2d"), a.nodeCanvas = o, a.Font = Canvas.Font, a
                    }, fabric.StaticCanvas.prototype.createPNGStream = function() {
                        return this.nodeCanvas.createPNGStream()
                    }, fabric.StaticCanvas.prototype.createJPEGStream = function(t) {
                        return this.nodeCanvas.createJPEGStream(t)
                    };
                    var origSetWidth = fabric.StaticCanvas.prototype.setWidth;
                    fabric.StaticCanvas.prototype.setWidth = function(t, e) {
                        return origSetWidth.call(this, t, e), this.nodeCanvas.width = t, this
                    }, fabric.Canvas && (fabric.Canvas.prototype.setWidth = fabric.StaticCanvas.prototype.setWidth);
                    var origSetHeight = fabric.StaticCanvas.prototype.setHeight;
                    fabric.StaticCanvas.prototype.setHeight = function(t, e) {
                        return origSetHeight.call(this, t, e), this.nodeCanvas.height = t, this
                    }, fabric.Canvas && (fabric.Canvas.prototype.setHeight = fabric.StaticCanvas.prototype.setHeight)
                }
            }()
    }).call(exports, __webpack_require__(12).Buffer, __webpack_require__(16))
}, function(t, e, n) {
    (function(t) {
        "use strict";

        function r() {
            try {
                var t = new Uint8Array(1);
                return t.__proto__ = {
                    __proto__: Uint8Array.prototype,
                    foo: function() {
                        return 42
                    }
                }, 42 === t.foo() && "function" == typeof t.subarray && 0 === t.subarray(1, 1).byteLength
            } catch (t) {
                return !1
            }
        }

        function i() {
            return s.TYPED_ARRAY_SUPPORT ? 2147483647 : 1073741823
        }

        function o(t, e) {
            if (i() < e) throw new RangeError("Invalid typed array length");
            return s.TYPED_ARRAY_SUPPORT ? (t = new Uint8Array(e), t.__proto__ = s.prototype) : (null === t && (t = new s(e)), t.length = e), t
        }

        function s(t, e, n) {
            if (!(s.TYPED_ARRAY_SUPPORT || this instanceof s)) return new s(t, e, n);
            if ("number" == typeof t) {
                if ("string" == typeof e) throw new Error("If encoding is specified then the first argument must be a string");
                return c(this, t)
            }
            return a(this, t, e, n)
        }

        function a(t, e, n, r) {
            if ("number" == typeof e) throw new TypeError('"value" argument must not be a number');
            return "undefined" != typeof ArrayBuffer && e instanceof ArrayBuffer ? d(t, e, n, r) : "string" == typeof e ? f(t, e, n) : p(t, e)
        }

        function l(t) {
            if ("number" != typeof t) throw new TypeError('"size" argument must be a number');
            if (t < 0) throw new RangeError('"size" argument must not be negative')
        }

        function u(t, e, n, r) {
            return l(e), e <= 0 ? o(t, e) : void 0 !== n ? "string" == typeof r ? o(t, e).fill(n, r) : o(t, e).fill(n) : o(t, e)
        }

        function c(t, e) {
            if (l(e), t = o(t, e < 0 ? 0 : 0 | g(e)), !s.TYPED_ARRAY_SUPPORT)
                for (var n = 0; n < e; ++n) t[n] = 0;
            return t
        }

        function f(t, e, n) {
            if ("string" == typeof n && "" !== n || (n = "utf8"), !s.isEncoding(n)) throw new TypeError('"encoding" must be a valid string encoding');
            var r = 0 | v(e, n);
            t = o(t, r);
            var i = t.write(e, n);
            return i !== r && (t = t.slice(0, i)), t
        }

        function h(t, e) {
            var n = e.length < 0 ? 0 : 0 | g(e.length);
            t = o(t, n);
            for (var r = 0; r < n; r += 1) t[r] = 255 & e[r];
            return t
        }

        function d(t, e, n, r) {
            if (e.byteLength, n < 0 || e.byteLength < n) throw new RangeError("'offset' is out of bounds");
            if (e.byteLength < n + (r || 0)) throw new RangeError("'length' is out of bounds");
            return e = void 0 === n && void 0 === r ? new Uint8Array(e) : void 0 === r ? new Uint8Array(e, n) : new Uint8Array(e, n, r), s.TYPED_ARRAY_SUPPORT ? (t = e, t.__proto__ = s.prototype) : t = h(t, e), t
        }

        function p(t, e) {
            if (s.isBuffer(e)) {
                var n = 0 | g(e.length);
                return t = o(t, n), 0 === t.length ? t : (e.copy(t, 0, 0, n), t)
            }
            if (e) {
                if ("undefined" != typeof ArrayBuffer && e.buffer instanceof ArrayBuffer || "length" in e) return "number" != typeof e.length || $(e.length) ? o(t, 0) : h(t, e);
                if ("Buffer" === e.type && J(e.data)) return h(t, e.data)
            }
            throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")
        }

        function g(t) {
            if (t >= i()) throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + i().toString(16) + " bytes");
            return 0 | t
        }

        function _(t) {
            return +t != t && (t = 0), s.alloc(+t)
        }

        function v(t, e) {
            if (s.isBuffer(t)) return t.length;
            if ("undefined" != typeof ArrayBuffer && "function" == typeof ArrayBuffer.isView && (ArrayBuffer.isView(t) || t instanceof ArrayBuffer)) return t.byteLength;
            "string" != typeof t && (t = "" + t);
            var n = t.length;
            if (0 === n) return 0;
            for (var r = !1;;) switch (e) {
                case "ascii":
                case "latin1":
                case "binary":
                    return n;
                case "utf8":
                case "utf-8":
                case void 0:
                    return V(t).length;
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                    return 2 * n;
                case "hex":
                    return n >>> 1;
                case "base64":
                    return K(t).length;
                default:
                    if (r) return V(t).length;
                    e = ("" + e).toLowerCase(), r = !0
            }
        }

        function b(t, e, n) {
            var r = !1;
            if ((void 0 === e || e < 0) && (e = 0), e > this.length) return "";
            if ((void 0 === n || n > this.length) && (n = this.length), n <= 0) return "";
            if (n >>>= 0, e >>>= 0, n <= e) return "";
            for (t || (t = "utf8");;) switch (t) {
                case "hex":
                    return k(this, e, n);
                case "utf8":
                case "utf-8":
                    return R(this, e, n);
                case "ascii":
                    return P(this, e, n);
                case "latin1":
                case "binary":
                    return L(this, e, n);
                case "base64":
                    return I(this, e, n);
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                    return D(this, e, n);
                default:
                    if (r) throw new TypeError("Unknown encoding: " + t);
                    t = (t + "").toLowerCase(), r = !0
            }
        }

        function y(t, e, n) {
            var r = t[e];
            t[e] = t[n], t[n] = r
        }

        function m(t, e, n, r, i) {
            if (0 === t.length) return -1;
            if ("string" == typeof n ? (r = n, n = 0) : n > 2147483647 ? n = 2147483647 : n < -2147483648 && (n = -2147483648), n = +n, isNaN(n) && (n = i ? 0 : t.length - 1), n < 0 && (n = t.length + n), n >= t.length) {
                if (i) return -1;
                n = t.length - 1
            } else if (n < 0) {
                if (!i) return -1;
                n = 0
            }
            if ("string" == typeof e && (e = s.from(e, r)), s.isBuffer(e)) return 0 === e.length ? -1 : E(t, e, n, r, i);
            if ("number" == typeof e) return e &= 255, s.TYPED_ARRAY_SUPPORT && "function" == typeof Uint8Array.prototype.indexOf ? i ? Uint8Array.prototype.indexOf.call(t, e, n) : Uint8Array.prototype.lastIndexOf.call(t, e, n) : E(t, [e], n, r, i);
            throw new TypeError("val must be string, number or Buffer")
        }

        function E(t, e, n, r, i) {
            function o(t, e) {
                return 1 === s ? t[e] : t.readUInt16BE(e * s)
            }
            var s = 1,
                a = t.length,
                l = e.length;
            if (void 0 !== r && (r = String(r).toLowerCase(), "ucs2" === r || "ucs-2" === r || "utf16le" === r || "utf-16le" === r)) {
                if (t.length < 2 || e.length < 2) return -1;
                s = 2, a /= 2, l /= 2, n /= 2
            }
            var u;
            if (i) {
                var c = -1;
                for (u = n; u < a; u++)
                    if (o(t, u) === o(e, c === -1 ? 0 : u - c)) {
                        if (c === -1 && (c = u), u - c + 1 === l) return c * s
                    } else c !== -1 && (u -= u - c), c = -1
            } else
                for (n + l > a && (n = a - l), u = n; u >= 0; u--) {
                    for (var f = !0, h = 0; h < l; h++)
                        if (o(t, u + h) !== o(e, h)) {
                            f = !1;
                            break
                        }
                    if (f) return u
                }
            return -1
        }

        function S(t, e, n, r) {
            n = Number(n) || 0;
            var i = t.length - n;
            r ? (r = Number(r), r > i && (r = i)) : r = i;
            var o = e.length;
            if (o % 2 !== 0) throw new TypeError("Invalid hex string");
            r > o / 2 && (r = o / 2);
            for (var s = 0; s < r; ++s) {
                var a = parseInt(e.substr(2 * s, 2), 16);
                if (isNaN(a)) return s;
                t[n + s] = a
            }
            return s
        }

        function O(t, e, n, r) {
            return q(V(e, t.length - n), t, n, r)
        }

        function T(t, e, n, r) {
            return q(X(e), t, n, r)
        }

        function x(t, e, n, r) {
            return T(t, e, n, r)
        }

        function w(t, e, n, r) {
            return q(K(e), t, n, r)
        }

        function C(t, e, n, r) {
            return q(z(e, t.length - n), t, n, r)
        }

        function I(t, e, n) {
            return 0 === e && n === t.length ? Z.fromByteArray(t) : Z.fromByteArray(t.slice(e, n))
        }

        function R(t, e, n) {
            n = Math.min(t.length, n);
            for (var r = [], i = e; i < n;) {
                var o = t[i],
                    s = null,
                    a = o > 239 ? 4 : o > 223 ? 3 : o > 191 ? 2 : 1;
                if (i + a <= n) {
                    var l, u, c, f;
                    switch (a) {
                        case 1:
                            o < 128 && (s = o);
                            break;
                        case 2:
                            l = t[i + 1], 128 === (192 & l) && (f = (31 & o) << 6 | 63 & l, f > 127 && (s = f));
                            break;
                        case 3:
                            l = t[i + 1], u = t[i + 2], 128 === (192 & l) && 128 === (192 & u) && (f = (15 & o) << 12 | (63 & l) << 6 | 63 & u, f > 2047 && (f < 55296 || f > 57343) && (s = f));
                            break;
                        case 4:
                            l = t[i + 1], u = t[i + 2], c = t[i + 3], 128 === (192 & l) && 128 === (192 & u) && 128 === (192 & c) && (f = (15 & o) << 18 | (63 & l) << 12 | (63 & u) << 6 | 63 & c, f > 65535 && f < 1114112 && (s = f))
                    }
                }
                null === s ? (s = 65533, a = 1) : s > 65535 && (s -= 65536, r.push(s >>> 10 & 1023 | 55296), s = 56320 | 1023 & s), r.push(s), i += a
            }
            return A(r)
        }

        function A(t) {
            var e = t.length;
            if (e <= tt) return String.fromCharCode.apply(String, t);
            for (var n = "", r = 0; r < e;) n += String.fromCharCode.apply(String, t.slice(r, r += tt));
            return n
        }

        function P(t, e, n) {
            var r = "";
            n = Math.min(t.length, n);
            for (var i = e; i < n; ++i) r += String.fromCharCode(127 & t[i]);
            return r
        }

        function L(t, e, n) {
            var r = "";
            n = Math.min(t.length, n);
            for (var i = e; i < n; ++i) r += String.fromCharCode(t[i]);
            return r
        }

        function k(t, e, n) {
            var r = t.length;
            (!e || e < 0) && (e = 0), (!n || n < 0 || n > r) && (n = r);
            for (var i = "", o = e; o < n; ++o) i += Y(t[o]);
            return i
        }

        function D(t, e, n) {
            for (var r = t.slice(e, n), i = "", o = 0; o < r.length; o += 2) i += String.fromCharCode(r[o] + 256 * r[o + 1]);
            return i
        }

        function j(t, e, n) {
            if (t % 1 !== 0 || t < 0) throw new RangeError("offset is not uint");
            if (t + e > n) throw new RangeError("Trying to access beyond buffer length")
        }

        function M(t, e, n, r, i, o) {
            if (!s.isBuffer(t)) throw new TypeError('"buffer" argument must be a Buffer instance');
            if (e > i || e < o) throw new RangeError('"value" argument is out of bounds');
            if (n + r > t.length) throw new RangeError("Index out of range")
        }

        function N(t, e, n, r) {
            e < 0 && (e = 65535 + e + 1);
            for (var i = 0, o = Math.min(t.length - n, 2); i < o; ++i) t[n + i] = (e & 255 << 8 * (r ? i : 1 - i)) >>> 8 * (r ? i : 1 - i)
        }

        function B(t, e, n, r) {
            e < 0 && (e = 4294967295 + e + 1);
            for (var i = 0, o = Math.min(t.length - n, 4); i < o; ++i) t[n + i] = e >>> 8 * (r ? i : 3 - i) & 255
        }

        function H(t, e, n, r, i, o) {
            if (n + r > t.length) throw new RangeError("Index out of range");
            if (n < 0) throw new RangeError("Index out of range")
        }

        function F(t, e, n, r, i) {
            return i || H(t, e, n, 4, 3.4028234663852886e38, -3.4028234663852886e38), Q.write(t, e, n, r, 23, 4), n + 4
        }

        function U(t, e, n, r, i) {
            return i || H(t, e, n, 8, 1.7976931348623157e308, -1.7976931348623157e308), Q.write(t, e, n, r, 52, 8), n + 8
        }

        function G(t) {
            if (t = W(t).replace(et, ""), t.length < 2) return "";
            for (; t.length % 4 !== 0;) t += "=";
            return t
        }

        function W(t) {
            return t.trim ? t.trim() : t.replace(/^\s+|\s+$/g, "")
        }

        function Y(t) {
            return t < 16 ? "0" + t.toString(16) : t.toString(16)
        }

        function V(t, e) {
            e = e || 1 / 0;
            for (var n, r = t.length, i = null, o = [], s = 0; s < r; ++s) {
                if (n = t.charCodeAt(s), n > 55295 && n < 57344) {
                    if (!i) {
                        if (n > 56319) {
                            (e -= 3) > -1 && o.push(239, 191, 189);
                            continue
                        }
                        if (s + 1 === r) {
                            (e -= 3) > -1 && o.push(239, 191, 189);
                            continue
                        }
                        i = n;
                        continue
                    }
                    if (n < 56320) {
                        (e -= 3) > -1 && o.push(239, 191, 189), i = n;
                        continue
                    }
                    n = (i - 55296 << 10 | n - 56320) + 65536
                } else i && (e -= 3) > -1 && o.push(239, 191, 189);
                if (i = null, n < 128) {
                    if ((e -= 1) < 0) break;
                    o.push(n)
                } else if (n < 2048) {
                    if ((e -= 2) < 0) break;
                    o.push(n >> 6 | 192, 63 & n | 128)
                } else if (n < 65536) {
                    if ((e -= 3) < 0) break;
                    o.push(n >> 12 | 224, n >> 6 & 63 | 128, 63 & n | 128)
                } else {
                    if (!(n < 1114112)) throw new Error("Invalid code point");
                    if ((e -= 4) < 0) break;
                    o.push(n >> 18 | 240, n >> 12 & 63 | 128, n >> 6 & 63 | 128, 63 & n | 128)
                }
            }
            return o
        }

        function X(t) {
            for (var e = [], n = 0; n < t.length; ++n) e.push(255 & t.charCodeAt(n));
            return e
        }

        function z(t, e) {
            for (var n, r, i, o = [], s = 0; s < t.length && !((e -= 2) < 0); ++s) n = t.charCodeAt(s), r = n >> 8, i = n % 256, o.push(i), o.push(r);
            return o
        }

        function K(t) {
            return Z.toByteArray(G(t))
        }

        function q(t, e, n, r) {
            for (var i = 0; i < r && !(i + n >= e.length || i >= t.length); ++i) e[i + n] = t[i];
            return i
        }

        function $(t) {
            return t !== t
        }
        var Z = n(13),
            Q = n(14),
            J = n(15);
        e.Buffer = s, e.SlowBuffer = _, e.INSPECT_MAX_BYTES = 50, s.TYPED_ARRAY_SUPPORT = void 0 !== t.TYPED_ARRAY_SUPPORT ? t.TYPED_ARRAY_SUPPORT : r(), e.kMaxLength = i(), s.poolSize = 8192, s._augment = function(t) {
            return t.__proto__ = s.prototype, t
        }, s.from = function(t, e, n) {
            return a(null, t, e, n)
        }, s.TYPED_ARRAY_SUPPORT && (s.prototype.__proto__ = Uint8Array.prototype, s.__proto__ = Uint8Array, "undefined" != typeof Symbol && Symbol.species && s[Symbol.species] === s && Object.defineProperty(s, Symbol.species, {
            value: null,
            configurable: !0
        })), s.alloc = function(t, e, n) {
            return u(null, t, e, n)
        }, s.allocUnsafe = function(t) {
            return c(null, t)
        }, s.allocUnsafeSlow = function(t) {
            return c(null, t)
        }, s.isBuffer = function(t) {
            return !(null == t || !t._isBuffer)
        }, s.compare = function(t, e) {
            if (!s.isBuffer(t) || !s.isBuffer(e)) throw new TypeError("Arguments must be Buffers");
            if (t === e) return 0;
            for (var n = t.length, r = e.length, i = 0, o = Math.min(n, r); i < o; ++i)
                if (t[i] !== e[i]) {
                    n = t[i], r = e[i];
                    break
                }
            return n < r ? -1 : r < n ? 1 : 0
        }, s.isEncoding = function(t) {
            switch (String(t).toLowerCase()) {
                case "hex":
                case "utf8":
                case "utf-8":
                case "ascii":
                case "latin1":
                case "binary":
                case "base64":
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                    return !0;
                default:
                    return !1
            }
        }, s.concat = function(t, e) {
            if (!J(t)) throw new TypeError('"list" argument must be an Array of Buffers');
            if (0 === t.length) return s.alloc(0);
            var n;
            if (void 0 === e)
                for (e = 0, n = 0; n < t.length; ++n) e += t[n].length;
            var r = s.allocUnsafe(e),
                i = 0;
            for (n = 0; n < t.length; ++n) {
                var o = t[n];
                if (!s.isBuffer(o)) throw new TypeError('"list" argument must be an Array of Buffers');
                o.copy(r, i), i += o.length
            }
            return r
        }, s.byteLength = v, s.prototype._isBuffer = !0, s.prototype.swap16 = function() {
            var t = this.length;
            if (t % 2 !== 0) throw new RangeError("Buffer size must be a multiple of 16-bits");
            for (var e = 0; e < t; e += 2) y(this, e, e + 1);
            return this
        }, s.prototype.swap32 = function() {
            var t = this.length;
            if (t % 4 !== 0) throw new RangeError("Buffer size must be a multiple of 32-bits");
            for (var e = 0; e < t; e += 4) y(this, e, e + 3), y(this, e + 1, e + 2);
            return this
        }, s.prototype.swap64 = function() {
            var t = this.length;
            if (t % 8 !== 0) throw new RangeError("Buffer size must be a multiple of 64-bits");
            for (var e = 0; e < t; e += 8) y(this, e, e + 7), y(this, e + 1, e + 6), y(this, e + 2, e + 5), y(this, e + 3, e + 4);
            return this
        }, s.prototype.toString = function() {
            var t = 0 | this.length;
            return 0 === t ? "" : 0 === arguments.length ? R(this, 0, t) : b.apply(this, arguments)
        }, s.prototype.equals = function(t) {
            if (!s.isBuffer(t)) throw new TypeError("Argument must be a Buffer");
            return this === t || 0 === s.compare(this, t)
        }, s.prototype.inspect = function() {
            var t = "",
                n = e.INSPECT_MAX_BYTES;
            return this.length > 0 && (t = this.toString("hex", 0, n).match(/.{2}/g).join(" "), this.length > n && (t += " ... ")), "<Buffer " + t + ">"
        }, s.prototype.compare = function(t, e, n, r, i) {
            if (!s.isBuffer(t)) throw new TypeError("Argument must be a Buffer");
            if (void 0 === e && (e = 0), void 0 === n && (n = t ? t.length : 0), void 0 === r && (r = 0), void 0 === i && (i = this.length), e < 0 || n > t.length || r < 0 || i > this.length) throw new RangeError("out of range index");
            if (r >= i && e >= n) return 0;
            if (r >= i) return -1;
            if (e >= n) return 1;
            if (e >>>= 0, n >>>= 0, r >>>= 0, i >>>= 0, this === t) return 0;
            for (var o = i - r, a = n - e, l = Math.min(o, a), u = this.slice(r, i), c = t.slice(e, n), f = 0; f < l; ++f)
                if (u[f] !== c[f]) {
                    o = u[f], a = c[f];
                    break
                }
            return o < a ? -1 : a < o ? 1 : 0
        }, s.prototype.includes = function(t, e, n) {
            return this.indexOf(t, e, n) !== -1
        }, s.prototype.indexOf = function(t, e, n) {
            return m(this, t, e, n, !0)
        }, s.prototype.lastIndexOf = function(t, e, n) {
            return m(this, t, e, n, !1)
        }, s.prototype.write = function(t, e, n, r) {
            if (void 0 === e) r = "utf8", n = this.length, e = 0;
            else if (void 0 === n && "string" == typeof e) r = e, n = this.length, e = 0;
            else {
                if (!isFinite(e)) throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
                e |= 0, isFinite(n) ? (n |= 0, void 0 === r && (r = "utf8")) : (r = n, n = void 0)
            }
            var i = this.length - e;
            if ((void 0 === n || n > i) && (n = i), t.length > 0 && (n < 0 || e < 0) || e > this.length) throw new RangeError("Attempt to write outside buffer bounds");
            r || (r = "utf8");
            for (var o = !1;;) switch (r) {
                case "hex":
                    return S(this, t, e, n);
                case "utf8":
                case "utf-8":
                    return O(this, t, e, n);
                case "ascii":
                    return T(this, t, e, n);
                case "latin1":
                case "binary":
                    return x(this, t, e, n);
                case "base64":
                    return w(this, t, e, n);
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                    return C(this, t, e, n);
                default:
                    if (o) throw new TypeError("Unknown encoding: " + r);
                    r = ("" + r).toLowerCase(), o = !0
            }
        }, s.prototype.toJSON = function() {
            return {
                type: "Buffer",
                data: Array.prototype.slice.call(this._arr || this, 0)
            }
        };
        var tt = 4096;
        s.prototype.slice = function(t, e) {
            var n = this.length;
            t = ~~t, e = void 0 === e ? n : ~~e, t < 0 ? (t += n, t < 0 && (t = 0)) : t > n && (t = n), e < 0 ? (e += n, e < 0 && (e = 0)) : e > n && (e = n), e < t && (e = t);
            var r;
            if (s.TYPED_ARRAY_SUPPORT) r = this.subarray(t, e), r.__proto__ = s.prototype;
            else {
                var i = e - t;
                r = new s(i, void 0);
                for (var o = 0; o < i; ++o) r[o] = this[o + t]
            }
            return r
        }, s.prototype.readUIntLE = function(t, e, n) {
            t |= 0, e |= 0, n || j(t, e, this.length);
            for (var r = this[t], i = 1, o = 0; ++o < e && (i *= 256);) r += this[t + o] * i;
            return r
        }, s.prototype.readUIntBE = function(t, e, n) {
            t |= 0, e |= 0, n || j(t, e, this.length);
            for (var r = this[t + --e], i = 1; e > 0 && (i *= 256);) r += this[t + --e] * i;
            return r
        }, s.prototype.readUInt8 = function(t, e) {
            return e || j(t, 1, this.length), this[t];
        }, s.prototype.readUInt16LE = function(t, e) {
            return e || j(t, 2, this.length), this[t] | this[t + 1] << 8
        }, s.prototype.readUInt16BE = function(t, e) {
            return e || j(t, 2, this.length), this[t] << 8 | this[t + 1]
        }, s.prototype.readUInt32LE = function(t, e) {
            return e || j(t, 4, this.length), (this[t] | this[t + 1] << 8 | this[t + 2] << 16) + 16777216 * this[t + 3]
        }, s.prototype.readUInt32BE = function(t, e) {
            return e || j(t, 4, this.length), 16777216 * this[t] + (this[t + 1] << 16 | this[t + 2] << 8 | this[t + 3])
        }, s.prototype.readIntLE = function(t, e, n) {
            t |= 0, e |= 0, n || j(t, e, this.length);
            for (var r = this[t], i = 1, o = 0; ++o < e && (i *= 256);) r += this[t + o] * i;
            return i *= 128, r >= i && (r -= Math.pow(2, 8 * e)), r
        }, s.prototype.readIntBE = function(t, e, n) {
            t |= 0, e |= 0, n || j(t, e, this.length);
            for (var r = e, i = 1, o = this[t + --r]; r > 0 && (i *= 256);) o += this[t + --r] * i;
            return i *= 128, o >= i && (o -= Math.pow(2, 8 * e)), o
        }, s.prototype.readInt8 = function(t, e) {
            return e || j(t, 1, this.length), 128 & this[t] ? (255 - this[t] + 1) * -1 : this[t]
        }, s.prototype.readInt16LE = function(t, e) {
            e || j(t, 2, this.length);
            var n = this[t] | this[t + 1] << 8;
            return 32768 & n ? 4294901760 | n : n
        }, s.prototype.readInt16BE = function(t, e) {
            e || j(t, 2, this.length);
            var n = this[t + 1] | this[t] << 8;
            return 32768 & n ? 4294901760 | n : n
        }, s.prototype.readInt32LE = function(t, e) {
            return e || j(t, 4, this.length), this[t] | this[t + 1] << 8 | this[t + 2] << 16 | this[t + 3] << 24
        }, s.prototype.readInt32BE = function(t, e) {
            return e || j(t, 4, this.length), this[t] << 24 | this[t + 1] << 16 | this[t + 2] << 8 | this[t + 3]
        }, s.prototype.readFloatLE = function(t, e) {
            return e || j(t, 4, this.length), Q.read(this, t, !0, 23, 4)
        }, s.prototype.readFloatBE = function(t, e) {
            return e || j(t, 4, this.length), Q.read(this, t, !1, 23, 4)
        }, s.prototype.readDoubleLE = function(t, e) {
            return e || j(t, 8, this.length), Q.read(this, t, !0, 52, 8)
        }, s.prototype.readDoubleBE = function(t, e) {
            return e || j(t, 8, this.length), Q.read(this, t, !1, 52, 8)
        }, s.prototype.writeUIntLE = function(t, e, n, r) {
            if (t = +t, e |= 0, n |= 0, !r) {
                var i = Math.pow(2, 8 * n) - 1;
                M(this, t, e, n, i, 0)
            }
            var o = 1,
                s = 0;
            for (this[e] = 255 & t; ++s < n && (o *= 256);) this[e + s] = t / o & 255;
            return e + n
        }, s.prototype.writeUIntBE = function(t, e, n, r) {
            if (t = +t, e |= 0, n |= 0, !r) {
                var i = Math.pow(2, 8 * n) - 1;
                M(this, t, e, n, i, 0)
            }
            var o = n - 1,
                s = 1;
            for (this[e + o] = 255 & t; --o >= 0 && (s *= 256);) this[e + o] = t / s & 255;
            return e + n
        }, s.prototype.writeUInt8 = function(t, e, n) {
            return t = +t, e |= 0, n || M(this, t, e, 1, 255, 0), s.TYPED_ARRAY_SUPPORT || (t = Math.floor(t)), this[e] = 255 & t, e + 1
        }, s.prototype.writeUInt16LE = function(t, e, n) {
            return t = +t, e |= 0, n || M(this, t, e, 2, 65535, 0), s.TYPED_ARRAY_SUPPORT ? (this[e] = 255 & t, this[e + 1] = t >>> 8) : N(this, t, e, !0), e + 2
        }, s.prototype.writeUInt16BE = function(t, e, n) {
            return t = +t, e |= 0, n || M(this, t, e, 2, 65535, 0), s.TYPED_ARRAY_SUPPORT ? (this[e] = t >>> 8, this[e + 1] = 255 & t) : N(this, t, e, !1), e + 2
        }, s.prototype.writeUInt32LE = function(t, e, n) {
            return t = +t, e |= 0, n || M(this, t, e, 4, 4294967295, 0), s.TYPED_ARRAY_SUPPORT ? (this[e + 3] = t >>> 24, this[e + 2] = t >>> 16, this[e + 1] = t >>> 8, this[e] = 255 & t) : B(this, t, e, !0), e + 4
        }, s.prototype.writeUInt32BE = function(t, e, n) {
            return t = +t, e |= 0, n || M(this, t, e, 4, 4294967295, 0), s.TYPED_ARRAY_SUPPORT ? (this[e] = t >>> 24, this[e + 1] = t >>> 16, this[e + 2] = t >>> 8, this[e + 3] = 255 & t) : B(this, t, e, !1), e + 4
        }, s.prototype.writeIntLE = function(t, e, n, r) {
            if (t = +t, e |= 0, !r) {
                var i = Math.pow(2, 8 * n - 1);
                M(this, t, e, n, i - 1, -i)
            }
            var o = 0,
                s = 1,
                a = 0;
            for (this[e] = 255 & t; ++o < n && (s *= 256);) t < 0 && 0 === a && 0 !== this[e + o - 1] && (a = 1), this[e + o] = (t / s >> 0) - a & 255;
            return e + n
        }, s.prototype.writeIntBE = function(t, e, n, r) {
            if (t = +t, e |= 0, !r) {
                var i = Math.pow(2, 8 * n - 1);
                M(this, t, e, n, i - 1, -i)
            }
            var o = n - 1,
                s = 1,
                a = 0;
            for (this[e + o] = 255 & t; --o >= 0 && (s *= 256);) t < 0 && 0 === a && 0 !== this[e + o + 1] && (a = 1), this[e + o] = (t / s >> 0) - a & 255;
            return e + n
        }, s.prototype.writeInt8 = function(t, e, n) {
            return t = +t, e |= 0, n || M(this, t, e, 1, 127, -128), s.TYPED_ARRAY_SUPPORT || (t = Math.floor(t)), t < 0 && (t = 255 + t + 1), this[e] = 255 & t, e + 1
        }, s.prototype.writeInt16LE = function(t, e, n) {
            return t = +t, e |= 0, n || M(this, t, e, 2, 32767, -32768), s.TYPED_ARRAY_SUPPORT ? (this[e] = 255 & t, this[e + 1] = t >>> 8) : N(this, t, e, !0), e + 2
        }, s.prototype.writeInt16BE = function(t, e, n) {
            return t = +t, e |= 0, n || M(this, t, e, 2, 32767, -32768), s.TYPED_ARRAY_SUPPORT ? (this[e] = t >>> 8, this[e + 1] = 255 & t) : N(this, t, e, !1), e + 2
        }, s.prototype.writeInt32LE = function(t, e, n) {
            return t = +t, e |= 0, n || M(this, t, e, 4, 2147483647, -2147483648), s.TYPED_ARRAY_SUPPORT ? (this[e] = 255 & t, this[e + 1] = t >>> 8, this[e + 2] = t >>> 16, this[e + 3] = t >>> 24) : B(this, t, e, !0), e + 4
        }, s.prototype.writeInt32BE = function(t, e, n) {
            return t = +t, e |= 0, n || M(this, t, e, 4, 2147483647, -2147483648), t < 0 && (t = 4294967295 + t + 1), s.TYPED_ARRAY_SUPPORT ? (this[e] = t >>> 24, this[e + 1] = t >>> 16, this[e + 2] = t >>> 8, this[e + 3] = 255 & t) : B(this, t, e, !1), e + 4
        }, s.prototype.writeFloatLE = function(t, e, n) {
            return F(this, t, e, !0, n)
        }, s.prototype.writeFloatBE = function(t, e, n) {
            return F(this, t, e, !1, n)
        }, s.prototype.writeDoubleLE = function(t, e, n) {
            return U(this, t, e, !0, n)
        }, s.prototype.writeDoubleBE = function(t, e, n) {
            return U(this, t, e, !1, n)
        }, s.prototype.copy = function(t, e, n, r) {
            if (n || (n = 0), r || 0 === r || (r = this.length), e >= t.length && (e = t.length), e || (e = 0), r > 0 && r < n && (r = n), r === n) return 0;
            if (0 === t.length || 0 === this.length) return 0;
            if (e < 0) throw new RangeError("targetStart out of bounds");
            if (n < 0 || n >= this.length) throw new RangeError("sourceStart out of bounds");
            if (r < 0) throw new RangeError("sourceEnd out of bounds");
            r > this.length && (r = this.length), t.length - e < r - n && (r = t.length - e + n);
            var i, o = r - n;
            if (this === t && n < e && e < r)
                for (i = o - 1; i >= 0; --i) t[i + e] = this[i + n];
            else if (o < 1e3 || !s.TYPED_ARRAY_SUPPORT)
                for (i = 0; i < o; ++i) t[i + e] = this[i + n];
            else Uint8Array.prototype.set.call(t, this.subarray(n, n + o), e);
            return o
        }, s.prototype.fill = function(t, e, n, r) {
            if ("string" == typeof t) {
                if ("string" == typeof e ? (r = e, e = 0, n = this.length) : "string" == typeof n && (r = n, n = this.length), 1 === t.length) {
                    var i = t.charCodeAt(0);
                    i < 256 && (t = i)
                }
                if (void 0 !== r && "string" != typeof r) throw new TypeError("encoding must be a string");
                if ("string" == typeof r && !s.isEncoding(r)) throw new TypeError("Unknown encoding: " + r)
            } else "number" == typeof t && (t &= 255);
            if (e < 0 || this.length < e || this.length < n) throw new RangeError("Out of range index");
            if (n <= e) return this;
            e >>>= 0, n = void 0 === n ? this.length : n >>> 0, t || (t = 0);
            var o;
            if ("number" == typeof t)
                for (o = e; o < n; ++o) this[o] = t;
            else {
                var a = s.isBuffer(t) ? t : V(new s(t, r).toString()),
                    l = a.length;
                for (o = 0; o < n - e; ++o) this[o + e] = a[o % l]
            }
            return this
        };
        var et = /[^+\/0-9A-Za-z-_]/g
    }).call(e, function() {
        return this
    }())
}, function(t, e) {
    "use strict";

    function n(t) {
        var e = t.length;
        if (e % 4 > 0) throw new Error("Invalid string. Length must be a multiple of 4");
        return "=" === t[e - 2] ? 2 : "=" === t[e - 1] ? 1 : 0
    }

    function r(t) {
        return 3 * t.length / 4 - n(t)
    }

    function i(t) {
        var e, r, i, o, s, a, l = t.length;
        s = n(t), a = new c(3 * l / 4 - s), i = s > 0 ? l - 4 : l;
        var f = 0;
        for (e = 0, r = 0; e < i; e += 4, r += 3) o = u[t.charCodeAt(e)] << 18 | u[t.charCodeAt(e + 1)] << 12 | u[t.charCodeAt(e + 2)] << 6 | u[t.charCodeAt(e + 3)], a[f++] = o >> 16 & 255, a[f++] = o >> 8 & 255, a[f++] = 255 & o;
        return 2 === s ? (o = u[t.charCodeAt(e)] << 2 | u[t.charCodeAt(e + 1)] >> 4, a[f++] = 255 & o) : 1 === s && (o = u[t.charCodeAt(e)] << 10 | u[t.charCodeAt(e + 1)] << 4 | u[t.charCodeAt(e + 2)] >> 2, a[f++] = o >> 8 & 255, a[f++] = 255 & o), a
    }

    function o(t) {
        return l[t >> 18 & 63] + l[t >> 12 & 63] + l[t >> 6 & 63] + l[63 & t]
    }

    function s(t, e, n) {
        for (var r, i = [], s = e; s < n; s += 3) r = (t[s] << 16) + (t[s + 1] << 8) + t[s + 2], i.push(o(r));
        return i.join("")
    }

    function a(t) {
        for (var e, n = t.length, r = n % 3, i = "", o = [], a = 16383, u = 0, c = n - r; u < c; u += a) o.push(s(t, u, u + a > c ? c : u + a));
        return 1 === r ? (e = t[n - 1], i += l[e >> 2], i += l[e << 4 & 63], i += "==") : 2 === r && (e = (t[n - 2] << 8) + t[n - 1], i += l[e >> 10], i += l[e >> 4 & 63], i += l[e << 2 & 63], i += "="), o.push(i), o.join("")
    }
    e.byteLength = r, e.toByteArray = i, e.fromByteArray = a;
    for (var l = [], u = [], c = "undefined" != typeof Uint8Array ? Uint8Array : Array, f = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", h = 0, d = f.length; h < d; ++h) l[h] = f[h], u[f.charCodeAt(h)] = h;
    u["-".charCodeAt(0)] = 62, u["_".charCodeAt(0)] = 63
}, function(t, e) {
    "use strict";
    e.read = function(t, e, n, r, i) {
        var o, s, a = 8 * i - r - 1,
            l = (1 << a) - 1,
            u = l >> 1,
            c = -7,
            f = n ? i - 1 : 0,
            h = n ? -1 : 1,
            d = t[e + f];
        for (f += h, o = d & (1 << -c) - 1, d >>= -c, c += a; c > 0; o = 256 * o + t[e + f], f += h, c -= 8);
        for (s = o & (1 << -c) - 1, o >>= -c, c += r; c > 0; s = 256 * s + t[e + f], f += h, c -= 8);
        if (0 === o) o = 1 - u;
        else {
            if (o === l) return s ? NaN : (d ? -1 : 1) * (1 / 0);
            s += Math.pow(2, r), o -= u
        }
        return (d ? -1 : 1) * s * Math.pow(2, o - r)
    }, e.write = function(t, e, n, r, i, o) {
        var s, a, l, u = 8 * o - i - 1,
            c = (1 << u) - 1,
            f = c >> 1,
            h = 23 === i ? Math.pow(2, -24) - Math.pow(2, -77) : 0,
            d = r ? 0 : o - 1,
            p = r ? 1 : -1,
            g = e < 0 || 0 === e && 1 / e < 0 ? 1 : 0;
        for (e = Math.abs(e), isNaN(e) || e === 1 / 0 ? (a = isNaN(e) ? 1 : 0, s = c) : (s = Math.floor(Math.log(e) / Math.LN2), e * (l = Math.pow(2, -s)) < 1 && (s--, l *= 2), e += s + f >= 1 ? h / l : h * Math.pow(2, 1 - f), e * l >= 2 && (s++, l /= 2), s + f >= c ? (a = 0, s = c) : s + f >= 1 ? (a = (e * l - 1) * Math.pow(2, i), s += f) : (a = e * Math.pow(2, f - 1) * Math.pow(2, i), s = 0)); i >= 8; t[n + d] = 255 & a, d += p, a /= 256, i -= 8);
        for (s = s << i | a, u += i; u > 0; t[n + d] = 255 & s, d += p, s /= 256, u -= 8);
        t[n + d - p] |= 128 * g
    }
}, function(t, e) {
    "use strict";
    var n = {}.toString;
    t.exports = Array.isArray || function(t) {
        return "[object Array]" == n.call(t)
    }
}, function(t, e) {
    "use strict";

    function n() {
        throw new Error("setTimeout has not been defined")
    }

    function r() {
        throw new Error("clearTimeout has not been defined")
    }

    function i(t) {
        if (c === setTimeout) return setTimeout(t, 0);
        if ((c === n || !c) && setTimeout) return c = setTimeout, setTimeout(t, 0);
        try {
            return c(t, 0)
        } catch (e) {
            try {
                return c.call(null, t, 0)
            } catch (e) {
                return c.call(this, t, 0)
            }
        }
    }

    function o(t) {
        if (f === clearTimeout) return clearTimeout(t);
        if ((f === r || !f) && clearTimeout) return f = clearTimeout, clearTimeout(t);
        try {
            return f(t)
        } catch (e) {
            try {
                return f.call(null, t)
            } catch (e) {
                return f.call(this, t)
            }
        }
    }

    function s() {
        g && d && (g = !1, d.length ? p = d.concat(p) : _ = -1, p.length && a())
    }

    function a() {
        if (!g) {
            var t = i(s);
            g = !0;
            for (var e = p.length; e;) {
                for (d = p, p = []; ++_ < e;) d && d[_].run();
                _ = -1, e = p.length
            }
            d = null, g = !1, o(t)
        }
    }

    function l(t, e) {
        this.fun = t, this.array = e
    }

    function u() {}
    var c, f, h = t.exports = {};
    ! function() {
        try {
            c = "function" == typeof setTimeout ? setTimeout : n
        } catch (t) {
            c = n
        }
        try {
            f = "function" == typeof clearTimeout ? clearTimeout : r
        } catch (t) {
            f = r
        }
    }();
    var d, p = [],
        g = !1,
        _ = -1;
    h.nextTick = function(t) {
        var e = new Array(arguments.length - 1);
        if (arguments.length > 1)
            for (var n = 1; n < arguments.length; n++) e[n - 1] = arguments[n];
        p.push(new l(t, e)), 1 !== p.length || g || i(a)
    }, l.prototype.run = function() {
        this.fun.apply(null, this.array)
    }, h.title = "browser", h.browser = !0, h.env = {}, h.argv = [], h.version = "", h.versions = {}, h.on = u, h.addListener = u, h.once = u, h.off = u, h.removeListener = u, h.removeAllListeners = u, h.emit = u, h.binding = function(t) {
        throw new Error("process.binding is not supported")
    }, h.cwd = function() {
        return "/"
    }, h.chdir = function(t) {
        throw new Error("process.chdir is not supported")
    }, h.umask = function() {
        return 0
    }
}, function(t, e) {}, function(t, e) {}, function(t, e) {}, function(t, e, n) {
    "use strict";

    function r() {
        this.protocol = null, this.slashes = null, this.auth = null, this.host = null, this.port = null, this.hostname = null, this.hash = null, this.search = null, this.query = null, this.pathname = null, this.path = null, this.href = null
    }

    function i(t, e, n) {
        if (t && c.isObject(t) && t instanceof r) return t;
        var i = new r;
        return i.parse(t, e, n), i
    }

    function o(t) {
        return c.isString(t) && (t = i(t)), t instanceof r ? t.format() : r.prototype.format.call(t)
    }

    function s(t, e) {
        return i(t, !1, !0).resolve(e)
    }

    function a(t, e) {
        return t ? i(t, !1, !0).resolveObject(e) : e
    }
    var l = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        },
        u = n(21),
        c = n(22);
    e.parse = i, e.resolve = s, e.resolveObject = a, e.format = o, e.Url = r;
    var f = /^([a-z0-9.+-]+:)/i,
        h = /:[0-9]*$/,
        d = /^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,
        p = ["<", ">", '"', "`", " ", "\r", "\n", "\t"],
        g = ["{", "}", "|", "\\", "^", "`"].concat(p),
        _ = ["'"].concat(g),
        v = ["%", "/", "?", ";", "#"].concat(_),
        b = ["/", "?", "#"],
        y = 255,
        m = /^[+a-z0-9A-Z_-]{0,63}$/,
        E = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,
        S = {
            javascript: !0,
            "javascript:": !0
        },
        O = {
            javascript: !0,
            "javascript:": !0
        },
        T = {
            http: !0,
            https: !0,
            ftp: !0,
            gopher: !0,
            file: !0,
            "http:": !0,
            "https:": !0,
            "ftp:": !0,
            "gopher:": !0,
            "file:": !0
        },
        x = n(23);
    r.prototype.parse = function(t, e, n) {
        if (!c.isString(t)) throw new TypeError("Parameter 'url' must be a string, not " + ("undefined" == typeof t ? "undefined" : l(t)));
        var r = t.indexOf("?"),
            i = r !== -1 && r < t.indexOf("#") ? "?" : "#",
            o = t.split(i),
            s = /\\/g;
        o[0] = o[0].replace(s, "/"), t = o.join(i);
        var a = t;
        if (a = a.trim(), !n && 1 === t.split("#").length) {
            var h = d.exec(a);
            if (h) return this.path = a, this.href = a, this.pathname = h[1], h[2] ? (this.search = h[2], e ? this.query = x.parse(this.search.substr(1)) : this.query = this.search.substr(1)) : e && (this.search = "", this.query = {}), this
        }
        var p = f.exec(a);
        if (p) {
            p = p[0];
            var g = p.toLowerCase();
            this.protocol = g, a = a.substr(p.length)
        }
        if (n || p || a.match(/^\/\/[^@\/]+@[^@\/]+/)) {
            var w = "//" === a.substr(0, 2);
            !w || p && O[p] || (a = a.substr(2), this.slashes = !0)
        }
        if (!O[p] && (w || p && !T[p])) {
            for (var C = -1, I = 0; I < b.length; I++) {
                var R = a.indexOf(b[I]);
                R !== -1 && (C === -1 || R < C) && (C = R)
            }
            var A, P;
            P = C === -1 ? a.lastIndexOf("@") : a.lastIndexOf("@", C), P !== -1 && (A = a.slice(0, P), a = a.slice(P + 1), this.auth = decodeURIComponent(A)), C = -1;
            for (var I = 0; I < v.length; I++) {
                var R = a.indexOf(v[I]);
                R !== -1 && (C === -1 || R < C) && (C = R)
            }
            C === -1 && (C = a.length), this.host = a.slice(0, C), a = a.slice(C), this.parseHost(), this.hostname = this.hostname || "";
            var L = "[" === this.hostname[0] && "]" === this.hostname[this.hostname.length - 1];
            if (!L)
                for (var k = this.hostname.split(/\./), I = 0, D = k.length; I < D; I++) {
                    var j = k[I];
                    if (j && !j.match(m)) {
                        for (var M = "", N = 0, B = j.length; N < B; N++) M += j.charCodeAt(N) > 127 ? "x" : j[N];
                        if (!M.match(m)) {
                            var H = k.slice(0, I),
                                F = k.slice(I + 1),
                                U = j.match(E);
                            U && (H.push(U[1]), F.unshift(U[2])), F.length && (a = "/" + F.join(".") + a), this.hostname = H.join(".");
                            break
                        }
                    }
                }
            this.hostname.length > y ? this.hostname = "" : this.hostname = this.hostname.toLowerCase(), L || (this.hostname = u.toASCII(this.hostname));
            var G = this.port ? ":" + this.port : "",
                W = this.hostname || "";
            this.host = W + G, this.href += this.host, L && (this.hostname = this.hostname.substr(1, this.hostname.length - 2), "/" !== a[0] && (a = "/" + a))
        }
        if (!S[g])
            for (var I = 0, D = _.length; I < D; I++) {
                var Y = _[I];
                if (a.indexOf(Y) !== -1) {
                    var V = encodeURIComponent(Y);
                    V === Y && (V = escape(Y)), a = a.split(Y).join(V)
                }
            }
        var X = a.indexOf("#");
        X !== -1 && (this.hash = a.substr(X), a = a.slice(0, X));
        var z = a.indexOf("?");
        if (z !== -1 ? (this.search = a.substr(z), this.query = a.substr(z + 1), e && (this.query = x.parse(this.query)), a = a.slice(0, z)) : e && (this.search = "", this.query = {}), a && (this.pathname = a), T[g] && this.hostname && !this.pathname && (this.pathname = "/"), this.pathname || this.search) {
            var G = this.pathname || "",
                K = this.search || "";
            this.path = G + K
        }
        return this.href = this.format(), this
    }, r.prototype.format = function() {
        var t = this.auth || "";
        t && (t = encodeURIComponent(t), t = t.replace(/%3A/i, ":"), t += "@");
        var e = this.protocol || "",
            n = this.pathname || "",
            r = this.hash || "",
            i = !1,
            o = "";
        this.host ? i = t + this.host : this.hostname && (i = t + (this.hostname.indexOf(":") === -1 ? this.hostname : "[" + this.hostname + "]"), this.port && (i += ":" + this.port)), this.query && c.isObject(this.query) && Object.keys(this.query).length && (o = x.stringify(this.query));
        var s = this.search || o && "?" + o || "";
        return e && ":" !== e.substr(-1) && (e += ":"), this.slashes || (!e || T[e]) && i !== !1 ? (i = "//" + (i || ""), n && "/" !== n.charAt(0) && (n = "/" + n)) : i || (i = ""), r && "#" !== r.charAt(0) && (r = "#" + r), s && "?" !== s.charAt(0) && (s = "?" + s), n = n.replace(/[?#]/g, function(t) {
            return encodeURIComponent(t)
        }), s = s.replace("#", "%23"), e + i + n + s + r
    }, r.prototype.resolve = function(t) {
        return this.resolveObject(i(t, !1, !0)).format()
    }, r.prototype.resolveObject = function(t) {
        if (c.isString(t)) {
            var e = new r;
            e.parse(t, !1, !0), t = e
        }
        for (var n = new r, i = Object.keys(this), o = 0; o < i.length; o++) {
            var s = i[o];
            n[s] = this[s]
        }
        if (n.hash = t.hash, "" === t.href) return n.href = n.format(), n;
        if (t.slashes && !t.protocol) {
            for (var a = Object.keys(t), l = 0; l < a.length; l++) {
                var u = a[l];
                "protocol" !== u && (n[u] = t[u])
            }
            return T[n.protocol] && n.hostname && !n.pathname && (n.path = n.pathname = "/"), n.href = n.format(), n
        }
        if (t.protocol && t.protocol !== n.protocol) {
            if (!T[t.protocol]) {
                for (var f = Object.keys(t), h = 0; h < f.length; h++) {
                    var d = f[h];
                    n[d] = t[d]
                }
                return n.href = n.format(), n
            }
            if (n.protocol = t.protocol, t.host || O[t.protocol]) n.pathname = t.pathname;
            else {
                for (var p = (t.pathname || "").split("/"); p.length && !(t.host = p.shift()););
                t.host || (t.host = ""), t.hostname || (t.hostname = ""), "" !== p[0] && p.unshift(""), p.length < 2 && p.unshift(""), n.pathname = p.join("/")
            }
            if (n.search = t.search, n.query = t.query, n.host = t.host || "", n.auth = t.auth, n.hostname = t.hostname || t.host, n.port = t.port, n.pathname || n.search) {
                var g = n.pathname || "",
                    _ = n.search || "";
                n.path = g + _
            }
            return n.slashes = n.slashes || t.slashes, n.href = n.format(), n
        }
        var v = n.pathname && "/" === n.pathname.charAt(0),
            b = t.host || t.pathname && "/" === t.pathname.charAt(0),
            y = b || v || n.host && t.pathname,
            m = y,
            E = n.pathname && n.pathname.split("/") || [],
            p = t.pathname && t.pathname.split("/") || [],
            S = n.protocol && !T[n.protocol];
        if (S && (n.hostname = "", n.port = null, n.host && ("" === E[0] ? E[0] = n.host : E.unshift(n.host)), n.host = "", t.protocol && (t.hostname = null, t.port = null, t.host && ("" === p[0] ? p[0] = t.host : p.unshift(t.host)), t.host = null), y = y && ("" === p[0] || "" === E[0])), b) n.host = t.host || "" === t.host ? t.host : n.host, n.hostname = t.hostname || "" === t.hostname ? t.hostname : n.hostname, n.search = t.search, n.query = t.query, E = p;
        else if (p.length) E || (E = []), E.pop(), E = E.concat(p), n.search = t.search, n.query = t.query;
        else if (!c.isNullOrUndefined(t.search)) {
            if (S) {
                n.hostname = n.host = E.shift();
                var x = !!(n.host && n.host.indexOf("@") > 0) && n.host.split("@");
                x && (n.auth = x.shift(), n.host = n.hostname = x.shift())
            }
            return n.search = t.search, n.query = t.query, c.isNull(n.pathname) && c.isNull(n.search) || (n.path = (n.pathname ? n.pathname : "") + (n.search ? n.search : "")), n.href = n.format(), n
        }
        if (!E.length) return n.pathname = null, n.search ? n.path = "/" + n.search : n.path = null, n.href = n.format(), n;
        for (var w = E.slice(-1)[0], C = (n.host || t.host || E.length > 1) && ("." === w || ".." === w) || "" === w, I = 0, R = E.length; R >= 0; R--) w = E[R], "." === w ? E.splice(R, 1) : ".." === w ? (E.splice(R, 1), I++) : I && (E.splice(R, 1), I--);
        if (!y && !m)
            for (; I--; I) E.unshift("..");
        !y || "" === E[0] || E[0] && "/" === E[0].charAt(0) || E.unshift(""), C && "/" !== E.join("/").substr(-1) && E.push("");
        var A = "" === E[0] || E[0] && "/" === E[0].charAt(0);
        if (S) {
            n.hostname = n.host = A ? "" : E.length ? E.shift() : "";
            var x = !!(n.host && n.host.indexOf("@") > 0) && n.host.split("@");
            x && (n.auth = x.shift(), n.host = n.hostname = x.shift())
        }
        return y = y || n.host && E.length, y && !A && E.unshift(""), E.length ? n.pathname = E.join("/") : (n.pathname = null, n.path = null), c.isNull(n.pathname) && c.isNull(n.search) || (n.path = (n.pathname ? n.pathname : "") + (n.search ? n.search : "")), n.auth = t.auth || n.auth, n.slashes = n.slashes || t.slashes, n.href = n.format(), n
    }, r.prototype.parseHost = function() {
        var t = this.host,
            e = h.exec(t);
        e && (e = e[0], ":" !== e && (this.port = e.substr(1)), t = t.substr(0, t.length - e.length)), t && (this.hostname = t)
    }
}, function(t, e, n) {
    var r;
    (function(t, i) {
        "use strict";
        var o = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        };
        ! function(s) {
            function a(t) {
                throw RangeError(M[t])
            }

            function l(t, e) {
                for (var n = t.length, r = []; n--;) r[n] = e(t[n]);
                return r
            }

            function u(t, e) {
                var n = t.split("@"),
                    r = "";
                n.length > 1 && (r = n[0] + "@", t = n[1]), t = t.replace(j, ".");
                var i = t.split("."),
                    o = l(i, e).join(".");
                return r + o
            }

            function c(t) {
                for (var e, n, r = [], i = 0, o = t.length; i < o;) e = t.charCodeAt(i++), e >= 55296 && e <= 56319 && i < o ? (n = t.charCodeAt(i++), 56320 == (64512 & n) ? r.push(((1023 & e) << 10) + (1023 & n) + 65536) : (r.push(e), i--)) : r.push(e);
                return r
            }

            function f(t) {
                return l(t, function(t) {
                    var e = "";
                    return t > 65535 && (t -= 65536, e += H(t >>> 10 & 1023 | 55296), t = 56320 | 1023 & t), e += H(t)
                }).join("")
            }

            function h(t) {
                return t - 48 < 10 ? t - 22 : t - 65 < 26 ? t - 65 : t - 97 < 26 ? t - 97 : x
            }

            function d(t, e) {
                return t + 22 + 75 * (t < 26) - ((0 != e) << 5)
            }

            function p(t, e, n) {
                var r = 0;
                for (t = n ? B(t / R) : t >> 1, t += B(t / e); t > N * C >> 1; r += x) t = B(t / N);
                return B(r + (N + 1) * t / (t + I))
            }

            function g(t) {
                var e, n, r, i, o, s, l, u, c, d, g = [],
                    _ = t.length,
                    v = 0,
                    b = P,
                    y = A;
                for (n = t.lastIndexOf(L), n < 0 && (n = 0), r = 0; r < n; ++r) t.charCodeAt(r) >= 128 && a("not-basic"), g.push(t.charCodeAt(r));
                for (i = n > 0 ? n + 1 : 0; i < _;) {
                    for (o = v, s = 1, l = x; i >= _ && a("invalid-input"), u = h(t.charCodeAt(i++)), (u >= x || u > B((T - v) / s)) && a("overflow"), v += u * s, c = l <= y ? w : l >= y + C ? C : l - y, !(u < c); l += x) d = x - c, s > B(T / d) && a("overflow"), s *= d;
                    e = g.length + 1, y = p(v - o, e, 0 == o), B(v / e) > T - b && a("overflow"), b += B(v / e), v %= e, g.splice(v++, 0, b)
                }
                return f(g)
            }

            function _(t) {
                var e, n, r, i, o, s, l, u, f, h, g, _, v, b, y, m = [];
                for (t = c(t), _ = t.length, e = P, n = 0, o = A, s = 0; s < _; ++s) g = t[s], g < 128 && m.push(H(g));
                for (r = i = m.length, i && m.push(L); r < _;) {
                    for (l = T, s = 0; s < _; ++s) g = t[s], g >= e && g < l && (l = g);
                    for (v = r + 1, l - e > B((T - n) / v) && a("overflow"), n += (l - e) * v, e = l, s = 0; s < _; ++s)
                        if (g = t[s], g < e && ++n > T && a("overflow"), g == e) {
                            for (u = n, f = x; h = f <= o ? w : f >= o + C ? C : f - o, !(u < h); f += x) y = u - h, b = x - h, m.push(H(d(h + y % b, 0))), u = B(y / b);
                            m.push(H(d(u, 0))), o = p(n, v, r == i), n = 0, ++r
                        }++n, ++e
                }
                return m.join("")
            }

            function v(t) {
                return u(t, function(t) {
                    return k.test(t) ? g(t.slice(4).toLowerCase()) : t
                })
            }

            function b(t) {
                return u(t, function(t) {
                    return D.test(t) ? "xn--" + _(t) : t
                })
            }
            var y = "object" == o(e) && e && !e.nodeType && e,
                m = "object" == o(t) && t && !t.nodeType && t,
                E = "object" == ("undefined" == typeof i ? "undefined" : o(i)) && i;
            E.global !== E && E.window !== E && E.self !== E || (s = E);
            var S, O, T = 2147483647,
                x = 36,
                w = 1,
                C = 26,
                I = 38,
                R = 700,
                A = 72,
                P = 128,
                L = "-",
                k = /^xn--/,
                D = /[^\x20-\x7E]/,
                j = /[\x2E\u3002\uFF0E\uFF61]/g,
                M = {
                    overflow: "Overflow: input needs wider integers to process",
                    "not-basic": "Illegal input >= 0x80 (not a basic code point)",
                    "invalid-input": "Invalid input"
                },
                N = x - w,
                B = Math.floor,
                H = String.fromCharCode;
            if (S = {
                    version: "1.3.2",
                    ucs2: {
                        decode: c,
                        encode: f
                    },
                    decode: g,
                    encode: _,
                    toASCII: b,
                    toUnicode: v
                }, "object" == o(n(9)) && n(9)) r = function() {
                return S
            }.call(e, n, e, t), !(void 0 !== r && (t.exports = r));
            else if (y && m)
                if (t.exports == y) m.exports = S;
                else
                    for (O in S) S.hasOwnProperty(O) && (y[O] = S[O]);
            else s.punycode = S
        }(void 0)
    }).call(e, n(8)(t), function() {
        return this
    }())
}, function(t, e) {
    "use strict";
    var n = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
        return typeof t
    } : function(t) {
        return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
    };
    t.exports = {
        isString: function(t) {
            return "string" == typeof t
        },
        isObject: function(t) {
            return "object" === ("undefined" == typeof t ? "undefined" : n(t)) && null !== t
        },
        isNull: function(t) {
            return null === t
        },
        isNullOrUndefined: function(t) {
            return null == t
        }
    }
}, function(t, e, n) {
    "use strict";
    e.decode = e.parse = n(24), e.encode = e.stringify = n(25)
}, function(t, e) {
    "use strict";

    function n(t, e) {
        return Object.prototype.hasOwnProperty.call(t, e)
    }
    t.exports = function(t, e, r, i) {
        e = e || "&", r = r || "=";
        var o = {};
        if ("string" != typeof t || 0 === t.length) return o;
        var s = /\+/g;
        t = t.split(e);
        var a = 1e3;
        i && "number" == typeof i.maxKeys && (a = i.maxKeys);
        var l = t.length;
        a > 0 && l > a && (l = a);
        for (var u = 0; u < l; ++u) {
            var c, f, h, d, p = t[u].replace(s, "%20"),
                g = p.indexOf(r);
            g >= 0 ? (c = p.substr(0, g), f = p.substr(g + 1)) : (c = p, f = ""), h = decodeURIComponent(c), d = decodeURIComponent(f), n(o, h) ? Array.isArray(o[h]) ? o[h].push(d) : o[h] = [o[h], d] : o[h] = d
        }
        return o
    }
}, function(t, e) {
    "use strict";
    var n = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        },
        r = function(t) {
            switch ("undefined" == typeof t ? "undefined" : n(t)) {
                case "string":
                    return t;
                case "boolean":
                    return t ? "true" : "false";
                case "number":
                    return isFinite(t) ? t : "";
                default:
                    return ""
            }
        };
    t.exports = function(t, e, i, o) {
        return e = e || "&", i = i || "=", null === t && (t = void 0), "object" === ("undefined" == typeof t ? "undefined" : n(t)) ? Object.keys(t).map(function(n) {
            var o = encodeURIComponent(r(n)) + i;
            return Array.isArray(t[n]) ? t[n].map(function(t) {
                return o + encodeURIComponent(r(t))
            }).join(e) : o + encodeURIComponent(r(t[n]))
        }).join(e) : o ? encodeURIComponent(r(o)) + i + encodeURIComponent(r(t)) : ""
    }
}, function(t, e, n) {
    (function(t) {
        "use strict";
        var r = n(27),
            i = n(53),
            o = n(54),
            s = n(20),
            a = e;
        a.request = function(e, n) {
            e = "string" == typeof e ? s.parse(e) : i(e);
            var o = t.location.protocol.search(/^https?:$/) === -1 ? "http:" : "",
                a = e.protocol || o,
                l = e.hostname || e.host,
                u = e.port,
                c = e.path || "/";
            l && l.indexOf(":") !== -1 && (l = "[" + l + "]"), e.url = (l ? a + "//" + l : "") + (u ? ":" + u : "") + c, e.method = (e.method || "GET").toUpperCase(), e.headers = e.headers || {};
            var f = new r(e);
            return n && f.on("response", n), f
        }, a.get = function(t, e) {
            var n = a.request(t, e);
            return n.end(), n
        }, a.Agent = function() {}, a.Agent.defaultMaxSockets = 4, a.STATUS_CODES = o, a.METHODS = ["CHECKOUT", "CONNECT", "COPY", "DELETE", "GET", "HEAD", "LOCK", "M-SEARCH", "MERGE", "MKACTIVITY", "MKCOL", "MOVE", "NOTIFY", "OPTIONS", "PATCH", "POST", "PROPFIND", "PROPPATCH", "PURGE", "PUT", "REPORT", "SEARCH", "SUBSCRIBE", "TRACE", "UNLOCK", "UNSUBSCRIBE"]
    }).call(e, function() {
        return this
    }())
}, function(t, e, n) {
    (function(e, r, i) {
        "use strict";

        function o(t, e) {
            return a.fetch && e ? "fetch" : a.mozchunkedarraybuffer ? "moz-chunked-arraybuffer" : a.msstream ? "ms-stream" : a.arraybuffer && t ? "arraybuffer" : a.vbArray && t ? "text:vbarray" : "text"
        }

        function s(t) {
            try {
                var e = t.status;
                return null !== e && 0 !== e
            } catch (t) {
                return !1
            }
        }
        var a = n(28),
            l = n(29),
            u = n(30),
            c = n(31),
            f = n(52),
            h = u.IncomingMessage,
            d = u.readyStates,
            p = t.exports = function(t) {
                var n = this;
                c.Writable.call(n), n._opts = t, n._body = [], n._headers = {}, t.auth && n.setHeader("Authorization", "Basic " + new e(t.auth).toString("base64")), Object.keys(t.headers).forEach(function(e) {
                    n.setHeader(e, t.headers[e])
                });
                var r, i = !0;
                if ("disable-fetch" === t.mode || "timeout" in t) i = !1, r = !0;
                else if ("prefer-streaming" === t.mode) r = !1;
                else if ("allow-wrong-content-type" === t.mode) r = !a.overrideMimeType;
                else {
                    if (t.mode && "default" !== t.mode && "prefer-fast" !== t.mode) throw new Error("Invalid value for opts.mode");
                    r = !0
                }
                n._mode = o(r, i), n.on("finish", function() {
                    n._onFinish()
                })
            };
        l(p, c.Writable), p.prototype.setHeader = function(t, e) {
            var n = this,
                r = t.toLowerCase();
            g.indexOf(r) === -1 && (n._headers[r] = {
                name: t,
                value: e
            })
        }, p.prototype.getHeader = function(t) {
            var e = this;
            return e._headers[t.toLowerCase()].value
        }, p.prototype.removeHeader = function(t) {
            var e = this;
            delete e._headers[t.toLowerCase()]
        }, p.prototype._onFinish = function() {
            var t = this;
            if (!t._destroyed) {
                var n = t._opts,
                    o = t._headers,
                    s = null;
                "GET" !== n.method && "HEAD" !== n.method && (s = a.blobConstructor ? new r.Blob(t._body.map(function(t) {
                    return f(t)
                }), {
                    type: (o["content-type"] || {}).value || ""
                }) : e.concat(t._body).toString());
                var l = [];
                if (Object.keys(o).forEach(function(t) {
                        var e = o[t].name,
                            n = o[t].value;
                        Array.isArray(n) ? n.forEach(function(t) {
                            l.push([e, t])
                        }) : l.push([e, n])
                    }), "fetch" === t._mode) r.fetch(t._opts.url, {
                    method: t._opts.method,
                    headers: l,
                    body: s || void 0,
                    mode: "cors",
                    credentials: n.withCredentials ? "include" : "same-origin"
                }).then(function(e) {
                    t._fetchResponse = e, t._connect()
                }, function(e) {
                    t.emit("error", e)
                });
                else {
                    var u = t._xhr = new r.XMLHttpRequest;
                    try {
                        u.open(t._opts.method, t._opts.url, !0)
                    } catch (e) {
                        return void i.nextTick(function() {
                            t.emit("error", e)
                        })
                    }
                    "responseType" in u && (u.responseType = t._mode.split(":")[0]), "withCredentials" in u && (u.withCredentials = !!n.withCredentials), "text" === t._mode && "overrideMimeType" in u && u.overrideMimeType("text/plain; charset=x-user-defined"), "timeout" in n && (u.timeout = n.timeout, u.ontimeout = function() {
                        t.emit("timeout")
                    }), l.forEach(function(t) {
                        u.setRequestHeader(t[0], t[1])
                    }), t._response = null, u.onreadystatechange = function() {
                        switch (u.readyState) {
                            case d.LOADING:
                            case d.DONE:
                                t._onXHRProgress()
                        }
                    }, "moz-chunked-arraybuffer" === t._mode && (u.onprogress = function() {
                        t._onXHRProgress()
                    }), u.onerror = function() {
                        t._destroyed || t.emit("error", new Error("XHR error"))
                    };
                    try {
                        u.send(s)
                    } catch (e) {
                        return void i.nextTick(function() {
                            t.emit("error", e)
                        })
                    }
                }
            }
        }, p.prototype._onXHRProgress = function() {
            var t = this;
            s(t._xhr) && !t._destroyed && (t._response || t._connect(), t._response._onXHRProgress())
        }, p.prototype._connect = function() {
            var t = this;
            t._destroyed || (t._response = new h(t._xhr, t._fetchResponse, t._mode), t._response.on("error", function(e) {
                t.emit("error", e)
            }), t.emit("response", t._response))
        }, p.prototype._write = function(t, e, n) {
            var r = this;
            r._body.push(t), n()
        }, p.prototype.abort = p.prototype.destroy = function() {
            var t = this;
            t._destroyed = !0, t._response && (t._response._destroyed = !0), t._xhr && t._xhr.abort()
        }, p.prototype.end = function(t, e, n) {
            var r = this;
            "function" == typeof t && (n = t, t = void 0), c.Writable.prototype.end.call(r, t, e, n)
        }, p.prototype.flushHeaders = function() {}, p.prototype.setTimeout = function() {}, p.prototype.setNoDelay = function() {}, p.prototype.setSocketKeepAlive = function() {};
        var g = ["accept-charset", "accept-encoding", "access-control-request-headers", "access-control-request-method", "connection", "content-length", "cookie", "cookie2", "date", "dnt", "expect", "host", "keep-alive", "origin", "referer", "te", "trailer", "transfer-encoding", "upgrade", "user-agent", "via"]
    }).call(e, n(12).Buffer, function() {
        return this
    }(), n(16))
}, function(t, e) {
    (function(t) {
        "use strict";

        function n() {
            if (void 0 !== o) return o;
            if (t.XMLHttpRequest) {
                o = new t.XMLHttpRequest;
                try {
                    o.open("GET", t.XDomainRequest ? "/" : "https://example.com")
                } catch (t) {
                    o = null
                }
            } else o = null;
            return o
        }

        function r(t) {
            var e = n();
            if (!e) return !1;
            try {
                return e.responseType = t, e.responseType === t
            } catch (t) {}
            return !1
        }

        function i(t) {
            return "function" == typeof t
        }
        e.fetch = i(t.fetch) && i(t.ReadableStream), e.blobConstructor = !1;
        try {
            new Blob([new ArrayBuffer(1)]), e.blobConstructor = !0
        } catch (t) {}
        var o, s = "undefined" != typeof t.ArrayBuffer,
            a = s && i(t.ArrayBuffer.prototype.slice);
        e.arraybuffer = e.fetch || s && r("arraybuffer"), e.msstream = !e.fetch && a && r("ms-stream"), e.mozchunkedarraybuffer = !e.fetch && s && r("moz-chunked-arraybuffer"), e.overrideMimeType = e.fetch || !!n() && i(n().overrideMimeType), e.vbArray = i(t.VBArray), o = null
    }).call(e, function() {
        return this
    }())
}, function(t, e) {
    "use strict";
    "function" == typeof Object.create ? t.exports = function(t, e) {
        t.super_ = e, t.prototype = Object.create(e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        })
    } : t.exports = function(t, e) {
        t.super_ = e;
        var n = function() {};
        n.prototype = e.prototype, t.prototype = new n, t.prototype.constructor = t
    }
}, function(t, e, n) {
    (function(t, r, i) {
        "use strict";
        var o = n(28),
            s = n(29),
            a = n(31),
            l = e.readyStates = {
                UNSENT: 0,
                OPENED: 1,
                HEADERS_RECEIVED: 2,
                LOADING: 3,
                DONE: 4
            },
            u = e.IncomingMessage = function(e, n, i) {
                var s = this;
                if (a.Readable.call(s), s._mode = i, s.headers = {}, s.rawHeaders = [], s.trailers = {}, s.rawTrailers = [], s.on("end", function() {
                        t.nextTick(function() {
                            s.emit("close")
                        })
                    }), "fetch" === i) {
                    var l = function t() {
                        u.read().then(function(e) {
                            if (!s._destroyed) {
                                if (e.done) return void s.push(null);
                                s.push(new r(e.value)), t()
                            }
                        }).catch(function(t) {
                            s.emit("error", t)
                        })
                    };
                    s._fetchResponse = n, s.url = n.url, s.statusCode = n.status, s.statusMessage = n.statusText, n.headers.forEach(function(t, e) {
                        s.headers[e.toLowerCase()] = t, s.rawHeaders.push(e, t)
                    });
                    var u = n.body.getReader();
                    l()
                } else {
                    s._xhr = e, s._pos = 0, s.url = e.responseURL, s.statusCode = e.status, s.statusMessage = e.statusText;
                    var c = e.getAllResponseHeaders().split(/\r?\n/);
                    if (c.forEach(function(t) {
                            var e = t.match(/^([^:]+):\s*(.*)/);
                            if (e) {
                                var n = e[1].toLowerCase();
                                "set-cookie" === n ? (void 0 === s.headers[n] && (s.headers[n] = []), s.headers[n].push(e[2])) : void 0 !== s.headers[n] ? s.headers[n] += ", " + e[2] : s.headers[n] = e[2], s.rawHeaders.push(e[1], e[2])
                            }
                        }), s._charset = "x-user-defined", !o.overrideMimeType) {
                        var f = s.rawHeaders["mime-type"];
                        if (f) {
                            var h = f.match(/;\s*charset=([^;])(;|$)/);
                            h && (s._charset = h[1].toLowerCase())
                        }
                        s._charset || (s._charset = "utf-8")
                    }
                }
            };
        s(u, a.Readable), u.prototype._read = function() {}, u.prototype._onXHRProgress = function() {
            var t = this,
                e = t._xhr,
                n = null;
            switch (t._mode) {
                case "text:vbarray":
                    if (e.readyState !== l.DONE) break;
                    try {
                        n = new i.VBArray(e.responseBody).toArray()
                    } catch (t) {}
                    if (null !== n) {
                        t.push(new r(n));
                        break
                    }
                case "text":
                    try {
                        n = e.responseText
                    } catch (e) {
                        t._mode = "text:vbarray";
                        break
                    }
                    if (n.length > t._pos) {
                        var o = n.substr(t._pos);
                        if ("x-user-defined" === t._charset) {
                            for (var s = new r(o.length), a = 0; a < o.length; a++) s[a] = 255 & o.charCodeAt(a);
                            t.push(s)
                        } else t.push(o, t._charset);
                        t._pos = n.length
                    }
                    break;
                case "arraybuffer":
                    if (e.readyState !== l.DONE || !e.response) break;
                    n = e.response, t.push(new r(new Uint8Array(n)));
                    break;
                case "moz-chunked-arraybuffer":
                    if (n = e.response, e.readyState !== l.LOADING || !n) break;
                    t.push(new r(new Uint8Array(n)));
                    break;
                case "ms-stream":
                    if (n = e.response, e.readyState !== l.LOADING) break;
                    var u = new i.MSStreamReader;
                    u.onprogress = function() {
                        u.result.byteLength > t._pos && (t.push(new r(new Uint8Array(u.result.slice(t._pos)))), t._pos = u.result.byteLength)
                    }, u.onload = function() {
                        t.push(null)
                    }, u.readAsArrayBuffer(n)
            }
            t._xhr.readyState === l.DONE && "ms-stream" !== t._mode && t.push(null)
        }
    }).call(e, n(16), n(12).Buffer, function() {
        return this
    }())
}, function(t, e, n) {
    (function(r) {
        "use strict";
        var i = function() {
            try {
                return n(32)
            } catch (t) {}
        }();
        e = t.exports = n(43), e.Stream = i || e, e.Readable = e, e.Writable = n(35), e.Duplex = n(42), e.Transform = n(49), e.PassThrough = n(51), !r.browser && "disable" === {
            NODE_ENV: "production",
            API_URL: CONFIG_SERVER_PATH
        }.READABLE_STREAM && i && (t.exports = i)
    }).call(e, n(16))
}, function(t, e, n) {
    "use strict";

    function r() {
        i.call(this)
    }
    t.exports = r;
    var i = n(33).EventEmitter,
        o = n(29);
    o(r, i), r.Readable = n(31), r.Writable = n(34), r.Duplex = n(47), r.Transform = n(48), r.PassThrough = n(50), r.Stream = r, r.prototype.pipe = function(t, e) {
        function n(e) {
            t.writable && !1 === t.write(e) && u.pause && u.pause()
        }

        function r() {
            u.readable && u.resume && u.resume()
        }

        function o() {
            c || (c = !0, t.end())
        }

        function s() {
            c || (c = !0, "function" == typeof t.destroy && t.destroy())
        }

        function a(t) {
            if (l(), 0 === i.listenerCount(this, "error")) throw t;
        }

        function l() {
            u.removeListener("data", n), t.removeListener("drain", r), u.removeListener("end", o), u.removeListener("close", s), u.removeListener("error", a), t.removeListener("error", a), u.removeListener("end", l), u.removeListener("close", l), t.removeListener("close", l)
        }
        var u = this;
        u.on("data", n), t.on("drain", r), t._isStdio || e && e.end === !1 || (u.on("end", o), u.on("close", s));
        var c = !1;
        return u.on("error", a), t.on("error", a), u.on("end", l), u.on("close", l), t.on("close", l), t.emit("pipe", u), t
    }
}, function(t, e) {
    "use strict";

    function n() {
        this._events = this._events || {}, this._maxListeners = this._maxListeners || void 0
    }

    function r(t) {
        return "function" == typeof t
    }

    function i(t) {
        return "number" == typeof t
    }

    function o(t) {
        return "object" === ("undefined" == typeof t ? "undefined" : a(t)) && null !== t
    }

    function s(t) {
        return void 0 === t
    }
    var a = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
        return typeof t
    } : function(t) {
        return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
    };
    t.exports = n, n.EventEmitter = n, n.prototype._events = void 0, n.prototype._maxListeners = void 0, n.defaultMaxListeners = 10, n.prototype.setMaxListeners = function(t) {
        if (!i(t) || t < 0 || isNaN(t)) throw TypeError("n must be a positive number");
        return this._maxListeners = t, this
    }, n.prototype.emit = function(t) {
        var e, n, i, a, l, u;
        if (this._events || (this._events = {}), "error" === t && (!this._events.error || o(this._events.error) && !this._events.error.length)) {
            if (e = arguments[1], e instanceof Error) throw e;
            var c = new Error('Uncaught, unspecified "error" event. (' + e + ")");
            throw c.context = e, c
        }
        if (n = this._events[t], s(n)) return !1;
        if (r(n)) switch (arguments.length) {
            case 1:
                n.call(this);
                break;
            case 2:
                n.call(this, arguments[1]);
                break;
            case 3:
                n.call(this, arguments[1], arguments[2]);
                break;
            default:
                a = Array.prototype.slice.call(arguments, 1), n.apply(this, a)
        } else if (o(n))
            for (a = Array.prototype.slice.call(arguments, 1), u = n.slice(), i = u.length, l = 0; l < i; l++) u[l].apply(this, a);
        return !0
    }, n.prototype.addListener = function(t, e) {
        var i;
        if (!r(e)) throw TypeError("listener must be a function");
        return this._events || (this._events = {}), this._events.newListener && this.emit("newListener", t, r(e.listener) ? e.listener : e), this._events[t] ? o(this._events[t]) ? this._events[t].push(e) : this._events[t] = [this._events[t], e] : this._events[t] = e, o(this._events[t]) && !this._events[t].warned && (i = s(this._maxListeners) ? n.defaultMaxListeners : this._maxListeners, i && i > 0 && this._events[t].length > i && (this._events[t].warned = !0, console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.", this._events[t].length), "function" == typeof console.trace && console.trace())), this
    }, n.prototype.on = n.prototype.addListener, n.prototype.once = function(t, e) {
        function n() {
            this.removeListener(t, n), i || (i = !0, e.apply(this, arguments))
        }
        if (!r(e)) throw TypeError("listener must be a function");
        var i = !1;
        return n.listener = e, this.on(t, n), this
    }, n.prototype.removeListener = function(t, e) {
        var n, i, s, a;
        if (!r(e)) throw TypeError("listener must be a function");
        if (!this._events || !this._events[t]) return this;
        if (n = this._events[t], s = n.length, i = -1, n === e || r(n.listener) && n.listener === e) delete this._events[t], this._events.removeListener && this.emit("removeListener", t, e);
        else if (o(n)) {
            for (a = s; a-- > 0;)
                if (n[a] === e || n[a].listener && n[a].listener === e) {
                    i = a;
                    break
                }
            if (i < 0) return this;
            1 === n.length ? (n.length = 0, delete this._events[t]) : n.splice(i, 1), this._events.removeListener && this.emit("removeListener", t, e)
        }
        return this
    }, n.prototype.removeAllListeners = function(t) {
        var e, n;
        if (!this._events) return this;
        if (!this._events.removeListener) return 0 === arguments.length ? this._events = {} : this._events[t] && delete this._events[t], this;
        if (0 === arguments.length) {
            for (e in this._events) "removeListener" !== e && this.removeAllListeners(e);
            return this.removeAllListeners("removeListener"), this._events = {}, this
        }
        if (n = this._events[t], r(n)) this.removeListener(t, n);
        else if (n)
            for (; n.length;) this.removeListener(t, n[n.length - 1]);
        return delete this._events[t], this
    }, n.prototype.listeners = function(t) {
        var e;
        return e = this._events && this._events[t] ? r(this._events[t]) ? [this._events[t]] : this._events[t].slice() : []
    }, n.prototype.listenerCount = function(t) {
        if (this._events) {
            var e = this._events[t];
            if (r(e)) return 1;
            if (e) return e.length
        }
        return 0
    }, n.listenerCount = function(t, e) {
        return t.listenerCount(e)
    }
}, function(t, e, n) {
    "use strict";
    t.exports = n(35)
}, function(t, e, n) {
    (function(e, r) {
        "use strict";

        function i() {}

        function o(t, e, n) {
            this.chunk = t, this.encoding = e, this.callback = n, this.next = null
        }

        function s(t, e) {
            T = T || n(42), t = t || {}, this.objectMode = !!t.objectMode, e instanceof T && (this.objectMode = this.objectMode || !!t.writableObjectMode);
            var r = t.highWaterMark,
                i = this.objectMode ? 16 : 16384;
            this.highWaterMark = r || 0 === r ? r : i, this.highWaterMark = ~~this.highWaterMark, this.needDrain = !1, this.ending = !1, this.ended = !1, this.finished = !1;
            var o = t.decodeStrings === !1;
            this.decodeStrings = !o, this.defaultEncoding = t.defaultEncoding || "utf8", this.length = 0, this.writing = !1, this.corked = 0, this.sync = !0, this.bufferProcessing = !1, this.onwrite = function(t) {
                g(e, t)
            }, this.writecb = null, this.writelen = 0, this.bufferedRequest = null, this.lastBufferedRequest = null, this.pendingcb = 0, this.prefinished = !1, this.errorEmitted = !1, this.bufferedRequestCount = 0, this.corkedRequestsFree = new O(this)
        }

        function a(t) {
            return T = T || n(42), L.call(a, this) || this instanceof T ? (this._writableState = new s(t, this), this.writable = !0, t && ("function" == typeof t.write && (this._write = t.write), "function" == typeof t.writev && (this._writev = t.writev)), void I.call(this)) : new a(t)
        }

        function l(t, e) {
            var n = new Error("write after end");
            t.emit("error", n), x(e, n)
        }

        function u(t, e, n, r) {
            var i = !0,
                o = !1;
            return null === n ? o = new TypeError("May not write null values to stream") : "string" == typeof n || void 0 === n || e.objectMode || (o = new TypeError("Invalid non-string/buffer chunk")), o && (t.emit("error", o), x(r, o), i = !1), i
        }

        function c(t, e, n) {
            return t.objectMode || t.decodeStrings === !1 || "string" != typeof e || (e = P.from(e, n)), e
        }

        function f(t, e, n, r, i, s) {
            n || (r = c(e, r, i), A.isBuffer(r) && (i = "buffer"));
            var a = e.objectMode ? 1 : r.length;
            e.length += a;
            var l = e.length < e.highWaterMark;
            if (l || (e.needDrain = !0), e.writing || e.corked) {
                var u = e.lastBufferedRequest;
                e.lastBufferedRequest = new o(r, i, s), u ? u.next = e.lastBufferedRequest : e.bufferedRequest = e.lastBufferedRequest, e.bufferedRequestCount += 1
            } else h(t, e, !1, a, r, i, s);
            return l
        }

        function h(t, e, n, r, i, o, s) {
            e.writelen = r, e.writecb = s, e.writing = !0, e.sync = !0, n ? t._writev(i, e.onwrite) : t._write(i, o, e.onwrite), e.sync = !1
        }

        function d(t, e, n, r, i) {
            --e.pendingcb, n ? x(i, r) : i(r), t._writableState.errorEmitted = !0, t.emit("error", r)
        }

        function p(t) {
            t.writing = !1, t.writecb = null, t.length -= t.writelen, t.writelen = 0
        }

        function g(t, e) {
            var n = t._writableState,
                r = n.sync,
                i = n.writecb;
            if (p(n), e) d(t, n, r, e, i);
            else {
                var o = y(n);
                o || n.corked || n.bufferProcessing || !n.bufferedRequest || b(t, n), r ? w(_, t, n, o, i) : _(t, n, o, i)
            }
        }

        function _(t, e, n, r) {
            n || v(t, e), e.pendingcb--, r(), E(t, e)
        }

        function v(t, e) {
            0 === e.length && e.needDrain && (e.needDrain = !1, t.emit("drain"))
        }

        function b(t, e) {
            e.bufferProcessing = !0;
            var n = e.bufferedRequest;
            if (t._writev && n && n.next) {
                var r = e.bufferedRequestCount,
                    i = new Array(r),
                    o = e.corkedRequestsFree;
                o.entry = n;
                for (var s = 0; n;) i[s] = n, n = n.next, s += 1;
                h(t, e, !0, e.length, i, "", o.finish), e.pendingcb++, e.lastBufferedRequest = null, o.next ? (e.corkedRequestsFree = o.next, o.next = null) : e.corkedRequestsFree = new O(e)
            } else {
                for (; n;) {
                    var a = n.chunk,
                        l = n.encoding,
                        u = n.callback,
                        c = e.objectMode ? 1 : a.length;
                    if (h(t, e, !1, c, a, l, u), n = n.next, e.writing) break
                }
                null === n && (e.lastBufferedRequest = null)
            }
            e.bufferedRequestCount = 0, e.bufferedRequest = n, e.bufferProcessing = !1
        }

        function y(t) {
            return t.ending && 0 === t.length && null === t.bufferedRequest && !t.finished && !t.writing
        }

        function m(t, e) {
            e.prefinished || (e.prefinished = !0, t.emit("prefinish"))
        }

        function E(t, e) {
            var n = y(e);
            return n && (0 === e.pendingcb ? (m(t, e), e.finished = !0, t.emit("finish")) : m(t, e)), n
        }

        function S(t, e, n) {
            e.ending = !0, E(t, e), n && (e.finished ? x(n) : t.once("finish", n)), e.ended = !0, t.writable = !1
        }

        function O(t) {
            var e = this;
            this.next = null, this.entry = null, this.finish = function(n) {
                var r = e.entry;
                for (e.entry = null; r;) {
                    var i = r.callback;
                    t.pendingcb--, i(n), r = r.next
                }
                t.corkedRequestsFree ? t.corkedRequestsFree.next = e : t.corkedRequestsFree = e
            }
        }
        t.exports = a;
        var T, x = n(38),
            w = !e.browser && ["v0.10", "v0.9."].indexOf(e.version.slice(0, 5)) > -1 ? r : x;
        a.WritableState = s;
        var C = n(39);
        C.inherits = n(29);
        var I, R = {
            deprecate: n(40)
        };
        ! function() {
            try {
                I = n(32)
            } catch (t) {} finally {
                I || (I = n(33).EventEmitter)
            }
        }();
        var A = n(12).Buffer,
            P = n(41);
        C.inherits(a, I), s.prototype.getBuffer = function() {
            for (var t = this.bufferedRequest, e = []; t;) e.push(t), t = t.next;
            return e
        },
            function() {
                try {
                    Object.defineProperty(s.prototype, "buffer", {
                        get: R.deprecate(function() {
                            return this.getBuffer()
                        }, "_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")
                    })
                } catch (t) {}
            }();
        var L;
        "function" == typeof Symbol && Symbol.hasInstance && "function" == typeof Function.prototype[Symbol.hasInstance] ? (L = Function.prototype[Symbol.hasInstance], Object.defineProperty(a, Symbol.hasInstance, {
            value: function(t) {
                return !!L.call(this, t) || t && t._writableState instanceof s
            }
        })) : L = function(t) {
            return t instanceof this
        }, a.prototype.pipe = function() {
            this.emit("error", new Error("Cannot pipe, not readable"))
        }, a.prototype.write = function(t, e, n) {
            var r = this._writableState,
                o = !1,
                s = A.isBuffer(t);
            return "function" == typeof e && (n = e, e = null), s ? e = "buffer" : e || (e = r.defaultEncoding), "function" != typeof n && (n = i), r.ended ? l(this, n) : (s || u(this, r, t, n)) && (r.pendingcb++, o = f(this, r, s, t, e, n)), o
        }, a.prototype.cork = function() {
            var t = this._writableState;
            t.corked++
        }, a.prototype.uncork = function() {
            var t = this._writableState;
            t.corked && (t.corked--, t.writing || t.corked || t.finished || t.bufferProcessing || !t.bufferedRequest || b(this, t))
        }, a.prototype.setDefaultEncoding = function(t) {
            if ("string" == typeof t && (t = t.toLowerCase()), !(["hex", "utf8", "utf-8", "ascii", "binary", "base64", "ucs2", "ucs-2", "utf16le", "utf-16le", "raw"].indexOf((t + "").toLowerCase()) > -1)) throw new TypeError("Unknown encoding: " + t);
            return this._writableState.defaultEncoding = t, this
        }, a.prototype._write = function(t, e, n) {
            n(new Error("_write() is not implemented"))
        }, a.prototype._writev = null, a.prototype.end = function(t, e, n) {
            var r = this._writableState;
            "function" == typeof t ? (n = t, t = null, e = null) : "function" == typeof e && (n = e, e = null), null !== t && void 0 !== t && this.write(t, e), r.corked && (r.corked = 1, this.uncork()), r.ending || r.finished || S(this, r, n)
        }
    }).call(e, n(16), n(36).setImmediate)
}, function(t, e, n) {
    "use strict";

    function r(t, e) {
        this._id = t, this._clearFn = e
    }
    var i = Function.prototype.apply;
    e.setTimeout = function() {
        return new r(i.call(setTimeout, window, arguments), clearTimeout)
    }, e.setInterval = function() {
        return new r(i.call(setInterval, window, arguments), clearInterval)
    }, e.clearTimeout = e.clearInterval = function(t) {
        t && t.close()
    }, r.prototype.unref = r.prototype.ref = function() {}, r.prototype.close = function() {
        this._clearFn.call(window, this._id)
    }, e.enroll = function(t, e) {
        clearTimeout(t._idleTimeoutId), t._idleTimeout = e
    }, e.unenroll = function(t) {
        clearTimeout(t._idleTimeoutId), t._idleTimeout = -1
    }, e._unrefActive = e.active = function(t) {
        clearTimeout(t._idleTimeoutId);
        var e = t._idleTimeout;
        e >= 0 && (t._idleTimeoutId = setTimeout(function() {
            t._onTimeout && t._onTimeout()
        }, e))
    }, n(37), e.setImmediate = setImmediate, e.clearImmediate = clearImmediate
}, function(t, e, n) {
    (function(t, e) {
        "use strict";
        ! function(t, n) {
            function r(t) {
                "function" != typeof t && (t = new Function("" + t));
                for (var e = new Array(arguments.length - 1), n = 0; n < e.length; n++) e[n] = arguments[n + 1];
                var r = {
                    callback: t,
                    args: e
                };
                return g[p] = r, d(p), p++
            }

            function i(t) {
                delete g[t]
            }

            function o(t) {
                var e = t.callback,
                    r = t.args;
                switch (r.length) {
                    case 0:
                        e();
                        break;
                    case 1:
                        e(r[0]);
                        break;
                    case 2:
                        e(r[0], r[1]);
                        break;
                    case 3:
                        e(r[0], r[1], r[2]);
                        break;
                    default:
                        e.apply(n, r)
                }
            }

            function s(t) {
                if (_) setTimeout(s, 0, t);
                else {
                    var e = g[t];
                    if (e) {
                        _ = !0;
                        try {
                            o(e)
                        } finally {
                            i(t), _ = !1
                        }
                    }
                }
            }

            function a() {
                d = function(t) {
                    e.nextTick(function() {
                        s(t)
                    })
                }
            }

            function l() {
                if (t.postMessage && !t.importScripts) {
                    var e = !0,
                        n = t.onmessage;
                    return t.onmessage = function() {
                        e = !1
                    }, t.postMessage("", "*"), t.onmessage = n, e
                }
            }

            function u() {
                var e = "setImmediate$" + Math.random() + "$",
                    n = function(n) {
                        n.source === t && "string" == typeof n.data && 0 === n.data.indexOf(e) && s(+n.data.slice(e.length))
                    };
                t.addEventListener ? t.addEventListener("message", n, !1) : t.attachEvent("onmessage", n), d = function(n) {
                    t.postMessage(e + n, "*")
                }
            }

            function c() {
                var t = new MessageChannel;
                t.port1.onmessage = function(t) {
                    var e = t.data;
                    s(e)
                }, d = function(e) {
                    t.port2.postMessage(e)
                }
            }

            function f() {
                var t = v.documentElement;
                d = function(e) {
                    var n = v.createElement("script");
                    n.onreadystatechange = function() {
                        s(e), n.onreadystatechange = null, t.removeChild(n), n = null
                    }, t.appendChild(n)
                }
            }

            function h() {
                d = function(t) {
                    setTimeout(s, 0, t)
                }
            }
            if (!t.setImmediate) {
                var d, p = 1,
                    g = {},
                    _ = !1,
                    v = t.document,
                    b = Object.getPrototypeOf && Object.getPrototypeOf(t);
                b = b && b.setTimeout ? b : t, "[object process]" === {}.toString.call(t.process) ? a() : l() ? u() : t.MessageChannel ? c() : v && "onreadystatechange" in v.createElement("script") ? f() : h(), b.setImmediate = r, b.clearImmediate = i
            }
        }("undefined" == typeof self ? "undefined" == typeof t ? void 0 : t : self)
    }).call(e, function() {
        return this
    }(), n(16))
}, function(t, e, n) {
    (function(e) {
        "use strict";

        function n(t, n, r, i) {
            if ("function" != typeof t) throw new TypeError('"callback" argument must be a function');
            var o, s, a = arguments.length;
            switch (a) {
                case 0:
                case 1:
                    return e.nextTick(t);
                case 2:
                    return e.nextTick(function() {
                        t.call(null, n)
                    });
                case 3:
                    return e.nextTick(function() {
                        t.call(null, n, r)
                    });
                case 4:
                    return e.nextTick(function() {
                        t.call(null, n, r, i)
                    });
                default:
                    for (o = new Array(a - 1), s = 0; s < o.length;) o[s++] = arguments[s];
                    return e.nextTick(function() {
                        t.apply(null, o)
                    })
            }
        }!e.version || 0 === e.version.indexOf("v0.") || 0 === e.version.indexOf("v1.") && 0 !== e.version.indexOf("v1.8.") ? t.exports = n : t.exports = e.nextTick
    }).call(e, n(16))
}, function(t, e, n) {
    (function(t) {
        "use strict";

        function n(t) {
            return Array.isArray ? Array.isArray(t) : "[object Array]" === _(t)
        }

        function r(t) {
            return "boolean" == typeof t
        }

        function i(t) {
            return null === t
        }

        function o(t) {
            return null == t
        }

        function s(t) {
            return "number" == typeof t
        }

        function a(t) {
            return "string" == typeof t
        }

        function l(t) {
            return "symbol" === ("undefined" == typeof t ? "undefined" : v(t))
        }

        function u(t) {
            return void 0 === t
        }

        function c(t) {
            return "[object RegExp]" === _(t)
        }

        function f(t) {
            return "object" === ("undefined" == typeof t ? "undefined" : v(t)) && null !== t
        }

        function h(t) {
            return "[object Date]" === _(t)
        }

        function d(t) {
            return "[object Error]" === _(t) || t instanceof Error
        }

        function p(t) {
            return "function" == typeof t
        }

        function g(t) {
            return null === t || "boolean" == typeof t || "number" == typeof t || "string" == typeof t || "symbol" === ("undefined" == typeof t ? "undefined" : v(t)) || "undefined" == typeof t
        }

        function _(t) {
            return Object.prototype.toString.call(t)
        }
        var v = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        };
        e.isArray = n, e.isBoolean = r, e.isNull = i, e.isNullOrUndefined = o, e.isNumber = s, e.isString = a, e.isSymbol = l, e.isUndefined = u, e.isRegExp = c, e.isObject = f, e.isDate = h, e.isError = d, e.isFunction = p, e.isPrimitive = g, e.isBuffer = t.isBuffer
    }).call(e, n(12).Buffer)
}, function(t, e) {
    (function(e) {
        "use strict";

        function n(t, e) {
            function n() {
                if (!i) {
                    if (r("throwDeprecation")) throw new Error(e);
                    r("traceDeprecation") ? console.trace(e) : console.warn(e), i = !0
                }
                return t.apply(this, arguments)
            }
            if (r("noDeprecation")) return t;
            var i = !1;
            return n
        }

        function r(t) {
            try {
                if (!e.localStorage) return !1
            } catch (t) {
                return !1
            }
            var n = e.localStorage[t];
            return null != n && "true" === String(n).toLowerCase()
        }
        t.exports = n
    }).call(e, function() {
        return this
    }())
}, function(t, e, n) {
    (function(t) {
        "use strict";
        var r = n(12),
            i = r.Buffer,
            o = r.SlowBuffer,
            s = r.kMaxLength || 2147483647;
        e.alloc = function(t, e, n) {
            if ("function" == typeof i.alloc) return i.alloc(t, e, n);
            if ("number" == typeof n) throw new TypeError("encoding must not be number");
            if ("number" != typeof t) throw new TypeError("size must be a number");
            if (t > s) throw new RangeError("size is too large");
            var r = n,
                o = e;
            void 0 === o && (r = void 0, o = 0);
            var a = new i(t);
            if ("string" == typeof o)
                for (var l = new i(o, r), u = l.length, c = -1; ++c < t;) a[c] = l[c % u];
            else a.fill(o);
            return a
        }, e.allocUnsafe = function(t) {
            if ("function" == typeof i.allocUnsafe) return i.allocUnsafe(t);
            if ("number" != typeof t) throw new TypeError("size must be a number");
            if (t > s) throw new RangeError("size is too large");
            return new i(t)
        }, e.from = function(e, n, r) {
            if ("function" == typeof i.from && (!t.Uint8Array || Uint8Array.from !== i.from)) return i.from(e, n, r);
            if ("number" == typeof e) throw new TypeError('"value" argument must not be a number');
            if ("string" == typeof e) return new i(e, n);
            if ("undefined" != typeof ArrayBuffer && e instanceof ArrayBuffer) {
                var o = n;
                if (1 === arguments.length) return new i(e);
                "undefined" == typeof o && (o = 0);
                var s = r;
                if ("undefined" == typeof s && (s = e.byteLength - o), o >= e.byteLength) throw new RangeError("'offset' is out of bounds");
                if (s > e.byteLength - o) throw new RangeError("'length' is out of bounds");
                return new i(e.slice(o, o + s))
            }
            if (i.isBuffer(e)) {
                var a = new i(e.length);
                return e.copy(a, 0, 0, e.length), a
            }
            if (e) {
                if (Array.isArray(e) || "undefined" != typeof ArrayBuffer && e.buffer instanceof ArrayBuffer || "length" in e) return new i(e);
                if ("Buffer" === e.type && Array.isArray(e.data)) return new i(e.data)
            }
            throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")
        }, e.allocUnsafeSlow = function(t) {
            if ("function" == typeof i.allocUnsafeSlow) return i.allocUnsafeSlow(t);
            if ("number" != typeof t) throw new TypeError("size must be a number");
            if (t >= s) throw new RangeError("size is too large");
            return new o(t)
        }
    }).call(e, function() {
        return this
    }())
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return this instanceof r ? (u.call(this, t), c.call(this, t), t && t.readable === !1 && (this.readable = !1), t && t.writable === !1 && (this.writable = !1), this.allowHalfOpen = !0, t && t.allowHalfOpen === !1 && (this.allowHalfOpen = !1), void this.once("end", i)) : new r(t)
    }

    function i() {
        this.allowHalfOpen || this._writableState.ended || a(o, this)
    }

    function o(t) {
        t.end()
    }
    var s = Object.keys || function(t) {
        var e = [];
        for (var n in t) e.push(n);
        return e
    };
    t.exports = r;
    var a = n(38),
        l = n(39);
    l.inherits = n(29);
    var u = n(43),
        c = n(35);
    l.inherits(r, u);
    for (var f = s(c.prototype), h = 0; h < f.length; h++) {
        var d = f[h];
        r.prototype[d] || (r.prototype[d] = c.prototype[d])
    }
}, function(t, e, n) {
    (function(e) {
        "use strict";

        function r(t, e, n) {
            return "function" == typeof t.prependListener ? t.prependListener(e, n) : void(t._events && t._events[e] ? P(t._events[e]) ? t._events[e].unshift(n) : t._events[e] = [n, t._events[e]] : t.on(e, n))
        }

        function i(t, e) {
            R = R || n(42), t = t || {}, this.objectMode = !!t.objectMode, e instanceof R && (this.objectMode = this.objectMode || !!t.readableObjectMode);
            var r = t.highWaterMark,
                i = this.objectMode ? 16 : 16384;
            this.highWaterMark = r || 0 === r ? r : i, this.highWaterMark = ~~this.highWaterMark, this.buffer = new F, this.length = 0, this.pipes = null, this.pipesCount = 0, this.flowing = null, this.ended = !1, this.endEmitted = !1, this.reading = !1, this.sync = !0, this.needReadable = !1, this.emittedReadable = !1, this.readableListening = !1, this.resumeScheduled = !1, this.defaultEncoding = t.defaultEncoding || "utf8", this.ranOut = !1, this.awaitDrain = 0, this.readingMore = !1, this.decoder = null, this.encoding = null, t.encoding && (H || (H = n(46).StringDecoder), this.decoder = new H(t.encoding), this.encoding = t.encoding)
        }

        function o(t) {
            return R = R || n(42), this instanceof o ? (this._readableState = new i(t, this), this.readable = !0, t && "function" == typeof t.read && (this._read = t.read), void L.call(this)) : new o(t)
        }

        function s(t, e, n, r, i) {
            var o = c(e, n);
            if (o) t.emit("error", o);
            else if (null === n) e.reading = !1, f(t, e);
            else if (e.objectMode || n && n.length > 0)
                if (e.ended && !i) {
                    var s = new Error("stream.push() after EOF");
                    t.emit("error", s)
                } else if (e.endEmitted && i) {
                    var l = new Error("stream.unshift() after end event");
                    t.emit("error", l)
                } else {
                    var u;
                    !e.decoder || i || r || (n = e.decoder.write(n), u = !e.objectMode && 0 === n.length), i || (e.reading = !1), u || (e.flowing && 0 === e.length && !e.sync ? (t.emit("data", n), t.read(0)) : (e.length += e.objectMode ? 1 : n.length, i ? e.buffer.unshift(n) : e.buffer.push(n), e.needReadable && h(t))), p(t, e)
                } else i || (e.reading = !1);
            return a(e)
        }

        function a(t) {
            return !t.ended && (t.needReadable || t.length < t.highWaterMark || 0 === t.length)
        }

        function l(t) {
            return t >= U ? t = U : (t--, t |= t >>> 1, t |= t >>> 2, t |= t >>> 4, t |= t >>> 8, t |= t >>> 16, t++), t
        }

        function u(t, e) {
            return t <= 0 || 0 === e.length && e.ended ? 0 : e.objectMode ? 1 : t !== t ? e.flowing && e.length ? e.buffer.head.data.length : e.length : (t > e.highWaterMark && (e.highWaterMark = l(t)), t <= e.length ? t : e.ended ? e.length : (e.needReadable = !0, 0))
        }

        function c(t, e) {
            var n = null;
            return D.isBuffer(e) || "string" == typeof e || null === e || void 0 === e || t.objectMode || (n = new TypeError("Invalid non-string/buffer chunk")), n
        }

        function f(t, e) {
            if (!e.ended) {
                if (e.decoder) {
                    var n = e.decoder.end();
                    n && n.length && (e.buffer.push(n), e.length += e.objectMode ? 1 : n.length)
                }
                e.ended = !0, h(t)
            }
        }

        function h(t) {
            var e = t._readableState;
            e.needReadable = !1, e.emittedReadable || (B("emitReadable", e.flowing), e.emittedReadable = !0, e.sync ? A(d, t) : d(t))
        }

        function d(t) {
            B("emit readable"), t.emit("readable"), m(t)
        }

        function p(t, e) {
            e.readingMore || (e.readingMore = !0, A(g, t, e))
        }

        function g(t, e) {
            for (var n = e.length; !e.reading && !e.flowing && !e.ended && e.length < e.highWaterMark && (B("maybeReadMore read 0"), t.read(0), n !== e.length);) n = e.length;
            e.readingMore = !1
        }

        function _(t) {
            return function() {
                var e = t._readableState;
                B("pipeOnDrain", e.awaitDrain), e.awaitDrain && e.awaitDrain--, 0 === e.awaitDrain && k(t, "data") && (e.flowing = !0, m(t))
            }
        }

        function v(t) {
            B("readable nexttick read 0"), t.read(0)
        }

        function b(t, e) {
            e.resumeScheduled || (e.resumeScheduled = !0, A(y, t, e))
        }

        function y(t, e) {
            e.reading || (B("resume read 0"), t.read(0)), e.resumeScheduled = !1, e.awaitDrain = 0, t.emit("resume"), m(t), e.flowing && !e.reading && t.read(0)
        }

        function m(t) {
            var e = t._readableState;
            for (B("flow", e.flowing); e.flowing && null !== t.read(););
        }

        function E(t, e) {
            if (0 === e.length) return null;
            var n;
            return e.objectMode ? n = e.buffer.shift() : !t || t >= e.length ? (n = e.decoder ? e.buffer.join("") : 1 === e.buffer.length ? e.buffer.head.data : e.buffer.concat(e.length), e.buffer.clear()) : n = S(t, e.buffer, e.decoder), n
        }

        function S(t, e, n) {
            var r;
            return t < e.head.data.length ? (r = e.head.data.slice(0, t), e.head.data = e.head.data.slice(t)) : r = t === e.head.data.length ? e.shift() : n ? O(t, e) : T(t, e), r
        }

        function O(t, e) {
            var n = e.head,
                r = 1,
                i = n.data;
            for (t -= i.length; n = n.next;) {
                var o = n.data,
                    s = t > o.length ? o.length : t;
                if (i += s === o.length ? o : o.slice(0, t), t -= s, 0 === t) {
                    s === o.length ? (++r, n.next ? e.head = n.next : e.head = e.tail = null) : (e.head = n, n.data = o.slice(s));
                    break
                }++r
            }
            return e.length -= r, i
        }

        function T(t, e) {
            var n = j.allocUnsafe(t),
                r = e.head,
                i = 1;
            for (r.data.copy(n), t -= r.data.length; r = r.next;) {
                var o = r.data,
                    s = t > o.length ? o.length : t;
                if (o.copy(n, n.length - t, 0, s), t -= s, 0 === t) {
                    s === o.length ? (++i, r.next ? e.head = r.next : e.head = e.tail = null) : (e.head = r, r.data = o.slice(s));
                    break
                }++i
            }
            return e.length -= i, n
        }

        function x(t) {
            var e = t._readableState;
            if (e.length > 0) throw new Error('"endReadable()" called on non-empty stream');
            e.endEmitted || (e.ended = !0, A(w, e, t))
        }

        function w(t, e) {
            t.endEmitted || 0 !== t.length || (t.endEmitted = !0, e.readable = !1, e.emit("end"))
        }

        function C(t, e) {
            for (var n = 0, r = t.length; n < r; n++) e(t[n], n)
        }

        function I(t, e) {
            for (var n = 0, r = t.length; n < r; n++)
                if (t[n] === e) return n;
            return -1
        }
        t.exports = o;
        var R, A = n(38),
            P = n(15);
        o.ReadableState = i;
        var L, k = (n(33).EventEmitter, function(t, e) {
            return t.listeners(e).length
        });
        ! function() {
            try {
                L = n(32)
            } catch (t) {} finally {
                L || (L = n(33).EventEmitter)
            }
        }();
        var D = n(12).Buffer,
            j = n(41),
            M = n(39);
        M.inherits = n(29);
        var N = n(44),
            B = void 0;
        B = N && N.debuglog ? N.debuglog("stream") : function() {};
        var H, F = n(45);
        M.inherits(o, L), o.prototype.push = function(t, e) {
            var n = this._readableState;
            return n.objectMode || "string" != typeof t || (e = e || n.defaultEncoding, e !== n.encoding && (t = j.from(t, e), e = "")), s(this, n, t, e, !1)
        }, o.prototype.unshift = function(t) {
            var e = this._readableState;
            return s(this, e, t, "", !0)
        }, o.prototype.isPaused = function() {
            return this._readableState.flowing === !1
        }, o.prototype.setEncoding = function(t) {
            return H || (H = n(46).StringDecoder), this._readableState.decoder = new H(t), this._readableState.encoding = t, this
        };
        var U = 8388608;
        o.prototype.read = function(t) {
            B("read", t), t = parseInt(t, 10);
            var e = this._readableState,
                n = t;
            if (0 !== t && (e.emittedReadable = !1), 0 === t && e.needReadable && (e.length >= e.highWaterMark || e.ended)) return B("read: emitReadable", e.length, e.ended), 0 === e.length && e.ended ? x(this) : h(this), null;
            if (t = u(t, e), 0 === t && e.ended) return 0 === e.length && x(this), null;
            var r = e.needReadable;
            B("need readable", r), (0 === e.length || e.length - t < e.highWaterMark) && (r = !0, B("length less than watermark", r)), e.ended || e.reading ? (r = !1, B("reading or ended", r)) : r && (B("do read"), e.reading = !0, e.sync = !0, 0 === e.length && (e.needReadable = !0), this._read(e.highWaterMark), e.sync = !1, e.reading || (t = u(n, e)));
            var i;
            return i = t > 0 ? E(t, e) : null, null === i ? (e.needReadable = !0, t = 0) : e.length -= t, 0 === e.length && (e.ended || (e.needReadable = !0), n !== t && e.ended && x(this)), null !== i && this.emit("data", i), i
        }, o.prototype._read = function(t) {
            this.emit("error", new Error("_read() is not implemented"))
        }, o.prototype.pipe = function(t, n) {
            function i(t) {
                B("onunpipe"), t === h && s()
            }

            function o() {
                B("onend"), t.end()
            }

            function s() {
                B("cleanup"), t.removeListener("close", u), t.removeListener("finish", c), t.removeListener("drain", v), t.removeListener("error", l), t.removeListener("unpipe", i), h.removeListener("end", o), h.removeListener("end", s), h.removeListener("data", a), b = !0, !d.awaitDrain || t._writableState && !t._writableState.needDrain || v()
            }

            function a(e) {
                B("ondata"), y = !1;
                var n = t.write(e);
                !1 !== n || y || ((1 === d.pipesCount && d.pipes === t || d.pipesCount > 1 && I(d.pipes, t) !== -1) && !b && (B("false write response, pause", h._readableState.awaitDrain), h._readableState.awaitDrain++, y = !0), h.pause())
            }

            function l(e) {
                B("onerror", e), f(), t.removeListener("error", l), 0 === k(t, "error") && t.emit("error", e)
            }

            function u() {
                t.removeListener("finish", c), f()
            }

            function c() {
                B("onfinish"), t.removeListener("close", u), f()
            }

            function f() {
                B("unpipe"), h.unpipe(t)
            }
            var h = this,
                d = this._readableState;
            switch (d.pipesCount) {
                case 0:
                    d.pipes = t;
                    break;
                case 1:
                    d.pipes = [d.pipes, t];
                    break;
                default:
                    d.pipes.push(t)
            }
            d.pipesCount += 1, B("pipe count=%d opts=%j", d.pipesCount, n);
            var p = (!n || n.end !== !1) && t !== e.stdout && t !== e.stderr,
                g = p ? o : s;
            d.endEmitted ? A(g) : h.once("end", g), t.on("unpipe", i);
            var v = _(h);
            t.on("drain", v);
            var b = !1,
                y = !1;
            return h.on("data", a), r(t, "error", l), t.once("close", u), t.once("finish", c), t.emit("pipe", h), d.flowing || (B("pipe resume"), h.resume()), t
        }, o.prototype.unpipe = function(t) {
            var e = this._readableState;
            if (0 === e.pipesCount) return this;
            if (1 === e.pipesCount) return t && t !== e.pipes ? this : (t || (t = e.pipes), e.pipes = null, e.pipesCount = 0, e.flowing = !1, t && t.emit("unpipe", this), this);
            if (!t) {
                var n = e.pipes,
                    r = e.pipesCount;
                e.pipes = null, e.pipesCount = 0, e.flowing = !1;
                for (var i = 0; i < r; i++) n[i].emit("unpipe", this);
                return this
            }
            var o = I(e.pipes, t);
            return o === -1 ? this : (e.pipes.splice(o, 1), e.pipesCount -= 1, 1 === e.pipesCount && (e.pipes = e.pipes[0]), t.emit("unpipe", this), this)
        }, o.prototype.on = function(t, e) {
            var n = L.prototype.on.call(this, t, e);
            if ("data" === t) this._readableState.flowing !== !1 && this.resume();
            else if ("readable" === t) {
                var r = this._readableState;
                r.endEmitted || r.readableListening || (r.readableListening = r.needReadable = !0, r.emittedReadable = !1, r.reading ? r.length && h(this, r) : A(v, this))
            }
            return n
        }, o.prototype.addListener = o.prototype.on, o.prototype.resume = function() {
            var t = this._readableState;
            return t.flowing || (B("resume"), t.flowing = !0, b(this, t)), this
        }, o.prototype.pause = function() {
            return B("call pause flowing=%j", this._readableState.flowing), !1 !== this._readableState.flowing && (B("pause"), this._readableState.flowing = !1, this.emit("pause")), this
        }, o.prototype.wrap = function(t) {
            var e = this._readableState,
                n = !1,
                r = this;
            t.on("end", function() {
                if (B("wrapped end"), e.decoder && !e.ended) {
                    var t = e.decoder.end();
                    t && t.length && r.push(t)
                }
                r.push(null)
            }), t.on("data", function(i) {
                if (B("wrapped data"), e.decoder && (i = e.decoder.write(i)), (!e.objectMode || null !== i && void 0 !== i) && (e.objectMode || i && i.length)) {
                    var o = r.push(i);
                    o || (n = !0, t.pause())
                }
            });
            for (var i in t) void 0 === this[i] && "function" == typeof t[i] && (this[i] = function(e) {
                return function() {
                    return t[e].apply(t, arguments)
                }
            }(i));
            var o = ["error", "close", "destroy", "pause", "resume"];
            return C(o, function(e) {
                t.on(e, r.emit.bind(r, e))
            }), r._read = function(e) {
                B("wrapped _read", e), n && (n = !1, t.resume())
            }, r
        }, o._fromList = E
    }).call(e, n(16))
}, function(t, e) {}, function(t, e, n) {
    "use strict";

    function r() {
        this.head = null, this.tail = null, this.length = 0
    }
    var i = (n(12).Buffer, n(41));
    t.exports = r, r.prototype.push = function(t) {
        var e = {
            data: t,
            next: null
        };
        this.length > 0 ? this.tail.next = e : this.head = e, this.tail = e, ++this.length
    }, r.prototype.unshift = function(t) {
        var e = {
            data: t,
            next: this.head
        };
        0 === this.length && (this.tail = e), this.head = e, ++this.length
    }, r.prototype.shift = function() {
        if (0 !== this.length) {
            var t = this.head.data;
            return 1 === this.length ? this.head = this.tail = null : this.head = this.head.next, --this.length, t
        }
    }, r.prototype.clear = function() {
        this.head = this.tail = null, this.length = 0
    }, r.prototype.join = function(t) {
        if (0 === this.length) return "";
        for (var e = this.head, n = "" + e.data; e = e.next;) n += t + e.data;
        return n
    }, r.prototype.concat = function(t) {
        if (0 === this.length) return i.alloc(0);
        if (1 === this.length) return this.head.data;
        for (var e = i.allocUnsafe(t >>> 0), n = this.head, r = 0; n;) n.data.copy(e, r), r += n.data.length, n = n.next;
        return e
    }
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && !l(t)) throw new Error("Unknown encoding: " + t)
    }

    function i(t) {
        return t.toString(this.encoding)
    }

    function o(t) {
        this.charReceived = t.length % 2, this.charLength = this.charReceived ? 2 : 0
    }

    function s(t) {
        this.charReceived = t.length % 3, this.charLength = this.charReceived ? 3 : 0
    }
    var a = n(12).Buffer,
        l = a.isEncoding || function(t) {
            switch (t && t.toLowerCase()) {
                case "hex":
                case "utf8":
                case "utf-8":
                case "ascii":
                case "binary":
                case "base64":
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                case "raw":
                    return !0;
                default:
                    return !1
            }
        },
        u = e.StringDecoder = function(t) {
            switch (this.encoding = (t || "utf8").toLowerCase().replace(/[-_]/, ""), r(t), this.encoding) {
                case "utf8":
                    this.surrogateSize = 3;
                    break;
                case "ucs2":
                case "utf16le":
                    this.surrogateSize = 2, this.detectIncompleteChar = o;
                    break;
                case "base64":
                    this.surrogateSize = 3, this.detectIncompleteChar = s;
                    break;
                default:
                    return void(this.write = i)
            }
            this.charBuffer = new a(6), this.charReceived = 0, this.charLength = 0
        };
    u.prototype.write = function(t) {
        for (var e = ""; this.charLength;) {
            var n = t.length >= this.charLength - this.charReceived ? this.charLength - this.charReceived : t.length;
            if (t.copy(this.charBuffer, this.charReceived, 0, n), this.charReceived += n, this.charReceived < this.charLength) return "";
            t = t.slice(n, t.length), e = this.charBuffer.slice(0, this.charLength).toString(this.encoding);
            var r = e.charCodeAt(e.length - 1);
            if (!(r >= 55296 && r <= 56319)) {
                if (this.charReceived = this.charLength = 0, 0 === t.length) return e;
                break
            }
            this.charLength += this.surrogateSize, e = ""
        }
        this.detectIncompleteChar(t);
        var i = t.length;
        this.charLength && (t.copy(this.charBuffer, 0, t.length - this.charReceived, i), i -= this.charReceived), e += t.toString(this.encoding, 0, i);
        var i = e.length - 1,
            r = e.charCodeAt(i);
        if (r >= 55296 && r <= 56319) {
            var o = this.surrogateSize;
            return this.charLength += o, this.charReceived += o, this.charBuffer.copy(this.charBuffer, o, 0, o), t.copy(this.charBuffer, 0, 0, o), e.substring(0, i)
        }
        return e
    }, u.prototype.detectIncompleteChar = function(t) {
        for (var e = t.length >= 3 ? 3 : t.length; e > 0; e--) {
            var n = t[t.length - e];
            if (1 == e && n >> 5 == 6) {
                this.charLength = 2;
                break
            }
            if (e <= 2 && n >> 4 == 14) {
                this.charLength = 3;
                break
            }
            if (e <= 3 && n >> 3 == 30) {
                this.charLength = 4;
                break
            }
        }
        this.charReceived = e
    }, u.prototype.end = function(t) {
        var e = "";
        if (t && t.length && (e = this.write(t)), this.charReceived) {
            var n = this.charReceived,
                r = this.charBuffer,
                i = this.encoding;
            e += r.slice(0, n).toString(i)
        }
        return e
    }
}, function(t, e, n) {
    "use strict";
    t.exports = n(42)
}, function(t, e, n) {
    "use strict";
    t.exports = n(49)
}, function(t, e, n) {
    "use strict";

    function r(t) {
        this.afterTransform = function(e, n) {
            return i(t, e, n)
        }, this.needTransform = !1, this.transforming = !1, this.writecb = null, this.writechunk = null, this.writeencoding = null
    }

    function i(t, e, n) {
        var r = t._transformState;
        r.transforming = !1;
        var i = r.writecb;
        if (!i) return t.emit("error", new Error("no writecb in Transform class"));
        r.writechunk = null, r.writecb = null, null !== n && void 0 !== n && t.push(n), i(e);
        var o = t._readableState;
        o.reading = !1, (o.needReadable || o.length < o.highWaterMark) && t._read(o.highWaterMark)
    }

    function o(t) {
        if (!(this instanceof o)) return new o(t);
        a.call(this, t), this._transformState = new r(this);
        var e = this;
        this._readableState.needReadable = !0, this._readableState.sync = !1, t && ("function" == typeof t.transform && (this._transform = t.transform), "function" == typeof t.flush && (this._flush = t.flush)), this.once("prefinish", function() {
            "function" == typeof this._flush ? this._flush(function(t, n) {
                s(e, t, n)
            }) : s(e)
        })
    }

    function s(t, e, n) {
        if (e) return t.emit("error", e);
        null !== n && void 0 !== n && t.push(n);
        var r = t._writableState,
            i = t._transformState;
        if (r.length) throw new Error("Calling transform done when ws.length != 0");
        if (i.transforming) throw new Error("Calling transform done when still transforming");
        return t.push(null)
    }
    t.exports = o;
    var a = n(42),
        l = n(39);
    l.inherits = n(29), l.inherits(o, a), o.prototype.push = function(t, e) {
        return this._transformState.needTransform = !1, a.prototype.push.call(this, t, e)
    }, o.prototype._transform = function(t, e, n) {
        throw new Error("_transform() is not implemented")
    }, o.prototype._write = function(t, e, n) {
        var r = this._transformState;
        if (r.writecb = n, r.writechunk = t, r.writeencoding = e, !r.transforming) {
            var i = this._readableState;
            (r.needTransform || i.needReadable || i.length < i.highWaterMark) && this._read(i.highWaterMark)
        }
    }, o.prototype._read = function(t) {
        var e = this._transformState;
        null !== e.writechunk && e.writecb && !e.transforming ? (e.transforming = !0, this._transform(e.writechunk, e.writeencoding, e.afterTransform)) : e.needTransform = !0
    }
}, function(t, e, n) {
    "use strict";
    t.exports = n(51)
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return this instanceof r ? void i.call(this, t) : new r(t)
    }
    t.exports = r;
    var i = n(49),
        o = n(39);
    o.inherits = n(29), o.inherits(r, i), r.prototype._transform = function(t, e, n) {
        n(null, t)
    }
}, function(t, e, n) {
    "use strict";
    var r = n(12).Buffer;
    t.exports = function(t) {
        if (t instanceof Uint8Array) {
            if (0 === t.byteOffset && t.byteLength === t.buffer.byteLength) return t.buffer;
            if ("function" == typeof t.buffer.slice) return t.buffer.slice(t.byteOffset, t.byteOffset + t.byteLength)
        }
        if (r.isBuffer(t)) {
            for (var e = new Uint8Array(t.length), n = t.length, i = 0; i < n; i++) e[i] = t[i];
            return e.buffer
        }
        throw new Error("Argument must be a Buffer")
    }
}, function(t, e) {
    "use strict";

    function n() {
        for (var t = {}, e = 0; e < arguments.length; e++) {
            var n = arguments[e];
            for (var i in n) r.call(n, i) && (t[i] = n[i])
        }
        return t
    }
    t.exports = n;
    var r = Object.prototype.hasOwnProperty
}, function(t, e) {
    "use strict";
    t.exports = {
        100: "Continue",
        101: "Switching Protocols",
        102: "Processing",
        200: "OK",
        201: "Created",
        202: "Accepted",
        203: "Non-Authoritative Information",
        204: "No Content",
        205: "Reset Content",
        206: "Partial Content",
        207: "Multi-Status",
        208: "Already Reported",
        226: "IM Used",
        300: "Multiple Choices",
        301: "Moved Permanently",
        302: "Found",
        303: "See Other",
        304: "Not Modified",
        305: "Use Proxy",
        307: "Temporary Redirect",
        308: "Permanent Redirect",
        400: "Bad Request",
        401: "Unauthorized",
        402: "Payment Required",
        403: "Forbidden",
        404: "Not Found",
        405: "Method Not Allowed",
        406: "Not Acceptable",
        407: "Proxy Authentication Required",
        408: "Request Timeout",
        409: "Conflict",
        410: "Gone",
        411: "Length Required",
        412: "Precondition Failed",
        413: "Payload Too Large",
        414: "URI Too Long",
        415: "Unsupported Media Type",
        416: "Range Not Satisfiable",
        417: "Expectation Failed",
        418: "I'm a teapot",
        421: "Misdirected Request",
        422: "Unprocessable Entity",
        423: "Locked",
        424: "Failed Dependency",
        425: "Unordered Collection",
        426: "Upgrade Required",
        428: "Precondition Required",
        429: "Too Many Requests",
        431: "Request Header Fields Too Large",
        451: "Unavailable For Legal Reasons",
        500: "Internal Server Error",
        501: "Not Implemented",
        502: "Bad Gateway",
        503: "Service Unavailable",
        504: "Gateway Timeout",
        505: "HTTP Version Not Supported",
        506: "Variant Also Negotiates",
        507: "Insufficient Storage",
        508: "Loop Detected",
        509: "Bandwidth Limit Exceeded",
        510: "Not Extended",
        511: "Network Authentication Required"
    }
}, function(t, e, n) {
    "use strict";
    var r = n(26),
        i = t.exports;
    for (var o in r) r.hasOwnProperty(o) && (i[o] = r[o]);
    i.request = function(t, e) {
        return t || (t = {}), t.scheme = "https", t.protocol = "https:", r.request.call(this, t, e)
    }
}, function(t, e) {}, function(t, e, n) {
    "use strict";

    function r() {
        try {
            Promise === o && (Promise = i)
        } catch (t) {}
        return o
    }
    var i;
    "undefined" != typeof Promise && (i = Promise);
    var o = n(58)();
    o.noConflict = r, t.exports = o
}, function(t, e, n) {
    (function(e) {
        "use strict";
        t.exports = function() {
            function r() {}

            function i(t, e) {
                if (null == t || t.constructor !== o) throw new y("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");
                if ("function" != typeof e) throw new y("expecting a function but got " + p.classString(e))
            }

            function o(t) {
                t !== E && i(this, t), this._bitField = 0, this._fulfillmentHandler0 = void 0, this._rejectionHandler0 = void 0, this._promise0 = void 0, this._receiver0 = void 0, this._resolveFromExecutor(t), this._promiseCreated(), this._fireEvent("promiseCreated", this)
            }

            function s(t) {
                this.promise._resolveCallback(t)
            }

            function a(t) {
                this.promise._rejectCallback(t, !1)
            }

            function l(t) {
                var e = new o(E);
                e._fulfillmentHandler0 = t, e._rejectionHandler0 = t, e._promise0 = t, e._receiver0 = t
            }
            var u, c = function() {
                    return new y("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")
                },
                f = function() {
                    return new o.PromiseInspection(this._target())
                },
                h = function(t) {
                    return o.reject(new y(t))
                },
                d = {},
                p = n(59);
            u = p.isNode ? function() {
                var t = e.domain;
                return void 0 === t && (t = null), t
            } : function() {
                return null
            }, p.notEnumerableProp(o, "_getDomain", u);
            var g = n(60),
                _ = n(61),
                v = new _;
            g.defineProperty(o, "_async", {
                value: v
            });
            var b = n(64),
                y = o.TypeError = b.TypeError;
            o.RangeError = b.RangeError;
            var m = o.CancellationError = b.CancellationError;
            o.TimeoutError = b.TimeoutError, o.OperationalError = b.OperationalError, o.RejectionError = b.OperationalError, o.AggregateError = b.AggregateError;
            var E = function() {},
                S = {},
                O = {},
                T = n(65)(o, E),
                x = n(66)(o, E, T, h, r),
                w = n(67)(o),
                C = w.create,
                I = n(68)(o, w),
                R = (I.CapturedTrace, n(69)(o, T, O)),
                A = n(70)(O),
                P = n(71),
                L = p.errorObj,
                k = p.tryCatch;
            return o.prototype.toString = function() {
                return "[object Promise]"
            }, o.prototype.caught = o.prototype.catch = function(t) {
                var e = arguments.length;
                if (e > 1) {
                    var n, r = new Array(e - 1),
                        i = 0;
                    for (n = 0; n < e - 1; ++n) {
                        var o = arguments[n];
                        if (!p.isObject(o)) return h("Catch statement predicate: expecting an object but got " + p.classString(o));
                        r[i++] = o
                    }
                    return r.length = i, t = arguments[n], this.then(void 0, A(r, t, this))
                }
                return this.then(void 0, t)
            }, o.prototype.reflect = function() {
                return this._then(f, f, void 0, this, void 0)
            }, o.prototype.then = function(t, e) {
                if (I.warnings() && arguments.length > 0 && "function" != typeof t && "function" != typeof e) {
                    var n = ".then() only accepts functions but was passed: " + p.classString(t);
                    arguments.length > 1 && (n += ", " + p.classString(e)), this._warn(n)
                }
                return this._then(t, e, void 0, void 0, void 0)
            }, o.prototype.done = function(t, e) {
                var n = this._then(t, e, void 0, void 0, void 0);
                n._setIsFinal()
            }, o.prototype.spread = function(t) {
                return "function" != typeof t ? h("expecting a function but got " + p.classString(t)) : this.all()._then(t, void 0, void 0, S, void 0)
            }, o.prototype.toJSON = function() {
                var t = {
                    isFulfilled: !1,
                    isRejected: !1,
                    fulfillmentValue: void 0,
                    rejectionReason: void 0
                };
                return this.isFulfilled() ? (t.fulfillmentValue = this.value(), t.isFulfilled = !0) : this.isRejected() && (t.rejectionReason = this.reason(), t.isRejected = !0), t
            }, o.prototype.all = function() {
                return arguments.length > 0 && this._warn(".all() was passed arguments but it does not take any"), new x(this).promise()
            }, o.prototype.error = function(t) {
                return this.caught(p.originatesFromRejection, t)
            }, o.getNewLibraryCopy = t.exports, o.is = function(t) {
                return t instanceof o
            }, o.fromNode = o.fromCallback = function(t) {
                var e = new o(E);
                e._captureStackTrace();
                var n = arguments.length > 1 && !!Object(arguments[1]).multiArgs,
                    r = k(t)(P(e, n));
                return r === L && e._rejectCallback(r.e, !0), e._isFateSealed() || e._setAsyncGuaranteed(), e
            }, o.all = function(t) {
                return new x(t).promise()
            }, o.cast = function(t) {
                var e = T(t);
                return e instanceof o || (e = new o(E), e._captureStackTrace(), e._setFulfilled(), e._rejectionHandler0 = t), e
            }, o.resolve = o.fulfilled = o.cast, o.reject = o.rejected = function(t) {
                var e = new o(E);
                return e._captureStackTrace(), e._rejectCallback(t, !0), e
            }, o.setScheduler = function(t) {
                if ("function" != typeof t) throw new y("expecting a function but got " + p.classString(t));
                return v.setScheduler(t)
            }, o.prototype._then = function(t, e, n, r, i) {
                var s = void 0 !== i,
                    a = s ? i : new o(E),
                    l = this._target(),
                    c = l._bitField;
                s || (a._propagateFrom(this, 3), a._captureStackTrace(), void 0 === r && 0 !== (2097152 & this._bitField) && (r = 0 !== (50397184 & c) ? this._boundValue() : l === this ? void 0 : this._boundTo), this._fireEvent("promiseChained", this, a));
                var f = u();
                if (0 !== (50397184 & c)) {
                    var h, d, g = l._settlePromiseCtx;
                    0 !== (33554432 & c) ? (d = l._rejectionHandler0, h = t) : 0 !== (16777216 & c) ? (d = l._fulfillmentHandler0, h = e, l._unsetRejectionIsUnhandled()) : (g = l._settlePromiseLateCancellationObserver, d = new m("late cancellation observer"), l._attachExtraTrace(d), h = e), v.invoke(g, l, {
                        handler: null === f ? h : "function" == typeof h && p.domainBind(f, h),
                        promise: a,
                        receiver: r,
                        value: d
                    })
                } else l._addCallbacks(t, e, a, r, f);
                return a
            }, o.prototype._length = function() {
                return 65535 & this._bitField
            }, o.prototype._isFateSealed = function() {
                return 0 !== (117506048 & this._bitField)
            }, o.prototype._isFollowing = function() {
                return 67108864 === (67108864 & this._bitField)
            }, o.prototype._setLength = function(t) {
                this._bitField = this._bitField & -65536 | 65535 & t
            }, o.prototype._setFulfilled = function() {
                this._bitField = 33554432 | this._bitField, this._fireEvent("promiseFulfilled", this)
            }, o.prototype._setRejected = function() {
                this._bitField = 16777216 | this._bitField, this._fireEvent("promiseRejected", this)
            }, o.prototype._setFollowing = function() {
                this._bitField = 67108864 | this._bitField, this._fireEvent("promiseResolved", this)
            }, o.prototype._setIsFinal = function() {
                this._bitField = 4194304 | this._bitField
            }, o.prototype._isFinal = function() {
                return (4194304 & this._bitField) > 0
            }, o.prototype._unsetCancelled = function() {
                this._bitField = this._bitField & -65537
            }, o.prototype._setCancelled = function() {
                this._bitField = 65536 | this._bitField, this._fireEvent("promiseCancelled", this)
            }, o.prototype._setWillBeCancelled = function() {
                this._bitField = 8388608 | this._bitField
            }, o.prototype._setAsyncGuaranteed = function() {
                v.hasCustomScheduler() || (this._bitField = 134217728 | this._bitField)
            }, o.prototype._receiverAt = function(t) {
                var e = 0 === t ? this._receiver0 : this[4 * t - 4 + 3];
                if (e !== d) return void 0 === e && this._isBound() ? this._boundValue() : e
            }, o.prototype._promiseAt = function(t) {
                return this[4 * t - 4 + 2]
            }, o.prototype._fulfillmentHandlerAt = function(t) {
                return this[4 * t - 4 + 0]
            }, o.prototype._rejectionHandlerAt = function(t) {
                return this[4 * t - 4 + 1]
            }, o.prototype._boundValue = function() {}, o.prototype._migrateCallback0 = function(t) {
                var e = (t._bitField, t._fulfillmentHandler0),
                    n = t._rejectionHandler0,
                    r = t._promise0,
                    i = t._receiverAt(0);
                void 0 === i && (i = d), this._addCallbacks(e, n, r, i, null)
            }, o.prototype._migrateCallbackAt = function(t, e) {
                var n = t._fulfillmentHandlerAt(e),
                    r = t._rejectionHandlerAt(e),
                    i = t._promiseAt(e),
                    o = t._receiverAt(e);
                void 0 === o && (o = d), this._addCallbacks(n, r, i, o, null)
            }, o.prototype._addCallbacks = function(t, e, n, r, i) {
                var o = this._length();
                if (o >= 65531 && (o = 0, this._setLength(0)), 0 === o) this._promise0 = n, this._receiver0 = r, "function" == typeof t && (this._fulfillmentHandler0 = null === i ? t : p.domainBind(i, t)), "function" == typeof e && (this._rejectionHandler0 = null === i ? e : p.domainBind(i, e));
                else {
                    var s = 4 * o - 4;
                    this[s + 2] = n, this[s + 3] = r, "function" == typeof t && (this[s + 0] = null === i ? t : p.domainBind(i, t)), "function" == typeof e && (this[s + 1] = null === i ? e : p.domainBind(i, e))
                }
                return this._setLength(o + 1), o
            }, o.prototype._proxy = function(t, e) {
                this._addCallbacks(void 0, void 0, e, t, null)
            }, o.prototype._resolveCallback = function(t, e) {
                if (0 === (117506048 & this._bitField)) {
                    if (t === this) return this._rejectCallback(c(), !1);
                    var n = T(t, this);
                    if (!(n instanceof o)) return this._fulfill(t);
                    e && this._propagateFrom(n, 2);
                    var r = n._target();
                    if (r === this) return void this._reject(c());
                    var i = r._bitField;
                    if (0 === (50397184 & i)) {
                        var s = this._length();
                        s > 0 && r._migrateCallback0(this);
                        for (var a = 1; a < s; ++a) r._migrateCallbackAt(this, a);
                        this._setFollowing(), this._setLength(0), this._setFollowee(r)
                    } else if (0 !== (33554432 & i)) this._fulfill(r._value());
                    else if (0 !== (16777216 & i)) this._reject(r._reason());
                    else {
                        var l = new m("late cancellation observer");
                        r._attachExtraTrace(l), this._reject(l)
                    }
                }
            }, o.prototype._rejectCallback = function(t, e, n) {
                var r = p.ensureErrorObject(t),
                    i = r === t;
                if (!i && !n && I.warnings()) {
                    var o = "a promise was rejected with a non-error: " + p.classString(t);
                    this._warn(o, !0)
                }
                this._attachExtraTrace(r, !!e && i), this._reject(t)
            }, o.prototype._resolveFromExecutor = function(t) {
                if (t !== E) {
                    var e = this;
                    this._captureStackTrace(), this._pushContext();
                    var n = !0,
                        r = this._execute(t, function(t) {
                            e._resolveCallback(t)
                        }, function(t) {
                            e._rejectCallback(t, n)
                        });
                    n = !1, this._popContext(), void 0 !== r && e._rejectCallback(r, !0)
                }
            }, o.prototype._settlePromiseFromHandler = function(t, e, n, r) {
                var i = r._bitField;
                if (0 === (65536 & i)) {
                    r._pushContext();
                    var o;
                    e === S ? n && "number" == typeof n.length ? o = k(t).apply(this._boundValue(), n) : (o = L, o.e = new y("cannot .spread() a non-array: " + p.classString(n))) : o = k(t).call(e, n);
                    var s = r._popContext();
                    i = r._bitField, 0 === (65536 & i) && (o === O ? r._reject(n) : o === L ? r._rejectCallback(o.e, !1) : (I.checkForgottenReturns(o, s, "", r, this), r._resolveCallback(o)))
                }
            }, o.prototype._target = function() {
                for (var t = this; t._isFollowing();) t = t._followee();
                return t
            }, o.prototype._followee = function() {
                return this._rejectionHandler0
            }, o.prototype._setFollowee = function(t) {
                this._rejectionHandler0 = t
            }, o.prototype._settlePromise = function(t, e, n, i) {
                var s = t instanceof o,
                    a = this._bitField,
                    l = 0 !== (134217728 & a);
                0 !== (65536 & a) ? (s && t._invokeInternalOnCancel(), n instanceof R && n.isFinallyHandler() ? (n.cancelPromise = t, k(e).call(n, i) === L && t._reject(L.e)) : e === f ? t._fulfill(f.call(n)) : n instanceof r ? n._promiseCancelled(t) : s || t instanceof x ? t._cancel() : n.cancel()) : "function" == typeof e ? s ? (l && t._setAsyncGuaranteed(), this._settlePromiseFromHandler(e, n, i, t)) : e.call(n, i, t) : n instanceof r ? n._isResolved() || (0 !== (33554432 & a) ? n._promiseFulfilled(i, t) : n._promiseRejected(i, t)) : s && (l && t._setAsyncGuaranteed(), 0 !== (33554432 & a) ? t._fulfill(i) : t._reject(i))
            }, o.prototype._settlePromiseLateCancellationObserver = function(t) {
                var e = t.handler,
                    n = t.promise,
                    r = t.receiver,
                    i = t.value;
                "function" == typeof e ? n instanceof o ? this._settlePromiseFromHandler(e, r, i, n) : e.call(r, i, n) : n instanceof o && n._reject(i)
            }, o.prototype._settlePromiseCtx = function(t) {
                this._settlePromise(t.promise, t.handler, t.receiver, t.value)
            }, o.prototype._settlePromise0 = function(t, e, n) {
                var r = this._promise0,
                    i = this._receiverAt(0);
                this._promise0 = void 0, this._receiver0 = void 0, this._settlePromise(r, t, i, e)
            }, o.prototype._clearCallbackDataAtIndex = function(t) {
                var e = 4 * t - 4;
                this[e + 2] = this[e + 3] = this[e + 0] = this[e + 1] = void 0
            }, o.prototype._fulfill = function(t) {
                var e = this._bitField;
                if (!((117506048 & e) >>> 16)) {
                    if (t === this) {
                        var n = c();
                        return this._attachExtraTrace(n), this._reject(n)
                    }
                    this._setFulfilled(), this._rejectionHandler0 = t, (65535 & e) > 0 && (0 !== (134217728 & e) ? this._settlePromises() : v.settlePromises(this))
                }
            }, o.prototype._reject = function(t) {
                var e = this._bitField;
                if (!((117506048 & e) >>> 16)) return this._setRejected(), this._fulfillmentHandler0 = t, this._isFinal() ? v.fatalError(t, p.isNode) : void((65535 & e) > 0 ? v.settlePromises(this) : this._ensurePossibleRejectionHandled())
            }, o.prototype._fulfillPromises = function(t, e) {
                for (var n = 1; n < t; n++) {
                    var r = this._fulfillmentHandlerAt(n),
                        i = this._promiseAt(n),
                        o = this._receiverAt(n);
                    this._clearCallbackDataAtIndex(n), this._settlePromise(i, r, o, e)
                }
            }, o.prototype._rejectPromises = function(t, e) {
                for (var n = 1; n < t; n++) {
                    var r = this._rejectionHandlerAt(n),
                        i = this._promiseAt(n),
                        o = this._receiverAt(n);
                    this._clearCallbackDataAtIndex(n), this._settlePromise(i, r, o, e)
                }
            }, o.prototype._settlePromises = function() {
                var t = this._bitField,
                    e = 65535 & t;
                if (e > 0) {
                    if (0 !== (16842752 & t)) {
                        var n = this._fulfillmentHandler0;
                        this._settlePromise0(this._rejectionHandler0, n, t), this._rejectPromises(e, n)
                    } else {
                        var r = this._rejectionHandler0;
                        this._settlePromise0(this._fulfillmentHandler0, r, t), this._fulfillPromises(e, r)
                    }
                    this._setLength(0)
                }
                this._clearCancellationData()
            }, o.prototype._settledValue = function() {
                var t = this._bitField;
                return 0 !== (33554432 & t) ? this._rejectionHandler0 : 0 !== (16777216 & t) ? this._fulfillmentHandler0 : void 0
            }, o.defer = o.pending = function() {
                I.deprecated("Promise.defer", "new Promise");
                var t = new o(E);
                return {
                    promise: t,
                    resolve: s,
                    reject: a
                }
            }, p.notEnumerableProp(o, "_makeSelfResolutionError", c), n(72)(o, E, T, h, I), n(73)(o, E, T, I), n(74)(o, x, h, I), n(75)(o), n(76)(o), n(77)(o, x, T, E, v, u), o.Promise = o, o.version = "3.5.0", n(78)(o, x, h, T, E, I), n(79)(o), n(80)(o, h, T, C, E, I), n(81)(o, E, I), n(82)(o, h, E, T, r, I), n(83)(o), n(84)(o, E), n(85)(o, x, T, h), n(86)(o, E, T, h), n(87)(o, x, h, T, E, I), n(88)(o, x, I), n(89)(o, x, h), n(90)(o, E), n(91)(o, E), n(92)(o), p.toFastProperties(o), p.toFastProperties(o.prototype), l({
                a: 1
            }), l({
                b: 2
            }), l({
                c: 3
            }), l(1), l(function() {}), l(void 0), l(!1), l(new o(E)), I.setBounds(_.firstLineError, p.lastLineError), o
        }
    }).call(e, n(16))
}, function(t, e, n) {
    (function(e, r) {
        "use strict";

        function i() {
            try {
                var t = P;
                return P = null, t.apply(this, arguments)
            } catch (t) {
                return A.e = t, A
            }
        }

        function o(t) {
            return P = t, i
        }

        function s(t) {
            return null == t || t === !0 || t === !1 || "string" == typeof t || "number" == typeof t
        }

        function a(t) {
            return "function" == typeof t || "object" === ("undefined" == typeof t ? "undefined" : C(t)) && null !== t
        }

        function l(t) {
            return s(t) ? new Error(v(t)) : t
        }

        function u(t, e) {
            var n, r = t.length,
                i = new Array(r + 1);
            for (n = 0; n < r; ++n) i[n] = t[n];
            return i[n] = e, i
        }

        function c(t, e, n) {
            if (!I.isES5) return {}.hasOwnProperty.call(t, e) ? t[e] : void 0;
            var r = Object.getOwnPropertyDescriptor(t, e);
            return null != r ? null == r.get && null == r.set ? r.value : n : void 0
        }

        function f(t, e, n) {
            if (s(t)) return t;
            var r = {
                value: n,
                configurable: !0,
                enumerable: !1,
                writable: !0
            };
            return I.defineProperty(t, e, r), t
        }

        function h(t) {
            throw t
        }

        function d(t) {
            try {
                if ("function" == typeof t) {
                    var e = I.names(t.prototype),
                        n = I.isES5 && e.length > 1,
                        r = e.length > 0 && !(1 === e.length && "constructor" === e[0]),
                        i = j.test(t + "") && I.names(t).length > 0;
                    if (n || r || i) return !0
                }
                return !1
            } catch (t) {
                return !1
            }
        }

        function p(t) {
            function e() {}
            e.prototype = t;
            for (var n = 8; n--;) new e;
            return t
        }

        function g(t) {
            return M.test(t)
        }

        function _(t, e, n) {
            for (var r = new Array(t), i = 0; i < t; ++i) r[i] = e + i + n;
            return r
        }

        function v(t) {
            try {
                return t + ""
            } catch (t) {
                return "[no string representation]"
            }
        }

        function b(t) {
            return null !== t && "object" === ("undefined" == typeof t ? "undefined" : C(t)) && "string" == typeof t.message && "string" == typeof t.name
        }

        function y(t) {
            try {
                f(t, "isOperational", !0)
            } catch (t) {}
        }

        function m(t) {
            return null != t && (t instanceof Error.__BluebirdErrorTypes__.OperationalError || t.isOperational === !0)
        }

        function E(t) {
            return b(t) && I.propertyIsWritable(t, "stack")
        }

        function S(t) {
            return {}.toString.call(t)
        }

        function O(t, e, n) {
            for (var r = I.names(t), i = 0; i < r.length; ++i) {
                var o = r[i];
                if (n(o)) try {
                    I.defineProperty(e, o, I.getDescriptor(t, o))
                } catch (t) {}
            }
        }

        function T(t) {
            return U ? {
                NODE_ENV: "production",
                API_URL: CONFIG_SERVER_PATH
            }[t] : void 0
        }

        function x() {
            if ("function" == typeof Promise) try {
                var t = new Promise(function() {});
                if ("[object Promise]" === {}.toString.call(t)) return Promise
            } catch (t) {}
        }

        function w(t, e) {
            return t.bind(e)
        }
        var C = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                return typeof t
            } : function(t) {
                return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
            },
            I = n(60),
            R = "undefined" == typeof navigator,
            A = {
                e: {}
            },
            P, L = "undefined" != typeof self ? self : "undefined" != typeof window ? window : "undefined" != typeof e ? e : null,
            k = function(t, e) {
                function n() {
                    this.constructor = t, this.constructor$ = e;
                    for (var n in e.prototype) r.call(e.prototype, n) && "$" !== n.charAt(n.length - 1) && (this[n + "$"] = e.prototype[n])
                }
                var r = {}.hasOwnProperty;
                return n.prototype = e.prototype, t.prototype = new n, t.prototype
            },
            D = function() {
                var t = [Array.prototype, Object.prototype, Function.prototype],
                    e = function(e) {
                        for (var n = 0; n < t.length; ++n)
                            if (t[n] === e) return !0;
                        return !1
                    };
                if (I.isES5) {
                    var n = Object.getOwnPropertyNames;
                    return function(t) {
                        for (var r = [], i = Object.create(null); null != t && !e(t);) {
                            var o;
                            try {
                                o = n(t)
                            } catch (t) {
                                return r
                            }
                            for (var s = 0; s < o.length; ++s) {
                                var a = o[s];
                                if (!i[a]) {
                                    i[a] = !0;
                                    var l = Object.getOwnPropertyDescriptor(t, a);
                                    null != l && null == l.get && null == l.set && r.push(a)
                                }
                            }
                            t = I.getPrototypeOf(t)
                        }
                        return r
                    }
                }
                var r = {}.hasOwnProperty;
                return function(n) {
                    if (e(n)) return [];
                    var i = [];
                    t: for (var o in n)
                        if (r.call(n, o)) i.push(o);
                        else {
                            for (var s = 0; s < t.length; ++s)
                                if (r.call(t[s], o)) continue t;
                            i.push(o)
                        }
                    return i
                }
            }(),
            j = /this\s*\.\s*\S+\s*=/,
            M = /^[a-z$_][a-z$_0-9]*$/i,
            N = function() {
                return "stack" in new Error ? function(t) {
                    return E(t) ? t : new Error(v(t))
                } : function(t) {
                    if (E(t)) return t;
                    try {
                        throw new Error(v(t))
                    } catch (t) {
                        return t
                    }
                }
            }(),
            B = function(t) {
                return I.isArray(t) ? t : null
            };
        if ("undefined" != typeof Symbol && Symbol.iterator) {
            var H = "function" == typeof Array.from ? function(t) {
                return Array.from(t)
            } : function(t) {
                for (var e, n = [], r = t[Symbol.iterator](); !(e = r.next()).done;) n.push(e.value);
                return n
            };
            B = function(t) {
                return I.isArray(t) ? t : null != t && "function" == typeof t[Symbol.iterator] ? H(t) : null
            }
        }
        var F = "undefined" != typeof r && "[object process]" === S(r).toLowerCase(),
            U = "undefined" != typeof r && !0,
            G = {
                isClass: d,
                isIdentifier: g,
                inheritedDataKeys: D,
                getDataPropertyOrDefault: c,
                thrower: h,
                isArray: I.isArray,
                asArray: B,
                notEnumerableProp: f,
                isPrimitive: s,
                isObject: a,
                isError: b,
                canEvaluate: R,
                errorObj: A,
                tryCatch: o,
                inherits: k,
                withAppended: u,
                maybeWrapAsError: l,
                toFastProperties: p,
                filledRange: _,
                toString: v,
                canAttachTrace: E,
                ensureErrorObject: N,
                originatesFromRejection: m,
                markAsOriginatingFromRejection: y,
                classString: S,
                copyDescriptors: O,
                hasDevTools: "undefined" != typeof chrome && chrome && "function" == typeof chrome.loadTimes,
                isNode: F,
                hasEnvVariables: U,
                env: T,
                global: L,
                getNativePromise: x,
                domainBind: w
            };
        G.isRecentNode = G.isNode && function() {
            var t = r.versions.node.split(".").map(Number);
            return 0 === t[0] && t[1] > 10 || t[0] > 0
        }(), G.isNode && G.toFastProperties(r);
        try {
            throw new Error
        } catch (t) {
            G.lastLineError = t
        }
        t.exports = G
    }).call(e, function() {
        return this
    }(), n(16))
}, function(t, e) {
    "use strict";
    var n = function() {
        return void 0 === this
    }();
    if (n) t.exports = {
        freeze: Object.freeze,
        defineProperty: Object.defineProperty,
        getDescriptor: Object.getOwnPropertyDescriptor,
        keys: Object.keys,
        names: Object.getOwnPropertyNames,
        getPrototypeOf: Object.getPrototypeOf,
        isArray: Array.isArray,
        isES5: n,
        propertyIsWritable: function(t, e) {
            var n = Object.getOwnPropertyDescriptor(t, e);
            return !(n && !n.writable && !n.set)
        }
    };
    else {
        var r = {}.hasOwnProperty,
            i = {}.toString,
            o = {}.constructor.prototype,
            s = function(t) {
                var e = [];
                for (var n in t) r.call(t, n) && e.push(n);
                return e
            },
            a = function(t, e) {
                return {
                    value: t[e]
                }
            },
            l = function(t, e, n) {
                return t[e] = n.value, t
            },
            u = function(t) {
                return t
            },
            c = function(t) {
                try {
                    return Object(t).constructor.prototype
                } catch (t) {
                    return o
                }
            },
            f = function(t) {
                try {
                    return "[object Array]" === i.call(t)
                } catch (t) {
                    return !1
                }
            };
        t.exports = {
            isArray: f,
            keys: s,
            names: s,
            defineProperty: l,
            getDescriptor: a,
            freeze: u,
            getPrototypeOf: c,
            isES5: n,
            propertyIsWritable: function() {
                return !0
            }
        }
    }
}, function(t, e, n) {
    (function(e) {
        "use strict";

        function r() {
            this._customScheduler = !1, this._isTickUsed = !1, this._lateQueue = new u(16), this._normalQueue = new u(16), this._haveDrainedQueues = !1, this._trampolineEnabled = !0;
            var t = this;
            this.drainQueues = function() {
                t._drainQueues()
            }, this._schedule = l
        }

        function i(t, e, n) {
            this._lateQueue.push(t, e, n), this._queueTick()
        }

        function o(t, e, n) {
            this._normalQueue.push(t, e, n), this._queueTick()
        }

        function s(t) {
            this._normalQueue._pushOne(t), this._queueTick()
        }
        var a;
        try {
            throw new Error
        } catch (t) {
            a = t
        }
        var l = n(62),
            u = n(63),
            c = n(59);
        r.prototype.setScheduler = function(t) {
            var e = this._schedule;
            return this._schedule = t, this._customScheduler = !0, e
        }, r.prototype.hasCustomScheduler = function() {
            return this._customScheduler
        }, r.prototype.enableTrampoline = function() {
            this._trampolineEnabled = !0
        }, r.prototype.disableTrampolineIfNecessary = function() {
            c.hasDevTools && (this._trampolineEnabled = !1)
        }, r.prototype.haveItemsQueued = function() {
            return this._isTickUsed || this._haveDrainedQueues
        }, r.prototype.fatalError = function(t, n) {
            n ? (e.stderr.write("Fatal " + (t instanceof Error ? t.stack : t) + "\n"), e.exit(2)) : this.throwLater(t)
        }, r.prototype.throwLater = function(t, e) {
            if (1 === arguments.length && (e = t, t = function() {
                    throw e
                }), "undefined" != typeof setTimeout) setTimeout(function() {
                t(e)
            }, 0);
            else try {
                this._schedule(function() {
                    t(e)
                })
            } catch (t) {
                throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")
            }
        }, c.hasDevTools ? (r.prototype.invokeLater = function(t, e, n) {
            this._trampolineEnabled ? i.call(this, t, e, n) : this._schedule(function() {
                setTimeout(function() {
                    t.call(e, n)
                }, 100)
            })
        }, r.prototype.invoke = function(t, e, n) {
            this._trampolineEnabled ? o.call(this, t, e, n) : this._schedule(function() {
                t.call(e, n)
            })
        }, r.prototype.settlePromises = function(t) {
            this._trampolineEnabled ? s.call(this, t) : this._schedule(function() {
                t._settlePromises()
            })
        }) : (r.prototype.invokeLater = i, r.prototype.invoke = o, r.prototype.settlePromises = s), r.prototype._drainQueue = function(t) {
            for (; t.length() > 0;) {
                var e = t.shift();
                if ("function" == typeof e) {
                    var n = t.shift(),
                        r = t.shift();
                    e.call(n, r)
                } else e._settlePromises()
            }
        }, r.prototype._drainQueues = function() {
            this._drainQueue(this._normalQueue), this._reset(), this._haveDrainedQueues = !0, this._drainQueue(this._lateQueue)
        }, r.prototype._queueTick = function() {
            this._isTickUsed || (this._isTickUsed = !0, this._schedule(this.drainQueues))
        }, r.prototype._reset = function() {
            this._isTickUsed = !1
        }, t.exports = r, t.exports.firstLineError = a
    }).call(e, n(16))
}, function(t, e, n) {
    (function(e, r, i) {
        "use strict";
        var o, s = n(59),
            a = function() {
                throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")
            },
            l = s.getNativePromise();
        if (s.isNode && "undefined" == typeof MutationObserver) {
            var u = e.setImmediate,
                c = r.nextTick;
            o = s.isRecentNode ? function(t) {
                u.call(e, t)
            } : function(t) {
                c.call(r, t)
            }
        } else if ("function" == typeof l && "function" == typeof l.resolve) {
            var f = l.resolve();
            o = function(t) {
                f.then(t)
            }
        } else o = "undefined" == typeof MutationObserver || "undefined" != typeof window && window.navigator && (window.navigator.standalone || window.cordova) ? "undefined" != typeof i ? function(t) {
            i(t)
        } : "undefined" != typeof setTimeout ? function(t) {
            setTimeout(t, 0)
        } : a : function() {
            var t = document.createElement("div"),
                e = {
                    attributes: !0
                },
                n = !1,
                r = document.createElement("div"),
                i = new MutationObserver(function() {
                    t.classList.toggle("foo"), n = !1
                });
            i.observe(r, e);
            var o = function() {
                n || (n = !0, r.classList.toggle("foo"))
            };
            return function(n) {
                var r = new MutationObserver(function() {
                    r.disconnect(), n()
                });
                r.observe(t, e), o()
            }
        }();
        t.exports = o
    }).call(e, function() {
        return this
    }(), n(16), n(36).setImmediate)
}, function(t, e) {
    "use strict";

    function n(t, e, n, r, i) {
        for (var o = 0; o < i; ++o) n[o + r] = t[o + e], t[o + e] = void 0
    }

    function r(t) {
        this._capacity = t, this._length = 0, this._front = 0
    }
    r.prototype._willBeOverCapacity = function(t) {
        return this._capacity < t
    }, r.prototype._pushOne = function(t) {
        var e = this.length();
        this._checkCapacity(e + 1);
        var n = this._front + e & this._capacity - 1;
        this[n] = t, this._length = e + 1
    }, r.prototype.push = function(t, e, n) {
        var r = this.length() + 3;
        if (this._willBeOverCapacity(r)) return this._pushOne(t), this._pushOne(e), void this._pushOne(n);
        var i = this._front + r - 3;
        this._checkCapacity(r);
        var o = this._capacity - 1;
        this[i + 0 & o] = t, this[i + 1 & o] = e, this[i + 2 & o] = n, this._length = r
    }, r.prototype.shift = function() {
        var t = this._front,
            e = this[t];
        return this[t] = void 0, this._front = t + 1 & this._capacity - 1, this._length--, e
    }, r.prototype.length = function() {
        return this._length
    }, r.prototype._checkCapacity = function(t) {
        this._capacity < t && this._resizeTo(this._capacity << 1)
    }, r.prototype._resizeTo = function(t) {
        var e = this._capacity;
        this._capacity = t;
        var r = this._front,
            i = this._length,
            o = r + i & e - 1;
        n(this, 0, this, e, o)
    }, t.exports = r
}, function(t, e, n) {
    "use strict";

    function r(t, e) {
        function n(r) {
            return this instanceof n ? (f(this, "message", "string" == typeof r ? r : e), f(this, "name", t), void(Error.captureStackTrace ? Error.captureStackTrace(this, this.constructor) : Error.call(this))) : new n(r)
        }
        return c(n, Error), n
    }

    function i(t) {
        return this instanceof i ? (f(this, "name", "OperationalError"), f(this, "message", t), this.cause = t, this.isOperational = !0, void(t instanceof Error ? (f(this, "message", t.message), f(this, "stack", t.stack)) : Error.captureStackTrace && Error.captureStackTrace(this, this.constructor))) : new i(t)
    }
    var o, s, a = n(60),
        l = a.freeze,
        u = n(59),
        c = u.inherits,
        f = u.notEnumerableProp,
        h = r("Warning", "warning"),
        d = r("CancellationError", "cancellation error"),
        p = r("TimeoutError", "timeout error"),
        g = r("AggregateError", "aggregate error");
    try {
        o = TypeError, s = RangeError
    } catch (t) {
        o = r("TypeError", "type error"), s = r("RangeError", "range error")
    }
    for (var _ = "join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "), v = 0; v < _.length; ++v) "function" == typeof Array.prototype[_[v]] && (g.prototype[_[v]] = Array.prototype[_[v]]);
    a.defineProperty(g.prototype, "length", {
        value: 0,
        configurable: !1,
        writable: !0,
        enumerable: !0
    }), g.prototype.isOperational = !0;
    var b = 0;
    g.prototype.toString = function() {
        var t = Array(4 * b + 1).join(" "),
            e = "\n" + t + "AggregateError of:\n";
        b++, t = Array(4 * b + 1).join(" ");
        for (var n = 0; n < this.length; ++n) {
            for (var r = this[n] === this ? "[Circular AggregateError]" : this[n] + "", i = r.split("\n"), o = 0; o < i.length; ++o) i[o] = t + i[o];
            r = i.join("\n"), e += r + "\n"
        }
        return b--, e
    }, c(i, Error);
    var y = Error.__BluebirdErrorTypes__;
    y || (y = l({
        CancellationError: d,
        TimeoutError: p,
        OperationalError: i,
        RejectionError: i,
        AggregateError: g
    }), a.defineProperty(Error, "__BluebirdErrorTypes__", {
        value: y,
        writable: !1,
        enumerable: !1,
        configurable: !1
    })), t.exports = {
        Error: Error,
        TypeError: o,
        RangeError: s,
        CancellationError: y.CancellationError,
        OperationalError: y.OperationalError,
        TimeoutError: y.TimeoutError,
        AggregateError: y.AggregateError,
        Warning: h
    }
}, function(t, e, n) {
    "use strict";
    t.exports = function(t, e) {
        function r(n, r) {
            if (c(n)) {
                if (n instanceof t) return n;
                var i = o(n);
                if (i === u) {
                    r && r._pushContext();
                    var l = t.reject(i.e);
                    return r && r._popContext(), l
                }
                if ("function" == typeof i) {
                    if (s(n)) {
                        var l = new t(e);
                        return n._then(l._fulfill, l._reject, void 0, l, null), l
                    }
                    return a(n, i, r)
                }
            }
            return n
        }

        function i(t) {
            return t.then
        }

        function o(t) {
            try {
                return i(t)
            } catch (t) {
                return u.e = t, u
            }
        }

        function s(t) {
            try {
                return f.call(t, "_promise0")
            } catch (t) {
                return !1
            }
        }

        function a(n, r, i) {
            function o(t) {
                a && (a._resolveCallback(t), a = null)
            }

            function s(t) {
                a && (a._rejectCallback(t, f, !0), a = null)
            }
            var a = new t(e),
                c = a;
            i && i._pushContext(), a._captureStackTrace(), i && i._popContext();
            var f = !0,
                h = l.tryCatch(r).call(n, o, s);
            return f = !1, a && h === u && (a._rejectCallback(h.e, !0, !0), a = null), c
        }
        var l = n(59),
            u = l.errorObj,
            c = l.isObject,
            f = {}.hasOwnProperty;
        return r
    }
}, function(t, e, n) {
    "use strict";
    t.exports = function(t, e, r, i, o) {
        function s(t) {
            switch (t) {
                case -2:
                    return [];
                case -3:
                    return {};
                case -6:
                    return new Map
            }
        }

        function a(n) {
            var r = this._promise = new t(e);
            n instanceof t && r._propagateFrom(n, 3), r._setOnCancel(this), this._values = n, this._length = 0, this._totalResolved = 0, this._init(void 0, -2)
        }
        var l = n(59);
        l.isArray;
        return l.inherits(a, o), a.prototype.length = function() {
            return this._length
        }, a.prototype.promise = function() {
            return this._promise
        }, a.prototype._init = function e(n, o) {
            var a = r(this._values, this._promise);
            if (a instanceof t) {
                a = a._target();
                var u = a._bitField;
                if (this._values = a, 0 === (50397184 & u)) return this._promise._setAsyncGuaranteed(), a._then(e, this._reject, void 0, this, o);
                if (0 === (33554432 & u)) return 0 !== (16777216 & u) ? this._reject(a._reason()) : this._cancel();
                a = a._value()
            }
            if (a = l.asArray(a), null === a) {
                var c = i("expecting an array or an iterable object but got " + l.classString(a)).reason();
                return void this._promise._rejectCallback(c, !1)
            }
            return 0 === a.length ? void(o === -5 ? this._resolveEmptyArray() : this._resolve(s(o))) : void this._iterate(a)
        }, a.prototype._iterate = function(e) {
            var n = this.getActualLength(e.length);
            this._length = n, this._values = this.shouldCopyValues() ? new Array(n) : this._values;
            for (var i = this._promise, o = !1, s = null, a = 0; a < n; ++a) {
                var l = r(e[a], i);
                l instanceof t ? (l = l._target(), s = l._bitField) : s = null, o ? null !== s && l.suppressUnhandledRejections() : null !== s ? 0 === (50397184 & s) ? (l._proxy(this, a), this._values[a] = l) : o = 0 !== (33554432 & s) ? this._promiseFulfilled(l._value(), a) : 0 !== (16777216 & s) ? this._promiseRejected(l._reason(), a) : this._promiseCancelled(a) : o = this._promiseFulfilled(l, a)
            }
            o || i._setAsyncGuaranteed()
        }, a.prototype._isResolved = function() {
            return null === this._values
        }, a.prototype._resolve = function(t) {
            this._values = null, this._promise._fulfill(t)
        }, a.prototype._cancel = function() {
            !this._isResolved() && this._promise._isCancellable() && (this._values = null, this._promise._cancel())
        }, a.prototype._reject = function(t) {
            this._values = null, this._promise._rejectCallback(t, !1)
        }, a.prototype._promiseFulfilled = function(t, e) {
            this._values[e] = t;
            var n = ++this._totalResolved;
            return n >= this._length && (this._resolve(this._values), !0)
        }, a.prototype._promiseCancelled = function() {
            return this._cancel(), !0
        }, a.prototype._promiseRejected = function(t) {
            return this._totalResolved++, this._reject(t), !0
        }, a.prototype._resultCancelled = function() {
            if (!this._isResolved()) {
                var e = this._values;
                if (this._cancel(), e instanceof t) e.cancel();
                else
                    for (var n = 0; n < e.length; ++n) e[n] instanceof t && e[n].cancel()
            }
        }, a.prototype.shouldCopyValues = function() {
            return !0
        }, a.prototype.getActualLength = function(t) {
            return t
        }, a
    }
}, function(t, e) {
    "use strict";
    t.exports = function(t) {
        function e() {
            this._trace = new e.CapturedTrace(r());
        }

        function n() {
            if (i) return new e
        }

        function r() {
            var t = o.length - 1;
            if (t >= 0) return o[t]
        }
        var i = !1,
            o = [];
        return t.prototype._promiseCreated = function() {}, t.prototype._pushContext = function() {}, t.prototype._popContext = function() {
            return null
        }, t._peekContext = t.prototype._peekContext = function() {}, e.prototype._pushContext = function() {
            void 0 !== this._trace && (this._trace._promiseCreated = null, o.push(this._trace))
        }, e.prototype._popContext = function() {
            if (void 0 !== this._trace) {
                var t = o.pop(),
                    e = t._promiseCreated;
                return t._promiseCreated = null, e
            }
            return null
        }, e.CapturedTrace = null, e.create = n, e.deactivateLongStackTraces = function() {}, e.activateLongStackTraces = function() {
            var n = t.prototype._pushContext,
                o = t.prototype._popContext,
                s = t._peekContext,
                a = t.prototype._peekContext,
                l = t.prototype._promiseCreated;
            e.deactivateLongStackTraces = function() {
                t.prototype._pushContext = n, t.prototype._popContext = o, t._peekContext = s, t.prototype._peekContext = a, t.prototype._promiseCreated = l, i = !1
            }, i = !0, t.prototype._pushContext = e.prototype._pushContext, t.prototype._popContext = e.prototype._popContext, t._peekContext = t.prototype._peekContext = r, t.prototype._promiseCreated = function() {
                var t = this._peekContext();
                t && null == t._promiseCreated && (t._promiseCreated = this)
            }
        }, e
    }
}, function(t, e, n) {
    (function(e) {
        "use strict";
        var r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        };
        t.exports = function(t, i) {
            function o(t, e) {
                return {
                    promise: e
                }
            }

            function s() {
                return !1
            }

            function a(t, e, n) {
                var r = this;
                try {
                    t(e, n, function(t) {
                        if ("function" != typeof t) throw new TypeError("onCancel must be a function, got: " + F.toString(t));
                        r._attachCancellationCallback(t)
                    })
                } catch (t) {
                    return t
                }
            }

            function l(t) {
                if (!this._isCancellable()) return this;
                var e = this._onCancel();
                void 0 !== e ? F.isArray(e) ? e.push(t) : this._setOnCancel([e, t]) : this._setOnCancel(t)
            }

            function u() {
                return this._onCancelField
            }

            function c(t) {
                this._onCancelField = t
            }

            function f() {
                this._cancellationParent = void 0, this._onCancelField = void 0
            }

            function h(t, e) {
                if (0 !== (1 & e)) {
                    this._cancellationParent = t;
                    var n = t._branchesRemainingToCancel;
                    void 0 === n && (n = 0), t._branchesRemainingToCancel = n + 1
                }
                0 !== (2 & e) && t._isBound() && this._setBoundTo(t._boundTo)
            }

            function d(t, e) {
                0 !== (2 & e) && t._isBound() && this._setBoundTo(t._boundTo)
            }

            function p() {
                var e = this._boundTo;
                return void 0 !== e && e instanceof t ? e.isFulfilled() ? e.value() : void 0 : e
            }

            function g() {
                this._trace = new k(this._peekContext())
            }

            function _(t, e) {
                if (U(t)) {
                    var n = this._trace;
                    if (void 0 !== n && e && (n = n._parent), void 0 !== n) n.attachExtraTrace(t);
                    else if (!t.__stackCleaned__) {
                        var r = x(t);
                        F.notEnumerableProp(t, "stack", r.message + "\n" + r.stack.join("\n")), F.notEnumerableProp(t, "__stackCleaned__", !0)
                    }
                }
            }

            function v(t, e, n, r, i) {
                if (void 0 === t && null !== e && Z) {
                    if (void 0 !== i && i._returnedNonUndefined()) return;
                    if (0 === (65535 & r._bitField)) return;
                    n && (n += " ");
                    var o = "",
                        s = "";
                    if (e._trace) {
                        for (var a = e._trace.stack.split("\n"), l = O(a), u = l.length - 1; u >= 0; --u) {
                            var c = l[u];
                            if (!W.test(c)) {
                                var f = c.match(Y);
                                f && (o = "at " + f[1] + ":" + f[2] + ":" + f[3] + " ");
                                break
                            }
                        }
                        if (l.length > 0)
                            for (var h = l[0], u = 0; u < a.length; ++u)
                                if (a[u] === h) {
                                    u > 0 && (s = "\n" + a[u - 1]);
                                    break
                                }
                    }
                    var d = "a promise was created in a " + n + "handler " + o + "but was not returned from it, see http://goo.gl/rRqMUw" + s;
                    r._warn(d, !0, e)
                }
            }

            function b(t, e) {
                var n = t + " is deprecated and will be removed in a future version.";
                return e && (n += " Use " + e + " instead."), y(n)
            }

            function y(e, n, r) {
                if (at.warnings) {
                    var i, o = new H(e);
                    if (n) r._attachExtraTrace(o);
                    else if (at.longStackTraces && (i = t._peekContext())) i.attachExtraTrace(o);
                    else {
                        var s = x(o);
                        o.stack = s.message + "\n" + s.stack.join("\n")
                    }
                    nt("warning", o) || w(o, "", !0)
                }
            }

            function m(t, e) {
                for (var n = 0; n < e.length - 1; ++n) e[n].push("From previous event:"), e[n] = e[n].join("\n");
                return n < e.length && (e[n] = e[n].join("\n")), t + "\n" + e.join("\n")
            }

            function E(t) {
                for (var e = 0; e < t.length; ++e)(0 === t[e].length || e + 1 < t.length && t[e][0] === t[e + 1][0]) && (t.splice(e, 1), e--)
            }

            function S(t) {
                for (var e = t[0], n = 1; n < t.length; ++n) {
                    for (var r = t[n], i = e.length - 1, o = e[i], s = -1, a = r.length - 1; a >= 0; --a)
                        if (r[a] === o) {
                            s = a;
                            break
                        }
                    for (var a = s; a >= 0; --a) {
                        var l = r[a];
                        if (e[i] !== l) break;
                        e.pop(), i--
                    }
                    e = r
                }
            }

            function O(t) {
                for (var e = [], n = 0; n < t.length; ++n) {
                    var r = t[n],
                        i = "    (No stack trace)" === r || V.test(r),
                        o = i && it(r);
                    i && !o && (z && " " !== r.charAt(0) && (r = "    " + r), e.push(r))
                }
                return e
            }

            function T(t) {
                for (var e = t.stack.replace(/\s+$/g, "").split("\n"), n = 0; n < e.length; ++n) {
                    var r = e[n];
                    if ("    (No stack trace)" === r || V.test(r)) break
                }
                return n > 0 && "SyntaxError" != t.name && (e = e.slice(n)), e
            }

            function x(t) {
                var e = t.stack,
                    n = t.toString();
                return e = "string" == typeof e && e.length > 0 ? T(t) : ["    (No stack trace)"], {
                    message: n,
                    stack: "SyntaxError" == t.name ? e : O(e)
                }
            }

            function w(t, e, n) {
                if ("undefined" != typeof console) {
                    var i;
                    if (F.isObject(t)) {
                        var o = t.stack;
                        i = e + X(o, t)
                    } else i = e + String(t);
                    "function" == typeof M ? M(i, n) : "function" != typeof console.log && "object" !== r(console.log) || console.log(i)
                }
            }

            function C(t, e, n, r) {
                var i = !1;
                try {
                    "function" == typeof e && (i = !0, "rejectionHandled" === t ? e(r) : e(n, r))
                } catch (t) {
                    B.throwLater(t)
                }
                "unhandledRejection" === t ? nt(t, n, r) || i || w(n, "Unhandled rejection ") : nt(t, r)
            }

            function I(t) {
                var e;
                if ("function" == typeof t) e = "[function " + (t.name || "anonymous") + "]";
                else {
                    e = t && "function" == typeof t.toString ? t.toString() : F.toString(t);
                    var n = /\[object [a-zA-Z0-9$_]+\]/;
                    if (n.test(e)) try {
                        var r = JSON.stringify(t);
                        e = r
                    } catch (t) {}
                    0 === e.length && (e = "(empty array)")
                }
                return "(<" + R(e) + ">, no stack trace)"
            }

            function R(t) {
                var e = 41;
                return t.length < e ? t : t.substr(0, e - 3) + "..."
            }

            function A() {
                return "function" == typeof st
            }

            function P(t) {
                var e = t.match(ot);
                if (e) return {
                    fileName: e[1],
                    line: parseInt(e[2], 10)
                }
            }

            function L(t, e) {
                if (A()) {
                    for (var n, r, i = t.stack.split("\n"), o = e.stack.split("\n"), s = -1, a = -1, l = 0; l < i.length; ++l) {
                        var u = P(i[l]);
                        if (u) {
                            n = u.fileName, s = u.line;
                            break
                        }
                    }
                    for (var l = 0; l < o.length; ++l) {
                        var u = P(o[l]);
                        if (u) {
                            r = u.fileName, a = u.line;
                            break
                        }
                    }
                    s < 0 || a < 0 || !n || !r || n !== r || s >= a || (it = function(t) {
                        if (G.test(t)) return !0;
                        var e = P(t);
                        return !!(e && e.fileName === n && s <= e.line && e.line <= a)
                    })
                }
            }

            function k(t) {
                this._parent = t, this._promisesCreated = 0;
                var e = this._length = 1 + (void 0 === t ? 0 : t._length);
                st(this, k), e > 32 && this.uncycle()
            }
            var D, j, M, N = t._getDomain,
                B = t._async,
                H = n(64).Warning,
                F = n(59),
                U = F.canAttachTrace,
                G = /[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,
                W = /\((?:timers\.js):\d+:\d+\)/,
                Y = /[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,
                V = null,
                X = null,
                z = !1,
                K = !(0 == F.env("BLUEBIRD_DEBUG") || !F.env("BLUEBIRD_DEBUG") && "development" !== F.env("NODE_ENV")),
                q = !(0 == F.env("BLUEBIRD_WARNINGS") || !K && !F.env("BLUEBIRD_WARNINGS")),
                $ = !(0 == F.env("BLUEBIRD_LONG_STACK_TRACES") || !K && !F.env("BLUEBIRD_LONG_STACK_TRACES")),
                Z = 0 != F.env("BLUEBIRD_W_FORGOTTEN_RETURN") && (q || !!F.env("BLUEBIRD_W_FORGOTTEN_RETURN"));
            t.prototype.suppressUnhandledRejections = function() {
                var t = this._target();
                t._bitField = t._bitField & -1048577 | 524288
            }, t.prototype._ensurePossibleRejectionHandled = function() {
                0 === (524288 & this._bitField) && (this._setRejectionIsUnhandled(), B.invokeLater(this._notifyUnhandledRejection, this, void 0))
            }, t.prototype._notifyUnhandledRejectionIsHandled = function() {
                C("rejectionHandled", D, void 0, this)
            }, t.prototype._setReturnedNonUndefined = function() {
                this._bitField = 268435456 | this._bitField
            }, t.prototype._returnedNonUndefined = function() {
                return 0 !== (268435456 & this._bitField)
            }, t.prototype._notifyUnhandledRejection = function() {
                if (this._isRejectionUnhandled()) {
                    var t = this._settledValue();
                    this._setUnhandledRejectionIsNotified(), C("unhandledRejection", j, t, this)
                }
            }, t.prototype._setUnhandledRejectionIsNotified = function() {
                this._bitField = 262144 | this._bitField
            }, t.prototype._unsetUnhandledRejectionIsNotified = function() {
                this._bitField = this._bitField & -262145
            }, t.prototype._isUnhandledRejectionNotified = function() {
                return (262144 & this._bitField) > 0
            }, t.prototype._setRejectionIsUnhandled = function() {
                this._bitField = 1048576 | this._bitField
            }, t.prototype._unsetRejectionIsUnhandled = function() {
                this._bitField = this._bitField & -1048577, this._isUnhandledRejectionNotified() && (this._unsetUnhandledRejectionIsNotified(), this._notifyUnhandledRejectionIsHandled())
            }, t.prototype._isRejectionUnhandled = function() {
                return (1048576 & this._bitField) > 0
            }, t.prototype._warn = function(t, e, n) {
                return y(t, e, n || this)
            }, t.onPossiblyUnhandledRejection = function(t) {
                var e = N();
                j = "function" == typeof t ? null === e ? t : F.domainBind(e, t) : void 0
            }, t.onUnhandledRejectionHandled = function(t) {
                var e = N();
                D = "function" == typeof t ? null === e ? t : F.domainBind(e, t) : void 0
            };
            var Q = function() {};
            t.longStackTraces = function() {
                if (B.haveItemsQueued() && !at.longStackTraces) throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");
                if (!at.longStackTraces && A()) {
                    var e = t.prototype._captureStackTrace,
                        n = t.prototype._attachExtraTrace;
                    at.longStackTraces = !0, Q = function() {
                        if (B.haveItemsQueued() && !at.longStackTraces) throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");
                        t.prototype._captureStackTrace = e, t.prototype._attachExtraTrace = n, i.deactivateLongStackTraces(), B.enableTrampoline(), at.longStackTraces = !1
                    }, t.prototype._captureStackTrace = g, t.prototype._attachExtraTrace = _, i.activateLongStackTraces(), B.disableTrampolineIfNecessary()
                }
            }, t.hasLongStackTraces = function() {
                return at.longStackTraces && A()
            };
            var J = function() {
                    try {
                        if ("function" == typeof CustomEvent) {
                            var t = new CustomEvent("CustomEvent");
                            return F.global.dispatchEvent(t),
                                function(t, e) {
                                    var n = new CustomEvent(t.toLowerCase(), {
                                        detail: e,
                                        cancelable: !0
                                    });
                                    return !F.global.dispatchEvent(n)
                                }
                        }
                        if ("function" == typeof Event) {
                            var t = new Event("CustomEvent");
                            return F.global.dispatchEvent(t),
                                function(t, e) {
                                    var n = new Event(t.toLowerCase(), {
                                        cancelable: !0
                                    });
                                    return n.detail = e, !F.global.dispatchEvent(n)
                                }
                        }
                        var t = document.createEvent("CustomEvent");
                        return t.initCustomEvent("testingtheevent", !1, !0, {}), F.global.dispatchEvent(t),
                            function(t, e) {
                                var n = document.createEvent("CustomEvent");
                                return n.initCustomEvent(t.toLowerCase(), !1, !0, e), !F.global.dispatchEvent(n)
                            }
                    } catch (t) {}
                    return function() {
                        return !1
                    }
                }(),
                tt = function() {
                    return F.isNode ? function() {
                        return e.emit.apply(e, arguments)
                    } : F.global ? function(t) {
                        var e = "on" + t.toLowerCase(),
                            n = F.global[e];
                        return !!n && (n.apply(F.global, [].slice.call(arguments, 1)), !0)
                    } : function() {
                        return !1
                    }
                }(),
                et = {
                    promiseCreated: o,
                    promiseFulfilled: o,
                    promiseRejected: o,
                    promiseResolved: o,
                    promiseCancelled: o,
                    promiseChained: function(t, e, n) {
                        return {
                            promise: e,
                            child: n
                        }
                    },
                    warning: function(t, e) {
                        return {
                            warning: e
                        }
                    },
                    unhandledRejection: function(t, e, n) {
                        return {
                            reason: e,
                            promise: n
                        }
                    },
                    rejectionHandled: o
                },
                nt = function(t) {
                    var e = !1;
                    try {
                        e = tt.apply(null, arguments)
                    } catch (t) {
                        B.throwLater(t), e = !0
                    }
                    var n = !1;
                    try {
                        n = J(t, et[t].apply(null, arguments))
                    } catch (t) {
                        B.throwLater(t), n = !0
                    }
                    return n || e
                };
            t.config = function(e) {
                if (e = Object(e), "longStackTraces" in e && (e.longStackTraces ? t.longStackTraces() : !e.longStackTraces && t.hasLongStackTraces() && Q()), "warnings" in e) {
                    var n = e.warnings;
                    at.warnings = !!n, Z = at.warnings, F.isObject(n) && "wForgottenReturn" in n && (Z = !!n.wForgottenReturn)
                }
                if ("cancellation" in e && e.cancellation && !at.cancellation) {
                    if (B.haveItemsQueued()) throw new Error("cannot enable cancellation after promises are in use");
                    t.prototype._clearCancellationData = f, t.prototype._propagateFrom = h, t.prototype._onCancel = u, t.prototype._setOnCancel = c, t.prototype._attachCancellationCallback = l, t.prototype._execute = a, rt = h, at.cancellation = !0
                }
                return "monitoring" in e && (e.monitoring && !at.monitoring ? (at.monitoring = !0, t.prototype._fireEvent = nt) : !e.monitoring && at.monitoring && (at.monitoring = !1, t.prototype._fireEvent = s)), t
            }, t.prototype._fireEvent = s, t.prototype._execute = function(t, e, n) {
                try {
                    t(e, n)
                } catch (t) {
                    return t
                }
            }, t.prototype._onCancel = function() {}, t.prototype._setOnCancel = function(t) {}, t.prototype._attachCancellationCallback = function(t) {}, t.prototype._captureStackTrace = function() {}, t.prototype._attachExtraTrace = function() {}, t.prototype._clearCancellationData = function() {}, t.prototype._propagateFrom = function(t, e) {};
            var rt = d,
                it = function() {
                    return !1
                },
                ot = /[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;
            F.inherits(k, Error), i.CapturedTrace = k, k.prototype.uncycle = function() {
                var t = this._length;
                if (!(t < 2)) {
                    for (var e = [], n = {}, r = 0, i = this; void 0 !== i; ++r) e.push(i), i = i._parent;
                    t = this._length = r;
                    for (var r = t - 1; r >= 0; --r) {
                        var o = e[r].stack;
                        void 0 === n[o] && (n[o] = r)
                    }
                    for (var r = 0; r < t; ++r) {
                        var s = e[r].stack,
                            a = n[s];
                        if (void 0 !== a && a !== r) {
                            a > 0 && (e[a - 1]._parent = void 0, e[a - 1]._length = 1), e[r]._parent = void 0, e[r]._length = 1;
                            var l = r > 0 ? e[r - 1] : this;
                            a < t - 1 ? (l._parent = e[a + 1], l._parent.uncycle(), l._length = l._parent._length + 1) : (l._parent = void 0, l._length = 1);
                            for (var u = l._length + 1, c = r - 2; c >= 0; --c) e[c]._length = u, u++;
                            return
                        }
                    }
                }
            }, k.prototype.attachExtraTrace = function(t) {
                if (!t.__stackCleaned__) {
                    this.uncycle();
                    for (var e = x(t), n = e.message, r = [e.stack], i = this; void 0 !== i;) r.push(O(i.stack.split("\n"))), i = i._parent;
                    S(r), E(r), F.notEnumerableProp(t, "stack", m(n, r)), F.notEnumerableProp(t, "__stackCleaned__", !0)
                }
            };
            var st = function() {
                var t = /^\s*at\s*/,
                    e = function(t, e) {
                        return "string" == typeof t ? t : void 0 !== e.name && void 0 !== e.message ? e.toString() : I(e)
                    };
                if ("number" == typeof Error.stackTraceLimit && "function" == typeof Error.captureStackTrace) {
                    Error.stackTraceLimit += 6, V = t, X = e;
                    var n = Error.captureStackTrace;
                    return it = function(t) {
                        return G.test(t)
                    },
                        function(t, e) {
                            Error.stackTraceLimit += 6, n(t, e), Error.stackTraceLimit -= 6
                        }
                }
                var i = new Error;
                if ("string" == typeof i.stack && i.stack.split("\n")[0].indexOf("stackDetection@") >= 0) return V = /@/, X = e, z = !0,
                    function(t) {
                        t.stack = (new Error).stack
                    };
                var o;
                try {
                    throw new Error
                } catch (t) {
                    o = "stack" in t
                }
                return "stack" in i || !o || "number" != typeof Error.stackTraceLimit ? (X = function(t, e) {
                    return "string" == typeof t ? t : "object" !== ("undefined" == typeof e ? "undefined" : r(e)) && "function" != typeof e || void 0 === e.name || void 0 === e.message ? I(e) : e.toString()
                }, null) : (V = t, X = e, function(t) {
                    Error.stackTraceLimit += 6;
                    try {
                        throw new Error
                    } catch (e) {
                        t.stack = e.stack
                    }
                    Error.stackTraceLimit -= 6
                })
            }([]);
            "undefined" != typeof console && "undefined" != typeof console.warn && (M = function(t) {
                console.warn(t)
            }, F.isNode && e.stderr.isTTY ? M = function(t, e) {
                var n = e ? "[33m" : "[31m";
                console.warn(n + t + "[0m\n")
            } : F.isNode || "string" != typeof(new Error).stack || (M = function(t, e) {
                console.warn("%c" + t, e ? "color: darkorange" : "color: red")
            }));
            var at = {
                warnings: q,
                longStackTraces: !1,
                cancellation: !1,
                monitoring: !1
            };
            return $ && t.longStackTraces(), {
                longStackTraces: function() {
                    return at.longStackTraces
                },
                warnings: function() {
                    return at.warnings
                },
                cancellation: function() {
                    return at.cancellation
                },
                monitoring: function() {
                    return at.monitoring
                },
                propagateFromFunction: function() {
                    return rt
                },
                boundValueFunction: function() {
                    return p
                },
                checkForgottenReturns: v,
                setBounds: L,
                warn: y,
                deprecated: b,
                CapturedTrace: k,
                fireDomEvent: J,
                fireGlobalEvent: tt
            }
        }
    }).call(e, n(16))
}, function(t, e, n) {
    "use strict";
    t.exports = function(t, e, r) {
        function i(t, e, n) {
            this.promise = t, this.type = e, this.handler = n, this.called = !1, this.cancelPromise = null
        }

        function o(t) {
            this.finallyHandler = t
        }

        function s(t, e) {
            return null != t.cancelPromise && (arguments.length > 1 ? t.cancelPromise._reject(e) : t.cancelPromise._cancel(), t.cancelPromise = null, !0)
        }

        function a() {
            return u.call(this, this.promise._target()._settledValue())
        }

        function l(t) {
            if (!s(this, t)) return h.e = t, h
        }

        function u(n) {
            var i = this.promise,
                u = this.handler;
            if (!this.called) {
                this.called = !0;
                var c = this.isFinallyHandler() ? u.call(i._boundValue()) : u.call(i._boundValue(), n);
                if (c === r) return c;
                if (void 0 !== c) {
                    i._setReturnedNonUndefined();
                    var d = e(c, i);
                    if (d instanceof t) {
                        if (null != this.cancelPromise) {
                            if (d._isCancelled()) {
                                var p = new f("late cancellation observer");
                                return i._attachExtraTrace(p), h.e = p, h
                            }
                            d.isPending() && d._attachCancellationCallback(new o(this))
                        }
                        return d._then(a, l, void 0, this, void 0)
                    }
                }
            }
            return i.isRejected() ? (s(this), h.e = n, h) : (s(this), n)
        }
        var c = n(59),
            f = t.CancellationError,
            h = c.errorObj,
            d = n(70)(r);
        return i.prototype.isFinallyHandler = function() {
            return 0 === this.type
        }, o.prototype._resultCancelled = function() {
            s(this.finallyHandler)
        }, t.prototype._passThrough = function(t, e, n, r) {
            return "function" != typeof t ? this.then() : this._then(n, r, void 0, new i(this, e, t), void 0)
        }, t.prototype.lastly = t.prototype.finally = function(t) {
            return this._passThrough(t, 0, u, u)
        }, t.prototype.tap = function(t) {
            return this._passThrough(t, 1, u)
        }, t.prototype.tapCatch = function(e) {
            var n = arguments.length;
            if (1 === n) return this._passThrough(e, 1, void 0, u);
            var r, i = new Array(n - 1),
                o = 0;
            for (r = 0; r < n - 1; ++r) {
                var s = arguments[r];
                if (!c.isObject(s)) return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got " + c.classString(s)));
                i[o++] = s
            }
            i.length = o;
            var a = arguments[r];
            return this._passThrough(d(i, a, this), 1, void 0, u)
        }, i
    }
}, function(t, e, n) {
    "use strict";
    t.exports = function(t) {
        function e(e, n, a) {
            return function(l) {
                var u = a._boundValue();
                t: for (var c = 0; c < e.length; ++c) {
                    var f = e[c];
                    if (f === Error || null != f && f.prototype instanceof Error) {
                        if (l instanceof f) return o(n).call(u, l)
                    } else if ("function" == typeof f) {
                        var h = o(f).call(u, l);
                        if (h === s) return h;
                        if (h) return o(n).call(u, l)
                    } else if (r.isObject(l)) {
                        for (var d = i(f), p = 0; p < d.length; ++p) {
                            var g = d[p];
                            if (f[g] != l[g]) continue t
                        }
                        return o(n).call(u, l)
                    }
                }
                return t
            }
        }
        var r = n(59),
            i = n(60).keys,
            o = r.tryCatch,
            s = r.errorObj;
        return e
    }
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t instanceof Error && c.getPrototypeOf(t) === Error.prototype
    }

    function i(t) {
        var e;
        if (r(t)) {
            e = new u(t), e.name = t.name, e.message = t.message, e.stack = t.stack;
            for (var n = c.keys(t), i = 0; i < n.length; ++i) {
                var o = n[i];
                f.test(o) || (e[o] = t[o])
            }
            return e
        }
        return s.markAsOriginatingFromRejection(t), t
    }

    function o(t, e) {
        return function(n, r) {
            if (null !== t) {
                if (n) {
                    var o = i(a(n));
                    t._attachExtraTrace(o), t._reject(o)
                } else if (e) {
                    for (var s = arguments.length, l = new Array(Math.max(s - 1, 0)), u = 1; u < s; ++u) l[u - 1] = arguments[u];
                    t._fulfill(l)
                } else t._fulfill(r);
                t = null
            }
        }
    }
    var s = n(59),
        a = s.maybeWrapAsError,
        l = n(64),
        u = l.OperationalError,
        c = n(60),
        f = /^(?:name|message|stack|cause)$/;
    t.exports = o
}, function(t, e, n) {
    "use strict";
    t.exports = function(t, e, r, i, o) {
        var s = n(59),
            a = s.tryCatch;
        t.method = function(n) {
            if ("function" != typeof n) throw new t.TypeError("expecting a function but got " + s.classString(n));
            return function() {
                var r = new t(e);
                r._captureStackTrace(), r._pushContext();
                var i = a(n).apply(this, arguments),
                    s = r._popContext();
                return o.checkForgottenReturns(i, s, "Promise.method", r), r._resolveFromSyncValue(i), r
            }
        }, t.attempt = t.try = function(n) {
            if ("function" != typeof n) return i("expecting a function but got " + s.classString(n));
            var r = new t(e);
            r._captureStackTrace(), r._pushContext();
            var l;
            if (arguments.length > 1) {
                o.deprecated("calling Promise.try with more than 1 argument");
                var u = arguments[1],
                    c = arguments[2];
                l = s.isArray(u) ? a(n).apply(c, u) : a(n).call(c, u)
            } else l = a(n)();
            var f = r._popContext();
            return o.checkForgottenReturns(l, f, "Promise.try", r), r._resolveFromSyncValue(l), r
        }, t.prototype._resolveFromSyncValue = function(t) {
            t === s.errorObj ? this._rejectCallback(t.e, !1) : this._resolveCallback(t, !0)
        }
    }
}, function(t, e) {
    "use strict";
    t.exports = function(t, e, n, r) {
        var i = !1,
            o = function(t, e) {
                this._reject(e)
            },
            s = function(t, e) {
                e.promiseRejectionQueued = !0, e.bindingPromise._then(o, o, null, this, t)
            },
            a = function(t, e) {
                0 === (50397184 & this._bitField) && this._resolveCallback(e.target)
            },
            l = function(t, e) {
                e.promiseRejectionQueued || this._reject(t)
            };
        t.prototype.bind = function(o) {
            i || (i = !0, t.prototype._propagateFrom = r.propagateFromFunction(), t.prototype._boundValue = r.boundValueFunction());
            var u = n(o),
                c = new t(e);
            c._propagateFrom(this, 1);
            var f = this._target();
            if (c._setBoundTo(u), u instanceof t) {
                var h = {
                    promiseRejectionQueued: !1,
                    promise: c,
                    target: f,
                    bindingPromise: u
                };
                f._then(e, s, void 0, c, h), u._then(a, l, void 0, c, h), c._setOnCancel(u)
            } else c._resolveCallback(f);
            return c
        }, t.prototype._setBoundTo = function(t) {
            void 0 !== t ? (this._bitField = 2097152 | this._bitField, this._boundTo = t) : this._bitField = this._bitField & -2097153
        }, t.prototype._isBound = function() {
            return 2097152 === (2097152 & this._bitField)
        }, t.bind = function(e, n) {
            return t.resolve(n).bind(e)
        }
    }
}, function(t, e, n) {
    "use strict";
    t.exports = function(t, e, r, i) {
        var o = n(59),
            s = o.tryCatch,
            a = o.errorObj,
            l = t._async;
        t.prototype.break = t.prototype.cancel = function() {
            if (!i.cancellation()) return this._warn("cancellation is disabled");
            for (var t = this, e = t; t._isCancellable();) {
                if (!t._cancelBy(e)) {
                    e._isFollowing() ? e._followee().cancel() : e._cancelBranched();
                    break
                }
                var n = t._cancellationParent;
                if (null == n || !n._isCancellable()) {
                    t._isFollowing() ? t._followee().cancel() : t._cancelBranched();
                    break
                }
                t._isFollowing() && t._followee().cancel(), t._setWillBeCancelled(), e = t, t = n
            }
        }, t.prototype._branchHasCancelled = function() {
            this._branchesRemainingToCancel--
        }, t.prototype._enoughBranchesHaveCancelled = function() {
            return void 0 === this._branchesRemainingToCancel || this._branchesRemainingToCancel <= 0
        }, t.prototype._cancelBy = function(t) {
            return t === this ? (this._branchesRemainingToCancel = 0, this._invokeOnCancel(), !0) : (this._branchHasCancelled(), !!this._enoughBranchesHaveCancelled() && (this._invokeOnCancel(), !0))
        }, t.prototype._cancelBranched = function() {
            this._enoughBranchesHaveCancelled() && this._cancel()
        }, t.prototype._cancel = function() {
            this._isCancellable() && (this._setCancelled(), l.invoke(this._cancelPromises, this, void 0))
        }, t.prototype._cancelPromises = function() {
            this._length() > 0 && this._settlePromises()
        }, t.prototype._unsetOnCancel = function() {
            this._onCancelField = void 0
        }, t.prototype._isCancellable = function() {
            return this.isPending() && !this._isCancelled()
        }, t.prototype.isCancellable = function() {
            return this.isPending() && !this.isCancelled()
        }, t.prototype._doInvokeOnCancel = function(t, e) {
            if (o.isArray(t))
                for (var n = 0; n < t.length; ++n) this._doInvokeOnCancel(t[n], e);
            else if (void 0 !== t)
                if ("function" == typeof t) {
                    if (!e) {
                        var r = s(t).call(this._boundValue());
                        r === a && (this._attachExtraTrace(r.e), l.throwLater(r.e))
                    }
                } else t._resultCancelled(this)
        }, t.prototype._invokeOnCancel = function() {
            var t = this._onCancel();
            this._unsetOnCancel(), l.invoke(this._doInvokeOnCancel, this, t)
        }, t.prototype._invokeInternalOnCancel = function() {
            this._isCancellable() && (this._doInvokeOnCancel(this._onCancel(), !0), this._unsetOnCancel())
        }, t.prototype._resultCancelled = function() {
            this.cancel()
        }
    }
}, function(t, e) {
    "use strict";
    t.exports = function(t) {
        function e() {
            return this.value
        }

        function n() {
            throw this.reason
        }
        t.prototype.return = t.prototype.thenReturn = function(n) {
            return n instanceof t && n.suppressUnhandledRejections(), this._then(e, void 0, void 0, {
                value: n
            }, void 0)
        }, t.prototype.throw = t.prototype.thenThrow = function(t) {
            return this._then(n, void 0, void 0, {
                reason: t
            }, void 0)
        }, t.prototype.catchThrow = function(t) {
            if (arguments.length <= 1) return this._then(void 0, n, void 0, {
                reason: t
            }, void 0);
            var e = arguments[1],
                r = function() {
                    throw e
                };
            return this.caught(t, r)
        }, t.prototype.catchReturn = function(n) {
            if (arguments.length <= 1) return n instanceof t && n.suppressUnhandledRejections(), this._then(void 0, e, void 0, {
                value: n
            }, void 0);
            var r = arguments[1];
            r instanceof t && r.suppressUnhandledRejections();
            var i = function() {
                return r
            };
            return this.caught(n, i)
        }
    }
}, function(t, e) {
    "use strict";
    t.exports = function(t) {
        function e(t) {
            void 0 !== t ? (t = t._target(), this._bitField = t._bitField, this._settledValueField = t._isFateSealed() ? t._settledValue() : void 0) : (this._bitField = 0, this._settledValueField = void 0)
        }
        e.prototype._settledValue = function() {
            return this._settledValueField
        };
        var n = e.prototype.value = function() {
                if (!this.isFulfilled()) throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");
                return this._settledValue()
            },
            r = e.prototype.error = e.prototype.reason = function() {
                if (!this.isRejected()) throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");
                return this._settledValue()
            },
            i = e.prototype.isFulfilled = function() {
                return 0 !== (33554432 & this._bitField)
            },
            o = e.prototype.isRejected = function() {
                return 0 !== (16777216 & this._bitField)
            },
            s = e.prototype.isPending = function() {
                return 0 === (50397184 & this._bitField)
            },
            a = e.prototype.isResolved = function() {
                return 0 !== (50331648 & this._bitField)
            };
        e.prototype.isCancelled = function() {
            return 0 !== (8454144 & this._bitField)
        }, t.prototype.__isCancelled = function() {
            return 65536 === (65536 & this._bitField)
        }, t.prototype._isCancelled = function() {
            return this._target().__isCancelled()
        }, t.prototype.isCancelled = function() {
            return 0 !== (8454144 & this._target()._bitField)
        }, t.prototype.isPending = function() {
            return s.call(this._target())
        }, t.prototype.isRejected = function() {
            return o.call(this._target())
        }, t.prototype.isFulfilled = function() {
            return i.call(this._target())
        }, t.prototype.isResolved = function() {
            return a.call(this._target())
        }, t.prototype.value = function() {
            return n.call(this._target())
        }, t.prototype.reason = function() {
            var t = this._target();
            return t._unsetRejectionIsUnhandled(), r.call(t)
        }, t.prototype._value = function() {
            return this._settledValue()
        }, t.prototype._reason = function() {
            return this._unsetRejectionIsUnhandled(), this._settledValue()
        }, t.PromiseInspection = e
    }
}, function(t, e, n) {
    "use strict";
    t.exports = function(t, e, r, i, o, s) {
        var a, l = n(59),
            u = l.canEvaluate,
            c = l.tryCatch,
            f = l.errorObj;
        if (u) {
            for (var h = function(t) {
                return new Function("value", "holder", "                             \n\t            'use strict';                                                    \n\t            holder.pIndex = value;                                           \n\t            holder.checkFulfillment(this);                                   \n\t            ".replace(/Index/g, t))
            }, d = function(t) {
                return new Function("promise", "holder", "                           \n\t            'use strict';                                                    \n\t            holder.pIndex = promise;                                         \n\t            ".replace(/Index/g, t))
            }, p = function(e) {
                for (var n = new Array(e), r = 0; r < n.length; ++r) n[r] = "this.p" + (r + 1);
                var i = n.join(" = ") + " = null;",
                    s = "var promise;\n" + n.map(function(t) {
                        return "                                                         \n\t                promise = " + t + ";                                      \n\t                if (promise instanceof Promise) {                            \n\t                    promise.cancel();                                        \n\t                }                                                            \n\t            "
                    }).join("\n"),
                    a = n.join(", "),
                    l = "Holder$" + e,
                    u = "return function(tryCatch, errorObj, Promise, async) {    \n\t            'use strict';                                                    \n\t            function [TheName](fn) {                                         \n\t                [TheProperties]                                              \n\t                this.fn = fn;                                                \n\t                this.asyncNeeded = true;                                     \n\t                this.now = 0;                                                \n\t            }                                                                \n\t                                                                             \n\t            [TheName].prototype._callFunction = function(promise) {          \n\t                promise._pushContext();                                      \n\t                var ret = tryCatch(this.fn)([ThePassedArguments]);           \n\t                promise._popContext();                                       \n\t                if (ret === errorObj) {                                      \n\t                    promise._rejectCallback(ret.e, false);                   \n\t                } else {                                                     \n\t                    promise._resolveCallback(ret);                           \n\t                }                                                            \n\t            };                                                               \n\t                                                                             \n\t            [TheName].prototype.checkFulfillment = function(promise) {       \n\t                var now = ++this.now;                                        \n\t                if (now === [TheTotal]) {                                    \n\t                    if (this.asyncNeeded) {                                  \n\t                        async.invoke(this._callFunction, this, promise);     \n\t                    } else {                                                 \n\t                        this._callFunction(promise);                         \n\t                    }                                                        \n\t                                                                             \n\t                }                                                            \n\t            };                                                               \n\t                                                                             \n\t            [TheName].prototype._resultCancelled = function() {              \n\t                [CancellationCode]                                           \n\t            };                                                               \n\t                                                                             \n\t            return [TheName];                                                \n\t        }(tryCatch, errorObj, Promise, async);                               \n\t        ";
                return u = u.replace(/\[TheName\]/g, l).replace(/\[TheTotal\]/g, e).replace(/\[ThePassedArguments\]/g, a).replace(/\[TheProperties\]/g, i).replace(/\[CancellationCode\]/g, s), new Function("tryCatch", "errorObj", "Promise", "async", u)(c, f, t, o)
            }, g = [], _ = [], v = [], b = 0; b < 8; ++b) g.push(p(b + 1)), _.push(h(b + 1)), v.push(d(b + 1));
            a = function(t) {
                this._reject(t)
            }
        }
        t.join = function() {
            var n, o = arguments.length - 1;
            if (o > 0 && "function" == typeof arguments[o] && (n = arguments[o], o <= 8 && u)) {
                var c = new t(i);
                c._captureStackTrace();
                for (var f = g[o - 1], h = new f(n), d = _, p = 0; p < o; ++p) {
                    var b = r(arguments[p], c);
                    if (b instanceof t) {
                        b = b._target();
                        var y = b._bitField;
                        0 === (50397184 & y) ? (b._then(d[p], a, void 0, c, h), v[p](b, h), h.asyncNeeded = !1) : 0 !== (33554432 & y) ? d[p].call(c, b._value(), h) : 0 !== (16777216 & y) ? c._reject(b._reason()) : c._cancel()
                    } else d[p].call(c, b, h)
                }
                if (!c._isFateSealed()) {
                    if (h.asyncNeeded) {
                        var m = s();
                        null !== m && (h.fn = l.domainBind(m, h.fn))
                    }
                    c._setAsyncGuaranteed(), c._setOnCancel(h)
                }
                return c
            }
            for (var E = arguments.length, S = new Array(E), O = 0; O < E; ++O) S[O] = arguments[O];
            n && S.pop();
            var c = new e(S).promise();
            return void 0 !== n ? c.spread(n) : c
        }
    }
}, function(t, e, n) {
    "use strict";
    var r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
        return typeof t
    } : function(t) {
        return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
    };
    t.exports = function(t, e, i, o, s, a) {
        function l(t, e, n, r) {
            this.constructor$(t), this._promise._captureStackTrace();
            var i = c();
            this._callback = null === i ? e : f.domainBind(i, e), this._preservedValues = r === s ? new Array(this.length()) : null, this._limit = n, this._inFlight = 0, this._queue = [], p.invoke(this._asyncInit, this, void 0)
        }

        function u(e, n, o, s) {
            if ("function" != typeof n) return i("expecting a function but got " + f.classString(n));
            var a = 0;
            if (void 0 !== o) {
                if ("object" !== ("undefined" == typeof o ? "undefined" : r(o)) || null === o) return t.reject(new TypeError("options argument must be an object but it is " + f.classString(o)));
                if ("number" != typeof o.concurrency) return t.reject(new TypeError("'concurrency' must be a number but it is " + f.classString(o.concurrency)));
                a = o.concurrency
            }
            return a = "number" == typeof a && isFinite(a) && a >= 1 ? a : 0, new l(e, n, a, s).promise()
        }
        var c = t._getDomain,
            f = n(59),
            h = f.tryCatch,
            d = f.errorObj,
            p = t._async;
        f.inherits(l, e), l.prototype._asyncInit = function() {
            this._init$(void 0, -2)
        }, l.prototype._init = function() {}, l.prototype._promiseFulfilled = function(e, n) {
            var r = this._values,
                i = this.length(),
                s = this._preservedValues,
                l = this._limit;
            if (n < 0) {
                if (n = n * -1 - 1, r[n] = e, l >= 1 && (this._inFlight--, this._drainQueue(), this._isResolved())) return !0
            } else {
                if (l >= 1 && this._inFlight >= l) return r[n] = e, this._queue.push(n), !1;
                null !== s && (s[n] = e);
                var u = this._promise,
                    c = this._callback,
                    f = u._boundValue();
                u._pushContext();
                var p = h(c).call(f, e, n, i),
                    g = u._popContext();
                if (a.checkForgottenReturns(p, g, null !== s ? "Promise.filter" : "Promise.map", u), p === d) return this._reject(p.e), !0;
                var _ = o(p, this._promise);
                if (_ instanceof t) {
                    _ = _._target();
                    var v = _._bitField;
                    if (0 === (50397184 & v)) return l >= 1 && this._inFlight++, r[n] = _, _._proxy(this, (n + 1) * -1), !1;
                    if (0 === (33554432 & v)) return 0 !== (16777216 & v) ? (this._reject(_._reason()), !0) : (this._cancel(), !0);
                    p = _._value()
                }
                r[n] = p
            }
            var b = ++this._totalResolved;
            return b >= i && (null !== s ? this._filter(r, s) : this._resolve(r), !0)
        }, l.prototype._drainQueue = function() {
            for (var t = this._queue, e = this._limit, n = this._values; t.length > 0 && this._inFlight < e;) {
                if (this._isResolved()) return;
                var r = t.pop();
                this._promiseFulfilled(n[r], r)
            }
        }, l.prototype._filter = function(t, e) {
            for (var n = e.length, r = new Array(n), i = 0, o = 0; o < n; ++o) t[o] && (r[i++] = e[o]);
            r.length = i, this._resolve(r)
        }, l.prototype.preservedValues = function() {
            return this._preservedValues
        }, t.prototype.map = function(t, e) {
            return u(this, t, e, null)
        }, t.map = function(t, e, n, r) {
            return u(t, e, n, r)
        }
    }
}, function(t, e, n) {
    "use strict";
    var r = Object.create;
    if (r) {
        var i = r(null),
            o = r(null);
        i[" size"] = o[" size"] = 0
    }
    t.exports = function(t) {
        function e(e, n) {
            var r;
            if (null != e && (r = e[n]), "function" != typeof r) {
                var i = "Object " + c.classString(e) + " has no method '" + c.toString(n) + "'";
                throw new t.TypeError(i)
            }
            return r
        }

        function r(t) {
            var n = this.pop(),
                r = e(t, n);
            return r.apply(t, this)
        }

        function s(t) {
            return t[this]
        }

        function a(t) {
            var e = +this;
            return e < 0 && (e = Math.max(0, e + t.length)), t[e]
        }
        var l, u, c = n(59),
            f = c.canEvaluate,
            h = c.isIdentifier,
            d = function(t) {
                return new Function("ensureMethod", "                                    \n\t        return function(obj) {                                               \n\t            'use strict'                                                     \n\t            var len = this.length;                                           \n\t            ensureMethod(obj, 'methodName');                                 \n\t            switch(len) {                                                    \n\t                case 1: return obj.methodName(this[0]);                      \n\t                case 2: return obj.methodName(this[0], this[1]);             \n\t                case 3: return obj.methodName(this[0], this[1], this[2]);    \n\t                case 0: return obj.methodName();                             \n\t                default:                                                     \n\t                    return obj.methodName.apply(obj, this);                  \n\t            }                                                                \n\t        };                                                                   \n\t        ".replace(/methodName/g, t))(e)
            },
            p = function(t) {
                return new Function("obj", "                                             \n\t        'use strict';                                                        \n\t        return obj.propertyName;                                             \n\t        ".replace("propertyName", t))
            },
            g = function(t, e, n) {
                var r = n[t];
                if ("function" != typeof r) {
                    if (!h(t)) return null;
                    if (r = e(t), n[t] = r, n[" size"]++, n[" size"] > 512) {
                        for (var i = Object.keys(n), o = 0; o < 256; ++o) delete n[i[o]];
                        n[" size"] = i.length - 256
                    }
                }
                return r
            };
        l = function(t) {
            return g(t, d, i)
        }, u = function(t) {
            return g(t, p, o)
        }, t.prototype.call = function(t) {
            for (var e = arguments.length, n = new Array(Math.max(e - 1, 0)), i = 1; i < e; ++i) n[i - 1] = arguments[i];
            if (f) {
                var o = l(t);
                if (null !== o) return this._then(o, void 0, void 0, n, void 0)
            }
            return n.push(t), this._then(r, void 0, void 0, n, void 0)
        }, t.prototype.get = function(t) {
            var e, n = "number" == typeof t;
            if (n) e = a;
            else if (f) {
                var r = u(t);
                e = null !== r ? r : s
            } else e = s;
            return this._then(e, void 0, void 0, t, void 0)
        }
    }
}, function(t, e, n) {
    "use strict";
    t.exports = function(t, e, r, i, o, s) {
        function a(t) {
            setTimeout(function() {
                throw t
            }, 0)
        }

        function l(t) {
            var e = r(t);
            return e !== t && "function" == typeof t._isDisposable && "function" == typeof t._getDisposer && t._isDisposable() && e._setDisposable(t._getDisposer()), e
        }

        function u(e, n) {
            function i() {
                if (s >= u) return c._fulfill();
                var o = l(e[s++]);
                if (o instanceof t && o._isDisposable()) {
                    try {
                        o = r(o._getDisposer().tryDispose(n), e.promise)
                    } catch (t) {
                        return a(t)
                    }
                    if (o instanceof t) return o._then(i, a, null, null, null)
                }
                i()
            }
            var s = 0,
                u = e.length,
                c = new t(o);
            return i(), c
        }

        function c(t, e, n) {
            this._data = t, this._promise = e, this._context = n
        }

        function f(t, e, n) {
            this.constructor$(t, e, n)
        }

        function h(t) {
            return c.isDisposer(t) ? (this.resources[this.index]._setDisposable(t), t.promise()) : t
        }

        function d(t) {
            this.length = t, this.promise = null, this[t - 1] = null
        }
        var p = n(59),
            g = n(64).TypeError,
            _ = n(59).inherits,
            v = p.errorObj,
            b = p.tryCatch,
            y = {};
        c.prototype.data = function() {
            return this._data
        }, c.prototype.promise = function() {
            return this._promise
        }, c.prototype.resource = function() {
            return this.promise().isFulfilled() ? this.promise().value() : y
        }, c.prototype.tryDispose = function(t) {
            var e = this.resource(),
                n = this._context;
            void 0 !== n && n._pushContext();
            var r = e !== y ? this.doDispose(e, t) : null;
            return void 0 !== n && n._popContext(), this._promise._unsetDisposable(), this._data = null, r
        }, c.isDisposer = function(t) {
            return null != t && "function" == typeof t.resource && "function" == typeof t.tryDispose
        }, _(f, c), f.prototype.doDispose = function(t, e) {
            var n = this.data();
            return n.call(t, t, e)
        }, d.prototype._resultCancelled = function() {
            for (var e = this.length, n = 0; n < e; ++n) {
                var r = this[n];
                r instanceof t && r.cancel()
            }
        }, t.using = function() {
            var n = arguments.length;
            if (n < 2) return e("you must pass at least 2 arguments to Promise.using");
            var i = arguments[n - 1];
            if ("function" != typeof i) return e("expecting a function but got " + p.classString(i));
            var o, a = !0;
            2 === n && Array.isArray(arguments[0]) ? (o = arguments[0], n = o.length, a = !1) : (o = arguments, n--);
            for (var l = new d(n), f = 0; f < n; ++f) {
                var g = o[f];
                if (c.isDisposer(g)) {
                    var _ = g;
                    g = g.promise(), g._setDisposable(_)
                } else {
                    var y = r(g);
                    y instanceof t && (g = y._then(h, null, null, {
                        resources: l,
                        index: f
                    }, void 0))
                }
                l[f] = g
            }
            for (var m = new Array(l.length), f = 0; f < m.length; ++f) m[f] = t.resolve(l[f]).reflect();
            var E = t.all(m).then(function(t) {
                    for (var e = 0; e < t.length; ++e) {
                        var n = t[e];
                        if (n.isRejected()) return v.e = n.error(), v;
                        if (!n.isFulfilled()) return void E.cancel();
                        t[e] = n.value()
                    }
                    S._pushContext(), i = b(i);
                    var r = a ? i.apply(void 0, t) : i(t),
                        o = S._popContext();
                    return s.checkForgottenReturns(r, o, "Promise.using", S), r
                }),
                S = E.lastly(function() {
                    var e = new t.PromiseInspection(E);
                    return u(l, e)
                });
            return l.promise = S, S._setOnCancel(l), S
        }, t.prototype._setDisposable = function(t) {
            this._bitField = 131072 | this._bitField, this._disposer = t
        }, t.prototype._isDisposable = function() {
            return (131072 & this._bitField) > 0
        }, t.prototype._getDisposer = function() {
            return this._disposer
        }, t.prototype._unsetDisposable = function() {
            this._bitField = this._bitField & -131073, this._disposer = void 0
        }, t.prototype.disposer = function(t) {
            if ("function" == typeof t) return new f(t, this, i());
            throw new g
        }
    }
}, function(t, e, n) {
    "use strict";
    t.exports = function(t, e, r) {
        function i(t) {
            this.handle = t
        }

        function o(t) {
            return clearTimeout(this.handle), t
        }

        function s(t) {
            throw clearTimeout(this.handle), t
        }
        var a = n(59),
            l = t.TimeoutError;
        i.prototype._resultCancelled = function() {
            clearTimeout(this.handle)
        };
        var u = function(t) {
                return c(+this).thenReturn(t)
            },
            c = t.delay = function(n, o) {
                var s, a;
                return void 0 !== o ? (s = t.resolve(o)._then(u, null, null, n, void 0), r.cancellation() && o instanceof t && s._setOnCancel(o)) : (s = new t(e), a = setTimeout(function() {
                    s._fulfill()
                }, +n), r.cancellation() && s._setOnCancel(new i(a)), s._captureStackTrace()), s._setAsyncGuaranteed(), s
            };
        t.prototype.delay = function(t) {
            return c(t, this)
        };
        var f = function(t, e, n) {
            var r;
            r = "string" != typeof e ? e instanceof Error ? e : new l("operation timed out") : new l(e), a.markAsOriginatingFromRejection(r), t._attachExtraTrace(r), t._reject(r), null != n && n.cancel()
        };
        t.prototype.timeout = function(t, e) {
            t = +t;
            var n, a, l = new i(setTimeout(function() {
                n.isPending() && f(n, e, a)
            }, t));
            return r.cancellation() ? (a = this.then(), n = a._then(o, s, void 0, l, void 0), n._setOnCancel(l)) : n = this._then(o, s, void 0, l, void 0), n
        }
    }
}, function(t, e, n) {
    "use strict";
    t.exports = function(t, e, r, i, o, s) {
        function a(e, n, r) {
            for (var o = 0; o < n.length; ++o) {
                r._pushContext();
                var s = d(n[o])(e);
                if (r._popContext(), s === h) {
                    r._pushContext();
                    var a = t.reject(h.e);
                    return r._popContext(), a
                }
                var l = i(s, r);
                if (l instanceof t) return l
            }
            return null
        }

        function l(e, n, i, o) {
            if (s.cancellation()) {
                var a = new t(r),
                    l = this._finallyPromise = new t(r);
                this._promise = a.lastly(function() {
                    return l
                }), a._captureStackTrace(), a._setOnCancel(this)
            } else {
                var u = this._promise = new t(r);
                u._captureStackTrace()
            }
            this._stack = o, this._generatorFunction = e, this._receiver = n, this._generator = void 0, this._yieldHandlers = "function" == typeof i ? [i].concat(p) : p, this._yieldedPromise = null, this._cancellationPhase = !1
        }
        var u = n(64),
            c = u.TypeError,
            f = n(59),
            h = f.errorObj,
            d = f.tryCatch,
            p = [];
        f.inherits(l, o), l.prototype._isResolved = function() {
            return null === this._promise
        }, l.prototype._cleanup = function() {
            this._promise = this._generator = null, s.cancellation() && null !== this._finallyPromise && (this._finallyPromise._fulfill(), this._finallyPromise = null)
        }, l.prototype._promiseCancelled = function() {
            if (!this._isResolved()) {
                var e, n = "undefined" != typeof this._generator.return;
                if (n) this._promise._pushContext(), e = d(this._generator.return).call(this._generator, void 0), this._promise._popContext();
                else {
                    var r = new t.CancellationError("generator .return() sentinel");
                    t.coroutine.returnSentinel = r, this._promise._attachExtraTrace(r), this._promise._pushContext(), e = d(this._generator.throw).call(this._generator, r), this._promise._popContext()
                }
                this._cancellationPhase = !0, this._yieldedPromise = null, this._continue(e)
            }
        }, l.prototype._promiseFulfilled = function(t) {
            this._yieldedPromise = null, this._promise._pushContext();
            var e = d(this._generator.next).call(this._generator, t);
            this._promise._popContext(), this._continue(e)
        }, l.prototype._promiseRejected = function(t) {
            this._yieldedPromise = null, this._promise._attachExtraTrace(t), this._promise._pushContext();
            var e = d(this._generator.throw).call(this._generator, t);
            this._promise._popContext(), this._continue(e)
        }, l.prototype._resultCancelled = function() {
            if (this._yieldedPromise instanceof t) {
                var e = this._yieldedPromise;
                this._yieldedPromise = null, e.cancel()
            }
        }, l.prototype.promise = function() {
            return this._promise
        }, l.prototype._run = function() {
            this._generator = this._generatorFunction.call(this._receiver), this._receiver = this._generatorFunction = void 0, this._promiseFulfilled(void 0)
        }, l.prototype._continue = function(e) {
            var n = this._promise;
            if (e === h) return this._cleanup(), this._cancellationPhase ? n.cancel() : n._rejectCallback(e.e, !1);
            var r = e.value;
            if (e.done === !0) return this._cleanup(), this._cancellationPhase ? n.cancel() : n._resolveCallback(r);
            var o = i(r, this._promise);
            if (!(o instanceof t) && (o = a(o, this._yieldHandlers, this._promise), null === o)) return void this._promiseRejected(new c("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s", String(r)) + "From coroutine:\n" + this._stack.split("\n").slice(1, -7).join("\n")));
            o = o._target();
            var s = o._bitField;
            0 === (50397184 & s) ? (this._yieldedPromise = o, o._proxy(this, null)) : 0 !== (33554432 & s) ? t._async.invoke(this._promiseFulfilled, this, o._value()) : 0 !== (16777216 & s) ? t._async.invoke(this._promiseRejected, this, o._reason()) : this._promiseCancelled()
        }, t.coroutine = function(t, e) {
            if ("function" != typeof t) throw new c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");
            var n = Object(e).yieldHandler,
                r = l,
                i = (new Error).stack;
            return function() {
                var e = t.apply(this, arguments),
                    o = new r(void 0, void 0, n, i),
                    s = o.promise();
                return o._generator = e, o._promiseFulfilled(void 0), s
            }
        }, t.coroutine.addYieldHandler = function(t) {
            if ("function" != typeof t) throw new c("expecting a function but got " + f.classString(t));
            p.push(t)
        }, t.spawn = function(n) {
            if (s.deprecated("Promise.spawn()", "Promise.coroutine()"), "function" != typeof n) return e("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");
            var r = new l(n, this),
                i = r.promise();
            return r._run(t.spawn), i
        }
    }
}, function(t, e, n) {
    "use strict";
    t.exports = function(t) {
        function e(t, e) {
            var n = this;
            if (!o.isArray(t)) return r.call(n, t, e);
            var i = a(e).apply(n._boundValue(), [null].concat(t));
            i === l && s.throwLater(i.e)
        }

        function r(t, e) {
            var n = this,
                r = n._boundValue(),
                i = void 0 === t ? a(e).call(r, null) : a(e).call(r, null, t);
            i === l && s.throwLater(i.e)
        }

        function i(t, e) {
            var n = this;
            if (!t) {
                var r = new Error(t + "");
                r.cause = t, t = r
            }
            var i = a(e).call(n._boundValue(), t);
            i === l && s.throwLater(i.e)
        }
        var o = n(59),
            s = t._async,
            a = o.tryCatch,
            l = o.errorObj;
        t.prototype.asCallback = t.prototype.nodeify = function(t, n) {
            if ("function" == typeof t) {
                var o = r;
                void 0 !== n && Object(n).spread && (o = e), this._then(o, i, void 0, this, t)
            }
            return this
        }
    }
}, function(t, e, n) {
    "use strict";
    var r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
        return typeof t
    } : function(t) {
        return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
    };
    t.exports = function(t, e) {
        function i(t) {
            return !O.test(t)
        }

        function o(t) {
            try {
                return t.__isPromisified__ === !0
            } catch (t) {
                return !1
            }
        }

        function s(t, e, n) {
            var r = p.getDataPropertyOrDefault(t, e + n, E);
            return !!r && o(r)
        }

        function a(t, e, n) {
            for (var r = 0; r < t.length; r += 2) {
                var i = t[r];
                if (n.test(i))
                    for (var o = i.replace(n, ""), s = 0; s < t.length; s += 2)
                        if (t[s] === o) throw new y("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s", e))
            }
        }

        function l(t, e, n, r) {
            for (var i = p.inheritedDataKeys(t), l = [], u = 0; u < i.length; ++u) {
                var c = i[u],
                    f = t[c],
                    h = r === T || T(c, f, t);
                "function" != typeof f || o(f) || s(t, c, e) || !r(c, f, t, h) || l.push(c, f)
            }
            return a(l, e, n), l
        }

        function u(n, r, i, o, s, a) {
            function l() {
                var i = r;
                r === d && (i = this);
                var o = new t(e);
                o._captureStackTrace();
                var s = "string" == typeof c && this !== u ? this[c] : n,
                    l = g(o, a);
                try {
                    s.apply(i, _(arguments, l))
                } catch (t) {
                    o._rejectCallback(v(t), !0, !0)
                }
                return o._isFateSealed() || o._setAsyncGuaranteed(), o
            }
            var u = function() {
                    return this
                }(),
                c = n;
            return "string" == typeof c && (n = o), p.notEnumerableProp(l, "__isPromisified__", !0), l
        }

        function c(t, e, n, r, i) {
            for (var o = new RegExp(x(e) + "$"), s = l(t, e, o, n), a = 0, u = s.length; a < u; a += 2) {
                var c = s[a],
                    f = s[a + 1],
                    h = c + e;
                if (r === A) t[h] = A(c, d, c, f, e, i);
                else {
                    var g = r(f, function() {
                        return A(c, d, c, f, e, i)
                    });
                    p.notEnumerableProp(g, "__isPromisified__", !0), t[h] = g
                }
            }
            return p.toFastProperties(t), t
        }

        function f(t, e, n) {
            return A(t, e, void 0, t, null, n)
        }
        var h, d = {},
            p = n(59),
            g = n(71),
            _ = p.withAppended,
            v = p.maybeWrapAsError,
            b = p.canEvaluate,
            y = n(64).TypeError,
            m = "Async",
            E = {
                __isPromisified__: !0
            },
            S = ["arity", "length", "name", "arguments", "caller", "callee", "prototype", "__isPromisified__"],
            O = new RegExp("^(?:" + S.join("|") + ")$"),
            T = function(t) {
                return p.isIdentifier(t) && "_" !== t.charAt(0) && "constructor" !== t
            },
            x = function(t) {
                return t.replace(/([$])/, "\\$")
            },
            w = function(t) {
                for (var e = [t], n = Math.max(0, t - 1 - 3), r = t - 1; r >= n; --r) e.push(r);
                for (var r = t + 1; r <= 3; ++r) e.push(r);
                return e
            },
            C = function(t) {
                return p.filledRange(t, "_arg", "")
            },
            I = function(t) {
                return p.filledRange(Math.max(t, 3), "_arg", "")
            },
            R = function(t) {
                return "number" == typeof t.length ? Math.max(Math.min(t.length, 1024), 0) : 0
            };
        h = function(n, r, i, o, s, a) {
            function l(t) {
                var e, n = C(t).join(", "),
                    i = t > 0 ? ", " : "";
                return e = h ? "ret = callback.call(this, {{args}}, nodeback); break;\n" : void 0 === r ? "ret = callback({{args}}, nodeback); break;\n" : "ret = callback.call(receiver, {{args}}, nodeback); break;\n", e.replace("{{args}}", n).replace(", ", i)
            }

            function u() {
                for (var t = "", e = 0; e < f.length; ++e) t += "case " + f[e] + ":" + l(f[e]);
                return t += "                                                             \n\t        default:                                                             \n\t            var args = new Array(len + 1);                                   \n\t            var i = 0;                                                       \n\t            for (var i = 0; i < len; ++i) {                                  \n\t               args[i] = arguments[i];                                       \n\t            }                                                                \n\t            args[i] = nodeback;                                              \n\t            [CodeForCall]                                                    \n\t            break;                                                           \n\t        ".replace("[CodeForCall]", h ? "ret = callback.apply(this, args);\n" : "ret = callback.apply(receiver, args);\n")
            }
            var c = Math.max(0, R(o) - 1),
                f = w(c),
                h = "string" == typeof n || r === d,
                b = "string" == typeof n ? "this != null ? this['" + n + "'] : fn" : "fn",
                y = "'use strict';                                                \n\t        var ret = function (Parameters) {                                    \n\t            'use strict';                                                    \n\t            var len = arguments.length;                                      \n\t            var promise = new Promise(INTERNAL);                             \n\t            promise._captureStackTrace();                                    \n\t            var nodeback = nodebackForPromise(promise, " + a + ");   \n\t            var ret;                                                         \n\t            var callback = tryCatch([GetFunctionCode]);                      \n\t            switch(len) {                                                    \n\t                [CodeForSwitchCase]                                          \n\t            }                                                                \n\t            if (ret === errorObj) {                                          \n\t                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\n\t            }                                                                \n\t            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \n\t            return promise;                                                  \n\t        };                                                                   \n\t        notEnumerableProp(ret, '__isPromisified__', true);                   \n\t        return ret;                                                          \n\t    ".replace("[CodeForSwitchCase]", u()).replace("[GetFunctionCode]", b);
            return y = y.replace("Parameters", I(c)), new Function("Promise", "fn", "receiver", "withAppended", "maybeWrapAsError", "nodebackForPromise", "tryCatch", "errorObj", "notEnumerableProp", "INTERNAL", y)(t, o, r, _, v, g, p.tryCatch, p.errorObj, p.notEnumerableProp, e)
        };
        var A = b ? h : u;
        t.promisify = function(t, e) {
            if ("function" != typeof t) throw new y("expecting a function but got " + p.classString(t));
            if (o(t)) return t;
            e = Object(e);
            var n = void 0 === e.context ? d : e.context,
                r = !!e.multiArgs,
                s = f(t, n, r);
            return p.copyDescriptors(t, s, i), s
        }, t.promisifyAll = function(t, e) {
            if ("function" != typeof t && "object" !== ("undefined" == typeof t ? "undefined" : r(t))) throw new y("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");
            e = Object(e);
            var n = !!e.multiArgs,
                i = e.suffix;
            "string" != typeof i && (i = m);
            var o = e.filter;
            "function" != typeof o && (o = T);
            var s = e.promisifier;
            if ("function" != typeof s && (s = A), !p.isIdentifier(i)) throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");
            for (var a = p.inheritedDataKeys(t), l = 0; l < a.length; ++l) {
                var u = t[a[l]];
                "constructor" !== a[l] && p.isClass(u) && (c(u.prototype, i, o, s, n), c(u, i, o, s, n))
            }
            return c(t, i, o, s, n)
        }
    }
}, function(t, e, n) {
    "use strict";
    t.exports = function(t, e, r, i) {
        function o(t) {
            var e, n = !1;
            if (void 0 !== a && t instanceof a) e = f(t), n = !0;
            else {
                var r = c.keys(t),
                    i = r.length;
                e = new Array(2 * i);
                for (var o = 0; o < i; ++o) {
                    var s = r[o];
                    e[o] = t[s], e[o + i] = s
                }
            }
            this.constructor$(e), this._isMap = n, this._init$(void 0, n ? -6 : -3)
        }

        function s(e) {
            var n, s = r(e);
            return u(s) ? (n = s instanceof t ? s._then(t.props, void 0, void 0, void 0, void 0) : new o(s).promise(), s instanceof t && n._propagateFrom(s, 2), n) : i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")
        }
        var a, l = n(59),
            u = l.isObject,
            c = n(60);
        "function" == typeof Map && (a = Map);
        var f = function() {
                function t(t, r) {
                    this[e] = t, this[e + n] = r, e++
                }
                var e = 0,
                    n = 0;
                return function(r) {
                    n = r.size, e = 0;
                    var i = new Array(2 * r.size);
                    return r.forEach(t, i), i
                }
            }(),
            h = function(t) {
                for (var e = new a, n = t.length / 2 | 0, r = 0; r < n; ++r) {
                    var i = t[n + r],
                        o = t[r];
                    e.set(i, o)
                }
                return e
            };
        l.inherits(o, e), o.prototype._init = function() {}, o.prototype._promiseFulfilled = function(t, e) {
            this._values[e] = t;
            var n = ++this._totalResolved;
            if (n >= this._length) {
                var r;
                if (this._isMap) r = h(this._values);
                else {
                    r = {};
                    for (var i = this.length(), o = 0, s = this.length(); o < s; ++o) r[this._values[o + i]] = this._values[o]
                }
                return this._resolve(r), !0
            }
            return !1
        }, o.prototype.shouldCopyValues = function() {
            return !1
        }, o.prototype.getActualLength = function(t) {
            return t >> 1
        }, t.prototype.props = function() {
            return s(this)
        }, t.props = function(t) {
            return s(t)
        }
    }
}, function(t, e, n) {
    "use strict";
    t.exports = function(t, e, r, i) {
        function o(n, o) {
            var l = r(n);
            if (l instanceof t) return a(l);
            if (n = s.asArray(n), null === n) return i("expecting an array or an iterable object but got " + s.classString(n));
            var u = new t(e);
            void 0 !== o && u._propagateFrom(o, 3);
            for (var c = u._fulfill, f = u._reject, h = 0, d = n.length; h < d; ++h) {
                var p = n[h];
                (void 0 !== p || h in n) && t.cast(p)._then(c, f, void 0, u, null)
            }
            return u
        }
        var s = n(59),
            a = function(t) {
                return t.then(function(e) {
                    return o(e, t)
                })
            };
        t.race = function(t) {
            return o(t, void 0)
        }, t.prototype.race = function() {
            return o(this, void 0)
        }
    }
}, function(t, e, n) {
    "use strict";
    t.exports = function(t, e, r, i, o, s) {
        function a(e, n, r, i) {
            this.constructor$(e);
            var s = h();
            this._fn = null === s ? n : d.domainBind(s, n), void 0 !== r && (r = t.resolve(r), r._attachCancellationCallback(this)), this._initialValue = r, this._currentCancellable = null, i === o ? this._eachValues = Array(this._length) : 0 === i ? this._eachValues = null : this._eachValues = void 0, this._promise._captureStackTrace(), this._init$(void 0, -5)
        }

        function l(t, e) {
            this.isFulfilled() ? e._resolve(t) : e._reject(t)
        }

        function u(t, e, n, i) {
            if ("function" != typeof e) return r("expecting a function but got " + d.classString(e));
            var o = new a(t, e, n, i);
            return o.promise()
        }

        function c(e) {
            this.accum = e, this.array._gotAccum(e);
            var n = i(this.value, this.array._promise);
            return n instanceof t ? (this.array._currentCancellable = n, n._then(f, void 0, void 0, this, void 0)) : f.call(this, n)
        }

        function f(e) {
            var n = this.array,
                r = n._promise,
                i = p(n._fn);
            r._pushContext();
            var o;
            o = void 0 !== n._eachValues ? i.call(r._boundValue(), e, this.index, this.length) : i.call(r._boundValue(), this.accum, e, this.index, this.length), o instanceof t && (n._currentCancellable = o);
            var a = r._popContext();
            return s.checkForgottenReturns(o, a, void 0 !== n._eachValues ? "Promise.each" : "Promise.reduce", r), o
        }
        var h = t._getDomain,
            d = n(59),
            p = d.tryCatch;
        d.inherits(a, e), a.prototype._gotAccum = function(t) {
            void 0 !== this._eachValues && null !== this._eachValues && t !== o && this._eachValues.push(t)
        }, a.prototype._eachComplete = function(t) {
            return null !== this._eachValues && this._eachValues.push(t), this._eachValues
        }, a.prototype._init = function() {}, a.prototype._resolveEmptyArray = function() {
            this._resolve(void 0 !== this._eachValues ? this._eachValues : this._initialValue)
        }, a.prototype.shouldCopyValues = function() {
            return !1
        }, a.prototype._resolve = function(t) {
            this._promise._resolveCallback(t), this._values = null
        }, a.prototype._resultCancelled = function(e) {
            return e === this._initialValue ? this._cancel() : void(this._isResolved() || (this._resultCancelled$(), this._currentCancellable instanceof t && this._currentCancellable.cancel(), this._initialValue instanceof t && this._initialValue.cancel()))
        }, a.prototype._iterate = function(e) {
            this._values = e;
            var n, r, i = e.length;
            if (void 0 !== this._initialValue ? (n = this._initialValue, r = 0) : (n = t.resolve(e[0]), r = 1), this._currentCancellable = n, !n.isRejected())
                for (; r < i; ++r) {
                    var o = {
                        accum: null,
                        value: e[r],
                        index: r,
                        length: i,
                        array: this
                    };
                    n = n._then(c, void 0, void 0, o, void 0)
                }
            void 0 !== this._eachValues && (n = n._then(this._eachComplete, void 0, void 0, this, void 0)), n._then(l, l, void 0, n, this)
        }, t.prototype.reduce = function(t, e) {
            return u(this, t, e, null)
        }, t.reduce = function(t, e, n, r) {
            return u(t, e, n, r)
        }
    }
}, function(t, e, n) {
    "use strict";
    t.exports = function(t, e, r) {
        function i(t) {
            this.constructor$(t)
        }
        var o = t.PromiseInspection,
            s = n(59);
        s.inherits(i, e), i.prototype._promiseResolved = function(t, e) {
            this._values[t] = e;
            var n = ++this._totalResolved;
            return n >= this._length && (this._resolve(this._values), !0)
        }, i.prototype._promiseFulfilled = function(t, e) {
            var n = new o;
            return n._bitField = 33554432, n._settledValueField = t, this._promiseResolved(e, n)
        }, i.prototype._promiseRejected = function(t, e) {
            var n = new o;
            return n._bitField = 16777216, n._settledValueField = t, this._promiseResolved(e, n)
        }, t.settle = function(t) {
            return r.deprecated(".settle()", ".reflect()"), new i(t).promise()
        }, t.prototype.settle = function() {
            return t.settle(this)
        }
    }
}, function(t, e, n) {
    "use strict";
    t.exports = function(t, e, r) {
        function i(t) {
            this.constructor$(t), this._howMany = 0, this._unwrap = !1, this._initialized = !1
        }

        function o(t, e) {
            if ((0 | e) !== e || e < 0) return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");
            var n = new i(t),
                o = n.promise();
            return n.setHowMany(e), n.init(), o
        }
        var s = n(59),
            a = n(64).RangeError,
            l = n(64).AggregateError,
            u = s.isArray,
            c = {};
        s.inherits(i, e), i.prototype._init = function() {
            if (this._initialized) {
                if (0 === this._howMany) return void this._resolve([]);
                this._init$(void 0, -5);
                var t = u(this._values);
                !this._isResolved() && t && this._howMany > this._canPossiblyFulfill() && this._reject(this._getRangeError(this.length()))
            }
        }, i.prototype.init = function() {
            this._initialized = !0, this._init()
        }, i.prototype.setUnwrap = function() {
            this._unwrap = !0
        }, i.prototype.howMany = function() {
            return this._howMany
        }, i.prototype.setHowMany = function(t) {
            this._howMany = t
        }, i.prototype._promiseFulfilled = function(t) {
            return this._addFulfilled(t), this._fulfilled() === this.howMany() && (this._values.length = this.howMany(), 1 === this.howMany() && this._unwrap ? this._resolve(this._values[0]) : this._resolve(this._values), !0)
        }, i.prototype._promiseRejected = function(t) {
            return this._addRejected(t), this._checkOutcome()
        }, i.prototype._promiseCancelled = function() {
            return this._values instanceof t || null == this._values ? this._cancel() : (this._addRejected(c), this._checkOutcome())
        }, i.prototype._checkOutcome = function() {
            if (this.howMany() > this._canPossiblyFulfill()) {
                for (var t = new l, e = this.length(); e < this._values.length; ++e) this._values[e] !== c && t.push(this._values[e]);
                return t.length > 0 ? this._reject(t) : this._cancel(), !0
            }
            return !1
        }, i.prototype._fulfilled = function() {
            return this._totalResolved
        }, i.prototype._rejected = function() {
            return this._values.length - this.length()
        }, i.prototype._addRejected = function(t) {
            this._values.push(t)
        }, i.prototype._addFulfilled = function(t) {
            this._values[this._totalResolved++] = t
        }, i.prototype._canPossiblyFulfill = function() {
            return this.length() - this._rejected()
        }, i.prototype._getRangeError = function(t) {
            var e = "Input array must contain at least " + this._howMany + " items but contains only " + t + " items";
            return new a(e)
        }, i.prototype._resolveEmptyArray = function() {
            this._reject(this._getRangeError(0))
        }, t.some = function(t, e) {
            return o(t, e)
        }, t.prototype.some = function(t) {
            return o(this, t)
        }, t._SomePromiseArray = i
    }
}, function(t, e) {
    "use strict";
    t.exports = function(t, e) {
        var n = t.map;
        t.prototype.filter = function(t, r) {
            return n(this, t, r, e)
        }, t.filter = function(t, r, i) {
            return n(t, r, i, e)
        }
    }
}, function(t, e) {
    "use strict";
    t.exports = function(t, e) {
        function n() {
            return o(this)
        }

        function r(t, n) {
            return i(t, n, e, e)
        }
        var i = t.reduce,
            o = t.all;
        t.prototype.each = function(t) {
            return i(this, t, e, 0)._then(n, void 0, void 0, this, void 0)
        }, t.prototype.mapSeries = function(t) {
            return i(this, t, e, e)
        }, t.each = function(t, r) {
            return i(t, r, e, 0)._then(n, void 0, void 0, t, void 0)
        }, t.mapSeries = r
    }
}, function(t, e) {
    "use strict";
    t.exports = function(t) {
        function e(t) {
            var e = new n(t),
                r = e.promise();
            return e.setHowMany(1), e.setUnwrap(), e.init(), r
        }
        var n = t._SomePromiseArray;
        t.any = function(t) {
            return e(t)
        }, t.prototype.any = function() {
            return e(this)
        }
    }
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var o = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        s = n(6),
        a = r(s),
        l = n(94),
        u = r(l),
        c = n(106),
        f = r(c),
        h = function() {
            function t() {
                i(this, t)
            }
            return o(t, [{
                key: "navigateToLoadingPage",
                value: function() {
                    a.default.renderComponent(u.default)
                }
            }, {
                key: "navigateToInsidePage",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
                    t ? a.default.update(a.default.component.children.router, {
                        currentRoute: f.default.INSIDE
                    }) : a.default.update(a.default.component, {
                        isLoadingApp: !1
                    }), a.default.component.children.cabinetCost.show(), a.default.component.children.doorsCost.hide(), a.default.component.children.totalCost.hide()
                }
            }, {
                key: "navigateToDoorsPage",
                value: function() {
                    a.default.component.children.cabinetCost.show(!1), a.default.component.children.doorsCost.show(), a.default.component.children.totalCost.hide(), a.default.update(a.default.component.children.router, {
                        currentRoute: f.default.DOORS
                    })
                }
            }, {
                key: "navigateToBidPage",
                value: function() {
                    a.default.component.children.cabinetCost.show(!1), a.default.component.children.doorsCost.show(!1), a.default.component.children.totalCost.show(), a.default.update(a.default.component.children.router, {
                        currentRoute: f.default.BID
                    })
                }
            }]), t
        }(),
        d = new h;
    e.default = d
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function o(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function s(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var a = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        l = n(7),
        u = r(l),
        c = n(95),
        f = r(c);
    n(97), n(101);
    var h = n(103),
        d = r(h),
        p = n(262),
        g = r(p),
        _ = n(265),
        v = r(_),
        b = n(268),
        y = r(b),
        m = n(271),
        E = r(m),
        S = n(274),
        O = r(S),
        T = n(277),
        x = r(T),
        w = n(258),
        C = r(w),
        I = function(t) {
            function e() {
                var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                i(this, e);
                var n = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return n.isLoadingApp = t.isLoadingApp || !0, n
            }
            return s(e, t), a(e, [{
                key: "preRender",
                value: function(t) {
                    this.isLoadingApp = t ? t.isLoadingApp : this.isLoadingApp, this.isLoadingApp ? (this.children.modalContainer = new v.default, this.children.loading = new y.default) : (this.children.header = new g.default, this.children.router = new d.default, this.children.canvasContainer = new C.default, this.children.modalContainer = new v.default, this.children.cabinetCost = new E.default, this.children.doorsCost = new O.default, this.children.totalCost = new x.default)
                }
            }, {
                key: "getTemplate",
                value: function() {
                    return '\n            <div class="app-constructor" id="' + this.id + '">\n                ' + u.default.map(this.children, function(t) {
                        return t.getTemplate()
                    }).join("") + "\n            </div>\n        "
                }
            }, {
                key: "postRender",
                value: function() {
                    this.appContainer = document.getElementById(this.id)
                }
            }]), e
        }(f.default);
    e.default = I
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var o = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        s = n(96),
        a = r(s),
        l = function() {
            function t() {
                i(this, t), this.children = {}, this.parent = null, this.template = "", this.id = (0, a.default)()
            }
            return o(t, [{
                key: "preRender",
                value: function() {
                    return null
                }
            }, {
                key: "getTemplate",
                value: function() {
                    return this.template
                }
            }, {
                key: "postRender",
                value: function() {
                    return null
                }
            }, {
                key: "unload",
                value: function() {
                    this.children = {}, this.template = ""
                }
            }]), t
        }();
    e.default = l
}, function(t, e, n) {
    (function(t, e) {
        "use strict";

        function n() {
            var t = Date.now(),
                e = n.last || t;
            return n.last = t > e ? t : e + 1
        }
        var r = t && t.pid ? t.pid.toString(36) : "",
            i = null,
            o = i ? parseInt(i.replace(/\:|\D+/gi, "")).toString(36) : "";
        e.exports = function(t) {
            return (t || "") + o + r + n().toString(36)
        }, e.exports.process = function(t) {
            return (t || "") + r + n().toString(36)
        }, e.exports.time = function(t) {
            return (t || "") + n().toString(36)
        }
    }).call(e, n(16), n(8)(t))
}, function(t, e, n) {
    var r = n(98);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, '.app-constructor input[type=number]::-webkit-inner-spin-button,.app-constructor input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;margin:0}.app-constructor input[type=number]{-moz-appearance:textfield}a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}.app-constructor ol,.app-constructor ul{list-style:none;margin:0;padding:0}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}.app-constructor table{border-collapse:collapse;border-spacing:0}.app-constructor button,.app-constructor input,.app-constructor textarea{outline:none}', ""]);
}, function(t, e) {
    "use strict";
    t.exports = function() {
        var t = [];
        return t.toString = function() {
            for (var t = [], e = 0; e < this.length; e++) {
                var n = this[e];
                n[2] ? t.push("@media " + n[2] + "{" + n[1] + "}") : t.push(n[1])
            }
            return t.join("")
        }, t.i = function(e, n) {
            "string" == typeof e && (e = [
                [null, e, ""]
            ]);
            for (var r = {}, i = 0; i < this.length; i++) {
                var o = this[i][0];
                "number" == typeof o && (r[o] = !0)
            }
            for (i = 0; i < e.length; i++) {
                var s = e[i];
                "number" == typeof s[0] && r[s[0]] || (n && !s[2] ? s[2] = n : n && (s[2] = "(" + s[2] + ") and (" + n + ")"), t.push(s))
            }
        }, t
    }
}, function(t, e, n) {
    function r(t, e) {
        for (var n = 0; n < t.length; n++) {
            var r = t[n],
                i = d[r.id];
            if (i) {
                i.refs++;
                for (var o = 0; o < i.parts.length; o++) i.parts[o](r.parts[o]);
                for (; o < r.parts.length; o++) i.parts.push(u(r.parts[o], e))
            } else {
                for (var s = [], o = 0; o < r.parts.length; o++) s.push(u(r.parts[o], e));
                d[r.id] = {
                    id: r.id,
                    refs: 1,
                    parts: s
                }
            }
        }
    }

    function i(t) {
        for (var e = [], n = {}, r = 0; r < t.length; r++) {
            var i = t[r],
                o = i[0],
                s = i[1],
                a = i[2],
                l = i[3],
                u = {
                    css: s,
                    media: a,
                    sourceMap: l
                };
            n[o] ? n[o].parts.push(u) : e.push(n[o] = {
                id: o,
                parts: [u]
            })
        }
        return e
    }

    function o(t, e) {
        var n = _(),
            r = y[y.length - 1];
        if ("top" === t.insertAt) r ? r.nextSibling ? n.insertBefore(e, r.nextSibling) : n.appendChild(e) : n.insertBefore(e, n.firstChild), y.push(e);
        else {
            if ("bottom" !== t.insertAt) throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");
            n.appendChild(e)
        }
    }

    function s(t) {
        t.parentNode.removeChild(t);
        var e = y.indexOf(t);
        e >= 0 && y.splice(e, 1)
    }

    function a(t) {
        var e = document.createElement("style");
        return e.type = "text/css", o(t, e), e
    }

    function l(t) {
        var e = document.createElement("link");
        return e.rel = "stylesheet", o(t, e), e
    }

    function u(t, e) {
        var n, r, i;
        if (e.singleton) {
            var o = b++;
            n = v || (v = a(e)), r = c.bind(null, n, o, !1), i = c.bind(null, n, o, !0)
        } else t.sourceMap && "function" == typeof URL && "function" == typeof URL.createObjectURL && "function" == typeof URL.revokeObjectURL && "function" == typeof Blob && "function" == typeof btoa ? (n = l(e), r = h.bind(null, n), i = function() {
            s(n), n.href && URL.revokeObjectURL(n.href)
        }) : (n = a(e), r = f.bind(null, n), i = function() {
            s(n)
        });
        return r(t),
            function(e) {
                if (e) {
                    if (e.css === t.css && e.media === t.media && e.sourceMap === t.sourceMap) return;
                    r(t = e)
                } else i()
            }
    }

    function c(t, e, n, r) {
        var i = n ? "" : r.css;
        if (t.styleSheet) t.styleSheet.cssText = m(e, i);
        else {
            var o = document.createTextNode(i),
                s = t.childNodes;
            s[e] && t.removeChild(s[e]), s.length ? t.insertBefore(o, s[e]) : t.appendChild(o)
        }
    }

    function f(t, e) {
        var n = e.css,
            r = e.media;
        if (r && t.setAttribute("media", r), t.styleSheet) t.styleSheet.cssText = n;
        else {
            for (; t.firstChild;) t.removeChild(t.firstChild);
            t.appendChild(document.createTextNode(n))
        }
    }

    function h(t, e) {
        var n = e.css,
            r = e.sourceMap;
        r && (n += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(r)))) + " */");
        var i = new Blob([n], {
                type: "text/css"
            }),
            o = t.href;
        t.href = URL.createObjectURL(i), o && URL.revokeObjectURL(o)
    }
    var d = {},
        p = function(t) {
            var e;
            return function() {
                return "undefined" == typeof e && (e = t.apply(this, arguments)), e
            }
        },
        g = p(function() {
            return /msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())
        }),
        _ = p(function() {
            return document.head || document.getElementsByTagName("head")[0]
        }),
        v = null,
        b = 0,
        y = [];
    t.exports = function(t, e) {
        e = e || {}, "undefined" == typeof e.singleton && (e.singleton = g()), "undefined" == typeof e.insertAt && (e.insertAt = "bottom");
        var n = i(t);
        return r(n, e),
            function(t) {
                for (var o = [], s = 0; s < n.length; s++) {
                    var a = n[s],
                        l = d[a.id];
                    l.refs--, o.push(l)
                }
                if (t) {
                    var u = i(t);
                    r(u, e)
                }
                for (var s = 0; s < o.length; s++) {
                    var l = o[s];
                    if (0 === l.refs) {
                        for (var c = 0; c < l.parts.length; c++) l.parts[c]();
                        delete d[l.id]
                    }
                }
            }
    };
    var m = function() {
        var t = [];
        return function(e, n) {
            return t[e] = n, t.filter(Boolean).join("\n")
        }
    }()
}, function(t, e, n) {
    var r = n(102);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".app-constructor{position:relative;width:965px;height:642px;margin:0 auto 40px;font-family:Verdana;box-sizing:border-box;border:2px solid #00b0ff}", ""])
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function o(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function s(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var a = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        l = n(95),
        u = r(l);
    n(104);
    var c = n(106),
        f = r(c),
        h = n(107),
        d = r(h),
        p = n(204),
        g = r(p),
        v = n(223),
        b = r(v),
        y = n(255),
        m = r(y),
        E = n(258),
        S = (r(E), function(t) {
            function e() {
                var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                i(this, e);
                var n = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
                return n.currentRoute = t.currentRoute || f.default.INSIDE, n
            }
            return s(e, t), a(e, [{
                key: "preRender",
                value: function(t) {
                    switch (this.currentRoute = t ? t.currentRoute : this.currentRoute, this.children.asidePanel = new m.default({
                        currentRoute: this.currentRoute
                    }), this.currentRoute) {
                        case f.default.INSIDE:
                            this.children.currentPage = new d.default;
                            break;
                        case f.default.DOORS:
                            this.children.currentPage = new g.default;
                            break;
                        case f.default.BID:
                            this.children.currentPage = new b.default
                    }
                }
            }, {
                key: "getTemplate",
                value: function() {
                    return '\n            <div class="constructor-main" id="' + this.id + '">\n                ' + _.map(this.children, function(t) {
                        return t.getTemplate()
                    }).join("") + "\n            </div>\n        "
                }
            }]), e
        }(u.default));
    e.default = S
}, function(t, e, n) {
    var r = n(105);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".constructor-main{height:560px;border-radius:5px;box-sizing:border-box;overflow:hidden}", ""])
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.default = {
        LOADING: "LOADING_PAGE",
        INSIDE: "INSIDE_PAGE",
        DOORS: "DOORS_PAGE",
        BID: "BID_PAGE"
    }
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function o(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function s(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var a = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        l = n(95),
        u = r(l),
        c = n(108),
        f = r(c);
    n(202);
    var h = function(t) {
        function e(t) {
            i(this, e);
            var n = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
            return n.children.toolbox = new f.default, n
        }
        return s(e, t), a(e, [{
            key: "getTemplate",
            value: function() {
                return '\n            <div class="constructor-inside" >\n                ' + this.children.toolbox.getTemplate() + "\n            </div>\n        "
            }
        }]), e
    }(u.default);
    e.default = h
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = n(95),
        c = i(u),
        f = n(109),
        h = i(f),
        d = n(2);
    i(d);
    n(110);
    var p = n(112),
        g = i(p),
        _ = n(115),
        v = i(_),
        b = n(119),
        y = i(b),
        m = n(123),
        E = i(m),
        S = n(127),
        O = i(S),
        T = n(134),
        x = r(T),
        w = n(135),
        C = i(w),
        I = n(183),
        R = i(I),
        A = n(136),
        P = i(A),
        L = function(t) {
            function e(t) {
                o(this, e);
                var n = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
                n.onCreateCabinetButtonClick = function(t) {
                    R.default.openTwoOptionsModal({
                        title: h.default.KEYS.CREATE_CABINET_TITLE,
                        subtitle: h.default.KEYS.CREATE_CABINET_SUBTITLE,
                        callback: C.default.createCabinet
                    })
                }, n.onWidthInputChange = function(t, e) {
                    C.default.setValue("width", e)
                }, n.onHeightInputChange = function(t, e) {
                    C.default.setValue("height", e)
                }, n.onDepthInputChange = function(t, e) {
                    C.default.setValue("depth", e)
                }, n.onBottomChange = function(t, e) {
                    C.default.setValue("isShowBottomShelf", e)
                }, n.onCeilingChange = function(t, e) {
                    C.default.setValue("isShowCeiling", e)
                }, n.onLeftShelvesChange = function(t, e) {
                    C.default.setValue("isShowLeftShelve", e), e ? n.children.leftStandCheckbox.setValue(e) : n.children.leftRearCheckbox.setValue(e), n.children.leftRearCheckbox.setAvailable(e)
                }, n.onLeftRearChange = function(t, e) {
                    C.default.setValue("isShowLeftRear", e)
                }, n.onRightRearChange = function(t, e) {
                    C.default.setValue("isShowRightRear", e)
                }, n.onLeftShelvesInputChange = function(t, e) {
                    C.default.setValue("leftShelf", e)
                }, n.onRightShelvesChange = function(t, e) {
                    C.default.setValue("isShowRightShelve", e), e ? n.children.rightStandCheckbox.setValue(e) : n.children.rightRearCheckbox.setValue(e), n.children.rightRearCheckbox.setAvailable(e)
                }, n.onRightShelvesInputChange = function(t, e) {
                    C.default.setValue("rightShelf", e)
                }, n.onRearChange = function(t, e) {
                    C.default.setValue("isShowRear", e)
                }, n.onLeftStandChange = function(t, e) {
                    C.default.setValue("isShowLeftStand", e), e || (n.children.leftShelvesCheckbox.setValue(e), n.children.leftRearCheckbox.setValue(e), n.children.leftRearCheckbox.setAvailable(!1))
                }, n.onRightStandChange = function(t, e) {
                    C.default.setValue("isShowRightStand", e), e || (n.children.rightShelvesCheckbox.setValue(e), n.children.rightRearCheckbox.setValue(e), n.children.rightRearCheckbox.setAvailable(!1))
                }, n.onShelfColorChange = function(t, e) {
                    C.default.setColorValue(e)
                };
                var r = P.default.getOptions(),
                    i = r.widthChange,
                    a = r.heightChange,
                    l = r.depthChange,
                    u = r.shelvesChange,
                    c = r.cabinetAvailableColors;
                r.defaultCabinetColors;
                return n.children.createCabinetButton = new g.default({
                    label: h.default.KEYS.INSIDE_CREATE_CABINET,
                    handler: n.onCreateCabinetButtonClick,
                    className: x.CREATE_CABINET_CLASS
                }), n.children.widthInput = new v.default({
                    label: h.default.KEYS.CHANGE_WIDTH_INPUT_LABEL,
                    handler: n.onWidthInputChange,
                    className: x.WIDTH_CHANGE_CLASS,
                    min: i.min,
                    max: i.max,
                    step: i.step,
                    defaultValue: P.default.getValue("width")
                }), n.children.heightInput = new v.default({
                    label: h.default.KEYS.CHANGE_HEIGHT_INPUT_LABEL,
                    handler: n.onHeightInputChange,
                    className: x.HEIGHT_CHANGE_CLASS,
                    min: a.min,
                    max: a.max,
                    step: a.step,
                    defaultValue: P.default.getValue("height")
                }), n.children.depthInput = new v.default({
                    label: h.default.KEYS.CHANGE_DEPTH_INPUT_LABEL,
                    handler: n.onDepthInputChange,
                    className: x.DEPTH_CHANGE_CLASS,
                    min: l.min,
                    max: l.max,
                    step: l.step,
                    defaultValue: P.default.getValue("depth")
                }), n.children.bottomCheckbox = new y.default({
                    label: h.default.KEYS.BOTTOM_INPUT_LABEL,
                    handler: n.onBottomChange,
                    className: x.BOTTOM_CHANGE_CLASS,
                    defaultValue: P.default.getValue("isShowBottomShelf")
                }), n.children.ceilingCheckbox = new y.default({
                    label: h.default.KEYS.CEILING_INPUT_LABEL,
                    handler: n.onCeilingChange,
                    className: x.CEILING_CHANGE_CLASS,
                    defaultValue: P.default.getValue("isShowCeiling")
                }), n.children.rearCheckbox = new y.default({
                    label: h.default.KEYS.REAR_CHECKBOX_LABEL,
                    handler: n.onRearChange,
                    className: x.REAR_CHANGE_CLASS,
                    defaultValue: P.default.getValue("isShowRear")
                }), n.children.leftShelvesCheckbox = new y.default({
                    label: h.default.KEYS.LEFT_SHELVES_CHECKBOX_LABEL,
                    handler: n.onLeftShelvesChange,
                    className: x.LEFT_SHELVES_CHANGE_CLASS,
                    defaultValue: P.default.getValue("isShowLeftShelve")
                }), n.children.leftRearCheckbox = new y.default({
                    label: h.default.KEYS.LEFT_REAR_CHECKBOX_LABEL,
                    handler: n.onLeftRearChange,
                    className: x.LEFT_REAR_CHANGE_CLASS,
                    defaultValue: P.default.getValue("isShowLeftRear")
                }), n.children.leftShelvesInput = new v.default({
                    label: "",
                    handler: n.onLeftShelvesInputChange,
                    className: x.SHELVES_INPUT_CLASS,
                    min: u.min,
                    max: u.max,
                    step: u.step,
                    defaultValue: P.default.getValue("leftShelf")
                }), n.children.rightShelvesCheckbox = new y.default({
                    label: h.default.KEYS.RIGHT_SHELVES_CHECKBOX_LABEL,
                    handler: n.onRightShelvesChange,
                    className: x.RIGHT_SHELVES_CHANGE_CLASS,
                    defaultValue: P.default.getValue("isShowRightShelve")
                }), n.children.rightRearCheckbox = new y.default({
                    label: h.default.KEYS.RIGHT_REAR_CHECKBOX_LABEL,
                    handler: n.onRightRearChange,
                    className: x.RIGHT_REAR_CHANGE_CLASS
                }), n.children.rightShelvesInput = new v.default({
                    label: "",
                    handler: n.onRightShelvesInputChange,
                    className: x.SHELVES_INPUT_CLASS,
                    min: u.min,
                    max: u.max,
                    step: u.step,
                    defaultValue: P.default.getValue("rightShelf")
                }), n.children.leftStandCheckbox = new y.default({
                    label: h.default.KEYS.LEFT_STAND_CHECKBOX_LABEL,
                    handler: n.onLeftStandChange,
                    className: x.LEFT_STAND_CHANGE_CLASS,
                    defaultValue: P.default.getValue("isShowLeftStand")
                }), n.children.rightStandCheckbox = new y.default({
                    label: h.default.KEYS.RIGHT_STAND_CHECKBOX_LABEL,
                    handler: n.onRightStandChange,
                    className: x.RIGHT_STAND_CHANGE_CLASS,
                    defaultValue: P.default.getValue("isShowRightStand")
                }), n.children.colorPicker = new E.default({
                    label: h.default.KEYS.SHELF_COLOR_PICKER_LABEL,
                    handler: n.onShelfColorChange,
                    className: x.SHELF_COLOR_PICKER_CLASS,
                    options: c,
                    defaultValue: P.default.getValue("cabinetColor").color
                }), n.children.collectionItems = new O.default({
                    items: P.default.getCollectionItems()
                }), n
            }
            return a(e, t), l(e, [{
                key: "getTemplate",
                value: function() {
                    return '\n            <div class="constructor-toolbox">\n                <div class="constructor-toolbox-instruments">\n                    <div class="constructor-toolbox-row">\n                        ' + this.children.widthInput.getTemplate() + "\n                        " + this.children.heightInput.getTemplate() + "\n                        " + this.children.depthInput.getTemplate() + "\n                        " + this.children.bottomCheckbox.getTemplate() + "\n                        " + this.children.ceilingCheckbox.getTemplate() + "\n                        " + this.children.rearCheckbox.getTemplate() + '\n                    </div>\n                    <div class="constructor-toolbox-row">\n                        ' + this.children.leftStandCheckbox.getTemplate() + "\n                        " + this.children.leftShelvesCheckbox.getTemplate() + "\n                        " + this.children.leftRearCheckbox.getTemplate() + "\n                        " + this.children.leftShelvesInput.getTemplate() + "\n                        " + this.children.rightStandCheckbox.getTemplate() + "\n                        " + this.children.rightShelvesCheckbox.getTemplate() + "\n                        " + this.children.rightRearCheckbox.getTemplate() + "\n                        " + this.children.rightShelvesInput.getTemplate() + "\n                        " + this.children.colorPicker.getTemplate() + "\n                    </div>\n                </div>\n                " + this.children.collectionItems.getTemplate() + "\n                " + this.children.createCabinetButton.getTemplate() + '\n                <div class="inside-toolbox-collection-label">' + h.default.KEYS.DRAG_CABINET_ITEMS + "</div>\n            </div>\n        "
                }
            }]), e
        }(c.default);
    e.default = L
}, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(5),
        i = {
            init: function(t, e) {
                this.KEYS = e.lang[t === r.ENGLISH_LANG ? r.ENGLISH_LANG : r.RUSSIAN_LANG]
            }
        };
    e.default = i
}, function(t, e, n) {
    var r = n(111);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".constructor-toolbox{height:80px;box-sizing:border-box;overflow:visible;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.constructor-toolbox-instruments{width:650px;display:inline-block;margin-left:20px;vertical-align:top}.constructor-toolbox-row{height:27px;display:flex;justify-content:space-between}.constructor-toolbox-row:first-child{margin-bottom:20px}.inside-create-cabinet{width:150px;height:35px;margin:13px 0 0 18px;position:absolute;left:0;top:158px;z-index:2}.constructor-toolbox-row .shared-color-picker-options{top:151px;left:603px}.constructor-toolbox .constructor-shared-collection{margin-left:40px}", ""])
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function o(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function s(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var a = function() {
        function t(t, e) {
            for (var n = 0; n < e.length; n++) {
                var r = e[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
            }
        }
        return function(e, n, r) {
            return n && t(e.prototype, n), r && t(e, r), e
        }
    }();
    n(113);
    var l = n(95),
        u = r(l),
        c = function(t) {
            function e(t) {
                var n = t.label,
                    r = t.handler,
                    s = t.className;
                i(this, e);
                var a = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return a.label = n, a.handler = r, a.className = s, a
            }
            return s(e, t), a(e, [{
                key: "getTemplate",
                value: function() {
                    return '\n            <button class="constructor-shared-button ' + this.className + '" id="' + this.id + '">\n                ' + this.label + "\n            </button>\n        "
                }
            }, {
                key: "postRender",
                value: function() {
                    document.getElementById(this.id).addEventListener("click", this.handler)
                }
            }]), e
        }(u.default);
    e.default = c
}, function(t, e, n) {
    var r = n(114);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".constructor-shared-button{background-color:#00b0ff;color:#fff;text-align:center;font-size:12px;font-weight:700;cursor:pointer;border:none}", ""])
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = n(96),
        c = i(u);
    n(116);
    var f = n(95),
        h = i(f),
        d = n(2),
        p = i(d),
        g = n(118),
        _ = r(g),
        v = n(3),
        b = n(5),
        y = function(t) {
            function e(t) {
                var n = t.label,
                    r = t.handler,
                    i = t.className,
                    a = t.min,
                    l = void 0 === a ? -1 : a,
                    u = t.max,
                    f = void 0 === u ? 9999 : u,
                    h = t.resolver,
                    d = void 0 === h ? function() {
                        return !0
                    } : h,
                    g = t.step,
                    v = void 0 === g ? 1 : g,
                    b = t.defaultValue;
                o(this, e);
                var y = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return y.onArrowClick = function(t, e) {
                    var n = ~~y.node.value,
                        r = void 0;
                    r = t === _.ARROW_DIRECTIONS.UP ? Math.min(n + y.step, y.max) : Math.max(n - y.step, y.min), y.resolver(n, r) ? (y.node.value = r, y.handler(e, r)) : p.default.debug("InputNumber.onArrowClick: prevent update by resolver")
                }, y.onKeyUp = function(t) {
                    var e = ~~y.node.value,
                        n = Math.min(Math.max(e, y.min), y.max);
                    y.resolver(e, n) ? y.handler(t, n) : p.default.debug("InputNumber.onKeyUp: prevent notification by resolver")
                }, y.onChange = function(t) {
                    var e = ~~y.node.value,
                        n = e;
                    e < y.min ? n = y.min : e > y.max && (n = y.max), y.resolver(e, n) ? (y.node.value = n, y.handler(t, n)) : p.default.debug("InputNumber.onChange: prevent update by resolver")
                }, y.label = n, y.handler = r, y.className = i, y.min = l, y.max = f, y.step = v, y.defaultValue = b, y.resolver = d, y.topArrowId = (0, c.default)(), y.downArrowId = (0, c.default)(), y
            }
            return a(e, t), l(e, [{
                key: "getTemplate",
                value: function() {
                    return '\n            <div class="constructor-shared-input-container ' + this.className + '"">\n            ' + (this.label ? '<label class="constructor-shared-input-label">' + this.label + "</label>" : "") + '\n                <input class="shared-input-number" type="number" min="' + this.min + '" max="' + this.max + '" step="' + this.step + '" id="' + this.id + '" value="' + this.defaultValue + '" >\n                <div class="input-arrows-container">\n                    <div class="input-arrow arrow-top" id="' + this.topArrowId + '"></div>\n                    <div class="input-arrow arrow-down" id="' + this.downArrowId + '"></div>\n                </div>\n            </div>\n        '
                }
            }, {
                key: "postRender",
                value: function() {
                    this.node = document.getElementById(this.id), this.node.addEventListener("change", this.onChange), this.node.addEventListener("keyup", this.onKeyUp), this.topArrow = document.getElementById(this.topArrowId), this.topArrow.addEventListener("click", this.onArrowClick.bind(this, _.ARROW_DIRECTIONS.UP)), this.topArrow.style.backgroundImage = 'url("' + v.PRODUCTION_SERVER_CONFIG.URL + "/" + b.CONFIG_RESOURCES_PATH + "/" + _.TOP_ARROW_PATH + '")', this.downArrow = document.getElementById(this.downArrowId), this.downArrow.addEventListener("click", this.onArrowClick.bind(this, _.ARROW_DIRECTIONS.DOWN)), this.downArrow.style.backgroundImage = 'url("' + v.PRODUCTION_SERVER_CONFIG.URL + "/" + b.CONFIG_RESOURCES_PATH + "/" + _.DOWN_ARROW_PATH + '")'
                }
            }]), e
        }(h.default);
    e.default = y
}, function(t, e, n) {
    var r = n(117);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".constructor-shared-input-container{height:100%;display:flex;align-items:center}.constructor-shared-input-label{font-size:12px;margin-right:5px;color:#000}.input-arrows-container{display:inline-block}.shared-input-number{height:25px;width:46px;text-align:center;font-size:12px;color:#000;border-radius:1px}.input-arrow,.shared-input-number{box-sizing:border-box;border:1px solid #ccc}.input-arrow{background-size:8px 5px;background-repeat:no-repeat;background-position:50%;width:22px;height:13px;cursor:pointer;margin-left:-1px}.input-arrow:hover{background-color:#eee}.arrow-top{border-top-right-radius:1px;margin-bottom:-1px}.arrow-down{border-bottom-right-radius:1px}", ""])
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    e.ARROW_DIRECTIONS = {
        UP: "UP",
        DOWN: "DOWN"
    }, e.TOP_ARROW_PATH = "images/arrows/up.png", e.DOWN_ARROW_PATH = "images/arrows/down.png"
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function o(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function s(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var a = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        l = n(96),
        u = r(l);
    n(120);
    var c = n(95),
        f = r(c),
        h = n(7),
        d = (r(h), n(122)),
        p = n(3),
        g = n(5),
        _ = function(t) {
            function e(t) {
                var n = t.label,
                    r = t.handler,
                    s = t.className,
                    a = t.defaultValue,
                    l = void 0 === a || a;
                i(this, e);
                var c = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return c.onChange = function(t) {
                    var e = c.checkbox.checked;
                    e ? c.labelEl.style.backgroundImage = c.labelImagePath : c.labelEl.style.backgroundImage = "", c.handler(t, e)
                }, c.label = n, c.handler = r, c.className = s, c.defaultValue = l, c.labelImagePath = 'url("' + p.PRODUCTION_SERVER_CONFIG.URL + "/" + g.CONFIG_RESOURCES_PATH + "/" + d.CHECKBOX_IMAGE_PATH + '")', c.labelId = (0, u.default)(), c.inputId = (0, u.default)(), c
            }
            return s(e, t), a(e, [{
                key: "setAvailable",
                value: function(t) {
                    this.checkbox.disabled = !t
                }
            }, {
                key: "setValue",
                value: function(t) {
                    document.getElementById(this.inputId).checked = !!t, this.onChange()
                }
            }, {
                key: "getTemplate",
                value: function() {
                    return '\n            <div id="' + this.id + '" class="constructor-shared-checkbox-container ' + this.className + '">\n                <input class="shared-checkbox" type="checkbox" ' + (this.defaultValue ? "checked" : "") + ' id="' + this.inputId + '">\n                <label class="shared-checkbox-label" for="' + this.inputId + '" id="' + this.labelId + '"></label>\n                <label class="constructor-shared-checkbox-label">' + this.label + "</label>\n            </div>\n        "
                }
            }, {
                key: "postRender",
                value: function() {
                    this.checkbox = document.getElementById(this.inputId), this.checkbox.addEventListener("change", this.onChange), this.labelEl = document.getElementById(this.labelId), this.defaultValue && (this.labelEl.style.backgroundImage = this.labelImagePath)
                }
            }]), e
        }(f.default);
    e.default = _
}, function(t, e, n) {
    var r = n(121);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".constructor-shared-checkbox-container{display:inline-flex;align-items:center;height:100%}.constructor-shared-checkbox-label{font-size:12px;color:#000;line-height:1;margin-left:5px;max-width:43px}.shared-checkbox{display:none}.shared-checkbox-label{width:16px;min-width:16px;max-width:16px;height:16px;box-sizing:border-box;border:1px solid #ccc;border-radius:1px;cursor:pointer;background-repeat:no-repeat;background-size:10px 8px;background-position:50%}", ""])
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    e.CHECKBOX_IMAGE_PATH = "images/arrows/checkbox.png"
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function o(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function s(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var a = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        l = n(96),
        u = r(l);
    n(124);
    var c = n(95),
        f = r(c),
        h = n(126),
        d = n(3),
        p = n(5),
        g = function(t) {
            function e(t) {
                var n = t.label,
                    r = t.handler,
                    s = t.className,
                    a = t.options,
                    l = void 0 === a ? [] : a,
                    c = t.defaultValue;
                i(this, e);
                var f = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return f.onCheckboxChange = function(t) {
                    var e = f.checkbox.checked;
                    e ? f.optionsContainer.classList.add(h.OPTIONS_VISIBILITY_CLASS) : f.optionsContainer.classList.remove(h.OPTIONS_VISIBILITY_CLASS)
                }, f.onContainerClick = function(t) {
                    f.checkbox.checked = !f.checkbox.checked, f.onCheckboxChange()
                }, f.onColorSelected = function(t, e) {
                    f.checkbox.checked = !1, f.onCheckboxChange(), f.currentOption.style.backgroundColor = t, f.handler(e, t)
                }, f.label = n, f.handler = r, f.className = s, f.options = l, f.default = c, f.optionsTemplate = "", f.selectedIndex = 0, f.optionsId = (0, u.default)(), f.currentOptionId = (0, u.default)(), f.currentOptionContainerId = (0, u.default)(), f.labelId = (0, u.default)(), f
            }
            return s(e, t), a(e, [{
                key: "preRender",
                value: function() {
                    var t = this;
                    this.options.forEach(function(e) {
                        return t.optionsTemplate += '<div\n            class="' + h.COLOR_PICKER_OPTION_CONTAINER_CLASS + '"\n        >\n            <div class="' + h.COLOR_PICKER_OPTION_CLASS + '"></div>\n        </div>'
                    })
                }
            }, {
                key: "getTemplate",
                value: function() {
                    return '\n            <div class="constructor-shared-color-picker-container ' + this.className + '"">\n                <label class="constructor-shared-checkbox-label">' + this.label + '</label>\n                <div class="shared-color-picker-option-container" id="' + this.currentOptionContainerId + '">\n                    <div class="' + h.COLOR_PICKER_OPTION_CLASS + ' current" id="' + this.currentOptionId + '"></div>\n                </div>\n                <input class="shared-color-picker-checkbox" type="checkbox" id="' + this.id + '">\n                <label class="shared-color-picker-label" for="' + this.id + '" id="' + this.labelId + '"></label>\n                <div class="shared-color-picker-options" id="' + this.optionsId + '">\n                    ' + this.optionsTemplate + "\n                </div>\n            </div>\n        "
                }
            }, {
                key: "postRender",
                value: function() {
                    this.checkbox = document.getElementById(this.id), this.checkbox.addEventListener("change", this.onCheckboxChange), this.currentOptionContainer = document.getElementById(this.currentOptionContainerId), this.currentOptionContainer.addEventListener("click", this.onContainerClick), this.checkboxLabel = document.getElementById(this.labelId), this.checkboxLabel.style.backgroundImage = 'url("' + d.PRODUCTION_SERVER_CONFIG.URL + "/" + p.CONFIG_RESOURCES_PATH + "/" + h.DOWN_ARROW_PATH + '")', this.currentOption = document.getElementById(this.currentOptionId), this.optionsContainer = document.getElementById(this.optionsId), this.currentOption.style.backgroundColor = this.default;
                    for (var t = this.optionsContainer.children, e = 0; e < t.length; e++) {
                        var n = t[e],
                            r = this.options[e].color;
                        this.options[e].border;
                        n.children[0].style.backgroundColor = r, n.addEventListener("click", this.onColorSelected.bind(this, r))
                    }
                }
            }]), e
        }(f.default);
    e.default = g
}, function(t, e, n) {
    var r = n(125);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".constructor-shared-color-picker-container{display:inline-flex;align-items:center}.constructor-shared-color-picker-container .constructor-shared-checkbox-label{margin-right:5px}.shared-color-picker-option-container{width:46px;height:25px;display:inline-flex;align-items:center;justify-content:space-around;box-sizing:border-box;cursor:pointer;position:relative;border-top-left-radius:1px;border-bottom-left-radius:1px;border:1px solid #ccc}.shared-color-picker-option{display:block;width:36px;height:16px;box-sizing:border-box;margin-left:5px}.shared-color-picker-option.current{display:inline-block;margin-left:0}.shared-color-picker-container{width:67px;box-sizing:border-box;height:25px;border:1px solid #ccc;background-color:#fff;display:flex;align-items:center;cursor:pointer;margin-top:-1px}.shared-color-picker-container:hover{background-color:#eee}.shared-color-picker-options{position:absolute;display:none;z-index:1}.shared-color-picker-checkbox{display:none}.shared-color-picker-options.visible{display:block}.shared-color-picker-label{display:inline-block;cursor:pointer;width:22px;height:25px;border-top-right-radius:1px;border-bottom-right-radius:1px;border:1px solid #ccc;margin-left:-1px;box-sizing:border-box;background-size:8px 5px;background-repeat:no-repeat;background-position:50%}", ""]);
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    e.COLOR_PICKER_OPTION_CLASS = "shared-color-picker-option", e.COLOR_PICKER_OPTION_CONTAINER_CLASS = "shared-color-picker-container", e.OPTIONS_VISIBILITY_CLASS = "visible", e.DOWN_ARROW_PATH = "images/arrows/down.png"
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
        function t(t, e) {
            for (var n = 0; n < e.length; n++) {
                var r = e[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
            }
        }
        return function(e, n, r) {
            return n && t(e.prototype, n), r && t(e, r), e
        }
    }();
    n(128);
    var u = n(2),
        c = (i(u), n(7)),
        f = i(c),
        h = n(96),
        d = i(h),
        p = n(95),
        g = i(p),
        _ = n(130),
        v = i(_),
        b = n(133),
        y = r(b),
        m = n(3),
        E = n(5),
        S = function(t) {
            function e(t) {
                var n = t.items,
                    r = void 0 === n ? [] : n,
                    i = t.itemsPerPage,
                    a = void 0 === i ? 3 : i;
                t.cyclic;
                o(this, e);
                var l = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return l.updateOffset = function() {
                    l.collectionItems.style.transform = "translate3d(" + -l.offsets[l.selectedIndex] + "px, 0, 0)"
                }, l.onRightScrollStart = function() {
                    l.selectedIndex < l.offsets.length - 1 && l.selectedIndex++, l.updateOffset()
                }, l.onLeftScrollStart = function() {
                    l.selectedIndex > 0 && l.selectedIndex--, l.updateOffset()
                }, l.onSwipeStart = function(t) {
                    l.swipeInProgress = !0, l.swipeStartX = f.default.result(t, "touches[0].clientX") || f.default.result(t, "clientX"), l.currentX = l.swipeStartX, t.preventDefault()
                }, l.onTouchMove = function(t) {
                    l.currentX = f.default.result(t, "touches[0].clientX"), l.onSwipeMove()
                }, l.onMouseMove = function(t) {
                    l.currentX = t.clientX, l.onSwipeMove()
                }, l.onSwipeMove = function() {
                    if (l.swipeInProgress) {
                        var t = l.currentX - l.swipeStartX;
                        Math.abs(t) > y.SWIPE_DELTA || (l.collectionItems.style.transform = "translate3d(" + -(l.offsets[l.selectedIndex] - t) + "px, 0, 0)")
                    }
                }, l.onTouchCancel = function() {
                    l.swipeInProgress && l.updateOffset(), l.swipeInProgress = !1
                }, l.onMouseLeave = function() {
                    l.swipeInProgress && l.updateOffset(), l.swipeInProgress = !1
                }, l.onDragEnd = function() {
                    l.swipeInProgress && l.updateOffset(), l.swipeInProgress = !1
                }, l.onSwipeEnd = function() {
                    if (l.swipeInProgress) {
                        var t = l.currentX - l.swipeStartX;
                        l.swipeInProgress = !1, t < -y.SWIPE_DELTA ? l.onRightScrollStart() : t > y.SWIPE_DELTA ? l.onLeftScrollStart() : l.updateOffset()
                    }
                }, l.items = r, l.offset = a, l.offsets = [], l.selectedIndex = 0, l.itemsTemplateData = "", l.children = [], l.rightArrowId = (0, d.default)(), l.leftArrowId = (0, d.default)(), l.containerId = (0, d.default)(), l.swipeInProgress = !1, l.swipeStartX = 0, l.currentX = 0, l
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    var t = this;
                    f.default.forEach(this.items, function(e) {
                        var n = new v.default({
                            label: e.label,
                            handler: e.handler,
                            className: y.ITEM_IMAGE_CLASS,
                            url: e.url
                        });
                        t.children.push(n), t.itemsTemplateData += '<li class="shared-collection-page-item">' + n.getTemplate() + "</li>"
                    })
                }
            }, {
                key: "getTemplate",
                value: function() {
                    return '\n            <div class="constructor-shared-collection" id="' + this.containerId + '">\n                <div class="collection-arrow-container left" id="' + this.leftArrowId + '">\n                </div>\n                <div class="collection-items-container">\n                    <ul class="collection-items" id="' + this.id + '">\n                        ' + this.itemsTemplateData + '\n                    </ul>\n                </div>\n                <div class="collection-arrow-container right" id="' + this.rightArrowId + '">\n                </div>\n            </div>\n        '
                }
            }, {
                key: "postRender",
                value: function() {
                    this.collectionItems = document.getElementById(this.id), this.collectionContainer = document.getElementById(this.containerId), this.rightArrow = document.getElementById(this.rightArrowId), this.rightArrow.addEventListener("click", this.onRightScrollStart), this.rightArrow.style.backgroundImage = 'url("' + m.PRODUCTION_SERVER_CONFIG.URL + "/" + E.CONFIG_RESOURCES_PATH + "/" + y.RIGHT_ARROW_PATH + '")', this.leftArrow = document.getElementById(this.leftArrowId), this.leftArrow.addEventListener("click", this.onLeftScrollStart), this.leftArrow.style.backgroundImage = 'url("' + m.PRODUCTION_SERVER_CONFIG.URL + "/" + E.CONFIG_RESOURCES_PATH + "/" + y.LEFT_ARROW_PATH + '")', this.collectionContainer.addEventListener("touchstart", this.onSwipeStart), this.collectionContainer.addEventListener("touchmove", this.onTouchMove), this.collectionContainer.addEventListener("touchend", this.onSwipeEnd), this.collectionContainer.addEventListener("touchcancel", this.onTouchCancel), this.collectionContainer.addEventListener("mousedown", this.onSwipeStart), this.collectionContainer.addEventListener("mousemove", this.onMouseMove), this.collectionContainer.addEventListener("mouseleave", this.onMouseLeave), this.collectionContainer.addEventListener("mouseup", this.onSwipeEnd), this.collectionContainer.addEventListener("dragend", this.onDragEnd);
                    for (var t = 0; t < this.items.length - this.offset; t += this.offset) this.offsets.push(t * y.COLLECTION_ITEM_WIDTH);
                    this.offsets.push((this.items.length - this.offset) * y.COLLECTION_ITEM_WIDTH)
                }
            }]), e
        }(g.default);
    e.default = S
}, function(t, e, n) {
    var r = n(129);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".collection-items-container{width:220px;height:80px;overflow:hidden}.constructor-shared-collection{display:inline-block;position:relative}.shared-collection-page-item .constructor-shared-image-container-label{margin-top:6px}.shared-collection-page-item{margin-right:3px;list-style:none;padding:0}.shared-collection-page-item:last-child{margin-right:0}.collection-items{height:100%;display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;transition:transform .4s linear}.collection-arrow-container{background-repeat:no-repeat;background-position:50%;background-size:5px 8px;width:15px;height:80px;position:absolute;top:0;cursor:pointer}.collection-arrow-container:hover{background-color:#eee}.collection-arrow-container.left{right:220px}.collection-arrow-container.right{right:-14px}", ""])
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function o(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function s(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var a = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        l = n(96);
    r(l);
    n(131);
    var u = n(95),
        c = r(u),
        f = n(7),
        h = r(f),
        d = n(3),
        p = n(5),
        g = function(t) {
            function e(t) {
                var n = t.label,
                    r = t.handler,
                    s = t.className,
                    a = t.url,
                    l = t.mouseenterHandler,
                    u = t.mouseleaveHandler;
                i(this, e);
                var c = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return c.mouseenterEvent = function() {
                    h.default.isFunction(c.mouseenterHandler) ? c.mouseenterHandler({
                        element: c.image,
                        label: c.label
                    }) : null
                }, c.mouseleaveEvent = function() {
                    h.default.isFunction(c.mouseleaveHandler) ? c.mouseleaveHandler({
                        element: c.image,
                        label: c.label
                    }) : null
                }, c.onDragStart = function(t) {
                    t.stopPropagation(), c.handler(t)
                }, c.label = n, c.handler = r, c.className = s, c.url = a, c.mouseenterHandler = l, c.mouseleaveHandler = u, c
            }
            return s(e, t), a(e, [{
                key: "getTemplate",
                value: function() {
                    return '\n            <div class="constructor-shared-image-container ' + this.className + '"">\n                <div class="constructor-shared-image" id="' + this.id + '"></div>\n                <label class="constructor-shared-image-container-label">' + this.label + "</label>\n            </div>\n        "
                }
            }, {
                key: "postRender",
                value: function() {
                    this.image = document.getElementById(this.id), this.image.addEventListener("touchstart", this.onDragStart), this.image.addEventListener("mousedown", this.onDragStart), this.image.addEventListener("mouseenter", this.mouseenterEvent), this.image.addEventListener("mouseleave", this.mouseleaveEvent), this.image.style.backgroundImage = 'url("' + d.PRODUCTION_SERVER_CONFIG.URL + "/" + p.CONFIG_RESOURCES_PATH + "/" + this.url + '")'
                }
            }]), e
        }(c.default);
    e.default = g
}, function(t, e, n) {
    var r = n(132);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".constructor-shared-image-container{width:71px;height:80px;border:1px solid #ccc;border-radius:1px;box-sizing:border-box;position:relative;display:flex;flex-direction:column;align-items:center}.constructor-shared-image-container-label{font-size:10px;color:#000;display:block;text-align:center;margin-top:8px;line-height:1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}@-moz-document url-prefix(){.constructor-shared-image-container-label{font-size:8px}}.constructor-shared-image{background-repeat:no-repeat;background-position:50%;cursor:pointer;margin-top:11px;width:54px;height:29px}", ""])
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    e.ITEM_IMAGE_CLASS = "constructor-shared-collection-item", e.RIGHT_SCROLL_CLASS = "right-scroll", e.LEFT_SCROLL_CLASS = "left-scroll", e.SWIPE_DELTA = 80, e.LEFT_ARROW_PATH = "images/arrows/left.png", e.RIGHT_ARROW_PATH = "images/arrows/right.png", e.COLLECTION_ITEM_WIDTH = 74
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    e.CREATE_CABINET_CLASS = "inside-create-cabinet", e.WIDTH_CHANGE_CLASS = "inside-change-width", e.HEIGHT_CHANGE_CLASS = "inside-change-height", e.DEPTH_CHANGE_CLASS = "inside-change-depth", e.BOTTOM_CHANGE_CLASS = "inside-change-bottom", e.CEILING_CHANGE_CLASS = "inside-change-ceiling", e.LEFT_SHELVES_CHANGE_CLASS = "inside-left-shelves", e.LEFT_REAR_CHANGE_CLASS = "inside-left-rear", e.SHELVES_INPUT_CLASS = "inside-left-shelves-input", e.SHELF_COLOR_PICKER_CLASS = "inside-shelf-color-picker", e.RIGHT_SHELVES_CHANGE_CLASS = "inside-right-shelves", e.RIGHT_REAR_CHANGE_CLASS = "inside-right-rear", e.REAR_CHANGE_CLASS = "inside-rear-checkbox", e.LEFT_STAND_CHANGE_CLASS = "inside-left-stand", e.RIGHT_STAND_CHANGE_CLASS = "inside-right-stand"
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e, n) {
        return e in t ? Object.defineProperty(t, e, {
            value: n,
            enumerable: !0,
            configurable: !0,
            writable: !0
        }) : t[e] = n, t
    }

    function s(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var a = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        l = n(7),
        u = i(l),
        c = n(11),
        f = n(2),
        h = i(f),
        d = n(136),
        p = i(d),
        g = n(137),
        _ = i(g),
        v = n(140),
        b = i(v),
        y = n(141),
        m = i(y),
        E = n(142),
        S = i(E),
        O = n(146),
        T = i(O),
        x = n(148),
        w = i(x),
        C = n(149),
        I = i(C),
        R = n(150),
        A = i(R),
        P = n(151),
        L = i(P),
        k = n(152),
        D = i(k),
        j = n(153),
        M = i(j),
        N = n(154),
        B = i(N),
        H = n(158),
        F = i(H),
        U = n(159),
        G = i(U),
        W = n(160),
        Y = i(W),
        V = n(161),
        X = i(V),
        z = n(162),
        K = i(z),
        q = n(163),
        $ = i(q),
        Z = n(164),
        Q = i(Z),
        J = n(165),
        tt = i(J),
        et = n(145),
        nt = i(et),
        rt = n(166),
        it = r(rt),
        ot = n(167),
        st = r(ot),
        at = n(6),
        lt = (i(at), n(169)),
        ut = i(lt),
        ct = n(176),
        ft = i(ct),
        ht = n(179),
        dt = i(ht),
        pt = n(182),
        gt = i(pt),
        _t = n(143),
        vt = r(_t),
        bt = n(171),
        yt = 30,
        mt = "#f6f6ef",
        Et = function() {
            function t() {
                var e = this;
                s(this, t), this.createCabinet = function() {
                    e.removeAll(), e.setCurrentValues(), e.initCanvas(), e.addLeftDefaultShelves(), e.addRightDefaultShelves(), dt.default.createDoors(), e.update()
                }, this.onObjectMove = function(t) {
                    return p.default.isDraggingOn() || ut.default.isInAnimation ? (t.target.lockMovementX = !0, void(t.target.lockMovementY = !0)) : !(!p.default.isDoorDragging() && !p.default.isInTextureMode()) || (p.default.isDoorElementDragging() ? dt.default.onElementDragStart(t) : void e.onDragStart(t))
                }, this.onObjectDrag = function(t) {
                    return p.default.isDraggingOn() || ut.default.isInAnimation ? (t.target.lockMovementX = !0, void(t.target.lockMovementY = !0)) : !(!p.default.isDoorDragging() && !p.default.isInTextureMode()) || (p.default.isDoorElementDragging() ? dt.default.onElementDragStart(t) : void e.onDragStart(t))
                }, this.onDragStart = function(t) {
                    requestAnimationFrame(function() {
                        var n = t && t.target && t.target.parentId,
                            r = p.default.getCabinetItems(),
                            i = u.default.find(r, {
                                id: n
                            });
                        if (!i) return void h.default.warn("CabinetController.onObjectMove: cabinetItem has no found");
                        var o = e.findCabinetCollectionItem(i);
                        e.itemsToUpdate = [], e.removeCabinetItem(i), e.itemsToUpdate = u.default.uniqBy(e.itemsToUpdate, "id"), e.canvas.renderAll(), e.updateItems(), e.itemsToUpdate = [], ut.default.onDragStart(o, t)
                    })
                }, this.itemsToUpdate = []
            }
            return a(t, [{
                key: "calculateMainPoints",
                value: function() {
                    var t = p.default.getOptions(),
                        e = p.default.getCanvas(),
                        n = Math.floor(e.width / 2) - yt,
                        r = Math.floor(e.height / 2),
                        i = t.heightChange,
                        o = t.widthChange,
                        s = p.default.getValue("currentWidth"),
                        a = p.default.getValue("currentHeight"),
                        l = Math.floor(nt.default.calculatePx({
                            value: s,
                            oldMin: o.min,
                            oldMax: o.max,
                            newMin: vt.MIN_WIDTH_CABINET,
                            newMax: vt.MAX_WIDTH_CABINET
                        }) / 2),
                        u = Math.floor(nt.default.calculatePx({
                            value: a,
                            oldMin: i.min,
                            oldMax: i.max,
                            newMin: vt.MIN_HEIGHT_CABINET,
                            newMax: vt.MAX_HEIGHT_CABINET
                        }) / 2),
                        c = {
                            x: n - l,
                            y: r - u
                        },
                        f = {
                            x: n + l,
                            y: r - u
                        },
                        h = {
                            x: n - l,
                            y: r + u
                        },
                        d = {
                            x: n + l,
                            y: r + u
                        };
                    return {
                        leftTop: c,
                        leftDown: h,
                        rightTop: f,
                        rightDown: d
                    }
                }
            }, {
                key: "initCanvas",
                value: function(t) {
                    var e = p.default.getOptions(),
                        n = p.default.getValue(),
                        r = p.default.getCanvas(),
                        i = p.default.getShadow(),
                        o = p.default.getValue("cabinetColor"),
                        s = o.colorSide,
                        a = (o.colorShelf, o.color),
                        l = o.background,
                        f = o.line,
                        h = o.stroke;
                    u.default.isNull(r) && (r = new c.fabric.Canvas(t, {
                        hoverCursor: "pointer"
                    }), r.selection = !1, p.default.setCanvas(r)), this.canvas = r;
                    var d = e.shelfWidth,
                        g = e.shelvesChange,
                        _ = this.calculateMainPoints(),
                        v = _.leftTop,
                        b = _.leftDown,
                        y = _.rightTop,
                        m = _.rightDown,
                        E = void 0,
                        S = Math.floor(nt.default.calculatePx({
                            value: n.leftShelf,
                            oldMin: g.min,
                            oldMax: g.max,
                            newMin: vt.MIN_SIDE_SHELVES_WIDTH,
                            newMax: vt.MAX_SIDE_SHELVES_WIDTH
                        })),
                        O = Math.floor(nt.default.calculatePx({
                            value: n.rightShelf,
                            oldMin: g.min,
                            oldMax: g.max,
                            newMin: vt.MIN_SIDE_SHELVES_WIDTH,
                            newMax: vt.MAX_SIDE_SHELVES_WIDTH
                        })),
                        T = nt.default.drawInsidePartOfBottomShelf({
                            leftDown: b,
                            stroke: h,
                            rightDown: m,
                            fill: a,
                            visible: n.isShowBottomShelf
                        }),
                        x = nt.default.drawInsidePartOfCeiling({
                            leftTop: v,
                            stroke: h,
                            strokeWidth: 1,
                            rightTop: y,
                            fill: a,
                            visible: n.isShowCeiling
                        }),
                        w = nt.default.drawInsidePartOfRightShelf({
                            rightTop: y,
                            rightDown: m,
                            stroke: h,
                            fill: n.isShowRightStand ? a : mt,
                            visible: n.isShowRightShelve,
                            shelfWidth: d
                        }),
                        C = nt.default.drawInsidePartOfLeftShelf({
                            leftTop: v,
                            leftDown: b,
                            stroke: h,
                            fill: n.isShowLeftStand ? a : mt,
                            visible: n.isShowLeftShelve,
                            shelfWidth: d
                        }),
                        I = new c.fabric.Path("M " + (b.x + vt.PERSPECTIVE_WIDTH + " " + (b.y + d - vt.PERSPECTIVE_HEIGHT)) + "\n            L " + (v.x + vt.PERSPECTIVE_WIDTH + " " + (v.y - d + vt.PERSPECTIVE_HEIGHT)) + "\n            L " + (y.x - vt.PERSPECTIVE_WIDTH + " " + (y.y - d + vt.PERSPECTIVE_HEIGHT)) + "\n            L " + (m.x - vt.PERSPECTIVE_WIDTH + " " + (m.y + d - vt.PERSPECTIVE_HEIGHT)) + "z", {
                            stroke: h,
                            strokeWidth: 1,
                            fill: l,
                            selectable: !1
                        }),
                        R = p.default.getCanvasObject("backgroundImage");
                    R.set({
                        left: I.left,
                        top: I.top,
                        width: I.width,
                        height: I.height,
                        visible: !n.isShowRear,
                        selectable: !1
                    });
                    for (var A = {
                        x: v.x + vt.PERSPECTIVE_WIDTH,
                        y: v.y - d + vt.PERSPECTIVE_HEIGHT
                    }, P = {
                        x: b.x + vt.PERSPECTIVE_WIDTH,
                        y: b.y + d - vt.PERSPECTIVE_HEIGHT
                    }, L = {
                        x: y.x - vt.PERSPECTIVE_WIDTH,
                        y: y.y - d + vt.PERSPECTIVE_HEIGHT
                    }, k = {
                        x: m.x - vt.PERSPECTIVE_WIDTH,
                        y: m.y + d - vt.PERSPECTIVE_HEIGHT
                    }, D = 7, j = P.x, M = A.y, N = 0, B = 0, H = void 0, F = void 0, U = []; j < k.x;) {
                        for (; M < P.y;) j + N > k.x ? (H = L.y + (j + N) % k.x, F = k.x) : (H = L.y, F = j + N), U.push("M " + (P.x + " " + M) + "\n                    L " + (F + " " + H) + "\n                "), N += D, M += D, B = (A.y + N) % P.y;
                        P.x + N > k.x ? (H = L.y + (P.x + N) % k.x, F = k.x) : (H = L.y, F = P.x + N), U.push("M " + (B + P.x + " " + k.y) + "\n                L " + (F + " " + H) + "\n            "), U.push("M " + (j + " " + P.y) + "\n                L " + (j + " " + A.y) + "\n            "), N += D, B += D, j += D
                    }
                    E = new c.fabric.Path(u.default.join(U, " "), {
                        stroke: f,
                        strokeWidth: 1,
                        selectable: !1,
                        visible: n.isShowRear
                    }), E.path.push(U);
                    var G = new c.fabric.Path("\n            M " + (b.x - d + " " + (b.y + d - vt.SIDE_SHELVES_DIFF)) + "\n            L " + (b.x - d - S - 1 + " " + (b.y + d - vt.SIDE_SHELVES_DIFF)) + "\n            L " + (v.x - d - S - 1 + " " + (v.y - d + vt.SIDE_SHELVES_DIFF)) + "\n            L " + (v.x - d + " " + (v.y - d + vt.SIDE_SHELVES_DIFF)) + "z", {
                            stroke: h,
                            strokeWidth: 1,
                            fill: n.isShowLeftRear ? s : mt,
                            visible: n.isShowLeftShelve,
                            selectable: !1
                        }),
                        W = new c.fabric.Path("\n            M " + (b.x - d - S + " " + (b.y + d - vt.SIDE_SHELVES_DIFF)) + "\n            L " + (v.x - d - S + " " + (v.y - d + vt.SIDE_SHELVES_DIFF)) + "\n            C " + (Math.floor(v.x - d - S / 2) + " " + Math.floor((v.y + b.y) / 3) + " " + Math.floor(v.x - d - S / 2 + 2) + " " + Math.floor((b.y + v.y) / 2) + " " + Math.floor(v.x - d - S / 2 + 2) + " " + Math.floor((b.y + v.y) / 2)) + "\n            C " + (Math.floor(v.x - d - S / 2) + " " + Math.floor((v.y + b.y) / 1.5) + " " + Math.floor(v.x - d - S + 1) + " " + (b.y + d - vt.SIDE_SHELVES_DIFF) + " " + (v.x - d - S + 1) + " " + (b.y + d - vt.SIDE_SHELVES_DIFF)) + "z", {
                            fill: n.isShowLeftRear ? a : mt,
                            visible: n.isShowLeftShelve,
                            selectable: !1
                        });
                    r.add(G), r.add(W), p.default.setCanvasObject("leftShelve", G), p.default.setCanvasObject("leftShelveLight", W);
                    var Y = new c.fabric.Path("\n            M " + (m.x + d + " " + (m.y + d - vt.SIDE_SHELVES_DIFF)) + "\n            L " + (m.x + d + O + 1 + " " + (m.y + d - vt.SIDE_SHELVES_DIFF)) + "\n            L " + (y.x + d + O + 1 + " " + (y.y - d + vt.SIDE_SHELVES_DIFF)) + "\n            L " + (y.x + d + " " + (y.y - d + vt.SIDE_SHELVES_DIFF)) + "z", {
                            stroke: h,
                            strokeWidth: 1,
                            fill: n.isShowRightRear ? s : mt,
                            visible: n.isShowRightShelve,
                            selectable: !1
                        }),
                        V = new c.fabric.Path("\n            M " + (m.x + d + O + 1 + " " + (m.y + d - vt.SIDE_SHELVES_DIFF)) + "\n            L " + (y.x + d + O + 1 + " " + (y.y - d + vt.SIDE_SHELVES_DIFF)) + "\n            C " + (Math.floor(y.x + d + O / 2) + " " + Math.floor((y.y + m.y) / 3) + " " + Math.floor(y.x + d + O / 2 + 2) + " " + Math.floor((m.y + y.y) / 2) + " " + Math.floor(y.x + d + O / 2 + 2) + " " + Math.floor((m.y + y.y) / 2)) + "\n            C " + (Math.floor(y.x + d + O / 2) + " " + Math.floor((y.y + m.y) / 1.5) + " " + (y.x + d + O) + " " + (m.y + d - vt.SIDE_SHELVES_DIFF) + " " + (y.x + d + O) + " " + (m.y + d - vt.SIDE_SHELVES_DIFF)) + "z", {
                            fill: n.isShowRightRear ? a : mt,
                            visible: n.isShowRightShelve,
                            selectable: !1
                        });
                    r.add(Y), r.add(V), p.default.setCanvasObject("rightShelve", Y), p.default.setCanvasObject("rightShelveLight", V), p.default.setCanvasObject("backgroundCabinet", I), p.default.setCanvasObject("insidePartOfLeftShelf", C), p.default.setCanvasObject("insidePartOfRightShelf", w), p.default.setCanvasObject("insidePartOfBottomShelf", T), p.default.setCanvasObject("insidePartOfCeiling", x), p.default.setCanvasObject("backgroundGrid", E), this.canvas.renderOnAddRemove = !1, r.add(I), r.add(R), r.add(E), r.add(C), r.add(w), r.add(T), r.add(x), r.add(i), this.renderCabinetFrame(), this.initKeyElements(), r.renderOnAddRemove = !0, r.renderAll()
                }
            }, {
                key: "initKeyElements",
                value: function() {
                    var t = p.default.getCanvas(),
                        e = p.default.getValue(),
                        n = p.default.getOptions(),
                        r = n.shelfWidth,
                        i = n.shelvesChange,
                        o = this.calculateMainPoints(),
                        s = o.leftTop,
                        a = o.leftDown,
                        l = o.rightTop,
                        u = o.rightDown,
                        c = Math.floor(nt.default.calculatePx({
                            value: e.rightShelf,
                            oldMin: i.min,
                            oldMax: i.max,
                            newMin: vt.MIN_SIDE_SHELVES_WIDTH,
                            newMax: vt.MAX_SIDE_SHELVES_WIDTH
                        })),
                        f = Math.floor(nt.default.calculatePx({
                            value: e.leftShelf,
                            oldMin: i.min,
                            oldMax: i.max,
                            newMin: vt.MIN_SIDE_SHELVES_WIDTH,
                            newMax: vt.MAX_SIDE_SHELVES_WIDTH
                        })),
                        h = this.initShelf({
                            leftTop: {
                                x: s.x,
                                y: s.y - r
                            },
                            rightDown: {
                                x: l.x,
                                y: s.y
                            },
                            strokeWidth: 1,
                            visible: !1,
                            isTop: !0,
                            isHorizontal: !0,
                            perspectiveVisible: e.isShowCeiling,
                            selectable: !1
                        }),
                        d = this.initShelf({
                            leftTop: {
                                x: a.x,
                                y: a.y
                            },
                            rightDown: {
                                x: u.x,
                                y: u.y + r
                            },
                            isHorizontal: !0,
                            strokeWidth: 1,
                            visible: !1,
                            isBottom: !0,
                            perspectiveVisible: e.isShowCeiling,
                            selectable: !1
                        }),
                        g = this.initShelf({
                            leftTop: {
                                x: s.x - r,
                                y: s.y - r
                            },
                            rightDown: {
                                x: a.x,
                                y: a.y + r
                            },
                            isVertical: !0,
                            isLeft: !0,
                            strokeWidth: 1,
                            visible: !1,
                            perspectiveVisible: e.isShowCeiling,
                            selectable: !1
                        }),
                        _ = this.initShelf({
                            leftTop: {
                                x: l.x,
                                y: l.y - r
                            },
                            rightDown: {
                                x: u.x + r,
                                y: u.y + r
                            },
                            isVertical: !0,
                            isRight: !0,
                            strokeWidth: 1,
                            visible: !1,
                            perspectiveVisible: e.isShowCeiling,
                            selectable: !1
                        }),
                        v = this.initInvisibleShelf({
                            leftTop: {
                                x: s.x - f - 2 * r,
                                y: s.y + vt.SIDE_SHELVES_DIFF + 1
                            },
                            rightDown: {
                                x: a.x - f - r,
                                y: a.y - vt.SIDE_SHELVES_DIFF - 1
                            },
                            strokeWidth: 1,
                            isVertical: !0,
                            isLeftInvisible: !0
                        }),
                        b = this.initInvisibleShelf({
                            leftTop: {
                                x: l.x + c + r,
                                y: l.y + vt.SIDE_SHELVES_DIFF + 1
                            },
                            rightDown: {
                                x: u.x + c + 2 * r,
                                y: u.y - vt.SIDE_SHELVES_DIFF - 1
                            },
                            strokeWidth: 1,
                            isVertical: !0,
                            isRightInvisible: !0
                        });
                    t.add(v.element), t.add(b.element), t.add(h.element), t.add(d.element), t.add(g.element), t.add(_.element), p.default.addCabinetItem(v), p.default.addCabinetItem(b), p.default.addCabinetItem(h), p.default.addCabinetItem(d), p.default.addCabinetItem(g), p.default.addCabinetItem(_)
                }
            }, {
                key: "moveShadow",
                value: function(t) {
                    var e = t.left,
                        n = void 0 === e ? 0 : e,
                        r = t.top,
                        i = void 0 === r ? 0 : r,
                        o = t.width,
                        s = void 0 === o ? 0 : o,
                        a = t.height,
                        l = void 0 === a ? 0 : a,
                        u = t.visible,
                        c = void 0 !== u && u,
                        f = p.default.getShadow();
                    f.set({
                        left: n,
                        top: i,
                        visible: c,
                        width: s,
                        height: l
                    })
                }
            }, {
                key: "hideShadow",
                value: function() {
                    var t = p.default.getShadow();
                    t.set({
                        visible: !1
                    })
                }
            }, {
                key: "shadowToFront",
                value: function() {
                    var t = p.default.getShadow();
                    t.bringToFront()
                }
            }, {
                key: "setColorShadow",
                value: function(t) {
                    var e = p.default.getShadow(),
                        n = p.default.getCanvas();
                    e.set({
                        fill: t ? bt.SHADOW_AVAILABLE_COLOR : bt.SHADOW_DISABLE_COLOR
                    }), n.renderAll()
                }
            }, {
                key: "addLeftDefaultShelves",
                value: function() {
                    var t = p.default.getValue("isShowLeftShelve");
                    if (t) {
                        var e = this.calculateMainPoints(),
                            n = e.leftTop,
                            r = e.leftDown,
                            i = p.default.getOptions(),
                            o = i.shelfWidth,
                            s = i.shelvesChange,
                            a = p.default.getCollectionItems(),
                            l = p.default.getCabinetItems(),
                            c = u.default.find(a, function(t) {
                                return t.element instanceof B.default
                            }).element,
                            f = u.default.find(l, function(t) {
                                return t.options.isLeft
                            }),
                            h = u.default.find(l, function(t) {
                                return t.options.isLeftInvisible
                            }),
                            d = p.default.getValue("cabinetColor"),
                            g = d.colorShelf,
                            _ = d.stroke,
                            v = d.color,
                            b = {
                                stroke: _,
                                strokeWidth: 1,
                                visible: !0,
                                selectable: !0,
                                hasControls: !1,
                                hasBorders: !1,
                                color: g,
                                perspectiveColor: v,
                                itemOptions: c.getItemOptions()
                            },
                            y = Math.floor(nt.default.calculatePx({
                                value: p.default.getValue("leftShelf"),
                                oldMin: s.min,
                                oldMax: s.max,
                                newMin: vt.MIN_SIDE_SHELVES_WIDTH,
                                newMax: vt.MAX_SIDE_SHELVES_WIDTH
                            }));
                        ut.default.createAndAddItem(S.default, {
                            x: n.x - y - 2 * o,
                            y: n.y + vt.SIDE_SHELVES_DIFF - o
                        }, c.id, [f, h], [], u.default.assign({}, b)), ut.default.createAndAddItem(S.default, {
                            x: r.x - y - 2 * o,
                            y: r.y - vt.SIDE_SHELVES_DIFF
                        }, c.id, [f, h], [], u.default.assign({}, b))
                    }
                }
            }, {
                key: "addRightDefaultShelves",
                value: function() {
                    var t = p.default.getValue("isShowRightShelve");
                    if (t) {
                        var e = this.calculateMainPoints(),
                            n = e.rightTop,
                            r = e.rightDown,
                            i = p.default.getOptions(),
                            o = i.shelfWidth,
                            s = i.shelvesChange,
                            a = p.default.getCollectionItems(),
                            l = p.default.getCabinetItems(),
                            c = u.default.find(a, function(t) {
                                return t.element instanceof B.default
                            }).element,
                            f = u.default.find(l, function(t) {
                                return t.options.isRight
                            }),
                            h = u.default.find(l, function(t) {
                                return t.options.isRightInvisible
                            }),
                            d = p.default.getValue("cabinetColor"),
                            g = d.colorShelf,
                            _ = d.stroke,
                            v = d.color,
                            b = {
                                stroke: _,
                                strokeWidth: 1,
                                visible: !0,
                                selectable: !0,
                                hasControls: !1,
                                hasBorders: !1,
                                color: g,
                                perspectiveColor: v,
                                itemOptions: c.getItemOptions()
                            },
                            y = Math.floor(nt.default.calculatePx({
                                value: p.default.getValue("rightShelf"),
                                oldMin: s.min,
                                oldMax: s.max,
                                newMin: vt.MIN_SIDE_SHELVES_WIDTH,
                                newMax: vt.MAX_SIDE_SHELVES_WIDTH
                            }));
                        ut.default.createAndAddItem(S.default, {
                            x: n.x - y - 2 * o,
                            y: n.y + vt.SIDE_SHELVES_DIFF - o
                        }, c.id, [f, h], [], u.default.assign({}, b)), ut.default.createAndAddItem(S.default, {
                            x: r.x - y - 2 * o,
                            y: r.y - vt.SIDE_SHELVES_DIFF
                        }, c.id, [f, h], [], u.default.assign({}, b))
                    }
                }
            }, {
                key: "defaultFilling",
                value: function() {
                    this.addLeftDefaultShelves(), this.addRightDefaultShelves();
                    var t = p.default.getCollectionItems(),
                        e = p.default.getOptions(),
                        n = e.shelfWidth,
                        r = e.shelvesChange,
                        i = this.calculateMainPoints(),
                        o = i.leftTop,
                        s = i.rightTop,
                        a = (i.leftDown, i.rightDown, p.default.getCabinetItems()),
                        l = u.default.find(t, function(t) {
                            return t.element instanceof F.default
                        }).element;
                    l.preRender();
                    var c = u.default.find(t, function(t) {
                            return t.element instanceof B.default
                        }).element,
                        f = u.default.find(t, function(t) {
                            return t.element instanceof G.default
                        }).element,
                        h = u.default.find(t, function(t) {
                            return t.element instanceof Y.default
                        }).element,
                        d = u.default.find(t, function(t) {
                            return t.element instanceof X.default
                        }).element,
                        g = u.default.find(t, function(t) {
                            return t.element instanceof K.default
                        }).element,
                        _ = u.default.find(t, function(t) {
                            return t.element instanceof $.default
                        }).element,
                        v = u.default.find(t, function(t) {
                            return t.element instanceof Q.default
                        }).element,
                        b = u.default.find(t, function(t) {
                            return t.element instanceof tt.default
                        }).element,
                        y = u.default.find(a, function(t) {
                            return t.options.isLeft
                        }),
                        E = u.default.find(a, function(t) {
                            return t.options.isRight
                        }),
                        O = u.default.find(a, function(t) {
                            return t.options.isRightInvisible
                        }),
                        x = u.default.find(a, function(t) {
                            return t.options.isLeftInvisible
                        }),
                        C = u.default.find(a, function(t) {
                            return t.options.isTop
                        }),
                        R = u.default.find(a, function(t) {
                            return t.options.isBottom
                        }),
                        P = p.default.getValue("cabinetColor"),
                        k = P.colorShelf,
                        j = P.stroke,
                        N = P.color,
                        H = {
                            stroke: j,
                            strokeWidth: 1,
                            visible: !0,
                            selectable: !0,
                            hasControls: !1,
                            hasBorders: !1,
                            color: k,
                            perspectiveColor: N
                        },
                        U = ut.default.createAndAddItem(m.default, {
                            x: 357,
                            y: 200
                        }, l.id, [C, R], [], u.default.assign({
                            itemOptions: l.getItemOptions()
                        }, H)),
                        W = ut.default.createAndAddItem(m.default, {
                            x: 497,
                            y: 200
                        }, l.id, [C, R], [], u.default.assign({
                            itemOptions: l.getItemOptions()
                        }, H)),
                        V = (ut.default.createAndAddItem(S.default, {
                            x: 50,
                            y: 110
                        }, c.id, [y, U], [], u.default.assign({
                            itemOptions: c.getItemOptions()
                        }, H)), ut.default.createAndAddItem(S.default, {
                            x: 50,
                            y: 159
                        }, c.id, [y, U], [], u.default.assign({
                            itemOptions: c.getItemOptions()
                        }, H)), ut.default.createAndAddItem(S.default, {
                            x: 50,
                            y: 210
                        }, c.id, [y, U], [], u.default.assign({
                            itemOptions: c.getItemOptions()
                        }, H)), ut.default.createAndAddItem(S.default, {
                            x: 50,
                            y: 260
                        }, c.id, [y, U], [], u.default.assign({
                            itemOptions: c.getItemOptions()
                        }, H)));
                    ut.default.createAndAddItem(S.default, {
                        x: 200,
                        y: 260
                    }, c.id, [W, U], [], u.default.assign({
                        itemOptions: c.getItemOptions()
                    }, H)), ut.default.createAndAddItem(S.default, {
                        x: 200,
                        y: 290
                    }, c.id, [W, U], [], u.default.assign({
                        itemOptions: c.getItemOptions()
                    }, H)), ut.default.createAndAddItem(S.default, {
                        x: 200,
                        y: 330
                    }, c.id, [W, U], [], u.default.assign({
                        itemOptions: c.getItemOptions()
                    }, H)), ut.default.createAndAddItem(T.default, {
                        x: 200,
                        y: 130
                    }, h.id, [W, U], [], u.default.assign({
                        itemOptions: h.getItemOptions()
                    }, H)), ut.default.createAndAddItem(M.default, {
                        x: 200,
                        y: 339
                    }, b.id, [W, U], [], u.default.assign({
                        itemOptions: b.getItemOptions()
                    }, H)), ut.default.createAndAddItem(M.default, {
                        x: 200,
                        y: 362
                    }, b.id, [W, U], [], u.default.assign({
                        itemOptions: b.getItemOptions()
                    }, H));
                    var z = ut.default.createAndAddItem(m.default, {
                            x: 325,
                            y: 270
                        }, l.id, [V, R], [], u.default.assign({
                            itemOptions: l.getItemOptions()
                        }, H)),
                        q = (ut.default.createAndAddItem(w.default, {
                            x: 50,
                            y: 270
                        }, f.id, [E, y], [], u.default.assign({
                            itemOptions: f.getItemOptions()
                        }, H)), ut.default.createAndAddItem(S.default, {
                            x: 50,
                            y: 290
                        }, c.id, [z, U], [], u.default.assign({
                            itemOptions: c.getItemOptions()
                        }, H)), ut.default.createAndAddItem(S.default, {
                            x: 50,
                            y: 330
                        }, c.id, [z, U], [], u.default.assign({
                            itemOptions: c.getItemOptions()
                        }, H)), ut.default.createAndAddItem(S.default, {
                            x: 50,
                            y: 330
                        }, c.id, [z, U], [], u.default.assign({
                            itemOptions: c.getItemOptions()
                        }, H)), Math.floor(nt.default.calculatePx({
                            value: p.default.getValue("rightShelf"),
                            oldMin: r.min,
                            oldMax: r.max,
                            newMin: vt.MIN_SIDE_SHELVES_WIDTH,
                            newMax: vt.MAX_SIDE_SHELVES_WIDTH
                        }))),
                        Z = (ut.default.createAndAddItem(S.default, {
                            x: 200,
                            y: 110
                        }, c.id, [W, U], [], u.default.assign({
                            itemOptions: c.getItemOptions()
                        }, H)), ut.default.createAndAddItem(L.default, {
                            x: 500,
                            y: 80
                        }, d.id, [W, E], [], u.default.assign({
                            itemOptions: d.getItemOptions()
                        }, H)), ut.default.createAndAddItem(S.default, {
                            x: 500,
                            y: 205
                        }, c.id, [W, E], [], u.default.assign({
                            itemOptions: c.getItemOptions()
                        }, H))),
                        J = (ut.default.createAndAddItem(I.default, {
                            x: 530,
                            y: 250
                        }, g.id, [Z], [], u.default.assign({
                            itemOptions: g.getItemOptions()
                        }, H)), ut.default.createAndAddItem(A.default, {
                            x: 530,
                            y: 230
                        }, _.id, [y, E], [], u.default.assign({
                            itemOptions: _.getItemOptions()
                        }, H)), ut.default.createAndAddItem(D.default, {
                            x: 530,
                            y: 290
                        }, v.id, [y, E], [], u.default.assign({
                            itemOptions: v.getItemOptions()
                        }, H)), ut.default.createAndAddItem(S.default, {
                            x: 500,
                            y: 330
                        }, c.id, [W, E], [], u.default.assign({
                            itemOptions: c.getItemOptions()
                        }, H)), ut.default.createAndAddItem(M.default, {
                            x: 500,
                            y: 339
                        }, b.id, [W, E], [], u.default.assign({
                            itemOptions: b.getItemOptions()
                        }, H)), ut.default.createAndAddItem(M.default, {
                            x: 500,
                            y: 362
                        }, b.id, [W, E], [], u.default.assign({
                            itemOptions: b.getItemOptions()
                        }, H)), ut.default.createAndAddItem(S.default, {
                            x: s.x - q - 2 * n,
                            y: 148
                        }, c.id, [E, O], [], u.default.assign({}, H)), ut.default.createAndAddItem(S.default, {
                            x: s.x - q - 2 * n,
                            y: 220
                        }, c.id, [E, O], [], u.default.assign({}, H)), ut.default.createAndAddItem(S.default, {
                            x: s.x - q - 2 * n,
                            y: 300
                        }, c.id, [E, O], [], u.default.assign({}, H)), Math.floor(nt.default.calculatePx({
                            value: p.default.getValue("leftShelf"),
                            oldMin: r.min,
                            oldMax: r.max,
                            newMin: vt.MIN_SIDE_SHELVES_WIDTH,
                            newMax: vt.MAX_SIDE_SHELVES_WIDTH
                        })));
                    ut.default.createAndAddItem(S.default, {
                        x: o.x - J - 2 * n,
                        y: 148
                    }, c.id, [y, x], [], u.default.assign({}, H)), ut.default.createAndAddItem(S.default, {
                        x: o.x - J - 2 * n,
                        y: 220
                    }, c.id, [y, x], [], u.default.assign({}, H)), ut.default.createAndAddItem(S.default, {
                        x: o.x - J - 2 * n,
                        y: 300
                    }, c.id, [y, x], [], u.default.assign({}, H))
                }
            }, {
                key: "initCallbacks",
                value: function() {
                    this.canvas.on({
                        "object:moving": this.onObjectMove,
                        "touch:drag": this.onObjectDrag
                    })
                }
            }, {
                key: "updateBottomRuler",
                value: function() {
                    var t = p.default.getCabinetItems(),
                        e = u.default.filter(t, function(t) {
                            return t.constructor === m.default
                        });
                    gt.default.updateBottomRuler(it.drawBottomRuler, e)
                }
            }, {
                key: "updateRightRuler",
                value: function() {
                    var t = p.default.getCabinetItems(),
                        e = u.default.filter(t, function(t) {
                            return t.constructor === S.default && !t.options.isLeftBorderShelf && !t.options.isRightBorderShelf
                        });
                    gt.default.updateRightRuler(it.drawRightRuler, e)
                }
            }, {
                key: "updateRuler",
                value: function() {
                    var t = this,
                        e = p.default.getCanvas();
                    e.renderOnAddRemove = !1, window.requestAnimationFrame(function() {
                        gt.default.updateTopRuler(), gt.default.updateLeftRuler(), t.updateBottomRuler(), t.updateRightRuler(), gt.default.updateLeftBorderRuler(), gt.default.updateRightBorderRuler(), e.renderOnAddRemove = !0, e.renderAll()
                    })
                }
            }, {
                key: "removeCabinetItemChildren",
                value: function(t) {
                    var e = this;
                    t.shouldBeRemovedByUpdate() ? (u.default.forEach(t.children, function(n) {
                        u.default.remove(n.parents, function(e) {
                            return e.id === t.id
                        }), e.removeCabinetItemChildren(n)
                    }), t.delete(this.canvas)) : this.itemsToUpdate.push(t)
                }
            }, {
                key: "removeCabinetItem",
                value: function(t) {
                    for (var e = t.children, n = e.length, r = n - 1; r >= 0; r--) this.removeCabinetItemChildren(e[r]);
                    t.delete(this.canvas)
                }
            }, {
                key: "updateItems",
                value: function() {
                    var t = this;
                    u.default.forEach(this.itemsToUpdate, function(e) {
                        var n = t.findCabinetCollectionItem(e),
                            r = e.children;
                        e.delete(t.canvas), u.default.forEach(r, function(t) {
                            u.default.remove(t.parents, function(t) {
                                return t.id === e.id
                            })
                        }), ut.default.createItem(n, {
                            x: e.options.x,
                            y: e.options.y
                        }, r)
                    })
                }
            }, {
                key: "findCabinetCollectionItem",
                value: function(t) {
                    var e = p.default.getCollectionItems();
                    return u.default.find(e, function(e) {
                        return e.element.id === t.parentId
                    })
                }
            }, {
                key: "initShelf",
                value: function(t) {
                    var e = new _.default(t);
                    return e.preRender(), e
                }
            }, {
                key: "initInvisibleShelf",
                value: function(t) {
                    var e = new b.default(t);
                    return e.preRender(), e
                }
            }, {
                key: "addPhantom",
                value: function(t) {
                    this.phantom = t, this.canvas.add(t)
                }
            }, {
                key: "removePhantom",
                value: function() {
                    this.phantom.remove(),
                        this.phantom = null
                }
            }, {
                key: "movePhantom",
                value: function(t) {
                    var e = t.x,
                        n = t.y;
                    this.phantom.set({
                        left: e,
                        top: n
                    }), this.canvas.renderAll()
                }
            }, {
                key: "update",
                value: function() {
                    st.changeStyleBidStep(dt.default.isSelectedMaterialForAllDoors()), ft.default.recalculateCabinetCost(), this.updateRuler()
                }
            }, {
                key: "recalculate",
                value: function(t) {
                    var e = p.default.getCanvas(),
                        n = p.default.getValue("cabinetColor"),
                        r = n.color,
                        i = n.colorSide,
                        o = p.default.getCanvasObject("leftShelve"),
                        s = p.default.getCanvasObject("leftShelveLight"),
                        a = p.default.getCanvasObject("rightShelve"),
                        l = p.default.getCanvasObject("rightShelveLight"),
                        c = p.default.getOptions(),
                        f = c.shelfWidth,
                        h = c.shelvesChange,
                        d = p.default.getValue(t),
                        g = p.default.getCabinetItems();
                    switch (t) {
                        case "isShowCeiling":
                            var _ = p.default.getCanvasObject("insidePartOfCeiling");
                            _.set({
                                visible: d
                            }), this.renderCabinetFrame();
                            break;
                        case "isShowBottomShelf":
                            var v = p.default.getCanvasObject("insidePartOfBottomShelf");
                            v.set({
                                visible: d
                            }), this.renderCabinetFrame();
                            break;
                        case "isShowRightStand":
                            var b = p.default.getCanvasObject("insidePartOfRightShelf");
                            b.set({
                                fill: d ? r : mt
                            });
                            break;
                        case "isShowLeftStand":
                            var y = p.default.getCanvasObject("insidePartOfLeftShelf");
                            y.set({
                                fill: d ? r : mt
                            });
                            break;
                        case "isShowRear":
                            var m = p.default.getCanvasObject("backgroundCabinet"),
                                E = p.default.getCanvasObject("backgroundGrid"),
                                S = p.default.getCanvasObject("backgroundImage");
                            S.set({
                                visible: !d
                            }), m.set({
                                visible: d
                            }), E.set({
                                visible: d
                            });
                            break;
                        case "isShowRightShelve":
                            if (a.set({
                                    visible: d
                                }), l.set({
                                    visible: d
                                }), d) {
                                var O = p.default.getValue("currentRightShelfWidth"),
                                    T = u.default.find(g, function(t) {
                                        return t.options.isRight
                                    }),
                                    x = Math.floor(nt.default.calculatePx({
                                        value: O,
                                        oldMin: h.min,
                                        oldMax: h.max,
                                        newMin: vt.MIN_SIDE_SHELVES_WIDTH,
                                        newMax: vt.MAX_SIDE_SHELVES_WIDTH
                                    })),
                                    w = this.initInvisibleShelf({
                                        leftTop: {
                                            x: T.element.left + x + f,
                                            y: T.element.top + vt.SIDE_SHELVES_DIFF + f + 1
                                        },
                                        rightDown: {
                                            x: T.element.left + x + 2 * f,
                                            y: T.element.top + T.element.height - 2 * vt.SIDE_SHELVES_DIFF + f + 1
                                        },
                                        strokeWidth: 1,
                                        isRightInvisible: !0
                                    });
                                e.add(w.element), p.default.addCabinetItem(w), this.addRightDefaultShelves()
                            } else {
                                var C = u.default.find(g, function(t) {
                                    return t.options.isRightInvisible
                                });
                                C && this.removeCabinetItem(C)
                            }
                            break;
                        case "isShowLeftShelve":
                            if (o.set({
                                    visible: d
                                }), s.set({
                                    visible: d
                                }), d) {
                                var I = p.default.getValue("currentLeftShelfWidth"),
                                    R = u.default.find(g, function(t) {
                                        return t.options.isLeft
                                    }),
                                    A = Math.floor(nt.default.calculatePx({
                                        value: I,
                                        oldMin: h.min,
                                        oldMax: h.max,
                                        newMin: vt.MIN_SIDE_SHELVES_WIDTH,
                                        newMax: vt.MAX_SIDE_SHELVES_WIDTH
                                    })),
                                    P = this.initInvisibleShelf({
                                        leftTop: {
                                            x: R.element.left - A - f,
                                            y: R.element.top + vt.SIDE_SHELVES_DIFF + f + 1
                                        },
                                        rightDown: {
                                            x: R.element.left - A,
                                            y: R.element.top + R.element.height - 2 * vt.SIDE_SHELVES_DIFF + f + 1
                                        },
                                        strokeWidth: 1,
                                        isLeftInvisible: !0
                                    });
                                e.add(P.element), p.default.addCabinetItem(P), this.addLeftDefaultShelves()
                            } else {
                                var L = u.default.find(g, function(t) {
                                    return t.options.isLeftInvisible
                                });
                                L && this.removeCabinetItem(L)
                            }
                            break;
                        case "isShowLeftRear":
                            d ? (o.set({
                                fill: i
                            }), s.set({
                                fill: r
                            })) : (o.set({
                                fill: mt
                            }), s.set({
                                fill: mt
                            }));
                            break;
                        case "isShowRightRear":
                            d ? (a.set({
                                fill: i
                            }), l.set({
                                fill: r
                            })) : (a.set({
                                fill: mt
                            }), l.set({
                                fill: mt
                            }));
                            break;
                        case "width":
                        case "height":
                        case "leftShelf":
                        case "rightShelf":
                            this.tryRerender()
                    }
                    this.update(), this.canvas.renderAll()
                }
            }, {
                key: "tryRerender",
                value: function() {
                    this.cabinetIsEmpty() && this.createCabinet()
                }
            }, {
                key: "removeAll",
                value: function() {
                    var t = p.default.getCanvas();
                    t.clear(), p.default.removeCabinetItems()
                }
            }, {
                key: "cabinetIsEmpty",
                value: function() {
                    var t = p.default.getCabinetItems();
                    return u.default.every(t, function(t) {
                        return t instanceof _.default || t instanceof b.default || t instanceof S.default && (t.options.isOnTop || t.options.isOnBottom)
                    })
                }
            }, {
                key: "setCurrentValues",
                value: function() {
                    this.cabinetIsEmpty() && (p.default.setValue("currentWidth", p.default.getValue("width")), p.default.setValue("currentHeight", p.default.getValue("height")), p.default.setValue("currentLeftShelfWidth", p.default.getValue("leftShelf")), p.default.setValue("currentRightShelfWidth", p.default.getValue("rightShelf")))
                }
            }, {
                key: "applyNewColor",
                value: function() {
                    var t = p.default.getCabinetItems(),
                        e = p.default.getValue("cabinetColor"),
                        n = e.colorSide,
                        r = e.colorShelf,
                        i = e.color,
                        o = e.background,
                        s = e.line,
                        a = e.stroke;
                    u.default.forEach(t, function(t) {
                        t && u.default.isFunction(t.element.set) && (t instanceof S.default || t instanceof m.default) && t.updateColor({
                            fill: r,
                            perspectiveColor: i,
                            stroke: a
                        })
                    });
                    var l = p.default.getCanvasObject("backgroundCabinet");
                    l.set({
                        fill: o,
                        stroke: a
                    });
                    var c = p.default.getCanvasObject("backgroundGrid");
                    c.set({
                        stroke: s,
                        strokeWidth: 1
                    });
                    var f = p.default.getCanvasObject("rightShelve");
                    f.set({
                        fill: n,
                        stroke: a
                    });
                    var h = p.default.getCanvasObject("rightShelveLight");
                    h.set({
                        fill: i
                    });
                    var d = p.default.getCanvasObject("leftShelve");
                    d.set({
                        fill: n,
                        stroke: a
                    });
                    var g = p.default.getCanvasObject("leftShelveLight");
                    g.set({
                        fill: i
                    });
                    var _ = p.default.getCanvasObject("insidePartOfLeftShelf");
                    _.set({
                        fill: i,
                        stroke: a
                    });
                    var v = p.default.getCanvasObject("insidePartOfRightShelf");
                    v.set({
                        fill: i,
                        stroke: a
                    });
                    var b = p.default.getCanvasObject("insidePartOfCeiling");
                    b.set({
                        fill: i,
                        stroke: a
                    });
                    var y = p.default.getCanvasObject("insidePartOfBottomShelf");
                    y.set({
                        fill: i,
                        stroke: a
                    });
                    var E = p.default.getCanvasObject("cabinetFrame");
                    E.set({
                        fill: r,
                        stroke: a
                    }), this.canvas.renderAll()
                }
            }, {
                key: "setColorValue",
                value: function(t) {
                    var e = p.default.getOptions(),
                        n = e.cabinetAvailableColors,
                        r = u.default.find(n, {
                            color: t
                        });
                    u.default.isObject(r) && (p.default.setValue("cabinetColor", u.default.cloneDeep(r)), this.applyNewColor())
                }
            }, {
                key: "setValue",
                value: function(t, e) {
                    var n = p.default.getValue();
                    u.default.has(n, t) && (p.default.setValue(t, e), this.recalculate(t))
                }
            }, {
                key: "renderCabinetFrame",
                value: function() {
                    var t, e = p.default.getCanvasObject("cabinetFrame"),
                        n = p.default.getCanvas();
                    e && u.default.isFunction(e.remove) && e.remove();
                    var r = [],
                        i = p.default.getValue(),
                        s = i.isShowCeiling,
                        a = i.isShowBottomShelf,
                        l = p.default.getOptions(),
                        f = l.shelfWidth,
                        h = p.default.getValue("cabinetColor"),
                        d = h.colorShelf,
                        g = h.stroke,
                        _ = this.calculateMainPoints(),
                        v = _.leftTop,
                        b = _.leftDown,
                        y = _.rightTop,
                        m = _.rightDown,
                        E = (t = {
                            stroke: g,
                            strokeWidth: 1,
                            fill: d
                        }, o(t, "stroke", g), o(t, "selectable", !1), o(t, "fillRule", "evenodd"), t);
                    s || a ? s && a ? r.push("M " + (b.x + " " + b.y) + "\n                L " + (v.x + " " + v.y) + "\n                L " + (y.x + " " + y.y) + "\n                L " + (m.x + " " + m.y) + "\n                L " + (b.x + " " + b.y) + "z\n                M " + (b.x - f + " " + (b.y + f)) + "\n                L " + (v.x - f + " " + (v.y - f)) + "\n                L " + (y.x + f + " " + (y.y - f)) + "\n                L " + (m.x + f + " " + (m.y + f)) + "\n                L " + (b.x - f + " " + (b.y + f)) + "z\n            ") : s && !a ? r.push("M " + (b.x - f + " " + (b.y + f)) + "\n                L " + (v.x - f + " " + (v.y - f)) + "\n                L " + (y.x + f + " " + (y.y - f)) + "\n                L " + (m.x + f + " " + (m.y + f)) + "\n                L " + (m.x + " " + (m.y + f)) + "\n                L " + (y.x + " " + y.y) + "\n                L " + (v.x + " " + v.y) + "\n                L " + (b.x + " " + (b.y + f)) + "z\n            ") : !s && a && r.push("M " + (v.x - f + " " + (v.y - f)) + "\n                L " + (b.x - f + " " + (b.y + f)) + "\n                L " + (m.x + f + " " + (m.y + f)) + "\n                L " + (y.x + f + " " + (y.y - f)) + "\n                L " + (y.x + " " + (y.y - f)) + "\n                L " + (m.x + " " + m.y) + "\n                L " + (b.x + " " + b.y) + "\n                L " + (v.x + " " + (v.y - f)) + "z\n            ") : r.push("M " + (b.x + " " + (b.y + f)) + "\n                L " + (v.x + " " + (v.y - f)) + "\n                L " + (v.x - f + " " + (v.y - f)) + "\n                L " + (b.x - f + " " + (b.y + f)) + "z\n                M " + (m.x + " " + (m.y + f)) + "\n                L " + (y.x + " " + (y.y - f)) + "\n                L " + (y.x + f + " " + (y.y - f)) + "\n                L " + (m.x + f + " " + (m.y + f)) + "z\n            ");
                    var S = new c.fabric.Path(u.default.join(r, " "), E);
                    p.default.setCanvasObject("cabinetFrame", S), n.add(S)
                }
            }]), t
        }();
    e.default = new Et
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var o = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        s = n(11),
        a = n(7),
        l = r(a),
        u = n(2),
        c = (r(u), n(109)),
        f = (r(c), function() {
            function t() {
                i(this, t)
            }
            return o(t, [{
                key: "init",
                value: function(t) {
                    this.canvas = null, this.options = l.default.isObject(t) ? l.default.cloneDeep(t) : {}, this.shadow = new s.fabric.Rect({
                        left: 0,
                        top: 0,
                        width: 0,
                        height: 0,
                        visible: !1,
                        originX: "left",
                        originY: "top",
                        opacity: .5
                    }), this.cabinet = [], this.doorsGroups = [], this.doorsUrlMaps = {}, this.doorsGroupsItemsForSpyCanvas = {}, this.doorsGroupsSelectedItemIndex = 0, this.initDoorsTextures(), this.doorsResources = {}, this.doors = [], this.doorsTextureCost = 0, this.doorDragging = !1, this.doorElement = !1, this.cabinetProperties = {}, this.doorsGroupsSelectedItemIndex = 0, this.doorsValues = {}, this.textureMode = !1, this.loadedDoorsGroups = {}, this.bidTextValues = {}, this.snapshots = {}, this.modals = [], this.cabinetCollectionItems = [], this.doorsCollectionItems = [], this.doorsGroupsCollectionItems = [], this.pantographParts = {}, this.dragging = !1, this.cabinetCost = 0, this.doorsCost = 0, this._initDefaultValues()
                }
            }, {
                key: "_initDefaultValues",
                value: function() {
                    var t = this.options,
                        e = t.depthChange,
                        n = t.widthChange,
                        r = t.heightChange,
                        i = t.shelvesChange,
                        o = t.defaultCabinetColors,
                        s = t.isShowBottomShelf,
                        a = t.isShowCeiling,
                        u = t.isShowRear,
                        c = t.isShowLeftStand,
                        f = t.isShowRightStand,
                        h = t.isShowLeftShelve,
                        d = t.isShowRightShelve,
                        p = t.isShowLeftRear,
                        g = t.isShowRightRear,
                        _ = t.doorsCount,
                        v = t.cabinetDoorsWidth,
                        b = t.cabinetDoorsHeight,
                        y = t.defaultDoorsColor;
                    this.values = {
                        depth: e.default,
                        width: n.default,
                        height: r.default,
                        leftShelf: i.default,
                        rightShelf: i.default,
                        currentWidth: n.default,
                        currentHeight: r.default,
                        currentLeftShelfWidth: i.default,
                        currentRightShelfWidth: i.default,
                        cabinetColor: l.default.cloneDeep(o),
                        isShowBottomShelf: s,
                        isShowCeiling: a,
                        isShowRear: u,
                        isShowLeftStand: c,
                        isShowRightStand: f,
                        isShowLeftShelve: h,
                        isShowRightShelve: d,
                        isShowLeftRear: p,
                        isShowRightRear: g,
                        doorsCount: _,
                        cabinetDoorsWidth: v,
                        cabinetDoorsHeight: b,
                        doorsColor: l.default.cloneDeep(y)
                    }, this.canvasObjects = {}
                }
            }, {
                key: "saveId",
                value: function(t) {
                    return this.id = t, this
                }
            }, {
                key: "getId",
                value: function() {
                    return this.id
                }
            }, {
                key: "removeSnapshots",
                value: function() {
                    return this.snapshots = null, this
                }
            }, {
                key: "saveSnapshots",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                    return this.snapshots = t, this
                }
            }, {
                key: "getSnapshots",
                value: function() {
                    return this.snapshots
                }
            }, {
                key: "savePantographParts",
                value: function(t) {
                    this.pantographParts = t
                }
            }, {
                key: "getPantographParts",
                value: function() {
                    return this.pantographParts
                }
            }, {
                key: "setCanvasObject",
                value: function(t, e) {
                    l.default.isObject(e) && l.default.isString(t) && !l.default.isEmpty(t) && (this.canvasObjects[t] = e)
                }
            }, {
                key: "getCanvasObject",
                value: function(t) {
                    return l.default.isString(t) ? this.canvasObjects[t] : this.canvasObjects
                }
            }, {
                key: "setAttributes",
                value: function(t, e) {
                    l.default.isObject(t) && l.default.isString(attribute) && t.set(e)
                }
            }, {
                key: "initCollectionItems",
                value: function(t) {
                    this.cabinetCollectionItems = t
                }
            }, {
                key: "getCollectionItems",
                value: function() {
                    return this.cabinetCollectionItems
                }
            }, {
                key: "initDoorsTextures",
                value: function() {
                    var t = this;
                    l.default.keys(this.options.doorsTextures).forEach(function(e) {
                        t.doorsGroups.push(e), t.doorsUrlMaps[e] = {}, t.doorsGroupsItemsForSpyCanvas[e] = {
                            label: e,
                            groupItems: []
                        }, l.default.keys(t.options.doorsTextures[e]).forEach(function(n) {
                            var r = t.options.doorsTextures[e][n];
                            t.doorsUrlMaps[e][n] = r.url, t.doorsGroupsItemsForSpyCanvas[e].groupItems.push({
                                label: n,
                                url: t.doorsUrlMaps[e][n],
                                cost: r.cost,
                                type: r.type
                            })
                        })
                    })
                }
            }, {
                key: "getDoorsUrlMap",
                value: function(t) {
                    return this.doorsUrlMaps[this.doorsGroups[t]]
                }
            }, {
                key: "getDoorsSelectedGroupUrlMap",
                value: function() {
                    return this.getDoorsUrlMap(this.doorsGroupsSelectedItemIndex)
                }
            }, {
                key: "initDoorsGroupsItemsForSpyCanvas",
                value: function(t) {
                    this.doorsGroupsItemsForSpyCanvas = t
                }
            }, {
                key: "getDoorsGroupsItemsForSpyCanvas",
                value: function() {
                    return this.doorsGroupsItemsForSpyCanvas
                }
            }, {
                key: "getDoorsItemsOfSelectedGroupForSpyCanvas",
                value: function() {
                    return this.getDoorsItemsOfGroupForSpyCanvas(this.doorsGroupsSelectedItemIndex)
                }
            }, {
                key: "getDoorsItemsOfGroupForSpyCanvas",
                value: function(t) {
                    return this.doorsGroupsItemsForSpyCanvas[this.doorsGroups[t]]
                }
            }, {
                key: "initDoorsGroupsCollectionItems",
                value: function(t) {
                    this.doorsGroupsCollectionItems = t
                }
            }, {
                key: "getDoorsGroupsCollectionItems",
                value: function() {
                    return this.doorsGroupsCollectionItems
                }
            }, {
                key: "getDoorsGroupsCollectionItemsKeys",
                value: function() {
                    return this.doorsGroups
                }
            }, {
                key: "getDoorsGroupsSelectedItemIndex",
                value: function() {
                    return this.doorsGroupsSelectedItemIndex
                }
            }, {
                key: "setDoorsGroupsSelectedItemIndex",
                value: function(t) {
                    this.doorsGroupsSelectedItemIndex = t
                }
            }, {
                key: "initDoorsCollectionItems",
                value: function(t) {
                    this.doorsCollectionItems = t
                }
            }, {
                key: "getDoorsCollectionItems",
                value: function() {
                    return this.doorsCollectionItems
                }
            }, {
                key: "startDragging",
                value: function() {
                    this.dragging = !0
                }
            }, {
                key: "endDragging",
                value: function() {
                    this.dragging = !1
                }
            }, {
                key: "isDraggingOn",
                value: function() {
                    return this.dragging
                }
            }, {
                key: "getValue",
                value: function(t) {
                    return l.default.isString(t) ? this.values[t] : this.values
                }
            }, {
                key: "setValue",
                value: function(t, e) {
                    this.values[t] = e
                }
            }, {
                key: "setCanvas",
                value: function(t) {
                    this.canvas = t
                }
            }, {
                key: "getCanvas",
                value: function() {
                    return this.canvas
                }
            }, {
                key: "getShadow",
                value: function() {
                    return this.shadow
                }
            }, {
                key: "getOptions",
                value: function() {
                    return this.options
                }
            }, {
                key: "getOption",
                value: function(t) {
                    return this.options[t]
                }
            }, {
                key: "addModal",
                value: function(t) {
                    return this.modals.push(t), this
                }
            }, {
                key: "getLastModal",
                value: function() {
                    return l.default.last(this.modals)
                }
            }, {
                key: "getModals",
                value: function() {
                    return this.modals
                }
            }, {
                key: "removeLastModal",
                value: function() {
                    return this.modals.pop(), this
                }
            }, {
                key: "removeAllModals",
                value: function() {
                    return this.modals = [], this.modals
                }
            }, {
                key: "addDoor",
                value: function(t) {
                    this.doors.push(t)
                }
            }, {
                key: "getDoors",
                value: function() {
                    return this.doors
                }
            }, {
                key: "removeDoor",
                value: function(t) {
                    var e = t.id;
                    return l.default.remove(this.doors, function(t) {
                        return t.door.id === e
                    })
                }
            }, {
                key: "removeAllDoors",
                value: function() {
                    this.doors = []
                }
            }, {
                key: "startDoorDragging",
                value: function() {
                    this.doorDragging = !0
                }
            }, {
                key: "stopDoorDragging",
                value: function() {
                    this.doorDragging = !1
                }
            }, {
                key: "isDoorDragging",
                value: function() {
                    return this.doorDragging
                }
            }, {
                key: "getDoorsTextureCost",
                value: function() {
                    return this.doorsTextureCost
                }
            }, {
                key: "setDoorsTextureCost",
                value: function(t) {
                    return this.doorsTextureCost = t, this
                }
            }, {
                key: "startDoorElementDragging",
                value: function(t) {
                    return this.doorElement = t, this
                }
            }, {
                key: "stopDoorElementDragging",
                value: function() {
                    var t = this.doorElement;
                    return this.doorElement = null, t
                }
            }, {
                key: "isDoorElementDragging",
                value: function() {
                    return !!this.doorElement
                }
            }, {
                key: "saveCabinetProperties",
                value: function(t) {
                    return this.cabinetProperties = t, this
                }
            }, {
                key: "getCabinetProperties",
                value: function() {
                    return this.cabinetProperties
                }
            }, {
                key: "addCabinetItem",
                value: function(t) {
                    this.cabinet.push(t)
                }
            }, {
                key: "getCabinetItems",
                value: function() {
                    return this.cabinet
                }
            }, {
                key: "removeCabinetItem",
                value: function(t) {
                    l.default.remove(this.cabinet, function(e) {
                        return e.id === t.id
                    })
                }
            }, {
                key: "removeCabinetItems",
                value: function() {
                    this.cabinet = []
                }
            }, {
                key: "getCabinetCost",
                value: function(t) {
                    return this.cabinetCost
                }
            }, {
                key: "setCabinetCost",
                value: function(t) {
                    this.cabinetCost = t
                }
            }, {
                key: "getDoorsCost",
                value: function(t) {
                    return this.doorsCost
                }
            }, {
                key: "setDoorsCost",
                value: function(t) {
                    this.doorsCost = t
                }
            }, {
                key: "saveBackgroundImage",
                value: function(t) {
                    this.canvasObjects.backgroundImage = t[this.options.backgroundUrl]
                }
            }, {
                key: "intersection",
                value: function(t, e) {
                    return e ? this.intersectionWidthDoors(t) : this.intersectionWithCabinet(t)
                }
            }, {
                key: "intersectionWithCabinet",
                value: function(t) {
                    var e = [];
                    return l.default.forEach(this.cabinet, function(n) {
                        var r = n.element;
                        (t.intersectsWithObject(r) || t.isContainedWithinObject(r) || r.isContainedWithinObject(t)) && e.push(n)
                    }), e
                }
            }, {
                key: "intersectionWidthDoors",
                value: function(t) {
                    var e = [];
                    return l.default.forEach(this.doors, function(n) {
                        var r = n.element;
                        (t.intersectsWithObject(r) || t.isContainedWithinObject(r) || r.isContainedWithinObject(t)) && e.push(n)
                    }), e
                }
            }, {
                key: "saveDoorsResources",
                value: function(t) {
                    this.doorsResources = l.default.merge({}, this.doorsResources, t)
                }
            }, {
                key: "saveLoadedDoorsResourcesIndex",
                value: function(t) {
                    return this.loadedDoorsGroups[t + ""] = !0, this
                }
            }, {
                key: "isGroupRescourcesLoaded",
                value: function(t) {
                    return this.loadedDoorsGroups[t + ""]
                }
            }, {
                key: "clearLoadedGroupsResource",
                value: function() {
                    return this.loadedDoorsGroups = {}, this
                }
            }, {
                key: "getDoorsResources",
                value: function() {
                    return this.doorsResources
                }
            }, {
                key: "getDoorsResource",
                value: function(t) {
                    return this.doorsResources[t]
                }
            }, {
                key: "setDoorsValues",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                    return this.doorsValues = t, this
                }
            }, {
                key: "getDoorsValue",
                value: function(t) {
                    return this.doorsValues[t]
                }
            }, {
                key: "getDoorsValues",
                value: function() {
                    return this.doorsValues
                }
            }, {
                key: "enableTextureMode",
                value: function() {
                    return this.textureMode = !0, this
                }
            }, {
                key: "isInTextureMode",
                value: function() {
                    return this.textureMode
                }
            }, {
                key: "disableTextureMode",
                value: function() {
                    return this.textureMode = !1, this
                }
            }, {
                key: "setBidTextValues",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                    return this.bidTextValues = t, this
                }
            }, {
                key: "setBidTextValue",
                value: function(t, e) {
                    return this.bidTextValues[t] = e, this
                }
            }, {
                key: "getBidTextValues",
                value: function() {
                    return this.bidTextValues
                }
            }, {
                key: "getBidTextValue",
                value: function(t) {
                    return this.bidTextValues[t] || ""
                }
            }]), t
        }());
    e.default = new f
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = function t(e, n, r) {
            null === e && (e = Function.prototype);
            var i = Object.getOwnPropertyDescriptor(e, n);
            if (void 0 === i) {
                var o = Object.getPrototypeOf(e);
                return null === o ? void 0 : t(o, n, r)
            }
            if ("value" in i) return i.value;
            var s = i.get;
            if (void 0 !== s) return s.call(r)
        },
        c = n(138),
        f = i(c),
        h = n(139),
        d = r(h),
        p = function(t) {
            function e() {
                return o(this, e), s(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [],
                        n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                    u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "preRender", this).call(this, t, n);
                    var r = this.options,
                        i = r.leftTop,
                        o = r.rightDown;
                    this.options.x = i.x, this.options.y = i.y, this.element = d.getRectangle(i, o, {
                        stroke: this.options.stroke,
                        strokeWidth: this.options.strokeWidth,
                        visible: this.options.visible,
                        fill: this.options.color,
                        selectable: this.options.selectable
                    })
                }
            }]), e
        }(f.default);
    e.default = p
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var o = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        s = n(96),
        a = r(s),
        l = n(7),
        u = r(l),
        c = n(136),
        f = r(c),
        h = function() {
            function t(e, n) {
                i(this, t), this.id = (0, a.default)(), this.parentId = n, this.options = u.default.cloneDeep(e), this.element = null, this.perspective = null, this.parents = [], this.children = [];
                var r = f.default.getOptions(),
                    o = r.shelfWidth;
                this.shelfWidth = o
            }
            return o(t, [{
                key: "isHorizontal",
                value: function() {
                    return u.default.get(this.options, "isHorizontal", !1)
                }
            }, {
                key: "isVertical",
                value: function() {
                    return u.default.get(this.options, "isVertical", !1)
                }
            }, {
                key: "preRender",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [],
                        e = arguments[1];
                    e.x, e.y;
                    return this.parents = t, t
                }
            }, {
                key: "addChild",
                value: function(t) {
                    this.children.push(t)
                }
            }, {
                key: "addParent",
                value: function(t) {
                    this.parents.push(t)
                }
            }, {
                key: "removeChild",
                value: function(t) {
                    return u.default.remove(this.children, function(e) {
                        return e.id === t.id
                    })
                }
            }, {
                key: "postRender",
                value: function() {
                    this.element.hasControls = this.element.hasBorders = !1, this.element.parentId = this.id
                }
            }, {
                key: "shouldBeRemovedByUpdate",
                value: function() {
                    return !0
                }
            }, {
                key: "delete",
                value: function() {
                    var t = this;
                    u.default.forEach(this.parents, function(e) {
                        e.removeChild(t)
                    }), f.default.removeCabinetItem(this), this.element.remove(), this.element = null
                }
            }, {
                key: "getCost",
                value: function(t, e) {
                    return 0
                }
            }]), t
        }();
    e.default = h
}, function(t, e, n) {
    "use strict";

    function r() {
        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {
                x: 0,
                y: 0
            },
            e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                x: 0,
                y: 0
            },
            n = arguments[2];
        return new u.fabric.Path("\n        M " + t.x + " " + t.y + "\n        L " + t.x + " " + e.y + "\n        L " + e.x + " " + e.y + "\n        L " + e.x + " " + t.y + "\n        L " + t.x + " " + t.y + "z", n)
    }

    function i() {
        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {
                x: 0,
                y: 0
            },
            e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                x: 0,
                y: 0
            },
            n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                x: 0,
                y: 0
            },
            r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {
                x: 0,
                y: 0
            },
            i = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : {};
        return new u.fabric.Path("\n        M " + t.x + " " + t.y + "\n        L " + r.x + " " + r.y + "\n        L " + e.x + " " + e.y + "\n        L " + n.x + " " + n.y + "\n        L " + t.x + " " + t.y + "z", i)
    }

    function o() {
        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {
                x: 0,
                y: 0
            },
            e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                x: 0,
                y: 0
            },
            n = arguments[2],
            r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {},
            i = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : {},
            o = new u.fabric.Path("\n            M " + t.x + " " + e.y + "\n            L " + t.x + " " + (e.y - n) + "\n            C " + (t.x + n + 3) + " " + t.y + " " + e.x + " " + t.y + " " + e.x + " " + t.y + "\n            L " + e.x + " " + (t.y + n) + "\n            L " + t.x + " " + e.y + "z", r),
            s = new u.fabric.Path("\n        M " + e.x + " " + e.y + "\n        L " + t.x + " " + e.y + "\n        C " + (t.x + n + 3) + " " + (t.y + n) + " " + e.x + " " + (t.y + n) + " " + e.x + " " + (t.y + n) + "\n        L " + e.x + " " + e.y + "z", i);
        return new u.fabric.Group([o, s])
    }

    function s() {
        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {
                x: 0,
                y: 0
            },
            e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                x: 0,
                y: 0
            },
            n = arguments[2],
            r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {},
            i = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : {},
            o = new u.fabric.Path("\n            M " + t.x + " " + t.y + "\n            L " + e.x + " " + (e.y - n) + "\n            L " + e.x + " " + e.y + "\n            C " + (t.x + n + 3) + " " + e.y + " " + t.x + " " + (t.y + n) + " " + t.x + " " + (t.y + n) + "\n            L " + t.x + " " + t.y + "z", r),
            s = new u.fabric.Path("\n        M " + t.x + " " + t.y + "\n        L " + e.x + " " + t.y + "\n        L " + e.x + " " + (e.y - n) + "\n        C " + (t.x + n + 3) + " " + (e.y - n) + " " + t.x + " " + t.y + " " + t.x + " " + t.y + "z", i);
        return new u.fabric.Group([o, s])
    }

    function a() {
        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {
                x: 0,
                y: 0
            },
            e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                x: 0,
                y: 0
            },
            n = arguments[2],
            r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {},
            i = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : {},
            o = new u.fabric.Path("\n            M " + e.x + " " + e.y + "\n            L " + e.x + " " + (e.y - n) + "\n            C " + (e.x - n - 3) + " " + t.y + " " + t.x + " " + t.y + " " + t.x + " " + t.y + "\n            L " + t.x + " " + (t.y + n) + "\n            L " + e.x + " " + e.y + "z", r),
            s = new u.fabric.Path("\n        M " + t.x + " " + e.y + "\n        L " + t.x + " " + (t.y + n) + "\n        C " + (e.x - n - 3) + " " + (t.y + n) + " " + e.x + " " + e.y + " " + e.x + " " + e.y + "\n        L " + t.x + " " + e.y + "z", i);
        return new u.fabric.Group([o, s])
    }

    function l() {
        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {
                x: 0,
                y: 0
            },
            e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                x: 0,
                y: 0
            },
            n = arguments[2],
            r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {},
            i = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : {},
            o = new u.fabric.Path("\n            M " + e.x + " " + t.y + "\n            L " + t.x + " " + (e.y - n) + "\n            L " + t.x + " " + e.y + "\n            C " + (e.x - n - 3) + " " + e.y + " " + e.x + " " + (t.y + n) + " " + e.x + " " + (t.y + n) + "\n            L " + e.x + " " + t.y + "z", r),
            s = new u.fabric.Path("\n        M " + t.x + " " + t.y + "\n        L " + e.x + " " + t.y + "\n        C " + (e.x - n - 3) + " " + (e.y - n) + " " + t.x + " " + (e.y - n) + " " + t.x + " " + (e.y - n) + "\n        L " + t.x + " " + t.y + "z", i);
        return new u.fabric.Group([o, s])
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.getRectangle = r, e.getPath = i, e.getLeftTopShelf = o, e.getLeftBottomShelf = s, e.getRightTopShelf = a, e.getRightBottomShelf = l;
    var u = n(11)
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = function t(e, n, r) {
            null === e && (e = Function.prototype);
            var i = Object.getOwnPropertyDescriptor(e, n);
            if (void 0 === i) {
                var o = Object.getPrototypeOf(e);
                return null === o ? void 0 : t(o, n, r)
            }
            if ("value" in i) return i.value;
            var s = i.get;
            if (void 0 !== s) return s.call(r)
        },
        c = n(138),
        f = i(c),
        h = n(139),
        d = r(h),
        p = function(t) {
            function e() {
                return o(this, e), s(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [],
                        n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                    u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "preRender", this).call(this, t, n);
                    var r = this.options,
                        i = r.leftTop,
                        o = r.rightDown;
                    this.options.x = i.x, this.options.y = i.y, this.options.downY = o.y, this.element = d.getRectangle(i, o, {
                        strokeWidth: this.options.strokeWidth,
                        stroke: "#00f",
                        visible: !1,
                        fill: "#0f0",
                        selectable: !1
                    })
                }
            }]), e
        }(f.default);
    e.default = p
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = function t(e, n, r) {
            null === e && (e = Function.prototype);
            var i = Object.getOwnPropertyDescriptor(e, n);
            if (void 0 === i) {
                var o = Object.getPrototypeOf(e);
                return null === o ? void 0 : t(o, n, r)
            }
            if ("value" in i) return i.value;
            var s = i.get;
            if (void 0 !== s) return s.call(r)
        },
        c = n(138),
        f = i(c),
        h = n(136),
        d = i(h),
        p = n(139),
        g = r(p),
        v = function(t) {
            function e(t, n) {
                return o(this, e), s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, _.set(t, "isVertical", !0), n))
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [],
                        n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                    u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "preRender", this).call(this, t, n);
                    var r = Math.min(t[0].options.y, t[1].options.y),
                        i = Math.max(t[0].options.y, t[1].options.y),
                        o = n.x;
                    n.y;
                    return this.options.x = o, this.options.y = r + this.shelfWidth, this.options.bottomY = i, this.element = g.getRectangle({
                        x: o,
                        y: r + this.shelfWidth
                    }, {
                        x: o + this.shelfWidth,
                        y: i
                    }, {
                        stroke: this.options.stroke,
                        strokeWidth: this.options.strokeWidth,
                        visible: this.options.visible,
                        selectable: this.options.selectable,
                        fill: this.options.color
                    }), t
                }
            }, {
                key: "shouldBeRemovedByUpdate",
                value: function() {
                    return !1
                }
            }, {
                key: "getCost",
                value: function(t, e, n, r) {
                    var i = n * this.element.height / r;
                    return i * d.default.getOption("cost").shelf / 100
                }
            }, {
                key: "updateColor",
                value: function(t) {
                    this.element.set(t)
                }
            }]), e
        }(f.default);
    e.default = v
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = function t(e, n, r) {
            null === e && (e = Function.prototype);
            var i = Object.getOwnPropertyDescriptor(e, n);
            if (void 0 === i) {
                var o = Object.getPrototypeOf(e);
                return null === o ? void 0 : t(o, n, r)
            }
            if ("value" in i) return i.value;
            var s = i.get;
            if (void 0 !== s) return s.call(r)
        },
        c = n(138),
        f = i(c),
        h = n(143),
        d = r(h),
        p = n(139),
        g = r(p),
        v = n(144),
        b = r(v),
        y = n(145),
        m = i(y),
        E = n(136),
        S = i(E),
        O = n(140),
        T = i(O),
        x = function(t) {
            function e(t, n) {
                return o(this, e), s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, _.set(t, "isHorizontal", !0), n))
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [],
                        n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                    u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "preRender", this).call(this, t, n);
                    var r = S.default.getOptions(),
                        i = r.shelvesChange,
                        o = t[0].options.x > t[1].options.x ? t[1] : t[0],
                        s = t[0].options.x > t[1].options.x ? t[0] : t[1],
                        a = o.options.x,
                        l = s.options.x,
                        c = (n.x, n.y);
                    this.options.x = a + this.shelfWidth, this.options.y = c;
                    var f = b.isOnTop(S.default.getCabinetItems(), c, this.shelfWidth),
                        h = b.isOnBottom(S.default.getCabinetItems(), c, this.shelfWidth),
                        p = {
                            stroke: this.options.stroke,
                            strokeWidth: this.options.strokeWidth,
                            visible: this.options.visible,
                            fill: this.options.color,
                            selectable: this.options.selectable
                        },
                        _ = {
                            stroke: this.options.stroke,
                            strokeWidth: this.options.strokeWidth,
                            visible: this.options.visible,
                            fill: this.options.perspectiveColor,
                            selectable: this.options.selectable
                        };
                    if (o.constructor === T.default) {
                        var v = S.default.getValue("currentLeftShelfWidth"),
                            y = Math.floor(m.default.calculatePx({
                                value: v,
                                oldMin: i.min,
                                oldMax: i.max,
                                newMin: d.MIN_SIDE_SHELVES_WIDTH,
                                newMax: d.MAX_SIDE_SHELVES_WIDTH
                            }));
                        this.options.isLeftBorderShelf = !0, f ? (this.options.isOnTop = !0, this.element = g.getLeftTopShelf({
                            x: this.options.x,
                            y: c - d.SIDE_SHELVES_DIFF
                        }, {
                            x: this.options.x + y,
                            y: c + this.shelfWidth
                        }, this.shelfWidth, p, _)) : h && (this.options.isOnBottom = !0, this.element = g.getLeftBottomShelf({
                            x: this.options.x,
                            y: c
                        }, {
                            x: this.options.x + y,
                            y: c + d.SIDE_SHELVES_DIFF + this.shelfWidth
                        }, this.shelfWidth, p, _))
                    } else if (s.constructor === T.default) {
                        this.options.isRightBorderShelf = !0;
                        var E = S.default.getValue("currentRightShelfWidth"),
                            O = Math.floor(m.default.calculatePx({
                                value: E,
                                oldMin: i.min,
                                oldMax: i.max,
                                newMin: d.MIN_SIDE_SHELVES_WIDTH,
                                newMax: d.MAX_SIDE_SHELVES_WIDTH
                            }));
                        f ? (this.options.isOnTop = !0, this.element = g.getRightTopShelf({
                            x: this.options.x,
                            y: c - d.SIDE_SHELVES_DIFF
                        }, {
                            x: this.options.x + O,
                            y: c + this.shelfWidth
                        }, this.shelfWidth, p, _)) : h && (this.options.isOnBottom = !0, this.element = g.getRightBottomShelf({
                            x: this.options.x,
                            y: c
                        }, {
                            x: this.options.x + O,
                            y: c + d.SIDE_SHELVES_DIFF + this.shelfWidth
                        }, this.shelfWidth, p, _))
                    }
                    return this.element = this.element || g.getRectangle({
                        x: a + this.shelfWidth,
                        y: c
                    }, {
                        x: l,
                        y: c + this.shelfWidth
                    }, p), t
                }
            }, {
                key: "delete",
                value: function(t) {
                    t.remove(this.element), u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "delete", this).call(this)
                }
            }, {
                key: "getCost",
                value: function(t, e) {
                    var n = t * this.element.width / e,
                        r = S.default.getOption("cost");
                    return this.options.isLeftBorderShelf || this.options.isRightBorderShelf ? r.borderShelf : n * r.shelf / 100
                }
            }, {
                key: "updateColor",
                value: function(t) {
                    this.options.isOnTop || this.options.isOnBottom ? (this.element.item(0).set({
                        fill: t.fill,
                        stroke: t.stroke
                    }), this.element.item(1).set({
                        fill: t.perspectiveColor,
                        stroke: t.stroke
                    })) : this.element.set(t)
                }
            }]), e
        }(f.default);
    e.default = x
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    e.MAIN_CANVAS_WIDTH = 962, e.MAIN_CANVAS_HEIGHT = 453, e.SPY_CANVAS_WIDTH = 961, e.SPY_CANVAS_HEIGHT = 638, e.DEFAULT_TOUCH_BEHAVIOR_PADDING = 150, e.BOX_HEIGHT = 21, e.BOX_ARC_LENGTH = 26, e.PIPE_BORDER_RADIUS = 6, e.VERTICAL_PIPE_PADDING = 10, e.PIPE_PADDING = 16, e.TIE_HEIGHT = 25, e.TIE_WIDTH = 25, e.SHOES_HEIGHT = 110, e.SHOES_WIDTH = 80, e.HANGER_WIDTH = 60, e.HANGER_HEIGHT = 90, e.PAINTS_HEIGHT = 30, e.PAINTS_WIDTH = 55, e.PANTOGRAPH_AVAILABLE_WIDTH = 100, e.PANTOGRAPH_WIDTH = 200, e.PANTOGRAPH_HEIGHT = 120, e.PANTOGRAPH_PADDING = 22, e.PANTOGRAPH_PIPE_HEIGHT = 4, e.PANTOGRAPH_MIN_WIDTH = 90, e.PERSPECTIVE_WIDTH = 25, e.PERSPECTIVE_HEIGHT = 14, e.SIDE_SHELVES_REAL_WIDTH = 250, e.SIDE_SHELVES_DIFF = 14, e.TOP_ROLLER_BOTTOM_PADDING = 18, e.TOP_ROLLER_TOP_PADDING = 9, e.TOP_ROLLER_SIDE_PADDING = 40, e.LEFT_ROLLER_PADDING = 32, e.LEFT_ROLLER_LEFT_PADDING = 10, e.BOTTOM_ROLLER_TOP_PADDING = 17, e.BOTTOM_ROLLER_BOTTOM_PADDING = 7, e.RIGHT_ROLLER_LEFT_PADDING = 35, e.RIGHT_ROLLER_RIGHT_PADDING = 10, e.LEFT_BORDER_RULER_RIGHT_PADDING = 17, e.LEFT_BORDER_RULER_LEFT_PADDING = 6, e.RIGHT_BORDER_RULER_RIGHT_PADDING = 6, e.RIGHT_BORDER_RULER_LEFT_PADDING = 17, e.RULER_COLOR = "#0c000f", e.INNER_RULER_COLOR = "#9e3d3d", e.BORDER_RULER_COLOR = "#727271", e.MIN_SIDE_SHELVES_WIDTH = 15, e.MAX_SIDE_SHELVES_WIDTH = 58, e.MIN_WIDTH_CABINET = 190, e.MAX_WIDTH_CABINET = 590, e.MIN_HEIGHT_CABINET = 135, e.MAX_HEIGHT_CABINET = 380, e.CANVAS_CONTAINER_ID = "constructor-canvas-container-id"
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.isOverlaps = e.isOnBottom = e.isOnTop = e.isLeftParentNearByX = e.isInCabinetByX = void 0;
    var i = n(7),
        o = r(i),
        s = n(140),
        a = r(s),
        l = e.isInCabinetByX = function(t, e) {
            return !(!t || t.length < 2 || !t[0] || !t[1] || t[0] === t[1] || t[0].options.x - e.x < 0 && t[1].options.x - e.x < 0 || t[0].options.x - e.x > 0 && t[1].options.x - e.x > 0)
        };
    e.isLeftParentNearByX = function(t, e) {
        var n = e.x;
        if (!l(t, e)) return !0;
        var r = t[0].options.x - n > 0,
            i = r ? t[0] : t[1],
            o = r ? t[1] : t[0];
        return i.options.x - n > n - o.options.x
    }, e.isOnTop = function(t, e, n) {
        var r = o.default.find(t, function(t) {
            return t.constructor === a.default
        });
        return r && e <= r.options.y - n - 1
    }, e.isOnBottom = function(t, e, n) {
        var r = o.default.find(t, function(t) {
            return t.constructor === a.default
        });
        return r && e >= r.options.downY
    }, e.isOverlaps = function(t, e) {
        return t.intersectsWithObject(e) || t.isContainedWithinObject(e) || e.isContainedWithinObject(t)
    }
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var o = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        s = n(11),
        a = n(143),
        l = r(a),
        u = function() {
            function t() {
                i(this, t)
            }
            return o(t, [{
                key: "calculatePx",
                value: function(t) {
                    var e = t.value,
                        n = t.oldMin,
                        r = t.oldMax,
                        i = t.newMin,
                        o = t.newMax,
                        s = (e - n) / (r - n);
                    return Math.floor(s * (o - i) + i)
                }
            }, {
                key: "drawInsidePartOfBottomShelf",
                value: function(t) {
                    var e = t.leftDown,
                        n = t.rightDown,
                        r = t.visible,
                        i = t.fill,
                        o = t.stroke;
                    return new s.fabric.Path("M " + (e.x + " " + e.y) + "\n            L " + (e.x + l.PERSPECTIVE_WIDTH + " " + (e.y - l.PERSPECTIVE_HEIGHT)) + "\n            L " + (n.x - l.PERSPECTIVE_WIDTH + " " + (n.y - l.PERSPECTIVE_HEIGHT)) + "\n            L " + (n.x + " " + n.y) + "\n            L " + (e.x + " " + e.y) + "z", {
                        stroke: o,
                        strokeWidth: 1,
                        fill: i,
                        visible: r,
                        selectable: !1
                    })
                }
            }, {
                key: "drawInsidePartOfCeiling",
                value: function(t) {
                    var e = t.leftTop,
                        n = t.rightTop,
                        r = t.visible,
                        i = t.stroke,
                        o = t.fill;
                    return new s.fabric.Path("M " + (e.x + " " + e.y) + "\n            L " + (e.x + l.PERSPECTIVE_WIDTH + " " + (e.y + l.PERSPECTIVE_HEIGHT)) + ",\n            L " + (n.x - l.PERSPECTIVE_WIDTH + " " + (n.y + l.PERSPECTIVE_HEIGHT)) + ",\n            L " + (n.x + " " + n.y) + ",\n            L " + (e.x + " " + e.y), {
                        stroke: i,
                        strokeWidth: 1,
                        fill: o,
                        visible: r,
                        selectable: !1
                    })
                }
            }, {
                key: "drawInsidePartOfLeftShelf",
                value: function(t) {
                    var e = t.stroke,
                        n = t.leftDown,
                        r = t.leftTop,
                        i = (t.visible, t.fill),
                        o = t.shelfWidth;
                    return new s.fabric.Path("M " + (n.x + " " + (n.y + o)) + "\n            L " + (n.x + l.PERSPECTIVE_WIDTH + " " + (n.y + o - l.PERSPECTIVE_HEIGHT)) + "\n            L " + (r.x + l.PERSPECTIVE_WIDTH + " " + (r.y - o + l.PERSPECTIVE_HEIGHT)) + "\n            L " + (r.x + " " + (r.y - o)) + "\n            L " + (n.x + " " + (n.y + o)) + "z", {
                        stroke: e,
                        strokeWidth: 1,
                        fill: i,
                        selectable: !1
                    })
                }
            }, {
                key: "drawInsidePartOfRightShelf",
                value: function(t) {
                    var e = t.stroke,
                        n = t.rightTop,
                        r = t.rightDown,
                        i = (t.visible, t.fill),
                        o = t.shelfWidth;
                    return new s.fabric.Path("M " + (n.x + " " + (n.y - o)) + "\n            L " + (n.x - l.PERSPECTIVE_WIDTH + " " + (n.y - o + l.PERSPECTIVE_HEIGHT)) + ",\n            L " + (r.x - l.PERSPECTIVE_WIDTH + " " + (r.y + o - l.PERSPECTIVE_HEIGHT)) + ",\n            L " + (r.x + " " + (r.y + o)) + ",\n            L " + (n.x + " " + (n.y - o)), {
                        stroke: e,
                        strokeWidth: 1,
                        fill: i,
                        selectable: !1
                    })
                }
            }]), t
        }(),
        c = new u;
    e.default = c
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = function t(e, n, r) {
            null === e && (e = Function.prototype);
            var i = Object.getOwnPropertyDescriptor(e, n);
            if (void 0 === i) {
                var o = Object.getPrototypeOf(e);
                return null === o ? void 0 : t(o, n, r)
            }
            if ("value" in i) return i.value;
            var s = i.get;
            if (void 0 !== s) return s.call(r)
        },
        c = n(11),
        f = n(138),
        h = i(f),
        d = n(137),
        p = i(d),
        g = n(136),
        v = i(g),
        b = n(147),
        y = r(b),
        m = n(143),
        E = r(m),
        S = function(t) {
            function e(t, n) {
                return o(this, e), s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, _.set(t, "isHorizontal", !0), n))
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [],
                        n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                    u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "preRender", this).call(this, t, n);
                    var r = t[0].options.x > t[1].options.x ? t[1] : t[0],
                        i = t[0].options.x > t[1].options.x ? t[0] : t[1],
                        o = Math.min(t[0].options.x, t[1].options.x),
                        s = Math.max(t[0].options.x, t[1].options.x),
                        a = (n.x, n.y + y.OFFSET_PIPE);
                    this.options.x = o + this.shelfWidth, this.options.y = a;
                    var l = 0,
                        f = 0;
                    r.constructor === p.default ? (this.leftBorder = new c.fabric.Circle({
                        radius: E.PIPE_BORDER_RADIUS,
                        fill: this.options.itemOptions.color,
                        stroke: this.options.itemOptions.stroke,
                        selectable: this.options.selectable,
                        strokeWidth: this.options.strokeWidth,
                        scaleX: .5
                    }), l = E.PIPE_PADDING) : this.leftBorder = new c.fabric.Line([0, -1, 0, 2 * E.PIPE_BORDER_RADIUS + 1], {
                        selectable: this.options.selectable,
                        stroke: this.options.itemOptions.stroke,
                        strokeWidth: 2
                    }), i.constructor === p.default ? (f = E.PIPE_PADDING, this.rightBorder = new c.fabric.Circle({
                        radius: E.PIPE_BORDER_RADIUS,
                        fill: this.options.itemOptions.color,
                        stroke: this.options.itemOptions.stroke,
                        strokeWidth: this.options.strokeWidth,
                        scaleX: .5,
                        left: s - o - f - (l || 6),
                        selectable: this.options.selectable
                    })) : this.rightBorder = new c.fabric.Line([s - o - (l || this.shelfWidth) - 2, -1, s - o - (l || this.shelfWidth) - 2, 2 * E.PIPE_BORDER_RADIUS + 1], {
                        selectable: this.options.selectable,
                        stroke: this.options.itemOptions.stroke,
                        strokeWidth: 2
                    }), this.pipe = new c.fabric.Path("\n            M " + (l > 0 ? Math.floor(E.PIPE_BORDER_RADIUS / 2) : 2) + " " + Math.floor(E.PIPE_BORDER_RADIUS / 2) + "\n            L " + (l > 0 ? Math.floor(E.PIPE_BORDER_RADIUS / 2) : 2) + " " + 1.5 * E.PIPE_BORDER_RADIUS + "\n            L " + (f > 0 ? s - o - f - (l || 6) + Math.floor(E.PIPE_BORDER_RADIUS / 2) : s - o - (l || this.shelfWidth) - 1) + " " + 1.5 * E.PIPE_BORDER_RADIUS + "\n            L " + (f > 0 ? s - o - f - (l || 6) + Math.floor(E.PIPE_BORDER_RADIUS / 2) : s - o - (l || this.shelfWidth) - 1) + " " + Math.floor(E.PIPE_BORDER_RADIUS / 2) + "\n            L " + (l > 0 ? Math.floor(E.PIPE_BORDER_RADIUS / 2) : 2) + " " + E.PIPE_BORDER_RADIUS / 2 + "z", {
                        selectable: this.options.selectable,
                        visible: this.options.visible
                    }), this.pipe.setGradient("fill", {
                        x1: 0,
                        y1: 0,
                        x2: 0,
                        y2: E.PIPE_BORDER_RADIUS,
                        colorStops: {
                            0: this.options.itemOptions.topColor,
                            1: this.options.itemOptions.bottomColor
                        }
                    });
                    var h = [this.pipe];
                    return l > 0 ? h = [this.leftBorder].concat(h) : h.push(this.leftBorder), f > 0 ? h = [this.rightBorder].concat(h) : h.push(this.rightBorder), this.element = new c.fabric.Group(h, {
                        left: l > 0 ? o + l : o + this.shelfWidth,
                        top: Math.floor(a - E.PIPE_BORDER_RADIUS / 2),
                        selectable: this.options.selectable
                    }), t
                }
            }, {
                key: "delete",
                value: function(t) {
                    t.remove(this.element), u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "delete", this).call(this)
                }
            }, {
                key: "getCost",
                value: function(t, e) {
                    var n = t * this.element.width / e;
                    return n * v.default.getOption("cost").pipe / 100
                }
            }]), e
        }(h.default);
    e.default = S
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    e.OFFSET_PHANTOM = 6, e.OFFSET_PIPE = 3, e.OFFSET_HANGER = 10, e.OFFSET_DOOR = 1
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = function t(e, n, r) {
            null === e && (e = Function.prototype);
            var i = Object.getOwnPropertyDescriptor(e, n);
            if (void 0 === i) {
                var o = Object.getPrototypeOf(e);
                return null === o ? void 0 : t(o, n, r)
            }
            if ("value" in i) return i.value;
            var s = i.get;
            if (void 0 !== s) return s.call(r)
        },
        c = n(11),
        f = n(138),
        h = i(f),
        d = n(136),
        p = i(d),
        g = n(143),
        _ = r(g),
        v = function(t) {
            function e() {
                return o(this, e), s(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [],
                        n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                        r = n.x,
                        i = n.y,
                        o = t[0].options.x - r > 0,
                        s = o ? t[0] : t[1],
                        a = o ? t[1] : t[0],
                        l = s.options.x - r > r - a.options.x,
                        f = 0,
                        h = 0,
                        d = !1;
                    l ? f = a.options.x + 8 : (f = s.options.x, h = -180, d = !0, i += _.SHOES_HEIGHT - 6), this.options.x = f, this.options.y = i, this.element = c.fabric.util.object.clone(this.options.itemOptions.fabricElement), this.element.set({
                        left: f,
                        top: i,
                        angle: h,
                        flipY: d
                    });
                    var p = l ? [a] : [s];
                    return u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "preRender", this).call(this, p, n), p
                }
            }, {
                key: "getCost",
                value: function(t, e) {
                    return p.default.getOption("cost").shoes
                }
            }]), e
        }(h.default);
    e.default = v
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function o(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function s(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var a = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        l = function t(e, n, r) {
            null === e && (e = Function.prototype);
            var i = Object.getOwnPropertyDescriptor(e, n);
            if (void 0 === i) {
                var o = Object.getPrototypeOf(e);
                return null === o ? void 0 : t(o, n, r)
            }
            if ("value" in i) return i.value;
            var s = i.get;
            if (void 0 !== s) return s.call(r)
        },
        u = n(7),
        c = r(u),
        f = n(11),
        h = n(138),
        d = r(h),
        p = n(136),
        g = r(p),
        _ = n(137),
        v = r(_),
        b = n(142),
        y = r(b),
        m = function(t) {
            function e() {
                return i(this, e), o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
            }
            return s(e, t), a(e, [{
                key: "preRender",
                value: function() {
                    var t = this,
                        n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [],
                        r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                        i = r.x,
                        o = r.y,
                        s = this.shelfWidth,
                        a = n[0];
                    c.default.forEach(n, function(e) {
                        o - e.options.y <= o - a.options.y && e.options.y < o && (e.constructor === y.default ? (a = e, s = t.shelfWidth) : e.constructor === v.default && e.options.isTop && (a = e, s = 13))
                    }), this.options.x = i, this.options.y = a.options.y + s, this.element = f.fabric.util.object.clone(this.options.itemOptions.fabricElement), this.element.set({
                        left: i,
                        top: this.options.y
                    });
                    var u = [a];
                    return l(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "preRender", this).call(this, u, r), u
                }
            }, {
                key: "getCost",
                value: function(t, e) {
                    return g.default.getOption("cost").hanger
                }
            }]), e
        }(d.default);
    e.default = m
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = function t(e, n, r) {
            null === e && (e = Function.prototype);
            var i = Object.getOwnPropertyDescriptor(e, n);
            if (void 0 === i) {
                var o = Object.getPrototypeOf(e);
                return null === o ? void 0 : t(o, n, r)
            }
            if ("value" in i) return i.value;
            var s = i.get;
            if (void 0 !== s) return s.call(r)
        },
        c = n(11),
        f = n(138),
        h = i(f),
        d = n(143),
        p = r(d),
        g = n(136),
        _ = i(g),
        v = function(t) {
            function e() {
                return o(this, e), s(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [],
                        n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                        r = n.x,
                        i = n.y,
                        o = t[0].options.x - r > 0,
                        s = o ? t[0] : t[1],
                        a = o ? t[1] : t[0],
                        l = s.options.x - r > r - a.options.x,
                        f = 0,
                        h = 0,
                        d = !1;
                    l ? f = a.options.x + 8 : (f = s.options.x, h = -180, d = !0, i += p.TIE_HEIGHT - 2), this.options.x = f, this.options.y = i, this.element = c.fabric.util.object.clone(this.options.itemOptions.fabricElement), this.element.set({
                        left: f,
                        top: i,
                        angle: h,
                        flipY: d
                    });
                    var g = l ? [a] : [s];
                    return u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "preRender", this).call(this, g, n), g
                }
            }, {
                key: "getCost",
                value: function(t, e) {
                    return _.default.getOption("cost").tie
                }
            }]), e
        }(h.default);
    e.default = v
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = function t(e, n, r) {
            null === e && (e = Function.prototype);
            var i = Object.getOwnPropertyDescriptor(e, n);
            if (void 0 === i) {
                var o = Object.getPrototypeOf(e);
                return null === o ? void 0 : t(o, n, r)
            }
            if ("value" in i) return i.value;
            var s = i.get;
            if (void 0 !== s) return s.call(r)
        },
        c = n(138),
        f = i(c),
        h = n(137),
        d = i(h),
        p = n(143),
        g = r(p),
        _ = n(5),
        v = n(136),
        b = i(v),
        y = n(139),
        m = function(t) {
            function e() {
                return o(this, e), s(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [],
                        n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                    u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "preRender", this).call(this, t, n);
                    var r = t[0].options.x > t[1].options.x ? t[1] : t[0],
                        i = t[0].options.x > t[1].options.x ? t[0] : t[1],
                        o = r.options.x,
                        s = i.options.x,
                        a = (n.x, n.y);
                    this.options.x = r.options.x + this.shelfWidth, this.options.y = a;
                    var l = this.shelfWidth + 1,
                        c = this.shelfWidth + 4;
                    r.constructor === d.default && (l = g.PANTOGRAPH_PADDING), i.constructor === d.default && (c = g.PANTOGRAPH_PADDING + 1);
                    var f = this.options.itemOptions.pantographParts,
                        h = Math.floor((s - c - o - l) / 2 - 4),
                        p = s - o - c - l,
                        v = fabric.util.object.clone(f[_.PANTOGRAPH_PARTS.LEFT]);
                    v.set({
                        left: 0,
                        top: 0
                    });
                    var b = fabric.util.object.clone(f[_.PANTOGRAPH_PARTS.CENTER]);
                    b.set({
                        left: h,
                        top: 2
                    });
                    var m = fabric.util.object.clone(f[_.PANTOGRAPH_PARTS.RIGHT]);
                    m.set({
                        left: p,
                        top: 0
                    });
                    var E = (0, y.getRectangle)({
                        x: 8,
                        y: 2
                    }, {
                        x: h,
                        y: 2 + g.PANTOGRAPH_PIPE_HEIGHT
                    }, {
                        selectable: this.options.selectable,
                        visible: this.options.visible
                    });
                    E.setGradient("fill", {
                        x1: 0,
                        y1: 0,
                        x2: 0,
                        y2: g.PANTOGRAPH_PIPE_HEIGHT,
                        colorStops: {
                            0: this.options.itemOptions.topColor,
                            1: this.options.itemOptions.bottomColor
                        }
                    });
                    var S = (0, y.getRectangle)({
                        x: h + 16,
                        y: 2
                    }, {
                        x: p,
                        y: 2 + g.PANTOGRAPH_PIPE_HEIGHT
                    }, {
                        selectable: this.options.selectable,
                        visible: this.options.visible
                    });
                    return S.setGradient("fill", {
                        x1: 0,
                        y1: 0,
                        x2: 0,
                        y2: g.PANTOGRAPH_PIPE_HEIGHT,
                        colorStops: {
                            0: this.options.itemOptions.topColor,
                            1: this.options.itemOptions.bottomColor
                        }
                    }), this.element = new fabric.Group([v, m, b, E, S], {
                        left: o + l,
                        top: a,
                        selectable: this.options.selectable
                    }), t
                }
            }, {
                key: "delete",
                value: function(t) {
                    t.remove(this.element), u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "delete", this).call(this)
                }
            }, {
                key: "getCost",
                value: function(t, e) {
                    return b.default.getOption("cost").pantograph
                }
            }]), e
        }(f.default);
    e.default = m
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = function t(e, n, r) {
            null === e && (e = Function.prototype);
            var i = Object.getOwnPropertyDescriptor(e, n);
            if (void 0 === i) {
                var o = Object.getPrototypeOf(e);
                return null === o ? void 0 : t(o, n, r)
            }
            if ("value" in i) return i.value;
            var s = i.get;
            if (void 0 !== s) return s.call(r)
        },
        c = n(11),
        f = n(138),
        h = i(f),
        d = n(136),
        p = i(d),
        g = n(143),
        _ = r(g),
        v = function(t) {
            function e() {
                return o(this, e), s(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [],
                        n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                        r = n.x,
                        i = n.y,
                        o = t[0].options.x - r > 0,
                        s = o ? t[0] : t[1],
                        a = o ? t[1] : t[0],
                        l = s.options.x - r > r - a.options.x,
                        f = 0,
                        h = 0,
                        d = !1;
                    l ? f = a.options.x + 8 : (f = s.options.x, h = -180, d = !0, i += _.PAINTS_HEIGHT - 9), this.options.x = f, this.options.y = i, this.element = c.fabric.util.object.clone(this.options.itemOptions.fabricElement), this.element.set({
                        left: f,
                        top: i,
                        angle: h,
                        flipY: d
                    });
                    var p = l ? [a] : [s];
                    return u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "preRender", this).call(this, p, n), p
                }
            }, {
                key: "getCost",
                value: function(t, e) {
                    return p.default.getOption("cost").paints
                }
            }]), e
        }(h.default);
    e.default = v
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = function t(e, n, r) {
            null === e && (e = Function.prototype);
            var i = Object.getOwnPropertyDescriptor(e, n);
            if (void 0 === i) {
                var o = Object.getPrototypeOf(e);
                return null === o ? void 0 : t(o, n, r)
            }
            if ("value" in i) return i.value;
            var s = i.get;
            if (void 0 !== s) return s.call(r)
        },
        c = n(11),
        f = n(138),
        h = i(f),
        d = n(143),
        p = r(d),
        g = n(136),
        _ = i(g),
        v = function(t) {
            function e() {
                return o(this, e), s(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [],
                        n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                    u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "preRender", this).call(this, t, n);
                    var r = Math.min(t[0].options.x, t[1].options.x),
                        i = Math.max(t[0].options.x, t[1].options.x),
                        o = i - r,
                        s = (n.x, n.y);
                    this.options.x = r + this.shelfWidth, this.options.y = s;
                    var a = Math.floor(r + o / 2 - p.BOX_ARC_LENGTH / 2),
                        l = Math.floor(r + o / 2);
                    return this.element = new c.fabric.Path("\n            M " + (r + this.shelfWidth) + " " + s + "\n            L " + (r + this.shelfWidth) + " " + (s + p.BOX_HEIGHT) + "\n            L " + i + " " + (s + p.BOX_HEIGHT) + "\n            L " + i + " " + s + "\n            L " + (a + p.BOX_ARC_LENGTH) + " " + s + "\n            C " + (l + 6) + " " + (s + 8) + " " + (l - 6) + " " + (s + 8) + " " + a + " " + s + "\n            L " + (r + this.shelfWidth) + " " + s + "z", {
                        stroke: this.options.itemOptions.stroke,
                        strokeWidth: this.options.strokeWidth,
                        visible: this.options.visible,
                        fill: this.options.itemOptions.color,
                        selectable: this.options.selectable
                    }), t
                }
            }, {
                key: "getCost",
                value: function(t, e) {
                    return _.default.getOption("cost").box
                }
            }]), e
        }(h.default);
    e.default = v
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = function t(e, n, r) {
            null === e && (e = Function.prototype);
            var i = Object.getOwnPropertyDescriptor(e, n);
            if (void 0 === i) {
                var o = Object.getPrototypeOf(e);
                return null === o ? void 0 : t(o, n, r)
            }
            if ("value" in i) return i.value;
            var s = i.get;
            if (void 0 !== s) return s.call(r)
        },
        c = n(7),
        f = i(c),
        h = n(136),
        d = i(h),
        p = n(155),
        g = i(p),
        _ = n(137),
        v = i(_),
        b = n(139),
        y = r(b),
        m = n(143),
        E = r(m),
        S = n(144),
        O = r(S),
        T = n(157),
        x = i(T),
        w = n(141),
        C = i(w),
        I = n(140),
        R = i(I),
        A = n(142),
        P = i(A),
        L = function(t) {
            function e() {
                o(this, e);
                var t = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return t.CabinetItem = P.default, t
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "preRender", this).call(this);
                    var t = {
                            x: 0,
                            y: this.shelfWidth
                        },
                        n = {
                            x: this.shelfLength,
                            y: 0
                        };
                    this.fabricElement = this.createPath(t, n), this.phantom = y.getRectangle({
                        x: 0,
                        y: 0
                    }, {
                        x: E.MAIN_CANVAS_WIDTH,
                        y: this.shelfWidth
                    }, {
                        stroke: "#000",
                        strokeWidth: 1,
                        visible: !1,
                        fill: "#000"
                    })
                }
            }, {
                key: "getCoordinatesPhantomElement",
                value: function(t) {
                    var e = (t.x, t.y);
                    return {
                        x: 0,
                        y: e
                    }
                }
            }, {
                key: "getParents",
                value: function(t) {
                    var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                        x: 0,
                        y: 0
                    };
                    if (t.length < 2) return [];
                    var n = t[0],
                        r = t[1];
                    return f.default.forEach(t, function(t) {
                        var i = t.options.x - e.x;
                        i < 0 && (i >= n.options.x - e.x || n.options.x - e.x > 0) && (n = t), i > 0 && (i <= r.options.x - e.x || r.options.x - e.x < 0) && (r = t)
                    }), [n, r]
                }
            }, {
                key: "isInCabinet",
                value: function(t, e) {
                    return !(!t || t.length < 2 || !t[0] || !t[1] || t[0] === t[1] || t[0].options.x - e.x < 0 && t[1].options.x - e.x < 0 || t[0].options.x - e.x > 0 && t[1].options.x - e.x > 0)
                }
            }, {
                key: "isOverlaps",
                value: function(t) {
                    var e = d.default.getShadow();
                    return f.default.some(t, function(t) {
                        var n = t.element;
                        return t.isHorizontal() && O.isOverlaps(n, e)
                    })
                }
            }, {
                key: "canBeAdded",
                value: function(t, e) {
                    var n = this,
                        r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        i = !0;
                    return !!this.isInCabinet(e, r) && (!this.isOverlaps(t) && (!!f.default.every(e, function(t) {
                        return n.canBeParent(t)
                    }) && i))
                }
            }, {
                key: "canBeParent",
                value: function(t) {
                    return t.constructor === x.default || t.constructor === R.default || t.constructor === C.default || t.constructor === v.default && t.isVertical()
                }
            }, {
                key: "getShadowOptions",
                value: function(t, e) {
                    var n = this,
                        r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        i = this.isInCabinet(e, r);
                    if (!i) return {
                        visible: i
                    };
                    var o = t[0],
                        s = t[1];
                    f.default.forEach(t, function(t) {
                        var e = t.options.x - r.x;
                        e < 0 && (e >= o.options.x - r.x || o.options.x - r.x > 0) && n.canBeParent(t) && (o = t), e > 0 && (e <= s.options.x - r.x || s.options.x - r.x < 0) && n.canBeParent(t) && (s = t)
                    });
                    var a = s.options.x - o.options.x - this.shelfWidth;
                    return {
                        visible: i,
                        left: o.options.x + this.shelfWidth,
                        top: r.y,
                        width: a,
                        height: this.shelfWidth + 1
                    }
                }
            }]), e
        }(g.default);
    e.default = L
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = n(136),
        c = i(u),
        f = n(156),
        h = i(f),
        d = n(139),
        p = r(d),
        g = function(t) {
            function e() {
                return o(this, e), s(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    var t = c.default.getValue("cabinetColor"),
                        e = t.colorShelf,
                        n = t.stroke;
                    this.color = e, this.stroke = n
                }
            }, {
                key: "createPath",
                value: function(t, e) {
                    return p.getRectangle({
                        x: t.x,
                        y: e.y
                    }, {
                        x: e.x,
                        y: t.y
                    }, {
                        stroke: this.stroke,
                        strokeWidth: 1,
                        fill: this.color
                    })
                }
            }]), e
        }(h.default);
    e.default = g
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var o = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        s = n(136),
        a = r(s),
        l = n(96),
        u = r(l),
        c = function() {
            function t(e) {
                i(this, t), this.fabricElement = e, this.phantom = null;
                var n = a.default.getOptions(),
                    r = n.shelfWidth,
                    o = n.shelfLength;
                this.shelfWidth = r, this.shelfLength = o, this.id = (0, u.default)()
            }
            return o(t, [{
                key: "transform",
                value: function(t, e) {
                    return null
                }
            }, {
                key: "preRender",
                value: function() {
                    return null
                }
            }, {
                key: "getFabricObject",
                value: function() {
                    return this.fabricElement
                }
            }, {
                key: "getPhantomElement",
                value: function() {
                    return this.phantom
                }
            }, {
                key: "getShadowOptions",
                value: function(t, e) {
                    arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                        x: 0,
                        y: 0
                    };
                    return {}
                }
            }, {
                key: "getCoordinatesPhantomElement",
                value: function(t, e) {
                    var n = t.x,
                        r = t.y;
                    return {
                        x: n,
                        y: r
                    }
                }
            }, {
                key: "getParents",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
                    return [t[0], t[1]]
                }
            }, {
                key: "set",
                value: function(t) {
                    this.fabricElement.set(t)
                }
            }, {
                key: "getItemOptions",
                value: function() {
                    return {
                        fabricElement: this.fabricElement
                    }
                }
            }, {
                key: "canBeAdded",
                value: function(t, e, n) {
                    return !0
                }
            }, {
                key: "isAvailable",
                value: function(t, e, n) {
                    return this.canBeAdded(t, e, n)
                }
            }, {
                key: "decreasePhantom",
                value: function() {}
            }, {
                key: "increasePhantom",
                value: function() {}
            }]), t
        }();
    e.default = c
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = function t(e, n, r) {
            null === e && (e = Function.prototype);
            var i = Object.getOwnPropertyDescriptor(e, n);
            if (void 0 === i) {
                var o = Object.getPrototypeOf(e);
                return null === o ? void 0 : t(o, n, r)
            }
            if ("value" in i) return i.value;
            var s = i.get;
            if (void 0 !== s) return s.call(r)
        },
        c = n(11),
        f = n(138),
        h = i(f),
        d = n(137),
        p = i(d),
        g = n(136),
        v = i(g),
        b = n(143),
        y = r(b),
        m = n(147),
        E = r(m),
        S = function(t) {
            function e(t, n) {
                return o(this, e), s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, _.set(t, "isVertical", !0), n))
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [],
                        n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                        r = arguments[2];
                    u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "preRender", this).call(this, t, n);
                    var i = Math.min(t[0].options.y, t[1].options.y),
                        o = Math.max(t[0].options.y, t[1].options.y),
                        s = n.x;
                    r || (s += E.OFFSET_PIPE);
                    n.y;
                    this.options.x = s;
                    var a = t[0].options.y > t[1].options.y ? t[1] : t[0],
                        l = t[0].options.y > t[1].options.y ? t[0] : t[1],
                        f = 0,
                        h = 0;
                    a.constructor === p.default ? (this.topBorder = new c.fabric.Circle({
                        radius: y.PIPE_BORDER_RADIUS,
                        fill: this.options.itemOptions.color,
                        stroke: this.options.itemOptions.stroke,
                        selectable: this.options.selectable,
                        strokeWidth: this.options.strokeWidth,
                        top: 0,
                        scaleY: .5
                    }), f = y.VERTICAL_PIPE_PADDING) : this.topBorder = new c.fabric.Line([-1, 0, 2 * y.PIPE_BORDER_RADIUS + 1, 0], {
                        selectable: this.options.selectable,
                        top: 0,
                        stroke: this.options.itemOptions.stroke,
                        strokeWidth: 2
                    }), l.constructor === p.default ? (h = y.VERTICAL_PIPE_PADDING, this.bottomBorder = new c.fabric.Circle({
                        radius: y.PIPE_BORDER_RADIUS,
                        fill: this.options.itemOptions.color,
                        stroke: this.options.itemOptions.stroke,
                        strokeWidth: this.options.strokeWidth,
                        scaleY: .5,
                        top: o - i - (f || 6) - h,
                        selectable: this.options.selectable
                    })) : this.bottomBorder = new c.fabric.Line([-1, o - i - (f || this.shelfWidth) - 2, 2 * y.PIPE_BORDER_RADIUS + 1, o - i - (f || this.shelfWidth) - 2], {
                        selectable: this.options.selectable,
                        stroke: this.options.itemOptions.stroke,
                        strokeWidth: 2
                    }), this.pipe = new c.fabric.Path("\n            M " + Math.floor(y.PIPE_BORDER_RADIUS / 2) + " 2\n            L " + 1.5 * y.PIPE_BORDER_RADIUS + " 2\n            L " + 1.5 * y.PIPE_BORDER_RADIUS + " " + (h > 0 ? o - i - h - (f || 6) + Math.floor(y.PIPE_BORDER_RADIUS / 2) : o - i - (f || this.shelfWidth)) + "\n            L " + Math.floor(y.PIPE_BORDER_RADIUS / 2) + " " + (h > 0 ? o - i - h - (f || 6) + Math.floor(y.PIPE_BORDER_RADIUS / 2) : o - i - (f || this.shelfWidth)) + "\n            L " + Math.floor(y.PIPE_BORDER_RADIUS / 2) + " 2z", {
                        selectable: this.options.selectable,
                        visible: this.options.visible
                    }), this.pipe.setGradient("fill", {
                        x1: 0,
                        y1: 0,
                        x2: y.PIPE_BORDER_RADIUS,
                        y2: 0,
                        colorStops: {
                            0: this.options.itemOptions.topColor,
                            1: this.options.itemOptions.bottomColor
                        }
                    });
                    var d = [this.pipe];
                    return f > 0 ? d = [this.topBorder].concat(d) : d.push(this.topBorder), h > 0 ? d = [this.bottomBorder].concat(d) : d.push(this.bottomBorder), this.options.y = f > 0 ? i + f : i + this.shelfWidth, this.element = new c.fabric.Group(d, {
                        left: Math.floor(s - y.PIPE_BORDER_RADIUS / 2),
                        top: f > 0 ? i + f : i + this.shelfWidth,
                        selectable: this.options.selectable
                    }), this.options.bottomY = this.element.top + this.element.height, t
                }
            }, {
                key: "shouldBeRemovedByUpdate",
                value: function() {
                    return !1
                }
            }, {
                key: "delete",
                value: function(t) {
                    t.remove(this.element), u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "delete", this).call(this)
                }
            }, {
                key: "getCost",
                value: function(t, e, n, r) {
                    var i = n * this.element.height / r;
                    return i * v.default.getOption("cost").pipe / 100
                }
            }]), e
        }(h.default);
    e.default = S
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = function t(e, n, r) {
            null === e && (e = Function.prototype);
            var i = Object.getOwnPropertyDescriptor(e, n);
            if (void 0 === i) {
                var o = Object.getPrototypeOf(e);
                return null === o ? void 0 : t(o, n, r)
            }
            if ("value" in i) return i.value;
            var s = i.get;
            if (void 0 !== s) return s.call(r)
        },
        c = n(139),
        f = i(c),
        h = n(136),
        d = r(h),
        p = n(155),
        g = r(p),
        v = n(143),
        b = i(v),
        y = n(147),
        m = i(y),
        E = n(144),
        S = i(E),
        O = n(137),
        T = r(O),
        x = n(141),
        w = r(x),
        C = n(146),
        I = r(C),
        R = n(142),
        A = r(R),
        P = function(t) {
            function e() {
                o(this, e);
                var t = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return t.CabinetItem = w.default, t
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "preRender", this).call(this);
                    var t = {
                            x: 0,
                            y: this.shelfLength
                        },
                        n = {
                            x: this.shelfWidth,
                            y: 0
                        };
                    this.fabricElement = this.createPath(t, n), this.phantom = f.getRectangle({
                        x: 0,
                        y: 0
                    }, {
                        x: this.shelfWidth,
                        y: b.MAIN_CANVAS_HEIGHT
                    }, {
                        stroke: "#000",
                        visible: !1,
                        fill: "#000"
                    })
                }
            }, {
                key: "decreasePhantom",
                value: function() {
                    var t = (d.default.getCanvas(), this.phantom.getLeft());
                    this.phantom.getWidth();
                    this.phantom.set({
                        left: t + m.OFFSET_PIPE,
                        width: 1
                    })
                }
            }, {
                key: "increasePhantom",
                value: function() {
                    var t = (d.default.getCanvas(), this.phantom.getLeft());
                    this.phantom.getWidth();
                    this.phantom.set({
                        left: t - m.OFFSET_PIPE,
                        width: this.shelfWidth
                    })
                }
            }, {
                key: "getCoordinatesPhantomElement",
                value: function(t) {
                    var e = t.x;
                    t.y;
                    return {
                        x: e,
                        y: 0
                    }
                }
            }, {
                key: "isOverlaps",
                value: function(t) {
                    var e = d.default.getShadow();
                    return _.some(t, function(t) {
                        var n = t.element;
                        return t.isVertical() && S.isOverlaps(n, e)
                    })
                }
            }, {
                key: "canBeParent",
                value: function(t) {
                    return t.constructor === A.default || t.constructor === I.default || t.constructor === T.default && t.isHorizontal()
                }
            }, {
                key: "getParents",
                value: function(t) {
                    var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                            x: 0,
                            y: 0
                        },
                        n = t[0],
                        r = t[1];
                    return n && r ? (_.forEach(t, function(t) {
                        var i = t.options.y - e.y;
                        i < 0 && i >= n.options.y - e.y && (n = t), i > 0 && i <= r.options.y - e.y && (r = t)
                    }), [n, r]) : []
                }
            }, {
                key: "isInCabinet",
                value: function(t, e) {
                    return !(!t || t.length < 2 || !t[0] || !t[1] || t[0] === t[1] || t[0].options.y - e.y < 0 && t[1].options.y - e.y < 0 || t[0].options.y - e.y > 0 && t[1].options.y - e.y > 0)
                }
            }, {
                key: "canBeAdded",
                value: function(t, e) {
                    var n = this,
                        r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        i = !0;
                    return !!this.isInCabinet(e, r) && (!this.isOverlaps(t) && (!!_.every(e, function(t) {
                        return n.canBeParent(t)
                    }) && i))
                }
            }, {
                key: "getShadowOptions",
                value: function(t, e) {
                    var n = this,
                        r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        i = this.isInCabinet(e, r);
                    if (!i) return {
                        visible: i
                    };
                    var o = this.canBeAdded(t, e, r),
                        s = t[0],
                        a = t[1];
                    return s && a ? (_.forEach(t, function(t) {
                        var e = t.options.y - r.y;
                        e < 0 && e >= s.options.y - r.y && n.canBeParent(t) && (s = t), e > 0 && e <= a.options.y - r.y && n.canBeParent(t) && (a = t)
                    }), {
                        visible: i,
                        isAvailable: o,
                        left: r.x,
                        top: s.options.y + this.shelfWidth,
                        width: this.shelfWidth + 1,
                        height: a.options.y - s.options.y - this.shelfWidth
                    }) : {
                        visible: !1
                    }
                }
            }]), e
        }(g.default);
    e.default = P
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = n(7),
        c = i(u),
        f = n(156),
        h = i(f),
        d = n(139),
        p = r(d),
        g = n(144),
        _ = r(g),
        v = n(143),
        b = r(v),
        y = n(148),
        m = i(y),
        E = n(137),
        S = i(E),
        O = function(t) {
            function e(t) {
                o(this, e);
                var n = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
                return n.CabinetItem = m.default, n
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    this.phantom = p.getRectangle({
                        x: 0,
                        y: 0
                    }, {
                        x: b.MAIN_CANVAS_WIDTH,
                        y: b.SHOES_HEIGHT
                    }, {
                        stroke: "#000",
                        strokeWidth: 1,
                        visible: !1,
                        fill: "#000"
                    })
                }
            }, {
                key: "transform",
                value: function(t, e) {
                    var n = _.isLeftParentNearByX(t, e);
                    return {
                        paddingTop: n ? 0 : b.SHOES_HEIGHT - 2,
                        paddingLeft: n ? 0 : b.SHOES_WIDTH - 20,
                        angle: n ? 0 : -180,
                        flipY: !n
                    }
                }
            }, {
                key: "getCoordinatesPhantomElement",
                value: function(t) {
                    var e = (t.x, t.y);
                    return {
                        x: 0,
                        y: e
                    }
                }
            }, {
                key: "getParents",
                value: function(t) {
                    arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                        x: 0,
                        y: 0
                    };
                    return c.default.filter(t, function(t) {
                        return t.constructor === S.default
                    })
                }
            }, {
                key: "isInCabinet",
                value: function(t, e) {
                    return !(!t || t.length < 2 || !t[0] || !t[1] || t[0] === t[1] || t[0].options.x - e.x < 0 && t[1].options.x - e.x < 0 || t[0].options.x - e.x > 0 && t[1].options.x - e.x > 0)
                }
            }, {
                key: "canBeAdded",
                value: function(t, e) {
                    var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        r = n.x,
                        i = (n.y, !0);
                    if (!this.isInCabinet(e, n)) return !1;
                    var o = e[0].options.x - r > 0,
                        s = o ? e[0] : e[1],
                        a = o ? e[1] : e[0],
                        l = s.options.x - r > r - a.options.x;
                    return c.default.forEach(t, function(t) {
                        if (l) {
                            if (t !== a && t.options.x >= a.options.x && t.options.x - a.options.x < b.SHOES_WIDTH) return void(i = !1)
                        } else if (t !== s && t.options.x <= s.options.x && s.options.x - t.options.x - t.element.width < b.PAINTS_WIDTH) return void(i = !1)
                    }), i
                }
            }, {
                key: "getShadowOptions",
                value: function(t, e) {
                    var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        r = this.isInCabinet(e, n);
                    if (!r) return {
                        visible: r
                    };
                    var i = this.canBeAdded(t, e, n),
                        o = n.x,
                        s = e[0].options.x - o > 0,
                        a = s ? e[0] : e[1],
                        l = s ? e[1] : e[0],
                        u = a.options.x - o > o - l.options.x;
                    return {
                        visible: r,
                        isAvailable: i,
                        left: u ? l.options.x + this.shelfWidth : a.options.x - b.PERSPECTIVE_WIDTH,
                        top: n.y,
                        width: b.PERSPECTIVE_WIDTH,
                        height: b.SHOES_HEIGHT
                    }
                }
            }]), e
        }(h.default);
    e.default = O
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = n(156),
        c = i(u),
        f = n(139),
        h = r(f),
        d = n(143),
        p = r(d),
        g = n(147),
        v = r(g),
        b = n(136),
        y = i(b),
        m = n(137),
        E = i(m),
        S = n(141),
        O = i(S),
        T = n(157),
        x = i(T),
        w = n(146),
        C = i(w),
        I = n(144),
        R = r(I),
        A = n(140),
        P = i(A),
        L = function(t) {
            function e(t) {
                o(this, e);
                var n = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
                return n.CabinetItem = C.default, n
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    this.phantom = h.getRectangle({
                        x: 0,
                        y: -v.OFFSET_PIPE
                    }, {
                        x: p.MAIN_CANVAS_WIDTH,
                        y: this.shelfWidth - 1 + v.OFFSET_PIPE
                    }, {
                        stroke: "#000",
                        strokeWidth: 1,
                        visible: !1,
                        fill: "#000"
                    })
                }
            }, {
                key: "getCoordinatesPhantomElement",
                value: function(t) {
                    var e = (t.x, t.y);
                    return {
                        x: 0,
                        y: e
                    }
                }
            }, {
                key: "getItemOptions",
                value: function() {
                    var t = y.default.getOptions(),
                        e = t.pipeColors;
                    return {
                        stroke: e.stroke,
                        topColor: e.topColor,
                        color: e.color,
                        bottomColor: e.bottomColor
                    }
                }
            }, {
                key: "isOverlaps",
                value: function(t) {
                    var e = y.default.getShadow();
                    return _.some(t, function(t) {
                        var n = t.element;
                        return t.isHorizontal() && R.isOverlaps(n, e)
                    })
                }
            }, {
                key: "getParents",
                value: function(t) {
                    var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                            x: 0,
                            y: 0
                        },
                        n = t[0],
                        r = t[1];
                    return _.forEach(t, function(t) {
                        var i = t.options.x - e.x;
                        i < 0 && i >= n.options.x - e.x && (n = t), i > 0 && i <= r.options.x - e.x && (r = t)
                    }), [n, r]
                }
            }, {
                key: "isInCabinet",
                value: function(t, e) {
                    return !(!t || t.length < 2 || !t[0] || !t[1] || t[0] === t[1] || _.some(t, function(t) {
                        return t instanceof P.default
                    }) || t[0].options.x - e.x < 0 && t[1].options.x - e.x < 0 || t[0].options.x - e.x > 0 && t[1].options.x - e.x > 0)
                }
            }, {
                key: "canBeParent",
                value: function(t) {
                    return t.constructor === x.default || t.constructor === O.default || t.constructor === E.default && t.isVertical()
                }
            }, {
                key: "canBeAdded",
                value: function(t, e) {
                    var n = this,
                        r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        i = !0;
                    return !!this.isInCabinet(e, r) && (!this.isOverlaps(t) && (!!_.every(e, function(t) {
                        return n.canBeParent(t)
                    }) && i))
                }
            }, {
                key: "getShadowOptions",
                value: function(t, e) {
                    var n = this,
                        r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        i = this.isInCabinet(e, r);
                    if (!i) return {
                        visible: i
                    };
                    var o = this.canBeAdded(t, e, r),
                        s = t[0],
                        a = t[1];
                    return _.forEach(t, function(t) {
                        var e = t.options.x - r.x;
                        e < 0 && e >= s.options.x - r.x && n.canBeParent(t) && (s = t), e > 0 && e <= a.options.x - r.x && n.canBeParent(t) && (a = t)
                    }), {
                        visible: i,
                        isAvailable: o,
                        left: s.options.x + this.shelfWidth,
                        top: r.y + v.OFFSET_PIPE,
                        width: a.options.x - s.options.x - this.shelfWidth,
                        height: this.shelfWidth
                    }
                }
            }]), e
        }(c.default);
    e.default = L
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = n(7),
        c = i(u),
        f = n(156),
        h = i(f),
        d = n(143),
        p = r(d),
        g = n(136),
        _ = i(g),
        v = n(139),
        b = r(v),
        y = n(144),
        m = r(y),
        E = n(151),
        S = i(E),
        O = n(137),
        T = i(O),
        x = n(141),
        w = i(x),
        C = n(157),
        I = (i(C), function(t) {
            function e(t) {
                o(this, e);
                var n = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
                return n.CabinetItem = S.default, n
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    this.phantom = b.getRectangle({
                        x: 0,
                        y: 0
                    }, {
                        x: p.MAIN_CANVAS_WIDTH,
                        y: p.PANTOGRAPH_HEIGHT
                    }, {
                        stroke: "#000",
                        strokeWidth: 1,
                        visible: !1,
                        fill: "#000"
                    })
                }
            }, {
                key: "getCoordinatesPhantomElement",
                value: function(t) {
                    var e = (t.x, t.y);
                    return {
                        x: 0,
                        y: e
                    }
                }
            }, {
                key: "getParents",
                value: function(t) {
                    var e = this,
                        n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                            x: 0,
                            y: 0
                        },
                        r = t[0],
                        i = t[1];
                    return r && i ? (c.default.forEach(t, function(t) {
                        var o = t.options.x - n.x;
                        o < 0 && o >= r.options.x - n.x && e.canBeParent(t) && (r = t), o > 0 && o <= i.options.x - n.x && e.canBeParent(t) && (i = t)
                    }), [r, i]) : []
                }
            }, {
                key: "getItemOptions",
                value: function() {
                    var t = _.default.getOptions(),
                        e = t.pipeColors;
                    return {
                        pantographParts: _.default.getPantographParts(),
                        topColor: e.topPantographColor,
                        bottomColor: e.bottomPantographColor
                    }
                }
            }, {
                key: "isOverlaps",
                value: function(t) {
                    var e = _.default.getShadow();
                    return c.default.some(t, function(t) {
                        var n = t.element;
                        return t.isHorizontal() && m.isOverlaps(n, e)
                    })
                }
            }, {
                key: "canBeParent",
                value: function(t) {
                    return t.constructor === w.default || t.constructor === T.default && t.isVertical()
                }
            }, {
                key: "canBeAdded",
                value: function(t, e) {
                    var n = this,
                        r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        i = !0;
                    if (!m.isInCabinetByX(e, r)) return !1;
                    if (this.isOverlaps(t)) return !1;
                    if (!c.default.every(e, function(t) {
                            return n.canBeParent(t)
                        })) return !1;
                    var o = e[0].options.x > e[1].options.x ? e[1] : e[0],
                        s = e[0].options.x > e[1].options.x ? e[0] : e[1];
                    c.default.forEach(t, function(t) {
                        var e = t.options.x;
                        if (t !== o && t !== s && e >= o.options.x && e <= s.options.x) return void(i = !1)
                    });
                    var a = s.options.x - o.options.x;
                    return i && a > p.PANTOGRAPH_MIN_WIDTH && a < p.PANTOGRAPH_WIDTH
                }
            }, {
                key: "getShadowOptions",
                value: function(t, e) {
                    var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        r = m.isInCabinetByX(e, n);
                    if (!r) return {
                        visible: r
                    };
                    var i = this.canBeAdded(t, e, n),
                        o = void 0,
                        s = void 0,
                        a = void 0,
                        l = void 0;
                    if (i) {
                        var u = e[0].options.x > e[1].options.x ? e[1] : e[0],
                            c = e[0].options.x > e[1].options.x ? e[0] : e[1];
                        o = u.options.x + this.shelfWidth, s = n.y, a = c.options.x - u.options.x - this.shelfWidth, l = p.PANTOGRAPH_HEIGHT
                    } else o = n.x, s = n.y, a = p.PANTOGRAPH_AVAILABLE_WIDTH, l = p.PANTOGRAPH_HEIGHT;
                    return {
                        visible: r,
                        isAvailable: i,
                        left: o,
                        top: s,
                        width: a,
                        height: l
                    }
                }
            }]), e
        }(h.default));
    e.default = I
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = n(7),
        c = i(u),
        f = n(156),
        h = i(f),
        d = n(139),
        p = r(d),
        g = n(143),
        _ = r(g),
        v = n(147),
        b = r(v),
        y = n(136),
        m = i(y),
        E = n(149),
        S = i(E),
        O = n(137),
        T = i(O),
        x = n(142),
        w = i(x),
        C = function(t) {
            function e(t) {
                o(this, e);
                var n = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
                return n.CabinetItem = S.default, n
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    this.phantom = p.getRectangle({
                        x: 0,
                        y: 0
                    }, {
                        x: _.HANGER_WIDTH,
                        y: _.MAIN_CANVAS_HEIGHT
                    }, {
                        stroke: "#000",
                        strokeWidth: 0,
                        visible: !1,
                        fill: "#000"
                    })
                }
            }, {
                key: "getCoordinatesPhantomElement",
                value: function(t) {
                    var e = t.x;
                    t.y;
                    return {
                        x: e - b.OFFSET_HANGER,
                        y: 0
                    }
                }
            }, {
                key: "getParents",
                value: function(t) {
                    var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                        x: 0,
                        y: 0
                    };
                    return c.default.filter(t, function(t) {
                        return t.options.y < e.y + _.HANGER_HEIGHT
                    })
                }
            }, {
                key: "isInCabinet",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [],
                        e = arguments[1],
                        n = e.y,
                        r = e.x;
                    if (!t || t.length < 1 || !t[0] || !c.default.find(t, function(t) {
                            return t.options.isTop
                        })) return !1;
                    var i = m.default.getCabinetItems(),
                        o = c.default.find(i, function(t) {
                            return t.options.isTop
                        }),
                        s = c.default.find(i, function(t) {
                            return t.options.isLeft
                        }),
                        a = c.default.find(i, function(t) {
                            return t.options.isRight
                        }),
                        l = c.default.find(i, function(t) {
                            return t.options.isBottom
                        });
                    return n > o.options.y && n + _.HANGER_HEIGHT < l.options.y && r > s.options.x + 16 && r + _.HANGER_WIDTH - b.OFFSET_HANGER < a.options.x
                }
            }, {
                key: "canBeParent",
                value: function(t) {
                    return t.constructor === T.default && t.options.isTop || t.constructor === w.default
                }
            }, {
                key: "canBeAdded",
                value: function(t, e) {
                    var n = this,
                        r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        };
                    if (!this.isInCabinet(e, r)) return !1;
                    var i = (r.x, r.y),
                        o = e[0];
                    c.default.forEach(e, function(t) {
                        i - t.options.y <= i - o.options.y && t.options.y < i && n.canBeParent(t) && (o = t)
                    });
                    var s = !0;
                    return c.default.forEach(e, function(t) {
                        if (t.options.y > o.options.y && (t.options.y < i || t.options.y < o.options.y + _.HANGER_HEIGHT) || t.options.bottomY > 0 && t.options.bottomY > o.options.y) return void(s = !1)
                    }), s
                }
            }, {
                key: "getShadowOptions",
                value: function(t, e) {
                    var n = this,
                        r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        i = this.isInCabinet(e, r);
                    if (!i) return {
                        visible: i
                    };
                    var o = this.canBeAdded(t, e, r),
                        s = e[0],
                        a = r.y;
                    return c.default.forEach(e, function(t) {
                        a - t.options.y <= a - s.options.y && t.options.y < a && n.canBeParent(t) && (s = t)
                    }), {
                        visible: i,
                        isAvailable: o,
                        left: r.x - b.OFFSET_HANGER,
                        top: s.options.y + this.shelfWidth,
                        width: _.HANGER_WIDTH,
                        height: _.HANGER_HEIGHT
                    }
                }
            }]), e
        }(h.default);
    e.default = C
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = n(7),
        c = i(u),
        f = n(143),
        h = r(f),
        d = n(156),
        p = i(d),
        g = n(150),
        _ = i(g),
        v = n(137),
        b = i(v),
        y = n(139),
        m = r(y),
        E = n(144),
        S = r(E),
        O = function(t) {
            function e(t) {
                o(this, e);
                var n = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
                return n.CabinetItem = _.default, n
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    this.phantom = m.getRectangle({
                        x: 0,
                        y: 0
                    }, {
                        x: h.MAIN_CANVAS_WIDTH,
                        y: h.TIE_HEIGHT
                    }, {
                        stroke: "#000",
                        strokeWidth: 1,
                        visible: !1,
                        fill: "#000"
                    })
                }
            }, {
                key: "transform",
                value: function(t, e) {
                    var n = S.isLeftParentNearByX(t, e);
                    return {
                        paddingTop: n ? 0 : h.TIE_HEIGHT - 2,
                        paddingLeft: n ? 0 : 1.5 * h.TIE_WIDTH,
                        angle: n ? 0 : -180,
                        flipY: !n
                    }
                }
            }, {
                key: "getCoordinatesPhantomElement",
                value: function(t) {
                    var e = (t.x, t.y);
                    return {
                        x: 0,
                        y: e
                    }
                }
            }, {
                key: "getParents",
                value: function(t) {
                    arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                        x: 0,
                        y: 0
                    };
                    return c.default.filter(t, function(t) {
                        return t.constructor === b.default
                    })
                }
            }, {
                key: "canBeAdded",
                value: function(t, e) {
                    var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        r = n.x,
                        i = (n.y, !0);
                    if (!S.isInCabinetByX(e, n)) return !1;
                    var o = e[0].options.x - r > 0,
                        s = o ? e[0] : e[1],
                        a = o ? e[1] : e[0],
                        l = s.options.x - r > r - a.options.x;
                    return c.default.forEach(t, function(t) {
                        if (l) {
                            if (t !== a && t.options.x >= a.options.x && t.options.x - a.options.x < h.TIE_WIDTH) return void(i = !1)
                        } else if (t !== s && t.options.x <= s.options.x && s.options.x - t.options.x - t.element.width < h.PAINTS_WIDTH) return void(i = !1)
                    }), i
                }
            }, {
                key: "getShadowOptions",
                value: function(t, e) {
                    var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        r = S.isInCabinetByX(e, n);
                    if (!r) return {
                        visible: r
                    };
                    var i = this.canBeAdded(t, e, n),
                        o = n.x,
                        s = e[0].options.x - o > 0,
                        a = s ? e[0] : e[1],
                        l = s ? e[1] : e[0],
                        u = a.options.x - o > o - l.options.x;
                    return {
                        visible: r,
                        isAvailable: i,
                        left: u ? l.options.x + this.shelfWidth : a.options.x - h.PERSPECTIVE_WIDTH,
                        top: n.y,
                        width: h.PERSPECTIVE_WIDTH,
                        height: h.TIE_HEIGHT
                    }
                }
            }]), e
        }(p.default);
    e.default = O
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = n(7),
        c = i(u),
        f = n(156),
        h = i(f),
        d = n(139),
        p = r(d),
        g = n(144),
        _ = r(g),
        v = n(143),
        b = r(v),
        y = n(152),
        m = i(y),
        E = n(137),
        S = i(E),
        O = function(t) {
            function e(t) {
                o(this, e);
                var n = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
                return n.CabinetItem = m.default, n
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    this.phantom = p.getRectangle({
                        x: 0,
                        y: 0
                    }, {
                        x: b.MAIN_CANVAS_WIDTH,
                        y: b.PAINTS_HEIGHT
                    }, {
                        stroke: "#000",
                        strokeWidth: 1,
                        visible: !1,
                        fill: "#000"
                    })
                }
            }, {
                key: "transform",
                value: function(t, e) {
                    var n = _.isLeftParentNearByX(t, e);
                    return {
                        paddingTop: n ? 0 : b.PAINTS_HEIGHT - 2,
                        paddingLeft: n ? 0 : b.PAINTS_WIDTH - 10,
                        angle: n ? 0 : -180,
                        flipY: !n
                    }
                }
            }, {
                key: "getCoordinatesPhantomElement",
                value: function(t) {
                    var e = (t.x, t.y);
                    return {
                        x: 0,
                        y: e
                    }
                }
            }, {
                key: "getParents",
                value: function(t) {
                    arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                        x: 0,
                        y: 0
                    };
                    return c.default.filter(t, function(t) {
                        return t.constructor === S.default
                    })
                }
            }, {
                key: "canBeAdded",
                value: function(t, e) {
                    var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        r = n.x;
                    n.y;
                    if (!_.isInCabinetByX(e, n)) return !1;
                    var i = e[0].options.x - r > 0,
                        o = i ? e[0] : e[1],
                        s = i ? e[1] : e[0],
                        a = o.options.x - r > r - s.options.x,
                        l = !0;
                    return c.default.forEach(t, function(t) {
                        if (a) {
                            if (t !== s && t.options.x >= s.options.x && t.options.x - s.options.x < b.PAINTS_WIDTH) return void(l = !1)
                        } else if (t !== o && t.options.x <= o.options.x && o.options.x - t.options.x - t.element.width < b.PAINTS_WIDTH) return void(l = !1)
                    }), l
                }
            }, {
                key: "getShadowOptions",
                value: function(t, e) {
                    var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        r = _.isInCabinetByX(e, n);
                    if (!r) return {
                        visible: r
                    };
                    var i = this.canBeAdded(t, e, n),
                        o = n.x,
                        s = e[0].options.x - o > 0,
                        a = s ? e[0] : e[1],
                        l = s ? e[1] : e[0],
                        u = a.options.x - o > o - l.options.x;
                    return {
                        visible: r,
                        isAvailable: i,
                        left: u ? l.options.x + this.shelfWidth : a.options.x - b.PERSPECTIVE_WIDTH,
                        top: n.y,
                        width: b.PERSPECTIVE_WIDTH,
                        height: b.PAINTS_HEIGHT
                    }
                }
            }]), e
        }(h.default);
    e.default = O
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = n(7),
        c = i(u),
        f = n(156),
        h = i(f),
        d = n(139),
        p = r(d),
        g = n(143),
        _ = r(g),
        v = n(136),
        b = i(v),
        y = n(153),
        m = i(y),
        E = n(137),
        S = i(E),
        O = n(141),
        T = i(O),
        x = n(142),
        w = (i(x), n(140)),
        C = i(w),
        I = n(144),
        R = r(I),
        A = function(t) {
            function e(t) {
                o(this, e);
                var n = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
                return n.CabinetItem = m.default, n
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    this.phantom = p.getRectangle({
                        x: 0,
                        y: 0
                    }, {
                        x: _.MAIN_CANVAS_WIDTH,
                        y: _.BOX_HEIGHT
                    }, {
                        stroke: "#000",
                        strokeWidth: 1,
                        visible: !1,
                        fill: "#000"
                    })
                }
            }, {
                key: "getCoordinatesPhantomElement",
                value: function(t) {
                    var e = (t.x, t.y);
                    return {
                        x: 0,
                        y: e
                    }
                }
            }, {
                key: "getParents",
                value: function(t) {
                    var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                            x: 0,
                            y: 0
                        },
                        n = t[0],
                        r = t[1];
                    return c.default.forEach(t, function(t) {
                        var i = t.options.x - e.x;
                        i < 0 && i >= n.options.x - e.x && (n = t), i > 0 && i <= r.options.x - e.x && (r = t)
                    }), [n, r]
                }
            }, {
                key: "getItemOptions",
                value: function() {
                    var t = b.default.getOptions(),
                        e = t.boxColors;
                    return {
                        stroke: e.stroke,
                        color: e.color
                    }
                }
            }, {
                key: "isInCabinet",
                value: function(t, e) {
                    return !(!t || t.length < 2 || !t[0] || !t[1] || t[0] === t[1] || c.default.some(t, function(t) {
                        return t instanceof C.default
                    }) || t[0].options.x - e.x < 0 && t[1].options.x - e.x < 0 || t[0].options.x - e.x > 0 && t[1].options.x - e.x > 0);
                }
            }, {
                key: "canBeParent",
                value: function(t) {
                    return t.constructor === T.default || t.constructor === S.default && t.isVertical()
                }
            }, {
                key: "isOverlaps",
                value: function(t) {
                    var e = b.default.getShadow();
                    return c.default.some(t, function(t) {
                        var n = t.element;
                        return t.isHorizontal() && R.isOverlaps(n, e)
                    })
                }
            }, {
                key: "canBeAdded",
                value: function(t, e) {
                    var n = this,
                        r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        i = !0;
                    return !!this.isInCabinet(e, r) && (!this.isOverlaps(t) && (!!c.default.every(e, function(t) {
                        return n.canBeParent(t)
                    }) && i))
                }
            }, {
                key: "getShadowOptions",
                value: function(t, e) {
                    var n = this,
                        r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        i = this.isInCabinet(e, r);
                    if (!i) return {
                        visible: i
                    };
                    var o = this.canBeAdded(t, e, r),
                        s = t[0],
                        a = t[1];
                    return c.default.forEach(t, function(t) {
                        var e = t.options.x - r.x;
                        e < 0 && e >= s.options.x - r.x && n.canBeParent(t) && (s = t), e > 0 && e <= a.options.x - r.x && n.canBeParent(t) && (a = t)
                    }), {
                        visible: i,
                        isAvailable: o,
                        left: s.options.x + this.shelfWidth,
                        top: r.y,
                        width: a.options.x - s.options.x - this.shelfWidth,
                        height: _.BOX_HEIGHT + 1
                    }
                }
            }]), e
        }(h.default);
    e.default = A
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : g.RULER_COLOR;
        return new d.fabric.Triangle({
            width: 6,
            height: 6,
            angle: -90,
            top: e,
            left: t,
            strokeWidth: 0,
            fill: n
        })
    }

    function s(t, e) {
        var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : g.RULER_COLOR;
        return new d.fabric.Triangle({
            width: 6,
            height: 6,
            angle: 90,
            top: e,
            left: t,
            strokeWidth: 0,
            fill: n
        })
    }

    function a(t, e) {
        var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : g.RULER_COLOR;
        return new d.fabric.Triangle({
            width: 6,
            height: 6,
            top: e,
            left: t,
            strokeWidth: 0,
            fill: n
        })
    }

    function l(t, e) {
        var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : g.RULER_COLOR;
        return new d.fabric.Triangle({
            width: 6,
            height: 6,
            angle: 180,
            top: e,
            left: t,
            strokeWidth: 0,
            fill: n
        })
    }

    function u(t, e, n, r) {
        var i = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : g.INNER_RULER_COLOR,
            o = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 8,
            s = new d.fabric.Text(t, {
                left: e,
                fontSize: o,
                strokeWidth: .3,
                angle: 90,
                stroke: i,
                fontFamily: "Verdana"
            });
        return s.set({
            top: Math.floor(n + (r - n) / 2 - s.height / 2)
        }), s
    }

    function c(t, e, n, r) {
        var i = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : g.RULER_COLOR,
            o = new d.fabric.Text(t + "", {
                left: e,
                angle: -90,
                fontSize: 7,
                stroke: i,
                strokeWidth: .3,
                fontFamily: "Verdana"
            });
        return o.set({
            top: Math.floor(n + (r - n) / 2 + o.height / 2)
        }), o
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.drawDoorsRightRuler = e.drawDoorsBottomRuler = e.drawRightBorderRuler = e.drawLeftBorderRuler = e.drawRightRuler = e.drawBottomRuler = e.drawLeftRuler = e.drawTopRuler = void 0;
    var f = n(7),
        h = i(f),
        d = n(11),
        p = n(143),
        g = r(p),
        _ = function(t, e, n, r, i) {
            var o = new d.fabric.Text(t, {
                top: n,
                fontSize: 8,
                strokeWidth: .3,
                stroke: g.INNER_RULER_COLOR,
                fontFamily: "Verdana"
            });
            return o.set({
                left: Math.floor(i + (e - r - i) / 2 - o.width / 4)
            }), o
        },
        v = function(t, e, n, r) {
            var i = new d.fabric.Text(t, {
                top: n,
                fontSize: 8,
                strokeWidth: .3,
                stroke: g.INNER_RULER_COLOR,
                fontFamily: "Verdana"
            });
            return i.set({
                left: Math.floor(e + r / 2 - i.width / 4)
            }), i
        };
    e.drawTopRuler = function(t, e, n, r) {
        var i = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : g.TOP_ROLLER_BOTTOM_PADDING + g.TOP_ROLLER_TOP_PADDING,
            o = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : g.TOP_ROLLER_BOTTOM_PADDING + g.TOP_ROLLER_TOP_PADDING,
            s = new d.fabric.Triangle({
                width: 6,
                height: 6,
                angle: -90,
                top: g.TOP_ROLLER_TOP_PADDING + 3.5,
                left: 0,
                strokeWidth: 0,
                fill: g.RULER_COLOR
            }),
            a = new d.fabric.Triangle({
                width: 6,
                height: 6,
                angle: 90,
                top: g.TOP_ROLLER_TOP_PADDING - 2.5,
                left: e,
                strokeWidth: 0,
                fill: g.RULER_COLOR
            }),
            l = new d.fabric.Rect({
                left: 0,
                top: 0,
                width: 1,
                height: i,
                strokeWidth: 0,
                fill: g.RULER_COLOR
            }),
            u = new d.fabric.Rect({
                left: e,
                top: 0,
                width: 1,
                height: o,
                strokeWidth: 0,
                fill: g.RULER_COLOR
            }),
            c = new d.fabric.Line([0, g.TOP_ROLLER_TOP_PADDING, e, g.TOP_ROLLER_TOP_PADDING], {
                stroke: g.RULER_COLOR
            }),
            f = new d.fabric.Text(t + "", {
                left: -100,
                top: -2,
                fontSize: 8,
                stroke: g.RULER_COLOR,
                strokeWidth: .3,
                fontFamily: "Verdana"
            });
        return f.set({
            left: Math.floor(e / 2 - f.width / 2)
        }), new d.fabric.Group([f, s, a, l, u, c], {
            selectable: !1,
            top: n,
            left: r
        })
    }, e.drawLeftRuler = function(t, e, n, r, i) {
        var o = new d.fabric.Path("\n        M 0 0\n        L " + i + " 0\n        M " + g.LEFT_ROLLER_LEFT_PADDING + " 0\n        L " + g.LEFT_ROLLER_LEFT_PADDING + " " + e + "\n        M 0 " + e + "\n        L " + i + " " + e + "\n        ", {
                stroke: g.RULER_COLOR,
                strokeWidth: 1
            }),
            s = new d.fabric.Triangle({
                width: 6,
                height: 6,
                top: 0,
                left: g.LEFT_ROLLER_LEFT_PADDING - 2.5,
                strokeWidth: 0,
                fill: g.RULER_COLOR
            }),
            a = new d.fabric.Triangle({
                width: 6,
                height: 6,
                angle: 180,
                top: e,
                left: g.LEFT_ROLLER_LEFT_PADDING + 3.5,
                strokeWidth: 0,
                fill: g.RULER_COLOR
            }),
            l = new d.fabric.Text(t + "", {
                left: -2,
                top: -100,
                angle: -90,
                fontSize: 8,
                stroke: g.RULER_COLOR,
                strokeWidth: .3,
                fontFamily: "Verdana"
            });
        return l.set({
            top: Math.floor(e / 2 - l.height / 2)
        }), new d.fabric.Group([l, s, a, o], {
            selectable: !1,
            top: n,
            left: r - i
        })
    }, e.drawBottomRuler = function(t, e, n, r) {
        var i = e.element.width + 2 * r,
            a = h.default.sortBy(n, function(t) {
                return t.element.left
            }),
            l = e.element.left,
            u = g.BOTTOM_ROLLER_TOP_PADDING + g.BOTTOM_ROLLER_BOTTOM_PADDING,
            c = "M 0 " + g.BOTTOM_ROLLER_TOP_PADDING + " L " + i + " " + g.BOTTOM_ROLLER_TOP_PADDING + " ",
            f = 0,
            p = 0;
        c += "M 0 0 L 0 " + u + " ";
        var v = [],
            b = [];
        h.default.forEach(a, function(e) {
            var n = e.element.left,
                a = Math.floor((n - f - l) / i * t);
            p += a, c += "M " + Math.floor(n - l + r) + " 0 L " + Math.floor(n - l + r) + " " + u + " ", b.push(_(a + "", n, 5, l, f)), v.push(o(0 === f ? f : f + r, g.BOTTOM_ROLLER_TOP_PADDING + 3.5, g.INNER_RULER_COLOR)), v.push(s(n - l + r + 1, g.BOTTOM_ROLLER_TOP_PADDING - 2.5, g.INNER_RULER_COLOR)), f = n - l
        });
        var y = t - p + "";
        b.push(_(y, i + l, 5, l, f)), c += "M " + i + " 0 L " + i + " " + u + " ", v.push(o(f + r, g.BOTTOM_ROLLER_TOP_PADDING + 3.5, g.INNER_RULER_COLOR)), v.push(s(i, g.BOTTOM_ROLLER_TOP_PADDING - 2.5, g.INNER_RULER_COLOR));
        var m = new d.fabric.Path(c, {
            stroke: g.INNER_RULER_COLOR,
            strokeWidth: 1
        });
        return new d.fabric.Group(v.concat(b.concat([m])), {
            selectable: !1,
            top: e.element.top + r,
            left: e.element.left - r
        })
    }, e.drawRightRuler = function(t, e, n, r, i) {
        var o = e.element.top,
            s = e.element.height,
            c = h.default.sortBy(n, function(t) {
                return t.element.top
            }),
            f = g.RIGHT_ROLLER_LEFT_PADDING + g.RIGHT_ROLLER_RIGHT_PADDING;
        i = Math.floor(i);
        var p = "\n        M " + (g.RIGHT_ROLLER_LEFT_PADDING + i) + " 0\n        L " + (g.RIGHT_ROLLER_LEFT_PADDING + i) + " " + s + " ";
        p += "M 0 0 L " + (f + i) + " 0 ", p += "M 0 " + s + " L " + (f + i) + " " + s;
        var _ = 0,
            v = [],
            b = [],
            y = 0;
        h.default.forEach(c, function(e) {
            var n = Math.floor(e.element.top - o),
                r = Math.floor((n - _) / s * t);
            y += r, p += "M " + i + " " + n + " L " + (f + i) + " " + n + " ", v.push(a(g.RIGHT_ROLLER_LEFT_PADDING + i - 2.5, _, g.INNER_RULER_COLOR)), v.push(l(g.RIGHT_ROLLER_LEFT_PADDING + i + 3.5, n + 1, g.INNER_RULER_COLOR)), b.push(u(r + "", g.RIGHT_ROLLER_LEFT_PADDING + i + 12, _, n)), _ = n
        }), b.push(u(t - y + "", g.RIGHT_ROLLER_LEFT_PADDING + i + 12, _, s)), v.push(a(g.RIGHT_ROLLER_LEFT_PADDING + i - 2.5, _, g.INNER_RULER_COLOR)), v.push(l(g.RIGHT_ROLLER_LEFT_PADDING + i + 3.5, s, g.INNER_RULER_COLOR));
        var m = new d.fabric.Path(p, {
            stroke: g.INNER_RULER_COLOR,
            strokeWidth: 1
        });
        return new d.fabric.Group(v.concat(b.concat([m])), {
            selectable: !1,
            top: o,
            left: e.element.left + r
        })
    }, e.drawLeftBorderRuler = function(t, e, n, r, i) {
        var o = e.element.top + g.SIDE_SHELVES_DIFF,
            s = e.element.height - 2 * g.SIDE_SHELVES_DIFF,
            u = h.default.sortBy(n, function(t) {
                return t.element.top
            });
        i = Math.floor(i);
        var f = [],
            p = [],
            _ = 0,
            v = 0,
            b = "M " + g.LEFT_BORDER_RULER_LEFT_PADDING + " 0 L " + g.LEFT_BORDER_RULER_LEFT_PADDING + " " + s + " ";
        b += "M 0 0 L " + (g.LEFT_BORDER_RULER_LEFT_PADDING + g.LEFT_BORDER_RULER_RIGHT_PADDING) + " 0 ", b += "M 0 " + s + " L " + (g.LEFT_BORDER_RULER_LEFT_PADDING + g.LEFT_BORDER_RULER_RIGHT_PADDING) + " " + s + " ", h.default.forEach(u, function(e) {
            var n = Math.floor(e.element.top - o);
            b += "M 0 " + n + " L " + (g.LEFT_BORDER_RULER_LEFT_PADDING + g.LEFT_BORDER_RULER_RIGHT_PADDING) + " " + n + " ", f.push(a(g.LEFT_BORDER_RULER_LEFT_PADDING - 2.5, _, g.BORDER_RULER_COLOR)), f.push(l(g.LEFT_BORDER_RULER_LEFT_PADDING + 3.5, n + 1, g.BORDER_RULER_COLOR));
            var r = Math.floor((n - _) / s * t);
            v += r, p.push(c(r + "", g.LEFT_BORDER_RULER_LEFT_PADDING - 8, _, n, g.BORDER_RULER_COLOR)), _ = n
        }), f.push(a(g.LEFT_BORDER_RULER_LEFT_PADDING - 2.5, _, g.BORDER_RULER_COLOR)), f.push(l(g.LEFT_BORDER_RULER_LEFT_PADDING + 3.5, s, g.BORDER_RULER_COLOR)), p.push(c(t - v + "", g.LEFT_BORDER_RULER_LEFT_PADDING - 8, _, s, g.BORDER_RULER_COLOR));
        var y = new d.fabric.Path(b, {
            stroke: g.BORDER_RULER_COLOR,
            strokeWidth: 1
        });
        return new d.fabric.Group(f.concat(p.concat([y])), {
            selectable: !1,
            top: o,
            left: e.element.left - i - g.LEFT_BORDER_RULER_RIGHT_PADDING - g.LEFT_BORDER_RULER_LEFT_PADDING
        })
    }, e.drawRightBorderRuler = function(t, e, n, r, i) {
        var o = e.element.top + g.SIDE_SHELVES_DIFF,
            s = e.element.height - 2 * g.SIDE_SHELVES_DIFF,
            c = h.default.sortBy(n, function(t) {
                return t.element.top
            });
        i = Math.floor(i);
        var f = [],
            p = [],
            _ = 0,
            v = 0,
            b = "M " + g.RIGHT_BORDER_RULER_LEFT_PADDING + " 0 L " + g.RIGHT_BORDER_RULER_LEFT_PADDING + " " + s + " ";
        b += "M 0 0 L " + (g.RIGHT_BORDER_RULER_LEFT_PADDING + g.RIGHT_BORDER_RULER_RIGHT_PADDING) + " 0 ", b += "M 0 " + s + " L " + (g.RIGHT_BORDER_RULER_LEFT_PADDING + g.RIGHT_BORDER_RULER_RIGHT_PADDING) + " " + s + " ", h.default.forEach(c, function(e) {
            var n = Math.floor(e.element.top - o);
            b += "M 0 " + n + " L " + (g.RIGHT_BORDER_RULER_LEFT_PADDING + g.RIGHT_BORDER_RULER_RIGHT_PADDING) + " " + n + " ", f.push(a(g.RIGHT_BORDER_RULER_LEFT_PADDING - 2.5, _, g.BORDER_RULER_COLOR)), f.push(l(g.RIGHT_BORDER_RULER_LEFT_PADDING + 3.5, n + 1, g.BORDER_RULER_COLOR));
            var r = Math.floor((n - _) / s * t);
            v += r, p.push(u(r + "", g.RIGHT_BORDER_RULER_LEFT_PADDING + 10, _, n, g.BORDER_RULER_COLOR, 7)), _ = n
        }), f.push(a(g.RIGHT_BORDER_RULER_LEFT_PADDING - 2.5, _, g.BORDER_RULER_COLOR)), f.push(l(g.RIGHT_BORDER_RULER_LEFT_PADDING + 3.5, s, g.BORDER_RULER_COLOR)), p.push(u(t - v + "", g.RIGHT_BORDER_RULER_LEFT_PADDING + 10, _, s, g.BORDER_RULER_COLOR, 7));
        var y = new d.fabric.Path(b, {
            stroke: g.BORDER_RULER_COLOR,
            strokeWidth: 1
        });
        return new d.fabric.Group(f.concat(p.concat([y])), {
            selectable: !1,
            top: o,
            left: e.element.left + r + i
        })
    }, e.drawDoorsBottomRuler = function(t, e, n, r) {
        var i = e.element.width + r,
            a = g.BOTTOM_ROLLER_TOP_PADDING + g.BOTTOM_ROLLER_BOTTOM_PADDING,
            l = e.element.left - 2 * r,
            u = n.length,
            c = [],
            f = [],
            p = "M 0 " + g.BOTTOM_ROLLER_TOP_PADDING + " L " + (i + r) + " " + g.BOTTOM_ROLLER_TOP_PADDING + " ";
        h.default.forEach(n, function(t, e) {
            var n = t.startCoordinates.left - r - l,
                i = t.verticalShelves,
                d = t.options.realWidth,
                _ = n + t.options.width + 1;
            if (p += "M " + Math.floor(n) + " 0 L " + Math.floor(n) + " " + a + " ", 0 === i.length) f.push(v(d + "", n, 5, t.options.width)), c.push(o(n, g.BOTTOM_ROLLER_TOP_PADDING + 3.5, g.INNER_RULER_COLOR)), c.push(s(e === u - 1 ? _ + r : _, g.BOTTOM_ROLLER_TOP_PADDING - 2.5, g.INNER_RULER_COLOR));
            else {
                var b = t.options.realWidth,
                    y = n;
                h.default.forEach(i, function(e) {
                    var n = Math.floor(e.options.x - r - l),
                        i = Math.floor((n - y) * d / t.options.width);
                    p += "M " + Math.floor(n) + " 0 L " + Math.floor(n) + " " + a + " ", f.push(v(i + "", y, 5, n - y)), c.push(o(y, g.BOTTOM_ROLLER_TOP_PADDING + 3.5, g.INNER_RULER_COLOR)), c.push(s(n, g.BOTTOM_ROLLER_TOP_PADDING - 2.5, g.INNER_RULER_COLOR)), y = n, b -= i
                }), f.push(v(b + "", y, 5, _ - y)), c.push(o(y, g.BOTTOM_ROLLER_TOP_PADDING + 3.5, g.INNER_RULER_COLOR)), c.push(s(_, g.BOTTOM_ROLLER_TOP_PADDING - 2.5, g.INNER_RULER_COLOR))
            }
        }), p += "M " + (i + r) + " 0 L " + (i + r) + " " + a + " ";
        var _ = new d.fabric.Path(p, {
            stroke: g.INNER_RULER_COLOR,
            strokeWidth: 1
        });
        return new d.fabric.Group(c.concat(f.concat([_])), {
            selectable: !1,
            top: e.element.top + r,
            left: e.element.left - r
        })
    }, e.drawDoorsRightRuler = function(t, e, n, r, i) {
        var o = [];
        h.default.forEach(n, function(t) {
            h.default.forEach(t.horizontalShelves, function(t) {
                o.push({
                    top: Math.floor(t.options.y)
                })
            })
        });
        var s = e.element.top,
            c = e.element.height,
            f = h.default.sortBy(o, function(t) {
                return t.top
            }),
            p = g.RIGHT_ROLLER_LEFT_PADDING + g.RIGHT_ROLLER_RIGHT_PADDING;
        i = Math.floor(i);
        var _ = "\n        M " + (g.RIGHT_ROLLER_LEFT_PADDING + i) + " 0\n        L " + (g.RIGHT_ROLLER_LEFT_PADDING + i) + " " + c + " ";
        _ += "M 0 0 L " + (p + i) + " 0 ", _ += "M 0 " + c + " L " + (p + i) + " " + c;
        var v = 0,
            b = [],
            y = [],
            m = 0;
        h.default.forEach(f, function(e) {
            var n = Math.floor(e.top - s),
                r = Math.floor((n - v) / c * t);
            m += r, _ += "M " + i + " " + n + " L " + (p + i) + " " + n + " ", b.push(a(g.RIGHT_ROLLER_LEFT_PADDING + i - 2.5, v, g.INNER_RULER_COLOR)), b.push(l(g.RIGHT_ROLLER_LEFT_PADDING + i + 3.5, n + 1, g.INNER_RULER_COLOR)), y.push(u(r + "", g.RIGHT_ROLLER_LEFT_PADDING + i + 12, v, n)), v = n
        }), y.push(u(t - m + "", g.RIGHT_ROLLER_LEFT_PADDING + i + 12, v, c)), b.push(a(g.RIGHT_ROLLER_LEFT_PADDING + i - 2.5, v, g.INNER_RULER_COLOR)), b.push(l(g.RIGHT_ROLLER_LEFT_PADDING + i + 3.5, c, g.INNER_RULER_COLOR));
        var E = new d.fabric.Path(_, {
            stroke: g.INNER_RULER_COLOR,
            strokeWidth: 1
        });
        return new d.fabric.Group(b.concat(y.concat([E])), {
            selectable: !1,
            top: s,
            left: e.element.left + r
        })
    }
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.changeStyleBidStep = void 0;
    var i = n(168),
        o = r(i);
    e.changeStyleBidStep = function(t, e) {
        var n = document.getElementById(o.HEADER_ITEM_IDS.BID);
        e ? (n.classList.remove(o.HEADER_COMPLETED_CLASS), n.classList.remove(o.HEADER_NOT_AVAILABLE_CLASS), n.children[0].children[0].style.backgroundImage = "") : t ? n.classList.remove(o.HEADER_NOT_AVAILABLE_CLASS) : n.classList.add(o.HEADER_NOT_AVAILABLE_CLASS)
    }
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    e.HEADER_ITEM_IDS = {
        INSIDE: "header-item-inside",
        DOORS: "header-item-doors",
        BID: "header-item-bid"
    }, e.HEADER_ITEM_CLASSES = {
        INSIDE: "header-item-inside",
        DOORS: "header-item-doors",
        BID: "header-item-bid"
    }, e.CHECK_ICON = "images/header-list/check.png", e.ERROR_ICON = "images/header-list/cancel.png", e.HEADER_SELECTED_CLASS = "selected", e.HEADER_COMPLETED_CLASS = "completed", e.HEADER_NOT_AVAILABLE_CLASS = "not-available", e.HEADER_LIST_ID = "constructor-header-list", e.HEADER_IMAGE_ID = "constructor-header-image"
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var o = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        s = n(2),
        a = r(s),
        l = n(7),
        u = r(l),
        c = n(170),
        f = r(c),
        h = n(6),
        d = r(h),
        p = n(109),
        g = r(p),
        _ = n(5),
        v = (n(143), n(154)),
        b = r(v),
        y = n(158),
        m = r(y),
        E = n(160),
        S = r(E),
        O = n(172),
        T = r(O),
        x = n(165),
        w = r(x),
        C = n(163),
        I = r(C),
        R = n(159),
        A = r(R),
        P = n(164),
        L = r(P),
        k = n(162),
        D = r(k),
        j = n(161),
        M = r(j),
        N = n(173),
        B = r(N),
        H = n(136),
        F = r(H),
        U = n(135),
        G = r(U),
        W = n(176),
        Y = (r(W), n(179)),
        V = r(Y),
        X = n(199),
        z = (r(X), function() {
            function t() {
                var e = this;
                i(this, t), this.onTextureDragStart = function(t, n) {
                    var r = F.default.getDoorsResource(t.url);
                    V.default.moveDoorsToDefaultPosition(), e.onDragStart({
                        cost: t.cost,
                        label: t.label,
                        element: new B.default(r, t.type)
                    }, n)
                }, this.onDragStart = function(t, n) {
                    if (a.default.debug("SpyCanvasController.onDragStart: element = " + t.label + ", isInAnimation = " + e.isInAnimation), !(F.default.isDraggingOn() || e.isInAnimation || F.default.isDoorDragging())) {
                        n.preventDefault && n.preventDefault(), e.item = t, F.default.startDragging();
                        var r = u.default.result(n, "touches[0].clientX") || u.default.result(n, "clientX"),
                            i = u.default.result(n, "touches[0].clientY") || u.default.result(n, "clientY");
                        f.default.setElement(t.element), f.default.updateElement(null, r, i), f.default.addElement(t.element), G.default.shadowToFront(), G.default.addPhantom(t.element.getPhantomElement()), t.element.isForDoors ? V.default.updateRuler() : G.default.update()
                    }
                }, this.onTouchMove = function(t) {
                    var n = u.default.result(t, "touches[0].clientY"),
                        r = u.default.result(t, "touches[0].clientX"),
                        i = e.canvas.getPointer(t.touches[0]);
                    window.requestAnimationFrame(function() {
                        F.default.isDraggingOn() && !e.isInAnimation && e.onDragMove(i, r, n)
                    })
                }, this.onTouchEnd = function(t) {
                    if (F.default.isDoorDragging()) return V.default.onMouseUp(t);
                    if (F.default.isDraggingOn() && !e.isInAnimation) {
                        var n = e.canvas.getPointer(t.changedTouches[0]);
                        e.onDragEnd(n)
                    }
                }, this.onTouchCancel = function() {
                    F.default.isDraggingOn() && !e.isInAnimation && (a.default.debug("SpyCanvasController.onTouchCancel"), F.default.endDragging(), f.default.removeElement())
                }, this.onWheel = function(t) {
                    F.default.isDraggingOn() && t.preventDefault()
                }, this.onMouseMove = function(t) {
                    window.requestAnimationFrame(function() {
                        if (F.default.isDraggingOn() && !e.isInAnimation) {
                            var n = e.canvas.getPointer(t);
                            e.onDragMove(n, t.clientX, t.clientY)
                        }
                    })
                }, this.onMouseLeave = function() {
                    F.default.isDraggingOn() && !e.isInAnimation && (a.default.debug("SpyCanvasController.onMouseLeave"), F.default.endDragging(), f.default.removeElement())
                }, this.onMouseUp = function(t) {
                    if (F.default.isDoorDragging()) return V.default.onMouseUp(t);
                    if (F.default.isDraggingOn() && !e.isInAnimation) {
                        var n = e.canvas.getPointer(t);
                        e.onDragEnd(n)
                    }
                }, this.onDragMove = function(t, n, r) {
                    var i = e.item.element,
                        o = F.default.getShadow();
                    G.default.movePhantom(i.getCoordinatesPhantomElement(t));
                    var s = i.phantom;
                    s.setCoords();
                    var a = F.default.intersection(i.phantom, i.isForDoors),
                        l = i.getParents(a, t);
                    l = u.default.filter(l, function(t) {
                        return t && !t.options.isLeftBorderShelf && !t.options.isRightBorderShelf
                    }), f.default.updateElement(i.transform(l, t), n, r), G.default.moveShadow(i.getShadowOptions(a, l, t)), o.setCoords(), G.default.setColorShadow(i.isAvailable(a, l, t)), f.default.update()
                }, this.moveItemToTrash = function(t) {
                    e.isInAnimation = !0, f.default.removePointerClass(), a.default.debug("SpyCanvasController.moveItemToTrash: animation start"), f.default.animateElement(t, function() {
                        a.default.debug("SpyCanvasController.moveItemToTrash: animation end"), e.isInAnimation = !1, f.default.removeElement()
                    })
                }, this.onDragEnd = function(t) {
                    t.x = Math.floor(t.x), t.y = Math.floor(t.y);
                    var n = F.default.getValue("cabinetColor"),
                        r = n.color,
                        i = n.colorShelf,
                        o = n.stroke,
                        s = e.item.element;
                    F.default.endDragging(), G.default.hideShadow(), s.phantom.setCoords();
                    var l = F.default.intersection(s.phantom, s.isForDoors),
                        c = s.getParents(l, t);
                    if (c = u.default.filter(c, function(t) {
                            return t && !t.options.isLeftBorderShelf && !t.options.isRightBorderShelf
                        }), !s.canBeAdded(l, c, t)) return a.default.warn("SpyCanvasController.onMouseUp: element can't be added."), G.default.removePhantom(), void(s.isForDoors ? (f.default.removeElement(), f.default.update()) : e.moveItemToTrash(t));
                    if (f.default.removeElement(), s.isForDoors) return s.cost = e.item.cost, V.default.onDragEnd(s, c, t);
                    var h = new s.CabinetItem({
                            stroke: o,
                            strokeWidth: 1,
                            visible: !0,
                            selectable: !0,
                            hasControls: !1,
                            hasBorders: !1,
                            color: i,
                            perspectiveColor: r,
                            itemOptions: s.getItemOptions()
                        }, e.item.element.id),
                        d = h.preRender(c, t);
                    h.postRender(), e.canvas.add(h.element), F.default.addCabinetItem(h), e.updateParents(d, h), V.default.bringToFront(), G.default.update(), G.default.removePhantom(), f.default.update(), e.item = null
                }, this.createAndAddItem = function(t, n, r, i, o, s, a) {
                    var l = new t(s, r),
                        c = l.preRender(i, n, a);
                    return l.postRender(), e.canvas.add(l.element), F.default.addCabinetItem(l), e.updateParents(c, l), u.default.forEach(o, function(t) {
                        t.addParent(l)
                    }), l.children = o, l
                }, this.createItem = function(t, n, r) {
                    n.x = Math.floor(n.x), n.y = Math.floor(n.y);
                    var i = t.element,
                        o = F.default.getValue("cabinetColor"),
                        s = o.colorShelf,
                        l = o.stroke;
                    G.default.addPhantom(i.getPhantomElement()), G.default.movePhantom(i.getCoordinatesPhantomElement(n), !0), i.decreasePhantom(), i.phantom.setCoords();
                    var c = F.default.intersection(i.phantom, i.isForDoors),
                        h = i.getParents(c, n);
                    return h = u.default.filter(h, function(t) {
                        return t && !t.options.isLeftBorderShelf && !t.options.isRightBorderShelf
                    }), i.increasePhantom(), i.canBeAdded(c, h, n) ? i.isForDoors ? V.default.createItem(i, h, n, r) : (e.createAndAddItem(i.CabinetItem, n, i.id, h, r, {
                        stroke: l,
                        strokeWidth: 1,
                        visible: !0,
                        selectable: !0,
                        hasControls: !1,
                        hasBorders: !1,
                        color: s,
                        itemOptions: i.getItemOptions()
                    }, i instanceof T.default), V.default.bringToFront(), void G.default.removePhantom()) : (a.default.warn("SpyCanvasController.createItem: element can't be added."), G.default.removePhantom(), f.default.update(), void f.default.removeElement())
                }, this.updateParents = function(t, e) {
                    u.default.forEach(t, function(t) {
                        return t.addChild(e)
                    })
                }
            }
            return o(t, [{
                key: "init",
                value: function() {
                    f.default.init(_.SPY_CANVAS_ID), this.bindHandlers(), this.canvas = F.default.getCanvas(), this.item = null, this.isInAnimation = !1
                }
            }, {
                key: "bindHandlers",
                value: function() {
                    var t = d.default.component.id,
                        e = document.getElementById(t);
                    e.addEventListener("touchmove", this.onTouchMove), e.addEventListener("touchend", this.onTouchEnd), e.addEventListener("touchcancel", this.onTouchCancel), e.addEventListener("mousemove", this.onMouseMove), e.addEventListener("mouseleave", this.onMouseLeave), e.addEventListener("mouseup", this.onMouseUp), e.addEventListener("wheel", this.onWheel), e.addEventListener("scroll", this.onWheel), e.addEventListener("mousewheel", this.onWheel)
                }
            }, {
                key: "createCabinetCollectionItems",
                value: function(t) {
                    var e = this,
                        n = [{
                            label: g.default.KEYS.HORIZONTAL_BAFFLE_COLLECTION_LABEL,
                            url: "images/collection/horizontal-baffle.png",
                            element: new b.default
                        }, {
                            label: g.default.KEYS.HORIZONTAL_VERTICAL_WALL_LABEL,
                            url: "images/collection/vertical-baffle.png",
                            element: new m.default
                        }, {
                            label: g.default.KEYS.ORDINARY_HANGER_LABEL,
                            url: "images/collection/ordinary-hanger.png",
                            element: new S.default(t[_.CABINET_COLLECTION_ITEMS.HORIZONTALPIPE])
                        }, {
                            label: g.default.KEYS.ASCENDING_PIPE_LABEL,
                            url: "images/collection/ascending-pipe.png",
                            element: new T.default(t[_.CABINET_COLLECTION_ITEMS.VERTICALPIPE])
                        }, {
                            label: g.default.KEYS.BOX_LABEL,
                            url: "images/collection/box.png",
                            element: new w.default(t[_.CABINET_COLLECTION_ITEMS.BOX])
                        }, {
                            label: g.default.KEYS.TIE_LABEL,
                            url: "images/collection/tie.png",
                            element: new I.default(t[_.CABINET_COLLECTION_ITEMS.TIE])
                        }, {
                            label: g.default.KEYS.SHOES_LABEL,
                            url: "images/collection/shoes.png",
                            element: new A.default(t[_.CABINET_COLLECTION_ITEMS.SHOES])
                        }, {
                            label: g.default.KEYS.HANGER_LABEL,
                            url: "images/collection/hanger.png",
                            element: new D.default(t[_.CABINET_COLLECTION_ITEMS.HANGER])
                        }, {
                            label: g.default.KEYS.PANTOGRAPH_LABEL,
                            url: "images/collection/pantograph.png",
                            element: new M.default(t[_.CABINET_COLLECTION_ITEMS.PATNOGRAPH])
                        }, {
                            label: g.default.KEYS.TROUSERS_LABEL,
                            url: "images/collection/trousers.png",
                            element: new L.default(t[_.CABINET_COLLECTION_ITEMS.PANTS])
                        }];
                    return u.default.map(n, function(t) {
                        return t.handler = u.default.partial(e.onDragStart, t), t
                    })
                }
            }, {
                key: "createDoorsCollectionItems",
                value: function(t) {
                    var e = this;
                    return u.default.map(t.groupItems, function(t) {
                        return t.handler = u.default.partial(e.onTextureDragStart, t), t
                    })
                }
            }]), t
        }());
    e.default = new z
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var s = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        a = n(7),
        l = i(a),
        u = n(11),
        c = n(171),
        f = n(5),
        h = r(f),
        d = n(139),
        p = (r(d), function() {
            function t() {
                var e = this;
                o(this, t), this.update = function() {
                    e.canvas.renderAll()
                }, this.canvas = null, this.canvasContainer = null, this.element = null, this.offsetTop = null, this.offsetLeft = null, this.trashCoordinates = {
                    x: c.TRASH_LEFT_COORDINATE,
                    y: c.TRASH_TOP_COORDINATE
                }
            }
            return s(t, [{
                key: "init",
                value: function(t) {
                    this.canvas = new u.fabric.Canvas(t), this.canvasContainer = document.getElementById(h.SPY_CANVAS_ID)
                }
            }, {
                key: "setElement",
                value: function(t) {
                    var e = this.canvasContainer.getBoundingClientRect();
                    this.element = t, this.offsetTop = e.top, this.offsetLeft = e.left, this.element.preRender(), this.canvasContainer.classList.add(c.POINTER_CURSOR_CLASS)
                }
            }, {
                key: "addElement",
                value: function(t) {
                    var e = this.element.getFabricObject();
                    e.set({
                        opacity: 1,
                        angle: 0,
                        originX: "left",
                        originY: "top"
                    }), this.canvas.add(e)
                }
            }, {
                key: "updateElement",
                value: function(t, e, n) {
                    t = t || {}, this.element.set(l.default.merge(t, {
                        left: e - this.offsetLeft + (t.paddingLeft || 0),
                        top: n - this.offsetTop + (t.paddingTop || 0)
                    }))
                }
            }, {
                key: "removePointerClass",
                value: function() {
                    this.canvasContainer.classList.remove(c.POINTER_CURSOR_CLASS)
                }
            }, {
                key: "removeElement",
                value: function() {
                    this.removePointerClass(), this.element && (this.element.getFabricObject().remove(), this.element = null, this.update())
                }
            }, {
                key: "animateElement",
                value: function(t, e) {
                    var n = this.element.getFabricObject();
                    n.set({
                        left: Math.floor(t.x + n.width / 2),
                        originX: "center",
                        originY: "center"
                    }), n.animate({
                        left: c.TRASH_LEFT_COORDINATE,
                        top: c.TRASH_TOP_COORDINATE,
                        opacity: 0,
                        angle: 720
                    }, {
                        onChange: this.update,
                        duration: c.DELETE_ANIMATION_DURATION,
                        onComplete: e
                    })
                }
            }]), t
        }());
    e.default = new p
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    e.POINTER_CURSOR_CLASS = "cursor-pointer", e.SHADOW_AVAILABLE_COLOR = "#6aff6a", e.SHADOW_DISABLE_COLOR = "#ff6a6a", e.CANVASES_TOP_DIFFERENCE = 186, e.TRASH_LEFT_COORDINATE = 750, e.TRASH_TOP_COORDINATE = 90, e.DELETE_ANIMATION_DURATION = 850
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = (n(11), n(136)),
        c = i(u),
        f = n(156),
        h = i(f),
        d = n(147),
        p = r(d),
        g = n(143),
        v = r(g),
        b = n(139),
        y = r(b),
        m = n(144),
        E = r(m),
        S = n(137),
        O = i(S),
        T = n(157),
        x = i(T),
        w = n(146),
        C = i(w),
        I = n(142),
        R = i(I),
        A = function(t) {
            function e(t) {
                o(this, e);
                var n = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
                return n.CabinetItem = x.default, n
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    this.phantom = y.getRectangle({
                        x: -p.OFFSET_PIPE,
                        y: 0
                    }, {
                        x: this.shelfWidth - 1 + p.OFFSET_PIPE,
                        y: v.MAIN_CANVAS_HEIGHT
                    }, {
                        stroke: "#000",
                        visible: !1,
                        fill: "#000"
                    })
                }
            }, {
                key: "decreasePhantom",
                value: function() {
                    var t = (c.default.getCanvas(), this.phantom.getLeft());
                    this.phantom.getWidth();
                    this.phantom.set({
                        left: t + p.OFFSET_PIPE,
                        width: 1
                    })
                }
            }, {
                key: "increasePhantom",
                value: function() {
                    var t = (c.default.getCanvas(), this.phantom.getLeft());
                    this.phantom.getWidth();
                    this.phantom.set({
                        left: t - p.OFFSET_PIPE,
                        width: this.shelfWidth
                    })
                }
            }, {
                key: "getCoordinatesPhantomElement",
                value: function(t) {
                    var e = t.x;
                    t.y;
                    return {
                        x: e,
                        y: 0
                    }
                }
            }, {
                key: "getItemOptions",
                value: function() {
                    var t = c.default.getOptions(),
                        e = t.pipeColors;
                    return {
                        stroke: e.stroke,
                        topColor: e.topColor,
                        bottomColor: e.bottomColor,
                        color: e.color
                    }
                }
            }, {
                key: "canBeParent",
                value: function(t) {
                    return t.constructor === R.default || t.constructor === C.default || t.constructor === O.default && t.isHorizontal()
                }
            }, {
                key: "isInCabinet",
                value: function(t, e) {
                    return !(!t || t.length < 2 || !t[0] || !t[1] || t[0] === t[1] || t[0].options.y - e.y < 0 && t[1].options.y - e.y < 0 || t[0].options.y - e.y > 0 && t[1].options.y - e.y > 0)
                }
            }, {
                key: "getParents",
                value: function(t) {
                    var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                            x: 0,
                            y: 0
                        },
                        n = t[0],
                        r = t[1];
                    return n && r ? (_.forEach(t, function(t) {
                        var i = t.options.y - e.y;
                        i < 0 && i >= n.options.y - e.y && (n = t), i > 0 && i <= r.options.y - e.y && (r = t)
                    }), [n, r]) : []
                }
            }, {
                key: "isOverlaps",
                value: function(t) {
                    var e = c.default.getShadow();
                    return _.some(t, function(t) {
                        var n = t.element;
                        return t.isVertical() && E.isOverlaps(n, e)
                    })
                }
            }, {
                key: "canBeAdded",
                value: function(t, e) {
                    var n = this,
                        r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        i = !0;
                    return !!this.isInCabinet(e, r) && (!this.isOverlaps(t) && (!!_.every(e, function(t) {
                        return n.canBeParent(t)
                    }) && i))
                }
            }, {
                key: "getShadowOptions",
                value: function(t, e) {
                    var n = this,
                        r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        i = this.isInCabinet(e, r);
                    if (!i) return {
                        visible: i
                    };
                    var o = this.canBeAdded(t, e, r),
                        s = t[0],
                        a = t[1];
                    return s && a ? (_.forEach(t, function(t) {
                        var e = t.options.y - r.y;
                        e < 0 && e >= s.options.y - r.y && n.canBeParent(t) && (s = t), e > 0 && e <= a.options.y - r.y && n.canBeParent(t) && (a = t)
                    }), {
                        visible: i,
                        isAvailable: o,
                        left: r.x + p.OFFSET_PIPE,
                        top: s.options.y + this.shelfWidth,
                        width: this.shelfWidth,
                        height: a.options.y - s.options.y - this.shelfWidth
                    }) : {
                        visible: !1
                    }
                }
            }]), e
        }(h.default);
    e.default = A
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = n(11),
        c = n(156),
        f = i(c),
        h = n(174),
        d = r(h),
        p = n(175),
        g = r(p),
        _ = n(136),
        v = i(_),
        b = function(t) {
            function e(t) {
                var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : d.FILLING_TYPES.DEFAULT;
                o(this, e);
                var r = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
                return r.isForDoors = !0, r.isTexture = !0, r.type = n, r
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    this.phantom = new u.fabric.Rect([0, 0, 1, 1]), this.phantom.set({
                        visible: !1
                    }), this.fabricElement.set({
                        width: 40,
                        height: 40
                    })
                }
            }, {
                key: "getCoordinatesPhantomElement",
                value: function(t) {
                    var e = t.x,
                        n = t.y;
                    return {
                        x: e,
                        y: n
                    }
                }
            }, {
                key: "getParents",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
                    arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                        x: 0,
                        y: 0
                    };
                    if (t.length < 1) return [];
                    var e = t[0];
                    return [g.findTargetArea(e, this), e]
                }
            }, {
                key: "isInCabinet",
                value: function(t, e) {
                    return t && t.length > 1 && !!t[0]
                }
            }, {
                key: "canBeAdded",
                value: function(t, e) {
                    var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                        x: 0,
                        y: 0
                    };
                    return this.isInCabinet(e, n)
                }
            }, {
                key: "getShadowOptions",
                value: function(t, e) {
                    var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        r = this.canBeAdded(t, e, n);
                    if (!r) return {
                        visible: !1
                    };
                    var i = void 0,
                        o = void 0,
                        s = void 0,
                        a = void 0;
                    if (this.type === d.FILLING_TYPES.DEFAULT) i = e[0].left, s = e[0].top, o = e[0].width, a = e[0].height;
                    else if (this.type === d.FILLING_TYPES.DOOR) i = e[1].element.left + this.shelfWidth, o = e[1].element.width - 2 * this.shelfWidth, s = e[1].element.top + this.shelfWidth, a = e[1].element.height - 2 * this.shelfWidth;
                    else {
                        var l = v.default.getDoorsValues();
                        i = l.left + this.shelfWidth, o = l.width - this.shelfWidth, s = l.top + this.shelfWidth, a = l.height - this.shelfWidth
                    }
                    return {
                        visible: !0,
                        isAvailable: r,
                        left: i,
                        top: s,
                        width: o,
                        height: a
                    }
                }
            }]), e
        }(f.default);
    e.default = b
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    e.MIN_DOOR_WIDTH = 450, e.MAX_DOOR_WIDH = 1200, e.DOORS_ANIMATION_DURATION = 100, e.FILLING_TYPES = {
        DEFAULT: "default",
        DOOR: "door",
        DOORS: "doors"
    }
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t) {
        return t >= 4300 ? 7 : t >= 3600 ? 6 : t >= 2900 ? 5 : t >= 2200 ? 4 : t >= 1500 ? 3 : 2
    }

    function o(t, e) {
        var n = t[0];
        return 1 === t.length ? n : (c.default.forEach(t, function(t) {
            t.element.left < e && t.element.left > n.element.left && (n = t)
        }), n)
    }

    function s(t) {
        return c.default.find(t, function(t) {
            return !!t.startCoordinates
        })
    }

    function a(t, e) {
        return t.intersectsWithObject(e) || t.isContainedWithinObject(e) || e.isContainedWithinObject(t)
    }

    function l(t, e) {
        return c.default.find(t.areas, function(t) {
            var n = t.element.top,
                r = t.element.left;
            t.element.left = t.element.originalLeft, t.element.top = t.element.originalTop, t.element.setCoords();
            var i = a(t.element, e.phantom);
            return t.element.left = r, t.element.top = n, t.element.setCoords(), i
        })
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.getDefaultDoorsCount = i, e.getNearestDoor = o, e.getDoor = s, e.isIntersect = a, e.findTargetArea = l;
    var u = n(7),
        c = r(u)
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var s = n(7),
        a = i(s),
        l = n(136),
        u = i(l),
        c = n(177),
        f = r(c),
        h = n(178),
        d = r(h),
        p = n(6),
        g = i(p),
        _ = function t() {
            var e = this;
            o(this, t), this.recalculateCabinetCost = function() {
                var t = u.default.getOption("calculateCost");
                if (!t) return null;
                var n = u.default.getOptions(),
                    r = n.cost,
                    i = u.default.getCabinetItems(),
                    o = d.roundUp(u.default.getValue("currentWidth")),
                    s = d.roundUp(u.default.getValue("currentHeight")),
                    l = u.default.getValue("isShowCeiling"),
                    c = u.default.getValue("isShowBottomShelf"),
                    h = u.default.getValue("isShowRear"),
                    p = u.default.getValue("isShowRightStand"),
                    g = u.default.getValue("isShowLeftStand"),
                    _ = u.default.getValue("isShowLeftRear"),
                    v = u.default.getValue("isShowRightRear"),
                    b = a.default.find(i, function(t) {
                        return t.options.isTop
                    }),
                    y = a.default.find(i, function(t) {
                        return t.options.isLeft
                    }),
                    m = b.element.width + 2 * n.shelfWidth,
                    E = y.element.height,
                    S = r.cabinetBase[(o - f.MIN_CABINET_WIDTH) / f.CABINET_WIDTH_INTERVAL],
                    O = l ? r.top : 0,
                    T = c ? r.bottom : 0,
                    x = h ? r.background : 0,
                    w = g ? r.left : 0,
                    C = p ? r.right : 0,
                    I = _ ? r.leftRear : 0,
                    R = v ? r.rightRear : 0,
                    A = 0;
                a.default.forEach(i, function(t) {
                    A += t.getCost(o, m, s, E)
                });
                var P = Math.floor(S + O + T + x + w + C + I + R + A);
                u.default.setCabinetCost(P), e.triggerUpdate()
            }, this.recalculateDoorsCost = function() {
                var t = u.default.getOption("calculateCost");
                if (!t) return null;
                var n = u.default.getDoors(),
                    r = u.default.getOptions(),
                    i = r.cost,
                    o = n.length * i.door + u.default.getDoorsTextureCost();
                a.default.forEach(n, function(t) {
                    a.default.forEach(t.horizontalShelves, function(t) {
                        return o += i.horizontalBaffle
                    }), a.default.forEach(t.verticalShelves, function(t) {
                        return o += i.verticalBaffle
                    }), a.default.forEach(t.areas, function(t) {
                        return o += t.cost
                    }), o += t.backgroundCost
                }), u.default.setDoorsCost(o), e.triggerUpdate()
            }, this.triggerUpdate = function() {
                setTimeout(function() {
                    g.default.component.children.cabinetCost.update(), g.default.component.children.doorsCost.update(), g.default.component.children.totalCost.update()
                }, 0)
            }
        };
    e.default = new _
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    e.MIN_CABINET_WIDTH = 700, e.CABINET_WIDTH_INTERVAL = 100
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.formatCost = e.roundUp = void 0;
    var i = n(7),
        o = r(i);
    e.roundUp = function(t) {
        return 100 * ~~((t + 99) / 100)
    }, e.formatCost = function(t) {
        var e = t + "",
            n = "",
            r = e.length;
        return o.default.forEach(e, function(t, e) {
            (r - e) % 3 === 0 && r - e !== 0 && 0 !== e && (n += " "), n += t
        }), n
    }
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var s = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        a = n(7),
        l = i(a),
        u = n(136),
        c = i(u),
        f = n(96),
        h = i(f),
        d = n(175),
        p = r(d),
        g = n(166),
        _ = r(g),
        v = n(167),
        b = r(v),
        y = n(180),
        m = i(y),
        E = n(174),
        S = r(E),
        O = n(106),
        T = i(O),
        x = n(181),
        w = r(x),
        C = n(6),
        I = i(C),
        R = n(169),
        A = i(R),
        P = n(182),
        L = i(P),
        k = n(183),
        D = i(k),
        j = n(176),
        M = i(j),
        N = n(135),
        B = i(N),
        H = function() {
            function t() {
                var e = this;
                o(this, t), this.onDoorMoving = function(t, e) {
                    var n = (e.e, c.default.getCanvas(), c.default.getCabinetProperties()),
                        r = t.element.left,
                        i = t.element.width,
                        o = c.default.getOptions(),
                        s = o.shelfWidth,
                        a = r < t.startCoordinates.left,
                        l = t.startCoordinates.left - i + s,
                        u = t.startCoordinates.left + i - s,
                        f = n.left,
                        h = n.left + n.width - i + s;
                    if (a) {
                        if (r < l && l > f) return t.element.set({
                            left: l
                        });
                        if (r < f) return t.element.set({
                            left: f
                        })
                    } else {
                        if (r > u && u < h) return t.element.set({
                            left: u
                        });
                        if (r > h) return t.element.set({
                            left: h
                        })
                    }
                }, this.onMouseUp = function(t, e) {
                    if (c.default.isDoorDragging()) {
                        var n = c.default.getCanvas();
                        n.setActiveObject(n.item(0)), c.default.stopDoorDragging()
                    }
                }, this.onDragEnd = function(t, n, r) {
                    var i = p.getDoor(n);
                    t.isTexture ? e.fillTexture(t, i, n, r) : (e.createItem(t, n, r), e.unlockDoorsMovement()), e.update()
                }, this.fillTexture = function(t, n, r, i) {
                    var o = r[0],
                        s = r[1];
                    t.type === S.FILLING_TYPES.DOOR ? e.fillDoorTexture(s, t) : t.type === S.FILLING_TYPES.DOORS ? e.fillDoorsTexture(t) : s.fillArea(o, t.fabricElement, t.cost, 0, 0, !0), e.update()
                }, this.invertDoorsTexture = function(t) {
                    var n = c.default.getCanvasObject("doorsTexture"),
                        r = n.angle - 180;
                    n.set({
                        angle: r <= -360 ? 0 : r,
                        flipY: !n.flipY,
                        originX: r === -180 ? "right" : "left",
                        originY: r === -180 ? "bottom" : "top"
                    }), n.flipY ? n.setControlsVisibility({
                        br: !1,
                        tl: !0
                    }) : n.setControlsVisibility({
                        br: !0,
                        tl: !1
                    }), e.correctPosition(n, t), c.default.getCanvas().renderAll()
                }, this.onCompleteDoorTexture = function(t, n, r) {
                    e.onCompleteTextureCommon([t], n, r)
                }, this.onCompleteTextureCommon = function(t, n, r) {
                    var i = r.left,
                        o = r.top,
                        s = r.doorSizeInPx,
                        a = c.default.getCanvasObject("doorsTexture"),
                        u = c.default.getCanvasObject("fuckingShadow"),
                        f = c.default.getCanvas(),
                        h = a.getLeft(),
                        d = a.getTop(),
                        p = i - h + e.shelfWidth,
                        g = o - d + e.shelfWidth,
                        _ = 0;
                    f.remove(a), f.remove(u), e.asidePanel.children[0].style.zIndex = "", e.asidePanel.children[1].style.zIndex = "", c.default.disableTextureMode(), e.unlockDoorsMovement(), l.default.forEach(t, function(t) {
                        e.updateDoorBackground(t, a, _, p, g, n), _ += s
                    }), f.renderAll(), e.update()
                }, this.onCompleteDoorsTexture = function(t, n) {
                    var r = c.default.getDoors();
                    c.default.setDoorsTextureCost(t), e.onCompleteTextureCommon(r, 0, n)
                }, this.updateDoorBackground = function(t, e, n, r, i, o) {
                    t.fillArea(t.backgroundArea, e, o, -n - r, -i)
                }, this.doorsTextureScaling = function(t, n) {
                    var r = n.width,
                        i = n.height;
                    t.getWidth() < r ? (t.setScaleX(Math.floor(r / t.width)), e.scaleX = !1) : e.scaleX = !0, t.getHeight() < i ? (t.setScaleY(Math.floor(i / t.height)), e.scaleY = !1) : e.scaleY = !0, e.scaleX && e.scaleY ? (e.previousX = t.scaleX, e.previousY = t.scaleY) : (t.setScaleX(e.previousX), t.setScaleY(e.previousY)), e.correctPosition(t, n)
                }, this.doorsTextureMoving = function(t, n) {
                    e.correctPosition(t, n)
                }, this.craeteDoorsTexture = function(t, e) {
                    var n = e.top,
                        r = e.left,
                        i = e.height,
                        o = e.width,
                        s = c.default.getOptions(),
                        a = s.shelfWidth,
                        l = t.fabricElement._originalElement,
                        u = l.height,
                        f = l.width,
                        h = 20,
                        d = o + a + 2 * h,
                        p = i + 2 * h,
                        g = d,
                        _ = Math.floor(d * u / f);
                    _ < p && (_ = p, g = Math.floor(p * f / u));
                    var v = fabric.util.object.clone(t.fabricElement);
                    return v.set({
                        width: g,
                        height: _,
                        left: Math.floor(r - (g - o) / 2),
                        top: Math.floor(n + i / 2 - _ / 2),
                        transparentCorners: !1,
                        borderOpacityWhenMoving: 1,
                        borderColor: "#00b0ff",
                        cornerColor: "#00b0ff"
                    }), v.borderScaleFactor = .5, v.setControlsVisibility({
                        mtr: !1,
                        mt: !1,
                        tm: !1,
                        tl: !1,
                        tr: !1,
                        ml: !1,
                        mr: !1,
                        mb: !1,
                        bl: !1
                    }), v.lockRotation = !0, v.padding = h, v
                }, this.createItem = function(t, n, r) {
                    var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : [],
                        o = c.default.getCanvas(),
                        s = p.getDoor(n),
                        a = t.createElement(n, r),
                        l = p.findTargetArea(s, t);
                    a.children = i, e.updateParents(n, a), s.add(n, a, l, i), o.renderAll()
                }, this.onDoorMouseDown = function(t, n) {
                    var r = c.default.getCanvas(),
                        i = t.searchPossibleTargets(r, n.e);
                    i ? (i.door.element.lockMovementX = !0, c.default.startDoorElementDragging(i)) : (c.default.startDoorDragging(), e.onMouseUp = l.default.partial(e.onMouseUp, t))
                }
            }
            return s(t, [{
                key: "showOnlyDoors",
                value: function() {
                    var t = this,
                        e = c.default.getCanvas(),
                        n = c.default.getDoors();
                    this.invisibleElements = {}, l.default.forEach(e._objects, function(e) {
                        e.visible || (e.id = (0, h.default)(), t.invisibleElements[e.id] = !0), e.set({
                            visible: !1
                        })
                    }), l.default.forEach(n, function(t) {
                        e.add(t.element)
                    }), this.updateRuler(!0)
                }
            }, {
                key: "hideOnlyDoors",
                value: function() {
                    var t = this,
                        e = c.default.getCanvas();
                    c.default.getDoors();
                    l.default.forEach(e._objects, function(e) {
                        t.invisibleElements[e.id] || e.set({
                            visible: !0
                        })
                    }), this.hideDoors(), B.default.updateRuler()
                }
            }, {
                key: "isSelectedMaterialForAllDoors",
                value: function t() {
                    var e = c.default.getDoors(),
                        t = !0;
                    return t = !l.default.isEmpty(e) && l.default.every(e, function(t) {
                        return t.isSelectedMaterial()
                    })
                }
            }, {
                key: "showDoors",
                value: function() {
                    var t = this,
                        e = c.default.getCanvas(),
                        n = c.default.getDoors();
                    l.default.forEach(n, function(n) {
                        e.add(n.element), n.element.on({
                            moving: l.default.partial(t.onDoorMoving, n),
                            mousedown: l.default.partial(t.onDoorMouseDown, n),
                            touchdrag: l.default.partial(t.onDoorMouseDown, n)
                        })
                    }), this.update()
                }
            }, {
                key: "createDoors",
                value: function() {
                    var t = c.default.getCanvas(),
                        e = c.default.getValue("currentWidth"),
                        n = c.default.getValue("doorsCount"),
                        r = c.default.getValue("doorsColor"),
                        i = r.line,
                        o = c.default.getCabinetItems(),
                        s = c.default.getOptions(),
                        a = s.shelfWidth,
                        u = l.default.find(o, function(t) {
                            return t.options.isTop
                        }),
                        f = l.default.find(o, function(t) {
                            return t.options.isLeft
                        }),
                        h = f.element.height - a + 1,
                        d = u.element.width + a + 1,
                        p = u.element.top,
                        g = f.element.left,
                        _ = Math.floor(d / n),
                        v = Math.floor(e / n),
                        b = [],
                        y = 0,
                        E = g;
                    c.default.setDoorsValues({
                        left: E,
                        top: p,
                        width: d,
                        height: h,
                        doorSizeInPx: _
                    });
                    for (var S = 0; S < n - 1; S++) b.push(new m.default({
                        stroke: i,
                        top: p,
                        left: E,
                        width: _,
                        height: h,
                        canvas: t,
                        realWidth: v
                    })), y += v, E += _;
                    return b.push(new m.default({
                        stroke: i,
                        top: p,
                        left: E,
                        width: d - E + g,
                        height: h,
                        canvas: t,
                        realWidth: e - y
                    })), c.default.removeAllDoors(), l.default.forEach(b, function(t) {
                        c.default.addDoor(t)
                    }), c.default.saveCabinetProperties({
                        width: d,
                        height: h,
                        left: g,
                        top: p
                    }), b
                }
            }, {
                key: "unlockDoorsMovement",
                value: function() {
                    var t = c.default.getDoors();
                    l.default.forEach(t, function(t) {
                        t.element.lockMovementX = !1, t.element.selectable = !0, t.element.evented = !0
                    })
                }
            }, {
                key: "lockDoorsMovement",
                value: function() {
                    var t = c.default.getDoors();
                    l.default.forEach(t, function(t) {
                        t.element.lockMovementX = !0, t.element.selectable = !1, t.element.evented = !1
                    })
                }
            }, {
                key: "fillDoorsTexture",
                value: function(t) {
                    var e = c.default.getDoors();
                    l.default.forEach(e, function(t) {
                        return t.setTransparentBackground()
                    });
                    var n = c.default.getDoorsValues();
                    this.fillTextureCommon(t, n, l.default.partial(this.invertDoorsTexture, n), l.default.partial(this.onCompleteDoorsTexture, t.cost, n))
                }
            }, {
                key: "fillDoorTexture",
                value: function(t, e) {
                    t.setTransparentBackground();
                    var n = t.options;
                    n.top, n.left, n.width, n.height;
                    this.fillTextureCommon(e, t.options, l.default.partial(this.invertDoorsTexture, t.options), l.default.partial(this.onCompleteDoorTexture, t, e.cost, t.options), [t])
                }
            }, {
                key: "fillTextureCommon",
                value: function(t, e, n, r, i) {
                    var o = e.left,
                        s = e.top,
                        a = e.width,
                        u = e.height;
                    D.default.openDoorsModificationModal({
                        onInvert: n,
                        onComplete: r
                    });
                    var f = c.default.getCanvas(),
                        h = c.default.getOptions(),
                        d = h.shelfWidth;
                    this.shelfWidth = d;
                    var p = new fabric.Path("\n            M 0 0\n            L " + f.width + " 0\n            L " + f.width + " " + f.height + "\n            L 0 " + f.height + "\n            L 0 0\n            M " + o + " " + s + "\n            L " + (o + a + d) + " " + s + "\n            L " + (o + a + d) + " " + (s + u + d) + "\n            L " + o + " " + (s + u + d) + "\n            L " + o + " " + s + "\n            ", {
                        fill: "black",
                        strokeWidth: 0,
                        opacity: .7,
                        selectable: !1,
                        fillRule: "evenodd"
                    });
                    p.hasControls = p.hasBorders = !1, f.add(p), c.default.setCanvasObject("fuckingShadow", p), this.asidePanel = document.getElementById(w.ASIDE_PANEL_ID), this.asidePanel.children[0].style.zIndex = 0, this.asidePanel.children[1].style.zIndex = 0;
                    var g = this.craeteDoorsTexture(t, e);
                    f.add(g), c.default.setCanvasObject("doorsTexture", g), g.on({
                        moving: l.default.partial(this.doorsTextureMoving, g, e),
                        scaling: l.default.partial(this.doorsTextureScaling, g, e)
                    }), f.setActiveObject(g), this.bringToFront(i), this.lockDoorsMovement(), c.default.enableTextureMode()
                }
            }, {
                key: "correctPosition",
                value: function(t, e) {
                    var n = e.top,
                        r = e.left,
                        i = e.height,
                        o = e.width;
                    r < t.getLeft() && (t.left = r), t.getLeft() + t.getWidth() - this.shelfWidth < r + o && (t.left = r + o - t.getWidth() + this.shelfWidth), n < t.getTop() && (t.top = n), t.getTop() + t.getHeight() - this.shelfWidth < n + i && (t.top = n + i - t.getHeight() + this.shelfWidth), c.default.getCanvas().renderAll()
                }
            }, {
                key: "onElementDragStart",
                value: function(t) {
                    var e = c.default.getCanvas(),
                        n = c.default.stopDoorElementDragging(),
                        r = {
                            element: new n.parent,
                            label: ""
                        },
                        i = n.children;
                    this.removeElement(n, e), this.updateItems(i), e.renderAll(), this.moveDoorsToDefaultPosition(), A.default.onDragStart(r, t)
                }
            }, {
                key: "updateParents",
                value: function(t, e) {
                    l.default.forEach(t, function(t) {
                        t.startCoordinates || (t.children.push(e), e.parents.push(t))
                    })
                }
            }, {
                key: "removeElement",
                value: function(t, e, n) {
                    t.door.remove(t, n), l.default.forEach(t.parents, function(e) {
                        l.default.remove(e.children, function(e) {
                            return e.id === t.id
                        })
                    })
                }
            }, {
                key: "updateItems",
                value: function(t) {
                    for (var e = t.length - 1; e >= 0; e--) {
                        var n = t[e],
                            r = new n.parent;
                        this.removeElement(n, null, !0), r.preRender(), A.default.createItem({
                            element: r
                        }, {
                            x: n.isHorizontal ? n.options.x + 6 : n.options.x,
                            y: n.options.y
                        }, n.children)
                    }
                }
            }, {
                key: "recalculateDoorsCount",
                value: function() {
                    var t = c.default.getValue("cabinetDoorsWidth"),
                        e = c.default.getValue("cabinetDoorsHeight"),
                        n = c.default.getValue("currentWidth"),
                        r = c.default.getValue("currentHeight"),
                        i = 0;
                    n === t && e === r || (i = p.getDefaultDoorsCount(n), c.default.setValue("doorsCount", i), c.default.setValue("cabinetDoorsWidth", n), c.default.setValue("cabinetDoorsHeight", r), this.hideDoors(), this.createDoors())
                }
            }, {
                key: "setDoorsCount",
                value: function(t) {
                    var e = c.default.getCanvas();
                    c.default.setValue("doorsCount", t), e.renderOnAddRemove = !1, this.hideDoors(), this.createDoors(), this.showDoors(), e.renderOnAddRemove = !0, e.renderAll()
                }
            }, {
                key: "hideDoors",
                value: function() {
                    var t = c.default.getCanvas(),
                        e = c.default.getDoors();
                    l.default.forEach(e, function(e) {
                        return t.remove(e.element)
                    })
                }
            }, {
                key: "moveDoorsToDefaultPosition",
                value: function() {
                    var t = c.default.getCanvas(),
                        e = c.default.getDoors();
                    l.default.forEach(e, function(e) {
                        return e.element.animate({
                            left: e.startCoordinates.left
                        }, {
                            duration: S.DOORS_ANIMATION_DURATION,
                            onChange: function() {
                                return t.renderAll()
                            },
                            onComplete: function() {
                                return e.recalculateAreas(!0)
                            }
                        })
                    })
                }
            }, {
                key: "moveDoorsToDefaultPositionSync",
                value: function() {
                    var t = c.default.getDoors();
                    l.default.forEach(t, function(t) {
                        return t.element.set({
                            left: t.startCoordinates.left
                        })
                    })
                }
            }, {
                key: "applyNewColor",
                value: function(t) {
                    var e = c.default.getCanvas(),
                        n = c.default.getOption("doorsAvailableColors"),
                        r = l.default.find(n, {
                            color: t
                        });
                    c.default.setValue("doorsColor", r);
                    var i = c.default.getDoors();
                    l.default.forEach(i, function(t) {
                        return t.updateColor(r)
                    }), e.renderAll()
                }
            }, {
                key: "updateBottomRuler",
                value: function() {
                    var t = c.default.getDoors();
                    L.default.updateBottomRuler(_.drawDoorsBottomRuler, t)
                }
            }, {
                key: "updateRightRuler",
                value: function(t) {
                    var e = c.default.getDoors();
                    L.default.updateRightRuler(_.drawDoorsRightRuler, e, t)
                }
            }, {
                key: "removeBorderRulers",
                value: function() {
                    var t = c.default.getCanvasObject("leftBorderRuler"),
                        e = c.default.getCanvasObject("rightBorderRuler");
                    L.default.removeRuler(t), L.default.removeRuler(e)
                }
            }, {
                key: "updateRuler",
                value: function(t) {
                    var e = this,
                        n = c.default.getCanvas();
                    n.renderOnAddRemove = !1, window.requestAnimationFrame(function() {
                        e.updateBottomRuler(), e.updateRightRuler(t), e.removeBorderRulers(), n.renderOnAddRemove = !0, n.renderAll()
                    })
                }
            }, {
                key: "updateCost",
                value: function() {
                    M.default.recalculateDoorsCost()
                }
            }, {
                key: "update",
                value: function() {
                    this.updateRuler(), this.updateCost(), b.changeStyleBidStep(this.isSelectedMaterialForAllDoors())
                }
            }, {
                key: "bringToFront",
                value: function(t) {
                    if (I.default.component.children.router.currentRoute === T.default.DOORS) {
                        var e = t || c.default.getDoors();
                        l.default.forEach(e, function(t) {
                            t.element.bringToFront()
                        })
                    }
                }
            }]), t
        }();
    e.default = new H
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var s = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        a = n(7),
        l = i(a),
        u = n(96),
        c = i(u),
        f = n(11),
        h = n(136),
        d = i(h),
        p = n(179),
        g = i(p),
        _ = n(5),
        v = r(_),
        b = (n(147), n(175), n(167)),
        y = r(b),
        m = function() {
            function t(e) {
                o(this, t);
                var n = d.default.getOptions(),
                    r = n.shelfWidth;
                this.shelfWidth = r;
                var i = e.left,
                    s = e.top,
                    a = e.height,
                    l = e.width,
                    u = e.stroke;
                this.options = e, this.horizontalShelves = [], this.verticalShelves = [], this.areas = [], this.startCoordinates = {
                    top: s,
                    left: i
                }, this.backgroundCost = 0, this.backgroundArea = this.createAndAddArea(i + r, s + r, l, a + 1, null, 0), this.border = new f.fabric.Rect({
                    left: i,
                    top: s,
                    width: l,
                    height: a,
                    strokeWidth: r,
                    stroke: u,
                    fill: "rgba(0, 0, 0, 0)"
                }), this.element = new f.fabric.Group([this.backgroundArea.element, this.border], {
                    selectable: !0,
                    lockMovementY: !0,
                    originX: "left",
                    originY: "top"
                }), this.border.hasControls = this.border.hasBorders = !1, this.element.hasControls = this.element.hasBorders = !1, this.element.subTargetCheck = !0, this.topElement = {
                    backupElement: {
                        left: i + r,
                        top: s + r,
                        width: 1,
                        height: 1
                    }
                }, this.recalculateAreas()
            }
            return s(t, [{
                key: "add",
                value: function(t, e, n) {
                    arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : [];
                    e.isHorizontal ? this.horizontalShelves.push(e) : this.verticalShelves.push(e), this.element.addWithUpdate(e.element), e.door = this, e.area = n, e.background = n.backgroundImage.image, this.recalculateAreas()
                }
            }, {
                key: "recalculateAreas",
                value: function() {
                    var t = this,
                        e = (arguments.length > 0 && void 0 !== arguments[0] && arguments[0], this.shelfWidth),
                        n = this.element.left;
                    this.topElement.backupElement.left = n + e;
                    var r = [this.topElement].concat(this.verticalShelves.concat(this.horizontalShelves));
                    l.default.forEach(this.areas, function(e) {
                        t.element.removeWithUpdate(e.element)
                    }), this.areas = [];
                    var i = this.options,
                        o = i.top,
                        s = i.height,
                        a = i.width,
                        u = l.default.sortBy(this.verticalShelves, function(t) {
                            return t.options.x
                        }),
                        c = l.default.sortBy(this.horizontalShelves, function(t) {
                            return t.options.y
                        }),
                        f = void 0,
                        h = void 0,
                        p = void 0,
                        g = void 0,
                        _ = void 0;
                    this.backgroundImageAdded ? (f = null, h = 0) : (f = d.default.getDoorsResource(v.DEFAULT_DOORS_MATERIAL), h = .4), l.default.forEach(r, function(r) {
                        r.area && r.background ? (p = r.area.backgroundImage, g = r.opacity, _ = r.cost) : (p = f, g = h, _ = 0);
                        var i = Math.floor(r.backupElement.left),
                            d = Math.floor(r.backupElement.top);
                        r.isHorizontal ? d += e : r.element && (i += e);
                        var v = l.default.find(c, function(t) {
                                var e = Math.floor(t.backupElement.top) > d && Math.floor(t.backupElement.left) <= i && Math.floor(t.backupElement.left + t.backupElement.width) >= Math.floor(i + r.backupElement.width);
                                return e
                            }),
                            b = v && v.backupElement.top || o + s + 1,
                            y = l.default.find(u, function(t) {
                                var e = Math.floor(t.backupElement.left) > i && Math.floor(t.backupElement.top) <= d && Math.floor(t.backupElement.top + t.backupElement.height) >= Math.floor(d + r.backupElement.height);
                                return e
                            }),
                            m = y && y.backupElement.left || n + a + 1,
                            E = t.createAndAddArea(i, d, m - i, b - d, p, g);
                        t.areas.push(E), E.item = r, r.area = E, r.area && r.background && t.fillArea(E, r.background, _, 0, 0, !0), t.element.addWithUpdate(E.element)
                    })
                }
            }, {
                key: "createAndAddArea",
                value: function(t, e, n, r, i) {
                    var o = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 1,
                        s = void 0,
                        a = new f.fabric.Rect({
                            left: t,
                            top: e,
                            width: n,
                            height: r,
                            opacity: o
                        });
                    if (i && !i.pattern) s = f.fabric.util.object.clone(i), a.setPatternFill({
                        source: s._element
                    });
                    else if (i) {
                        var l = i.patternSourceCanvas;
                        a.set({
                            fill: new f.fabric.Pattern({
                                source: function() {
                                    return l.setDimensions({
                                        width: a.getWidth(),
                                        height: a.getHeight()
                                    }), l.getElement()
                                },
                                patternSourceCanvas: l,
                                repeat: "no-repeat"
                            }),
                            opacity: 1
                        }), s = i
                    }
                    a.hasControls = a.hasBorders = !1;
                    var u = {
                        id: (0, c.default)(),
                        left: t,
                        top: e,
                        width: n,
                        height: r,
                        element: a,
                        backgroundImage: s,
                        options: {},
                        cost: 0
                    };
                    return u
                }
            }, {
                key: "scaleImage",
                value: function(t, e, n) {
                    t.scaleToWidth(e), t.getHeight() < n && t.scaleToHeight(n)
                }
            }, {
                key: "fillArea",
                value: function(t, e, n) {
                    var r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0,
                        i = this,
                        o = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 0,
                        s = arguments[5];
                    if (l.default.find(this.areas, function(e) {
                            return e.id === t.id
                        })) t.cost = n, t.item.background = e, t.item.opacity = 1, t.item.cost = n;
                    else {
                        if (t.id !== this.backgroundArea.id) return;
                        this.backgroundImageAdded = !0, this.backgroundCost = n, t.item && (t.item.background = null, t.item.opacity = 0, t.item.cost = 0), t.cost = 0
                    }
                    f.fabric.Image.fromURL(e.getSrc(), function(n) {
                        var a = t.element.getWidth(),
                            l = t.element.getHeight(),
                            u = e.getWidth(),
                            c = e.getHeight();
                        s ? i.scaleImage(n, a, l) : i.scaleImage(n, u, c), n.set({
                            angle: e.angle,
                            flipY: e.flipY,
                            originX: e.originX,
                            originY: e.originY
                        });
                        var h = new f.fabric.StaticCanvas;
                        h.add(n);
                        var d = new f.fabric.Pattern({
                            source: function() {
                                return h.setDimensions({
                                    width: s ? a : u,
                                    height: s ? l : c
                                }), h.getElement()
                            },
                            offsetX: r,
                            offsetY: o,
                            repeat: "no-repeat"
                        });
                        t.element.set({
                            fill: d,
                            opacity: 1
                        }), t.backgroundImage = {
                            pattern: d,
                            img: n,
                            image: e,
                            patternSourceCanvas: h
                        }, i.options.canvas && i.options.canvas.renderAll(), y.changeStyleBidStep(g.default.isSelectedMaterialForAllDoors())
                    }, {
                        crossOrigin: "Anonymous"
                    })
                }
            }, {
                key: "remove",
                value: function(t, e) {
                    l.default.remove(this.horizontalShelves, function(e) {
                        return e.id === t.id
                    }), l.default.remove(this.verticalShelves, function(e) {
                        return e.id === t.id
                    }), this.element.removeWithUpdate(t.element), this.recalculateAreas()
                }
            }, {
                key: "setTransparentBackground",
                value: function() {
                    this.backgroundArea.element.set({
                        fill: "rgba(0, 0, 0, 0)"
                    }), l.default.forEach(this.areas, function(t) {
                        t.element.set({
                            fill: "rgba(0, 0, 0, 0)"
                        }), t.item.background = null, t.backgroundImage = {}
                    })
                }
            }, {
                key: "updateColor",
                value: function(t) {
                    l.default.forEach(this.verticalShelves, function(e) {
                        return e.element.set({
                            stroke: t.line,
                            fill: t.line
                        })
                    }), l.default.forEach(this.horizontalShelves, function(e) {
                        return e.element.set({
                            stroke: t.line,
                            fill: t.line
                        })
                    }), this.border.set({
                        stroke: t.line
                    })
                }
            }, {
                key: "searchPossibleTargets",
                value: function(t, e) {
                    var n = this.verticalShelves.concat(this.horizontalShelves),
                        r = n.length,
                        i = this.element.getLocalPointer(e);
                    for (i.x = i.x - this.element.width / 2, i.y = i.y - this.element.height / 2; r--;)
                        if (n[r].element.left < i.x && n[r].element.top < i.y && n[r].element.left + n[r].element.width > i.x && n[r].element.top + n[r].element.height > i.y) return n[r];
                    return null
                }
            }, {
                key: "isSelectedMaterial",
                value: function() {
                    var t = l.default.isObject(l.default.get(this.backgroundArea, "backgroundImage.pattern", void 0)),
                        e = l.default.every(this.areas, function(t) {
                            return l.default.isObject(l.default.get(t, "backgroundImage.pattern", void 0))
                        });
                    return t || e
                }
            }]), t
        }();
    e.default = m
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    e.ASIDE_RIGHT_ARROW_ID = "aside-panel-arrow", e.CONSTRUCTOR_ASIDE_PANEL_DESCRIPTION_ID = "aside-panel-description", e.ASIDE_LEFT_ARROW_ID = "aside-panel-left-arrow", e.ASIDE_LEFT_ARROW_CONTAINER_ID = "aside-panel-left-arrow-container", e.ASIDE_RIGHT_ARROW_CONTAINER_ID = "aside-panel-right-arrow-container", e.RIGHT_ARROW_CONTAINER = "aside-panel-right-container", e.CONSTRUCTOR_TRASH_ID = "-aside-panel-trash", e.ASIDE_PANEL_TRASH = "images/trash.png", e.ASIDE_PANEL_RIGHT_ARROW = "images/arrows/right-big.png", e.ASIDE_PANEL_LEFT_ARROW = "images/arrows/left-big.png", e.ASIDE_LEFT_ARROW_HIDDEN_CLASS = "hidden", e.ASIDE_PANEL_REPEAT_ICON = "images/inside/repeat.png", e.ASIDE_PANEL_HELP_ICON = "images/inside/help.png", e.ASIDE_PANEL_ID = "constructor-aside-panel", e.RIGHT_COORDINTE_CLASS = "container-bottom"
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var s = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        a = n(136),
        l = i(a),
        u = n(166),
        c = r(u),
        f = n(145),
        h = i(f),
        d = n(143),
        p = r(d),
        g = function() {
            function t() {
                o(this, t)
            }
            return s(t, [{
                key: "removeRuler",
                value: function(t) {
                    var e = l.default.getCanvas();
                    t && (e.remove(t), t.remove(), t = null)
                }
            }, {
                key: "updateTopRuler",
                value: function() {
                    var t = l.default.getCanvas(),
                        e = l.default.getOptions(),
                        n = e.shelfWidth,
                        r = e.shelvesChange,
                        i = l.default.getValue("currentWidth"),
                        o = l.default.getValue("currentLeftShelfWidth"),
                        s = l.default.getValue("currentRightShelfWidth"),
                        a = l.default.getValue("isShowLeftShelve"),
                        u = l.default.getValue("isShowRightShelve"),
                        f = Math.floor(h.default.calculatePx({
                            value: o,
                            oldMin: r.min,
                            oldMax: r.max,
                            newMin: p.MIN_SIDE_SHELVES_WIDTH,
                            newMax: p.MAX_SIDE_SHELVES_WIDTH
                        })),
                        d = Math.floor(h.default.calculatePx({
                            value: s,
                            oldMin: r.min,
                            oldMax: r.max,
                            newMin: p.MIN_SIDE_SHELVES_WIDTH,
                            newMax: p.MAX_SIDE_SHELVES_WIDTH
                        })),
                        g = l.default.getCabinetItems(),
                        v = _.find(g, function(t) {
                            return t.options.isTop
                        }),
                        b = l.default.getCanvasObject("topRuler");
                    this.removeRuler(b);
                    var y = [];
                    a && y.push(c.drawTopRuler(o, f, v.element.top - p.TOP_ROLLER_BOTTOM_PADDING - p.TOP_ROLLER_TOP_PADDING, v.element.left - n - f, p.TOP_ROLLER_SIDE_PADDING)), y.push(c.drawTopRuler(i, v.element.width + 2 * n, v.element.top - p.TOP_ROLLER_BOTTOM_PADDING - p.TOP_ROLLER_TOP_PADDING, v.element.left - n)), u && y.push(c.drawTopRuler(s, d, v.element.top - p.TOP_ROLLER_BOTTOM_PADDING - p.TOP_ROLLER_TOP_PADDING, v.element.left + v.element.width + n, 0, p.TOP_ROLLER_SIDE_PADDING)), b = new fabric.Group(y, {
                        selectable: !1
                    }), l.default.setCanvasObject("topRuler", b), b.hasControls = b.hasBorders = !1, t.add(b), t.sendToBack(b)
                }
            }, {
                key: "updateLeftRuler",
                value: function() {
                    var t = l.default.getCanvas(),
                        e = l.default.getValue("currentHeight"),
                        n = l.default.getOptions(),
                        r = n.shelfWidth,
                        i = n.shelvesChange,
                        o = l.default.getValue("currentLeftShelfWidth"),
                        s = l.default.getValue("isShowLeftShelve"),
                        a = Math.floor(h.default.calculatePx({
                            value: o,
                            oldMin: i.min,
                            oldMax: i.max,
                            newMin: p.MIN_SIDE_SHELVES_WIDTH,
                            newMax: p.MAX_SIDE_SHELVES_WIDTH
                        })),
                        u = l.default.getCabinetItems(),
                        f = _.find(u, function(t) {
                            return t.options.isTop
                        }),
                        d = _.find(u, function(t) {
                            return t.options.isLeft
                        }),
                        g = l.default.getCanvasObject("leftRuler");
                    this.removeRuler(g);
                    var v = s ? a + p.LEFT_ROLLER_PADDING : p.LEFT_ROLLER_PADDING;
                    v += p.LEFT_ROLLER_LEFT_PADDING, g = c.drawLeftRuler(e, d.element.height, f.element.top, f.element.left - r, v), l.default.setCanvasObject("leftRuler", g), g.hasControls = g.hasBorders = !1, t.add(g), t.sendToBack(g)
                }
            }, {
                key: "updateBottomRuler",
                value: function(t, e) {
                    var n = l.default.getCanvas(),
                        r = l.default.getOption("shelfWidth"),
                        i = l.default.getValue("currentWidth"),
                        o = l.default.getCabinetItems(),
                        s = _.find(o, function(t) {
                            return t.options.isBottom
                        }),
                        a = (l.default.getDoors(), l.default.getCanvasObject("bottomRuler"));
                    this.removeRuler(a), e.length > 0 && (a = t(i, s, e, r), l.default.setCanvasObject("bottomRuler", a), a.hasControls = a.hasBorders = !1, n.add(a), n.sendToBack(a))
                }
            }, {
                key: "updateRightRuler",
                value: function(t, e, n) {
                    var r = l.default.getCanvas(),
                        i = l.default.getOptions(),
                        o = i.shelfWidth,
                        s = i.shelvesChange,
                        a = l.default.getValue("currentRightShelfWidth"),
                        u = l.default.getValue("isShowRightShelve"),
                        c = Math.floor(h.default.calculatePx({
                            value: a,
                            oldMin: s.min,
                            oldMax: s.max,
                            newMin: p.MIN_SIDE_SHELVES_WIDTH,
                            newMax: p.MAX_SIDE_SHELVES_WIDTH
                        })),
                        f = l.default.getValue("currentHeight"),
                        d = l.default.getCabinetItems(),
                        g = _.find(d, function(t) {
                            return t.options.isRight
                        }),
                        v = l.default.getCanvasObject("rightRuler");
                    this.removeRuler(v), e.length > 0 && (v = t(f, g, e, o, !u || n ? 0 : c), l.default.setCanvasObject("rightRuler", v), v.hasControls = v.hasBorders = !1, r.add(v), r.sendToBack(v))
                }
            }, {
                key: "updateLeftBorderRuler",
                value: function() {
                    var t = l.default.getCanvas(),
                        e = l.default.getValue("currentHeight"),
                        n = l.default.getOptions(),
                        r = n.shelfWidth,
                        i = n.shelvesChange,
                        o = l.default.getValue("currentLeftShelfWidth"),
                        s = l.default.getValue("isShowLeftShelve"),
                        a = Math.floor(h.default.calculatePx({
                            value: o,
                            oldMin: i.min,
                            oldMax: i.max,
                            newMin: p.MIN_SIDE_SHELVES_WIDTH,
                            newMax: p.MAX_SIDE_SHELVES_WIDTH
                        })),
                        u = l.default.getCabinetItems(),
                        f = _.find(u, function(t) {
                            return t.options.isLeft
                        }),
                        d = _.filter(u, function(t) {
                            return t.options.isLeftBorderShelf && !t.options.isOnTop && !t.options.isOnBottom
                        }),
                        g = l.default.getCanvasObject("leftBorderRuler");
                    this.removeRuler(g), s && (g = c.drawLeftBorderRuler(e, f, d, r, s ? a : 0), g.hasControls = g.hasBorders = !1, l.default.setCanvasObject("leftBorderRuler", g), g.hasControls = g.hasBorders = !1, t.add(g), t.sendToBack(g))
                }
            }, {
                key: "updateRightBorderRuler",
                value: function() {
                    var t = l.default.getCanvas(),
                        e = l.default.getValue("currentHeight"),
                        n = l.default.getOptions(),
                        r = n.shelfWidth,
                        i = n.shelvesChange,
                        o = l.default.getValue("currentRightShelfWidth"),
                        s = l.default.getValue("isShowRightShelve"),
                        a = Math.floor(h.default.calculatePx({
                            value: o,
                            oldMin: i.min,
                            oldMax: i.max,
                            newMin: p.MIN_SIDE_SHELVES_WIDTH,
                            newMax: p.MAX_SIDE_SHELVES_WIDTH
                        })),
                        u = l.default.getCabinetItems(),
                        f = _.find(u, function(t) {
                            return t.options.isRight
                        }),
                        d = _.filter(u, function(t) {
                            return t.options.isRightBorderShelf && !t.options.isOnTop && !t.options.isOnBottom
                        }),
                        g = l.default.getCanvasObject("rightBorderRuler");
                    this.removeRuler(g), s && (g = c.drawRightBorderRuler(e, f, d, r, a), g.hasControls = g.hasBorders = !1, l.default.setCanvasObject("rightBorderRuler", g), g.hasControls = g.hasBorders = !1, t.add(g), t.sendToBack(g))
                }
            }]), t
        }();
    e.default = new g
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var s = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        a = n(2),
        l = i(a),
        u = n(136),
        c = i(u),
        f = n(6),
        h = i(f),
        d = n(7),
        p = (i(d), n(184)),
        g = i(p),
        _ = n(185),
        v = i(_),
        b = n(189),
        y = i(b),
        m = n(192),
        E = i(m),
        S = n(195),
        O = i(S),
        T = n(198),
        x = r(T),
        w = function() {
            function t() {
                o(this, t)
            }
            return s(t, [{
                key: "openModal",
                value: function(t) {
                    l.default.debug("ModalsController.openModal: type = " + t.type + ", options = " + JSON.stringify(t.options)), c.default.addModal(t), h.default.update(h.default.component.children.modalContainer, {
                        modals: c.default.getModals()
                    })
                }
            }, {
                key: "closeLastModal",
                value: function() {
                    c.default.removeLastModal(), h.default.update(h.default.component.children.modalContainer, {
                        modals: c.default.getModals()
                    })
                }
            }, {
                key: "closeAllModals",
                value: function() {
                    c.default.removeAllModals(), h.default.update(h.default.component.children.modalContainer, {
                        modals: c.default.getModals()
                    })
                }
            }, {
                key: "openInstructionModal",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                        e = g.default.INSTRUCTION_MODAL;
                    x.modalIsOpened(c.default.getModals(), e) ? l.default.debug("ModalsController.openInstructionModal: prevent unnecessary modal opening.") : this.openModal({
                        constructor: v.default,
                        options: t,
                        type: e
                    })
                }
            }, {
                key: "openTwoOptionsModal",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                        e = g.default.TWO_OPTIONS;
                    x.modalIsOpened(c.default.getModals(), e) ? l.default.warn("ModalsController.openTwoOptionsModal: prevent unnecessary modal opening.") : this.openModal({
                        constructor: y.default,
                        options: t,
                        type: e
                    })
                }
            }, {
                key: "openConfirmationModal",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                        e = g.default.CONFIRMATION_MODAL;
                    x.modalIsOpened(c.default.getModals(), e) ? l.default.warn("ModalsController.openConfirmationModal: prevent unnecessary modal opening.") : this.openModal({
                        constructor: E.default,
                        options: t,
                        type: e
                    })
                }
            }, {
                key: "openDoorsModificationModal",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                        e = g.default.DOORS_MODIFICATION_MODAL;
                    x.modalIsOpened(c.default.getModals(), e) ? l.default.warn("ModalsController.openDoorsModificationModal: prevent unnecessary modal opening.") : this.openModal({
                        constructor: O.default,
                        options: t,
                        type: e
                    })
                }
            }]), t
        }();
    e.default = new w
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.default = {
        INSTRUCTION_MODAL: "INSTRUCTION_MODAL",
        TWO_OPTIONS: "TWO_OPTIONS",
        CONFIRMATION_MODAL: "CONFIRMATION_MODAL",
        DOORS_MODIFICATION_MODAL: "DOORS_MODIFICATION_MODAL"
    }
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function o(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function s(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var a = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        l = n(2),
        u = r(l),
        c = n(95),
        f = r(c),
        h = n(96),
        d = r(h),
        p = n(109),
        g = r(p),
        v = n(186);
    n(187);
    var b = n(183),
        y = r(b),
        m = function(t) {
            function e() {
                i(this, e);
                var t = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return t.onDragStart = function(t) {
                    u.default.debug("InstructionModal.onDragStart"), t.preventDefault(), t.stopPropagation()
                }, t.onCloseButtonClick = function(t) {
                    u.default.debug("InstructionModal.onCloseButtonClick: click"), y.default.closeLastModal()
                }, t.onScroll = function(e) {
                    if (!t.scrollInMotion) {
                        var n = t.scroller.scrollTop;
                        t.currentScroll = n, u.default.debug("InstructionModal.onScroll: currentScroll = " + t.currentScroll), t.updateScrollbar()
                    }
                }, t.touchStart = function(e) {
                    t.scrollInMotion = !0, t.currentY = _.result(e, "touches[0].clientY") || _.result(e, "clientY"), 0 === t.currentScroll ? t.minY = t.currentY : t.minY = t.defaultMinY, t.maxY = t.minY + 153, u.default.debug("InstructionModal.touchStart: this.currentY = " + t.currentY)
                }, t.mouseMove = function(e) {
                    if (t.scrollInMotion) {
                        var n = e.clientY;
                        t.moveScroller(n)
                    }
                }, t.touchMove = function(e) {
                    if (t.scrollInMotion) {
                        var n = _.result(e, "touches[0].clientY");
                        t.moveScroller(n)
                    }
                }, t.moveScroller = function(e) {
                    e < t.minY && (e = t.minY), e > t.maxY && (e = t.maxY), t.scrollbar.style.transform = "translate3d(0, " + (e - t.minY) * v.MAX_SCROLLBAR_SCROLL / (t.maxY - t.minY) + "px, 0)", t.currentY = e, t.updateScrollableContainer(), u.default.debug("InstructionModal.moveScroller: currentY = " + (e - t.minY) * v.MAX_SCROLLBAR_SCROLL / (t.maxY - t.minY))
                }, t.touchEnd = function() {
                    t.scrollInMotion = !1, u.default.debug("InstructionModal.touchEnd: scrollInMotion = " + t.scrollInMotion)
                }, t.buttonId = (0, d.default)(), t.scrollerId = (0, d.default)(), t.scrollbarId = (0, d.default)(), t.currentScrollPosition = v.SCROLL_POSITIONS.TOP, t.currentScroll = 0, t.scrollInMotion = !1, t.currentY, t.minY, t.maxY, t
            }
            return s(e, t), a(e, [{
                key: "getTemplate",
                value: function() {
                    return '\n            <div class="instruction-container" id="' + this.id + '">\n                <div class="instruction-modal">\n                    <div class="instruction-text-container">\n                        <div class="instruction-modal-steps-scroller">\n                            <div class="instruction-steps-container" id="' + this.scrollerId + '">\n                                <div class="instruction-steps-title">\n                                    ' + g.default.KEYS.INSTRUCTION_TITLE + '\n                                </div>\n                                <div class="instruction-steps-text">\n                                    ' + g.default.KEYS.INSTRUCTION_SUBTITLE + '\n                                </div>\n                                <div class="instruction-steps-step-title">\n                                    ' + g.default.KEYS.INSTRUCTION_STEP_1_TITLE + '\n                                </div>\n                                <div class="instruction-steps-text">\n                                    ' + g.default.KEYS.INSTRUCTION_STEP_1_DESCRIPTION + '\n                                </div>\n                                <div class="instruction-steps-step-title">\n                                    ' + g.default.KEYS.INSTRUCTION_STEP_2_TITLE + '\n                                </div>\n                                <div class="instruction-steps-text">\n                                    ' + g.default.KEYS.INSTRUCTION_STEP_2_DESCRIPTION + '\n                                </div>\n                                <div class="instruction-steps-step-title">\n                                    ' + g.default.KEYS.INSTRUCTION_STEP_3_TITLE + '\n                                </div>\n                                <div class="instruction-steps-text">\n                                    ' + g.default.KEYS.INSTRUCTION_STEP_3_DESCRIPTION + '\n                                </div>\n                                <div class="instruction-steps-step-title">\n                                    ' + g.default.KEYS.INSTRUCTION_STEP_4_TITLE + '\n                                </div>\n                                <div class="instruction-steps-text">\n                                    ' + g.default.KEYS.INSTRUCTION_STEP_4_DESCRIPTION_PART_1 + '\n                                </div>\n                                <div class="instruction-steps-text">\n                                    ' + g.default.KEYS.INSTRUCTION_STEP_4_DESCRIPTION_PART_2 + '\n                                </div>\n                            </div>\n                            <div class="instruction-modal-scrollbar-container">\n                                <div class="instruction-modal-scrollbar" id="' + this.scrollbarId + '">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="instruction-close-button" id="' + this.buttonId + '">\n                        <div class="instruction-close-button-container">\n                            <div class="instruction-close-cross left"></div>\n                            <div class="instruction-close-cross right"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        '
                }
            }, {
                key: "postRender",
                value: function() {
                    this.instructionModal = document.getElementById(this.id), this.instructionModal.addEventListener("dragstart", this.onDragStart), this.closeButton = document.getElementById(this.buttonId), this.closeButton.addEventListener("click", this.onCloseButtonClick), this.scroller = document.getElementById(this.scrollerId), this.scroller.addEventListener("scroll", this.onScroll), this.scrollbar = document.getElementById(this.scrollbarId), this.scrollbar.addEventListener("touchstart", this.touchStart), this.scrollbar.addEventListener("touchmove", this.touchMove), this.scrollbar.addEventListener("touchend", this.touchEnd), this.scrollbar.addEventListener("mousedown", this.touchStart), document.body.addEventListener("mousemove", this.mouseMove), document.body.addEventListener("mouseup", this.touchEnd), this.defaultMinY = this.scrollbar.getBoundingClientRect().top, this.minY = this.defaultMinY, this.maxY = this.minY + 153, this.currentY = this.minY
                }
            }, {
                key: "updateScrollbar",
                value: function() {
                    this.scrollbar.style.transform = "translate3d(0, " + this.currentScroll / 415 * 153 + "px, 0)"
                }
            }, {
                key: "updateScrollableContainer",
                value: function() {
                    this.scroller.scrollTop = 415 * (this.currentY - this.minY) / (this.maxY - this.minY)
                }
            }]), e
        }(f.default);
    e.default = m
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    e.SCROLL_POSITIONS = {
        TOP: "TOP",
        DOWN: "DOWN"
    }, e.MAX_SCROLLBAR_SCROLL = 153
}, function(t, e, n) {
    var r = n(188);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".instruction-container{box-sizing:border-box;border-radius:2px;position:absolute;top:120px;left:160px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.instruction-modal{position:relative}.instruction-modal-steps-scroller{overflow:hidden;height:400px;width:592px;margin-left:30px;display:flex}.instruction-text-container{height:400px;width:640px;background-color:#fff;color:#000;overflow:hidden}.instruction-steps-container{height:400px;width:587px;overflow-x:hidden;overflow-y:scroll;padding-right:44px}.instruction-steps-title{margin:30px 0 24px;width:640px;font-size:21px;font-weight:700}.instruction-steps-text{font-size:13px;line-height:15px;margin-bottom:20px}.instruction-steps-step-title{font-size:15px;font-weight:700;margin-bottom:20px}.instruction-close-button{position:absolute;top:-15px;right:-15px;width:36px;height:36px;box-sizing:border-box;background-color:#fff;border-radius:50%;cursor:pointer}.instruction-close-button-container{position:relative;width:100%;height:100%}.instruction-close-cross{background-color:#050505;width:20px;height:4px;position:absolute;top:16px;left:8px}.instruction-close-cross.left{transform:rotate(45deg)}.instruction-close-cross.right{transform:rotate(-45deg)}.instruction-modal-scrollbar-container{background-color:#eee;height:340px;width:6px;display:inline-block;margin-left:-24px;margin-top:30px}.instruction-modal-scrollbar{background-color:#00b0ff;width:6px;height:186px;border-radius:1px;cursor:pointer}", ""])
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function o(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function s(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var a = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        l = n(7),
        u = r(l),
        c = n(2),
        f = r(c),
        h = n(95),
        d = r(h),
        p = n(96),
        g = r(p),
        _ = n(136),
        v = r(_),
        b = n(109),
        y = r(b);
    n(190);
    var m = n(183),
        E = r(m),
        S = n(135),
        O = r(S),
        T = function(t) {
            function e() {
                i(this, e);
                var t = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return t.onYesClickHandler = function() {
                    f.default.debug("TwoOptionsModal.onYesClickHandler: click"), E.default.closeLastModal(), O.default.createCabinet()
                }, t.onNoClickHandler = function() {
                    f.default.debug("TwoOptionsModal.onNoClickHandler: click"), E.default.closeLastModal()
                }, t.yesButtonId = (0, g.default)(), t.noButtonId = (0, g.default)(), t
            }
            return s(e, t), a(e, [{
                key: "preRender",
                value: function() {
                    var t = v.default.getLastModal(),
                        e = t && t.options || {};
                    this.title = e.title, this.subtitle = e.subtitle, this.isFirstSelected = !!u.default.isUndefined(e.isFirstSelected) || e.isFirstSelected, this.firstOption = e.firstOption || {}, this.secondOption = e.secondOption || {}
                }
            }, {
                key: "getTemplate",
                value: function() {
                    return '\n            <div class="two-options-container">\n                <div class="two-options-text-container">\n                    <div class="two-options-title">' + this.title + '</div>\n                    <div class="two-options-subtitle">' + this.subtitle + '</div>\n                </div>\n                <div class="two-options-buttons">\n                    <button class="two-options-button yes ' + (this.isFirstSelected ? "selected" : "") + '" id="' + this.yesButtonId + '">\n                        ' + (this.firstOption.text || y.default.KEYS.TWO_OPTIONS_YES) + '\n                    </button>\n                    <button class="two-options-button no ' + (this.isFirstSelected ? "" : "selected") + '" id="' + this.noButtonId + '">\n                        ' + (this.secondOption.text || y.default.KEYS.TWO_OPTIONS_NO) + "\n                    </button>\n                </div>\n            </div>\n        "
                }
            }, {
                key: "postRender",
                value: function() {
                    this.yesButton = document.getElementById(this.yesButtonId), this.yesButton.addEventListener("click", this.firstOption.handler || this.onYesClickHandler), this.noButton = document.getElementById(this.noButtonId), this.noButton.addEventListener("click", this.secondOption.handler || this.onNoClickHandler)
                }
            }]), e
        }(d.default);
    e.default = T
}, function(t, e, n) {
    var r = n(191);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".two-options-container{position:absolute;top:250px;left:335px;display:flex;flex-direction:column;align-items:center;justify-content:space-between;width:375px;height:143px;background-color:#fff}.two-options-text-container{margin-top:30px;color:#000;font-size:14px;width:100%;text-align:center}.two-options-buttons{margin-bottom:20px;width:100%;display:flex;justify-content:center}.two-options-button{background-color:#ddd;width:152px;height:35px;color:#000;font-size:14px;cursor:pointer}.two-options-button:last-child{margin-left:20px}.two-options-button.selected{background-color:#00b0ff;color:#fff}", ""])
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function o(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function s(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var a = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        l = n(2),
        u = r(l),
        c = n(96),
        f = r(c),
        h = n(95),
        d = r(h),
        p = n(109),
        g = r(p);
    n(193);
    var _ = n(136),
        v = r(_),
        b = n(183),
        y = r(b),
        m = n(3),
        E = n(5),
        S = function(t) {
            function e() {
                i(this, e);
                var t = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return t.onButtonClick = function() {
                    u.default.debug("ConfirmationModal.onButtonClick: click"), y.default.closeLastModal()
                }, t.iconId = (0, f.default)(), t
            }
            return s(e, t), a(e, [{
                key: "preRender",
                value: function() {
                    var t = v.default.getLastModal();
                    this.message = t && t.options && t.options.message, this.icon = t && t.options && t.options.icon, this.class = t && t.options && t.options.class || ""
                }
            }, {
                key: "getTemplate",
                value: function() {
                    return '\n            <div class="confirmation-modal-container">\n                <div class="confirmation-modal-message-container">\n                    <div\n                        class="confirmation-modal-icon ' + (this.icon ? "" : "hidden") + " " + this.class + '"\n                        id="' + this.iconId + '"\n                    ></div>\n                    <div class="confirmation-modal-message">\n                        ' + this.message + '\n                    </div>\n                </div>\n                <button class="confirmation-modal-button" id="' + this.id + '">\n                    ' + g.default.KEYS.CONFIRMATION_MODAL_OK + "\n                </button>\n            </div>\n        "
                }
            }, {
                key: "postRender",
                value: function() {
                    this.button = document.getElementById(this.id), this.button.addEventListener("click", this.onButtonClick), this.icon && (this.iconElement = document.getElementById(this.iconId), this.iconElement.style.backgroundImage = 'url("' + m.PRODUCTION_SERVER_CONFIG.URL + "/" + E.CONFIG_RESOURCES_PATH + "/" + this.icon + '")')
                }
            }]), e
        }(d.default);
    e.default = S
}, function(t, e, n) {
    var r = n(194);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".confirmation-modal-container{position:absolute;top:250px;left:315px;width:325px;height:143px;background-color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:space-between}.confirmation-modal-message-container{width:240px;display:flex;justify-content:center;align-items:center;margin:20px auto 0}.confirmation-modal-message{text-align:center;max-width:200px;font-size:14px;line-height:16px;color:#000}.confirmation-modal-icon{width:36px;min-width:36px;max-width:36px;height:36px;border-radius:50%;background-repeat:no-repeat;background-position:50%;background-size:20px}.confirmation-modal-icon.success{background-color:#00c853;border-color:#00c853;background-size:inherit;margin-right:10px}.confirmation-modal-icon.fail{background-color:transparent;border-color:transparent;background-size:26px}.confirmation-modal-button{margin:0 auto 20px;background-color:#00b0ff;color:#fff;width:152px;height:35px;font-size:14px;cursor:pointer}", ""])
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function o(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function s(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var a = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        l = n(2),
        u = r(l),
        c = n(96),
        f = r(c),
        h = n(95),
        d = r(h),
        p = n(109),
        g = r(p);
    n(196);
    var _ = n(136),
        v = r(_),
        b = n(183),
        y = r(b),
        m = function(t) {
            function e() {
                var t, n, r, s;
                i(this, e);
                for (var a = arguments.length, l = Array(a), c = 0; c < a; c++) l[c] = arguments[c];
                return n = r = o(this, (t = e.__proto__ || Object.getPrototypeOf(e)).call.apply(t, [this].concat(l))), r.onCompleteButtonId = function() {
                    u.default.debug("ConfirmationModal.onCompleteButtonId: click"), y.default.closeLastModal(), r.onComplete()
                }, r.onInvertButtonId = function() {
                    u.default.debug("ConfirmationModal.onInvertButtonId: click"), r.onInvert()
                }, s = n, o(r, s)
            }
            return s(e, t), a(e, [{
                key: "preRender",
                value: function() {
                    this.completeButtonId = (0, f.default)(), this.invertButtonId = (0, f.default)();
                    var t = v.default.getLastModal();
                    this.onComplete = t && t.options && t.options.onComplete, this.onInvert = t && t.options && t.options.onInvert
                }
            }, {
                key: "getTemplate",
                value: function() {
                    return '\n            <div class="doors-modification-modal-container">\n                <button class="doors-modification-modal-button" id="' + this.completeButtonId + '">\n                    ' + g.default.KEYS.DOORS_MODIFICATION_COMPLETE + '\n                </button>\n                <button class="doors-modification-modal-button" id="' + this.invertButtonId + '">\n                    ' + g.default.KEYS.DOORS_MODIFICATION_INVERT + "\n                </button>\n            </div>\n        "
                }
            }, {
                key: "postRender",
                value: function() {
                    this.completeButton = document.getElementById(this.completeButtonId), this.completeButton.addEventListener("click", this.onCompleteButtonId), this.invertButton = document.getElementById(this.invertButtonId), this.invertButton.addEventListener("click", this.onInvertButtonId)
                }
            }]), e
        }(d.default);
    e.default = m
}, function(t, e, n) {
    var r = n(197);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".doors-modification-modal-container{position:absolute;right:0;top:10px;display:flex;align-items:center;justify-content:space-between;width:150px;height:90px;flex-direction:column}.doors-modification-modal-button{background-color:#00b0ff;color:#fff;text-align:center;font-size:12px;font-weight:700;cursor:pointer;width:100%;height:40px}", ""])
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        return s.default.some(t, {
            type: e
        })
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.modalIsOpened = i;
    var o = n(7),
        s = r(o)
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var s = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        a = n(7),
        l = i(a),
        u = n(136),
        c = i(u),
        f = n(200),
        h = i(f),
        d = n(6),
        p = i(d),
        g = n(109),
        _ = i(g),
        v = n(183),
        b = i(v),
        y = n(169),
        m = i(y),
        E = n(10),
        S = n(199),
        O = (i(S), n(168)),
        T = r(O),
        x = n(5),
        w = n(201),
        C = r(w),
        I = function() {
            function t() {
                o(this, t), this.data = void 0, this.saveDoorsResources = function(t, e, n) {
                    c.default.saveDoorsResources(t), c.default.saveLoadedDoorsResourcesIndex(e), c.default.initDoorsCollectionItems(m.default.createDoorsCollectionItems(c.default.getDoorsItemsOfSelectedGroupForSpyCanvas())), p.default.update(n, {
                        items: c.default.getDoorsCollectionItems()
                    })
                }
            }
            return s(t, [{
                key: "initData",
                value: function() {
                    return [{
                        label: _.default.KEYS.TEXTURE_GROUP_MIRROR,
                        groupItems: [{
                            label: _.default.KEYS.TEXTURE_ITEM_SILVER_MY,
                            url: "images/doors/textures/mirror/0119265821c91e99facb7a39eeb43a05.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_BRONZE,
                            url: "images/doors/textures/mirror/ebc429120fa1a3cb142661d7df5a85f6.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GRAFIT,
                            url: "images/doors/textures/mirror/9ff36b502b8ac5a5d93b6f2291a12edd.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_BLUE,
                            url: "images/doors/textures/mirror/a1d6069f8a98950502d99107a708118a.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GREEN22,
                            url: "images/doors/textures/mirror/a9e375748e75d01df3356c5b08a47c5e.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_FOTOPRINT_BLD_2001,
                            url: "images/doors/textures/fotoprint/1541ce7d7cf37eeed76ec725685342c9.jpg",
                            type: "doors"
                        }]
                    }, {
                        label: _.default.KEYS.TEXTURE_GROUP_DSP,
                        groupItems: [{
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H047,
                            url: "images/doors/textures/dsp/e911efd242f103c1b071771b19fc0111.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H056,
                            url: "images/doors/textures/dsp/690f48758a5224632e149b40ed6f7431.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H78,
                            url: "images/doors/textures/dsp/87dd83536cd2b1e40f729f4498c9664a.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H199,
                            url: "images/doors/textures/dsp/36b70858b99fd5c3a292071dd11fb72d.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1106,
                            url: "images/doors/textures/dsp/2bc801e35e3cb88ad534f09c6ad457c0.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1111,
                            url: "images/doors/textures/dsp/20c09cfcd33b12375d45c441dd89f2ec.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1129,
                            url: "images/doors/textures/dsp/625f8388d98d63f536fc42f71fde27b4.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1137,
                            url: "images/doors/textures/dsp/97d00be73285b52cbc1cededd67c3b8c.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1145,
                            url: "images/doors/textures/dsp/7240bdc985baa0cc15b4c8987a64282e.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1189,
                            url: "images/doors/textures/dsp/4f92982d1cc5f4c99472f45b3966c544.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1277,
                            url: "images/doors/textures/dsp/8a01c50021c7f83f34c5843dae3ca4f5.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1428,
                            url: "images/doors/textures/dsp/504e4e8c00514cd6ef50042403bca1e2.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1476,
                            url: "images/doors/textures/dsp/4dab105be38125770f0bf37d16cc851b.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1484,
                            url: "images/doors/textures/dsp/c20d0e9cfb3687d36d549f3a61672798.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1502,
                            url: "images/doors/textures/dsp/116ff037cf5952cbe05fe2bb58de07ba.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1511,
                            url: "images/doors/textures/dsp/ceb606f3323f202a2c36d63cf33426bd.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1521,
                            url: "images/doors/textures/dsp/67b9ebf38f7e7ae8bc956ab2bbe4b1c5.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1599,
                            url: "images/doors/textures/dsp/2c4c35c3899889cbe2bc0f627ec4acbc.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1698,
                            url: "images/doors/textures/dsp/3fef12fcab72d3cb278168ee8688bb4d.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1699,
                            url: "images/doors/textures/dsp/f5eeb12e1e079a9cceae254d791af712.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H3005,
                            url: "images/doors/textures/dsp/ba8deb74258c45775ca17e3b4ff92d5d.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H3006,
                            url: "images/doors/textures/dsp/c6511f62e140feec8e68f412a91f4191.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H3025,
                            url: "images/doors/textures/dsp/4307f46e2149973d9f3c4c812909c5d1.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H3058,
                            url: "images/doors/textures/dsp/38ec8987995a5601c7b5bbf3310967bf.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H3078,
                            url: "images/doors/textures/dsp/f28120960f6cf16a5b5d94cc35d11892.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H3080,
                            url: "images/doors/textures/dsp/a70c2719123128f7a646bdcf33b68b96.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_PAL_EGGER_H3082,
                            url: "images/doors/textures/dsp/e851625203c07e8023aef6648d3fc1ed.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_PAL_EGGER_H3090,
                            url: "images/doors/textures/dsp/b2177efaf0c74c1c9d9784d81b59bd9d.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_PAL_EGGER_H3000,
                            url: "images/doors/textures/dsp/4649c0577493dfa67a3697e58fd2d0af.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_PAL_EGGER_H3128,
                            url: "images/doors/textures/dsp/7fa7133424e795081c781c7e851d3b5a.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_PAL_EGGER_H3100,
                            url: "images/doors/textures/dsp/affd4ca45bb5b4c6892e9b6714c27cc6.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_PAL_EGGER_H3306,
                            url: "images/doors/textures/dsp/f6fdb82990d121f61eae80e262108293.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_PAL_EGGER_H3331,
                            url: "images/doors/textures/dsp/5284dc7b2cfe116a08aeefde3107340b.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_PAL_EGGER_H3300,
                            url: "images/doors/textures/dsp/3c3c22a6a25a0249664f9ab7edfadcb0.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_PAL_EGGER_H3301,
                            url: "images/doors/textures/dsp/1acb4b0afb93f58df8b51bf8f98a9a30.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_PAL_EGGER_H3302,
                            url: "images/doors/textures/dsp/955266629c00750b6967f2896cb3bfe4.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_PAL_EGGER_H3303,
                            url: "images/doors/textures/dsp/08c8f94d181093e5fb13012e41ef0731.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_PAL_EGGER_H3304,
                            url: "images/doors/textures/dsp/27ad68a4f153e82df3a78e291ff52474.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_PAL_EGGER_H3700,
                            url: "images/doors/textures/dsp/0cd1ce12ef31f297505b7ca590f5b006.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_PAL_EGGER_H3702,
                            url: "images/doors/textures/dsp/94116b14f09e28cc264e87e1350fa068.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_PAL_EGGER_H3704,
                            url: "images/doors/textures/dsp/b2220e2560b0519d938d37cf5a71e661.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H3704,
                            url: "images/doors/textures/dsp/40bfcbb60a387201aa2ba2f39718ebd4.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H087,
                            url: "images/doors/textures/dsp/bb0cad768ef5f0be8e0f0004f4d915a8.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1151,
                            url: "images/doors/textures/dsp/8594b7d824e2b7484c12c38f3a4fc92e.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1215,
                            url: "images/doors/textures/dsp/798b9ceb805a2efd13404911c36fd533.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1298,
                            url: "images/doors/textures/dsp/147bb45d167b9ea6a1045f32e18712ab.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1424,
                            url: "images/doors/textures/dsp/396bfd6f47a388e1c23ac20087692f9d.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_F501,
                            url: "images/doors/textures/dsp/2c87cadfe2ccff1606e99fe691479365.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1615,
                            url: "images/doors/textures/dsp/fbf730f447674aa1b04f5b5fc71b23b8.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1706,
                            url: "images/doors/textures/dsp/0a39de705c7b834af0558b3cbbb62b57.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1719,
                            url: "images/doors/textures/dsp/bf8c36106f4c166bda7c6dca2b4e30fd.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1720,
                            url: "images/doors/textures/dsp/b01d86702099def149ab7bf237399284.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1733,
                            url: "images/doors/textures/dsp/d0d1ea56309730f5e886e226aee51485.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1887,
                            url: "images/doors/textures/dsp/071c63c0a4f8657c6819a683b5bac815.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1950,
                            url: "images/doors/textures/dsp/e7d50c4a36eeae7d44da246d626015bf.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H1952,
                            url: "images/doors/textures/dsp/b91a316a1bf3d3e5326df2d40823fbcf.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H3012,
                            url: "images/doors/textures/dsp/c32cac27da082a7de523a1df88317309.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H3031,
                            url: "images/doors/textures/dsp/0e4eb256ec97930102c04d971c7ed042.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H3332,
                            url: "images/doors/textures/dsp/5b7ce4bccda44f8890d4adc41f2874e4.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H3400,
                            url: "images/doors/textures/dsp/f5926d062e987cadc40b6a4978cfe25c.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H3734,
                            url: "images/doors/textures/dsp/8efbb8def77277a185cf5f5b2f5b2c74.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H3739,
                            url: "images/doors/textures/dsp/51c716ccc5f2db2b6014a5634ddd92af.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H3753,
                            url: "images/doors/textures/dsp/c2429a45392d98ce32812b7891540328.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H3755,
                            url: "images/doors/textures/dsp/0fa63482786c96dc50834bfd31d5db88.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H3775,
                            url: "images/doors/textures/dsp/7c29f1b78a64ed73607176db73511917.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H3778,
                            url: "images/doors/textures/dsp/e8ba245777d53016bf78fcfe8366e61d.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_F583,
                            url: "images/doors/textures/dsp/69be79354b906988e52c544c690cbdaa.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H0562,
                            url: "images/doors/textures/dsp/c34bc8fcb3182f6475b97b2698f5a421.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_H3030,
                            url: "images/doors/textures/dsp/75e9a0aec8d458bb164a4af6a814ddf0.jpg"
                        }]
                    }, {
                        label: _.default.KEYS.TEXTURE_GROUP_DSP_COLOR,
                        groupItems: [{
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_U999,
                            url: "images/doors/textures/dsp_color/5e1814d0b924bb6b38c2fafde34846e4.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_W1000,
                            url: "images/doors/textures/dsp_color/f28bf0662dfe9593104f1977a372e9e3.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_U328,
                            url: "images/doors/textures/dsp_color/e4c0b738e667deb46dca8daca5008798.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_U537,
                            url: "images/doors/textures/dsp_color/dbc1e8c3f229cb41385a9cecb5be43d7.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_U632,
                            url: "images/doors/textures/dsp_color/eea33a469909f67ca8e84a44c8afe2c9.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_U143,
                            url: "images/doors/textures/dsp_color/68cae350cdd53627dbac49b7bb9fcfc0.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_U337,
                            url: "images/doors/textures/dsp_color/ce70fd58b178be37957ce1f29a82c7e9.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_U107,
                            url: "images/doors/textures/dsp_color/e69e3c598ec24de3cb69bca9a5ce77e7.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_U330,
                            url: "images/doors/textures/dsp_color/279ba8ed9347a17b9b0161a4280bf0d2.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_U336,
                            url: "images/doors/textures/dsp_color/c9191ef924402dd61cfb37a273da84cb.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_EGGER_U332,
                            url: "images/doors/textures/dsp_color/48f280462be605740011599a70a7ee2d.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_EGGER_U400,
                            url: "images/doors/textures/dsp_color/27e6d22279a0c404f354dfecc2b913cc.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_EGGER_U506,
                            url: "images/doors/textures/dsp_color/5b5a18b2cf76f501c004f592be723747.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_EGGER_U628,
                            url: "images/doors/textures/dsp_color/a8a9d7736b211a579eec2933a0563521.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_EGGER_U730,
                            url: "images/doors/textures/dsp_color/04501ecae020c015776875c36af34c57.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_EGGER_U535,
                            url: "images/doors/textures/dsp_color/1005cbc0b53b0a6e001989efd3839564.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_EGGER_U206,
                            url: "images/doors/textures/dsp_color/7e0f625bb85ed74a4d6e18f2357e04cf.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_EGGER_U147,
                            url: "images/doors/textures/dsp_color/a7807795779327d76389874736642484.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_EGGER_U224,
                            url: "images/doors/textures/dsp_color/157d989e3effaa046db36c795c0a3ca4.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_EGGER_U311,
                            url: "images/doors/textures/dsp_color/9ede2c855e47835cf94ff9d524e1a916.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_EGGER_U321,
                            url: "images/doors/textures/dsp_color/6713a08d41a90b4821729680abb0653b.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_EGGER_U108,
                            url: "images/doors/textures/dsp_color/8dc7c79ee4b37655f7da1771f285d81a.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_EGGER_U129,
                            url: "images/doors/textures/dsp_color/e70ff125432549424107d5a66f2ee80f.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_EGGER_F589,
                            url: "images/doors/textures/dsp_color/4b5e2c43698fd9977fb03c163092849f.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_EGGER_U630,
                            url: "images/doors/textures/dsp_color/744480322cbfa545c5b3d94febb8088b.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_EGGER_U727,
                            url: "images/doors/textures/dsp_color/82d59d335a60a9219929795697d60917.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_EGGER_U963,
                            url: "images/doors/textures/dsp_color/0d2d91775db52e89680669ebbe8dc68c.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_EGGER_U518,
                            url: "images/doors/textures/dsp_color/71666915e1307e081151d1774354e0a8.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_EGGER_F459,
                            url: "images/doors/textures/dsp_color/f148cf5c39ef7e05c3f11289bf5da98e.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_DSP_COLOR_EGGER_U540,
                            url: "images/doors/textures/dsp_color/df7daf55a6a774707f2d9c57181814d9.jpg"
                        }]
                    }, {
                        label: _.default.KEYS.TEXTURE_GROUP_GLASS_COLOR,
                        groupItems: [{
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_LIME,
                            url: "images/doors/textures/glass_color/6f15cb8f95261fb331b4df694d3f41a6.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_BLUE,
                            url: "images/doors/textures/glass_color/445a30d8b41941b44f7960b5d40b2029.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_GREY,
                            url: "images/doors/textures/glass_color/6b95790c89fe0b85df9aa4693c247035.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_ULTRAMARINE,
                            url: "images/doors/textures/glass_color/feedf5bb3a348cd513e15b65176411cf.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_DARK_RED,
                            url: "images/doors/textures/glass_color/68cbf071ae8fda7167f8f63885be9789.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_WHITE,
                            url: "images/doors/textures/glass_color/22a7eb0d7d93ad684310e1a819ee12f0.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_BIRUZA,
                            url: "images/doors/textures/glass_color/53ce75bef3a4f8a0574f6d734f56c15c.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_PALE_LIGHT_BLUE,
                            url: "images/doors/textures/glass_color/a3454006717d069c87f388aecb5b2e92.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_PALE_RED,
                            url: "images/doors/textures/glass_color/77305529d683315abbca14b00fac7684.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_PALE_BLUE,
                            url: "images/doors/textures/glass_color/79a0ed1ac2b81332b8dbb7f593fdf41b.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_PALE,
                            url: "images/doors/textures/glass_color/49c4e163ef1e938516d234b4e81404a8.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_BORDO,
                            url: "images/doors/textures/glass_color/ca38ae91ef77b32637cfee1ffff58543.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_BURII,
                            url: "images/doors/textures/glass_color/b9ab1e602c00608146e928c766569569.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_GORCHICH,
                            url: "images/doors/textures/glass_color/5cdf0499548c808a7d361d8114522546.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_YELLOW,
                            url: "images/doors/textures/glass_color/03b7035a2dd7112433cb7b69a922d01e.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_GREEN_GLAZ,
                            url: "images/doors/textures/glass_color/01fb3e1ac580d337cd256edf0d98fb6d.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_RED,
                            url: "images/doors/textures/glass_color/8f7895e572666d4612235ad1de4082f0.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_MALINA,
                            url: "images/doors/textures/glass_color/d0f9c50619ed60605fd803534668d96e.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_WET,
                            url: "images/doors/textures/glass_color/87062eb2db19578a0b50d586d85821ac.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_OLIVE,
                            url: "images/doors/textures/glass_color/c4183d3fad1d67007118ad8869fff5b3.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_ORANGE,
                            url: "images/doors/textures/glass_color/538687f6da90d4b3edcbb72cb54385b1.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_PASTELNO_BLUE,
                            url: "images/doors/textures/glass_color/d4febf3a5e3e07857722eb6847f2ea90.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_SALATOVII,
                            url: "images/doors/textures/glass_color/b00229808d23868b158e715814bc1387.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_BRIGHT_ORANGE,
                            url: "images/doors/textures/glass_color/e2c13cb11d829100b096893b9c474e40.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_BRIGHT,
                            url: "images/doors/textures/glass_color/4c0193a8fd869cc130bee49f97762d5b.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_SERIEN,
                            url: "images/doors/textures/glass_color/178ea86ca5dee578228400fdecb7751f.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_GREY_GREEN,
                            url: "images/doors/textures/glass_color/12e006b8d9b7da1bcca93e94f6fd936a.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_GREY_WITH_DASH,
                            url: "images/doors/textures/glass_color/8a69488cd26a5f3ad6f2fd1ab14a829f.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_BLUE_GREEN,
                            url: "images/doors/textures/glass_color/4ea3c1a33289f104f252057936423079.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_BLUE_WITH_DASH,
                            url: "images/doors/textures/glass_color/fee2f0e1796e746582381502d77004a6.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_DARK_BLUE,
                            url: "images/doors/textures/glass_color/2864d38e94365e6d412fe9149282c75a.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_DARK_1,
                            url: "images/doors/textures/glass_color/a76279dda948439a34a4d8b3341d49fa.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_DARK_2,
                            url: "images/doors/textures/glass_color/e438252a13fb6ea3b17efc1265e475e7.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_HACKI,
                            url: "images/doors/textures/glass_color/eb129211922a6e1ef99dc16c6462571f.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_BLACK,
                            url: "images/doors/textures/glass_color/ce8a65b70b83e6c475a0efa89bfd0700.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_BRIGHT_1,
                            url: "images/doors/textures/glass_color/206eb5e2dff4ea6c9a2224105f44b976.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_COLOR_BRIGHT_YELLOW,
                            url: "images/doors/textures/glass_color/cb6f1e5e5fa38f0d2c2f681384b4304d.jpg"
                        }]
                    }, {
                        label: _.default.KEYS.TEXTURE_GROUP_GLASS,
                        groupItems: [{
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_BRONZE,
                            url: "images/doors/textures/glass/a64d3651c0a5f7171e8217bfdfe4c246.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_TRANSPARENT,
                            url: "images/doors/textures/glass/d8ee6434f0aea4d6aa3f81ab99cc9375.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_16,
                            url: "images/doors/textures/glass/0554644d15606cb9289409cd5338a057.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_17,
                            url: "images/doors/textures/glass/a8e62c2f068900cbffd72d28d9e69088.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_18,
                            url: "images/doors/textures/glass/ebbf90753024cd71097928f87a6fa730.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_19,
                            url: "images/doors/textures/glass/c2e3088746243d121b0d5cd4832211f8.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_1,
                            url: "images/doors/textures/glass/1eb9402e16c25bffe784b93a9b158ab1.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_2,
                            url: "images/doors/textures/glass/2d2f08e90a162f14ab395a08ccb3c4be.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_3,
                            url: "images/doors/textures/glass/4697352b28791fb92f81a563fa98409e.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_4,
                            url: "images/doors/textures/glass/1e1cd7eeb592fe852e45c21480fa125a.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_5,
                            url: "images/doors/textures/glass/13728bcaadf14e3ff3f6e028e2a82a42.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_6,
                            url: "images/doors/textures/glass/54997b78677e747b51497205b05899ef.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_7,
                            url: "images/doors/textures/glass/0db64248daf1a96cd859f1ebc5624266.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_8,
                            url: "images/doors/textures/glass/28c8ca4d338af2774e75b1f79609ca9c.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_9,
                            url: "images/doors/textures/glass/157228593ca18d445093cb6039d3e5e5.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_10,
                            url: "images/doors/textures/glass/428c70f93afa6141c6a58ecddc5ceee3.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_11,
                            url: "images/doors/textures/glass/d9a4c9caf79b603da06614ee237bd8e1.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_12,
                            url: "images/doors/textures/glass/5d2cb4c86128ff415ea5d719096cf2c4.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_13,
                            url: "images/doors/textures/glass/6348f2e667e4aff919e02e3bacdbd112.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_14,
                            url: "images/doors/textures/glass/6c05d77e7a1e396dd3e6b5fb3860d73c.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_GLASS_15,
                            url: "images/doors/textures/glass/d9caa87132cade0238fb05c59dea287e.jpg"
                        }]
                    }, {
                        label: _.default.KEYS.TEXTURE_GROUP_SANDSTREAM,
                        groupItems: [{
                            label: _.default.KEYS.TEXTURE_ITEM_SANDSTREAM_1,
                            url: "images/doors/textures/sandstream/8828899d6fd68191a01e2563c02f223a.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_SANDSTREAM_2,
                            url: "images/doors/textures/sandstream/42631d5684262667f47afaa4a76a6d91.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_SANDSTREAM_3,
                            url: "images/doors/textures/sandstream/acf593bb4707067238eb26e2542984b8.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_SANDSTREAM_4,
                            url: "images/doors/textures/sandstream/462dfc34f8de9a6943b4e090206924bf.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_SANDSTREAM_5,
                            url: "images/doors/textures/sandstream/5a86a57efacc94231f430654c0bdb558.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_SANDSTREAM_6,
                            url: "images/doors/textures/sandstream/c7b40f7ada8f56a055a8ff7c58d447af.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_SANDSTREAM_7,
                            url: "images/doors/textures/sandstream/039fed23f0fcdc7a4fe6067372d350e1.jpg"
                        }]
                    }, {
                        label: _.default.KEYS.TEXTURE_GROUP_FOTOPRINT,
                        groupItems: [{
                            label: _.default.KEYS.TEXTURE_ITEM_FOTOPRINT_BLD_2001,
                            url: "images/doors/textures/fotoprint/1541ce7d7cf37eeed76ec725685342c9.jpg",
                            type: "doors"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_FOTOPRINT_FLW_3003,
                            url: "images/doors/textures/fotoprint/630cf31db89566a49c46f470403f9d92.jpg",
                            type: "doors"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_FOTOPRINT_PRINT_2,
                            url: "images/doors/textures/fotoprint/14d9ed4f5474926eb7d20f163deb8136.jpg",
                            type: "doors"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_FOTOPRINT_AT_2002,
                            url: "images/doors/textures/fotoprint/9b58e6aee2ca8236293038d9be053081.jpg",
                            type: "doors"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_FOTOPRINT_ABS_3021,
                            url: "images/doors/textures/fotoprint/12d78db23ca5d3b4d4ae4b162f84d11a.jpg",
                            type: "doors"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_FOTOPRINT_TWN_2006,
                            url: "images/doors/textures/fotoprint/9f530ee5e0bed2b41d1a79afdb7366e7.jpg",
                            type: "doors"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_FOTOPRINT_SEA_3003,
                            url: "images/doors/textures/fotoprint/8d032b48d88e2087d9d6d05db543be0f.jpg",
                            type: "doors"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_FOTOPRINT_TWN_3021,
                            url: "images/doors/textures/fotoprint/daf9747e23bb0341dbec1771dc82960d.jpg",
                            type: "doors"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_FOTOPRINT_WIN_2005,
                            url: "images/doors/textures/fotoprint/026e5e203591d6018aa14b4bdf1a4e69.jpg",
                            type: "doors"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_FOTOPRINT_WTR_2005,
                            url: "images/doors/textures/fotoprint/48ae853daf12b5d7f9e9775169b1d025.jpg",
                            type: "doors"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_FOTOPRINT_WTR_3022,
                            url: "images/doors/textures/fotoprint/75eef2d58844aab16972ce436e671227.jpg",
                            type: "doors"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_FOTOPRINT_FLW_4001,
                            url: "images/doors/textures/fotoprint/a8d421dd702ca3daeea1d5efc9fec856.jpg",
                            type: "doors"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_FOTOPRINT_FOR_2003,
                            url: "images/doors/textures/fotoprint/7133373b222b15c13d14648e92f2d867.jpg",
                            type: "doors"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_FOTOPRINT_FOR_2011,
                            url: "images/doors/textures/fotoprint/99fb01204653283e39874870cf999f75.jpg",
                            type: "doors"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_FOTOPRINT_SEA_1006,
                            url: "images/doors/textures/fotoprint/c7aed58b664ac0a4c990c66acdd0e6a4.jpg",
                            type: "doors"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_FOTOPRINT_TWN_2001,
                            url: "images/doors/textures/fotoprint/77c6539ebdfceabcda3505d46f1810c6.jpg",
                            type: "doors"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_FOTOPRINT_ABS_2010,
                            url: "images/doors/textures/fotoprint/275edb50842be245ea105fa534409d5d.jpg",
                            type: "doors"
                        }]
                    }, {
                        label: _.default.KEYS.TEXTURE_GROUP_BAMBUK,
                        groupItems: [{
                            label: _.default.KEYS.TEXTURE_ITEM_BAMBUK_2,
                            url: "images/doors/textures/bambuk/255fb58e84d42b234952f36555050649.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_BAMBUK_1,
                            url: "images/doors/textures/bambuk/c7903c7d113c4a56b1c16bc6a4dce914.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_BAMBUK_3,
                            url: "images/doors/textures/bambuk/6a95be788abbdfcfb0a48fef51f47052.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_BAMBUK_LUME_1,
                            url: "images/doors/textures/bambuk/3a8e3c432ecfcdf55d86196099147775.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_BAMBUK_LUME_2,
                            url: "images/doors/textures/bambuk/ffa2eba7f270c9c7dcf89de1f1ca61aa.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_BAMBUK_LUME_3,
                            url: "images/doors/textures/bambuk/834be7c106cfbd3b3dbc0e557bb51e23.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_BAMBUK_LUME_4,
                            url: "images/doors/textures/bambuk/73941f5968b0d8e8569786357b50d819.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_BAMBUK_LUME_5,
                            url: "images/doors/textures/bambuk/429d65e20046e3fb420acb479a754846.jpg"
                        }]
                    }, {
                        label: _.default.KEYS.TEXTURE_GROUP_ROTANG,
                        groupItems: [{
                            label: _.default.KEYS.TEXTURE_ITEM_ROTANG_RED,
                            url: "images/doors/textures/rotang/2fa2b7d9da62e7924352ba261cfb04b8.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_ROTANG_BLUE,
                            url: "images/doors/textures/rotang/c59e689b053e6a22f3ae7f8d8c12f287.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_ROTANG_WHITE,
                            url: "images/doors/textures/rotang/4c1cc80422c356d22c465c6256268ddb.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_ROTANG_VENGE,
                            url: "images/doors/textures/rotang/2380944ed1607e8ba655d58f61eb38d8.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_ROTANG_DARK_NUT,
                            url: "images/doors/textures/rotang/4a32de7980baab616d8f110ddda5c361.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_ROTANG_RED_CHERRY,
                            url: "images/doors/textures/rotang/9c5337d06b124089e4167a86151ceb5b.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_ROTANG_HACKI,
                            url: "images/doors/textures/rotang/1bae4298b9e03c7de43c2520ff020703.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_ROTANG_NUT,
                            url: "images/doors/textures/rotang/f0005318374e9acf45b1bad2b7b64598.jpg"
                        }, {
                            label: _.default.KEYS.TEXTURE_ITEM_ROTANG_HONEY,
                            url: "images/doors/textures/rotang/12c1f6a136db32607e54ab9c2686c2fe.jpg"
                        }]
                    }]
                }
            }, {
                key: "getData",
                value: function() {
                    return this.data || (this.data = this.initData())
                }
            }, {
                key: "getDoorsGroupsCollectionItems",
                value: function() {
                    return this.getData().map(function(t) {
                        return t.label
                    })
                }
            }, {
                key: "getDoorsItemsOfGroupCollectionItems",
                value: function(t) {
                    return this.getData()[t].groupItems
                }
            }, {
                key: "getUrlsOfDoorsGroup",
                value: function(t) {
                    return x.DOORS_MATERIALS[x.DOORS_MATERIALS_GROUPS[t]]
                }
            }, {
                key: "getTranslatedDoorsGroupsItemsForSpyCanvas",
                value: function(t) {
                    l.default.keys(t).forEach(function(e) {
                        t[e].label = _.default.KEYS[t[e].label], t[e].groupItems.forEach(function(t) {
                            t.label = _.default.KEYS[t.label]
                        })
                    })
                }
            }, {
                key: "getTranslatedDoorsGroupsItemsForRendering",
                value: function(t) {
                    return t.map(function(t) {
                        return _.default.KEYS[t]
                    })
                }
            }, {
                key: "setDoorsGroupsSelectedItemIndex",
                value: function(t, e, n) {
                    var r = this,
                        i = void 0;
                    c.default.setDoorsGroupsSelectedItemIndex(t), i = c.default.getDoorsSelectedGroupUrlMap();
                    var o = l.default.isFunction(n) ? n : function() {};
                    if (c.default.isGroupRescourcesLoaded(t)) this.saveDoorsResources([], t, e), o(!0);
                    else {
                        var s = document.getElementById(C.COLLECTION_SPINNER_ID),
                            a = {
                                lines: 11,
                                length: 0,
                                width: 12,
                                radius: 25,
                                opacity: .1,
                                trail: 40,
                                color: "#00b0ff"
                            };
                        s.classList.remove("unvisible");
                        var u = new h.default(a).spin(s);
                        (0, E.loadResources)(l.default.values(i)).then(function(n) {
                            s.classList.add("unvisible"), u.stop(), r.saveDoorsResources(n, t, e), o(!0)
                        }).catch(function(t) {
                            s.classList.add("unvisible"), u.stop(), b.default.openConfirmationModal({
                                message: _.default.KEYS.ERROR_MESSAGE_LOADING_COLLECTION,
                                icon: T.ERROR_ICON,
                                class: "fail"
                            }), o(!1)
                        })
                    }
                }
            }]), t
        }();
    e.default = new I
}, function(t, e) {
    "use strict";

    function n(t, e) {
        var n, r = document.createElement(t || "div");
        for (n in e) r[n] = e[n];
        return r
    }

    function r(t) {
        for (var e = 1, n = arguments.length; e < n; e++) t.appendChild(arguments[e]);
        return t
    }

    function i(t, e, n, r) {
        var i = ["opacity", e, ~~(100 * t), n, r].join("-"),
            o = .01 + n / r * 100,
            s = Math.max(1 - (1 - t) / e * (100 - o), t),
            a = u.substring(0, u.indexOf("Animation")).toLowerCase(),
            l = a && "-" + a + "-" || "";
        return f[i] || (h.insertRule("@" + l + "keyframes " + i + "{0%{opacity:" + s + "}" + o + "%{opacity:" + t + "}" + (o + .01) + "%{opacity:1}" + (o + e) % 100 + "%{opacity:" + t + "}100%{opacity:" + s + "}}", 0), f[i] = 1), i
    }

    function o(t, e) {
        var n, r, i = t.style;
        if (void 0 !== i[e]) return e;
        for (e = e.charAt(0).toUpperCase() + e.slice(1), r = 0; r < c.length; r++)
            if (n = c[r] + e, void 0 !== i[n]) return n
    }

    function s(t, e) {
        for (var n in e) t.style[o(t, n) || n] = e[n];
        return t
    }

    function a(t) {
        for (var e = 1; e < arguments.length; e++) {
            var n = arguments[e];
            for (var r in n) void 0 === t[r] && (t[r] = n[r])
        }
        return t
    }

    function l(t) {
        for (var e = {
            x: t.offsetLeft,
            y: t.offsetTop
        }; t = t.offsetParent;) e.x += t.offsetLeft, e.y += t.offsetTop;
        return e
    }
    var u, c = ["webkit", "Moz", "ms", "O"],
        f = {},
        h = function() {
            var t = n("style");
            return r(document.getElementsByTagName("head")[0], t), t.sheet || t.styleSheet
        }(),
        d = {
            lines: 12,
            length: 7,
            width: 5,
            radius: 10,
            rotate: 0,
            color: "#000",
            speed: 1,
            trail: 100,
            opacity: .25,
            fps: 20,
            zIndex: 2e9,
            className: "spinner",
            top: "auto",
            left: "auto"
        },
        p = function t(e) {
            return this.spin ? void(this.opts = a(e || {}, t.defaults, d)) : new t(e)
        };
    p.defaults = {}, a(p.prototype, {
        spin: function(t) {
            this.stop();
            var e, r, i = this,
                o = i.opts,
                a = i.el = s(n(0, {
                    className: o.className
                }), {
                    position: "relative",
                    zIndex: o.zIndex
                }),
                c = o.radius + o.length + o.width;
            if (t && (t.insertBefore(a, t.firstChild || null), r = l(t), e = l(a), s(a, {
                    left: ("auto" == o.left ? r.x - e.x + (t.offsetWidth >> 1) : o.left + c) + "px",
                    top: ("auto" == o.top ? r.y - e.y + (t.offsetHeight >> 1) : o.top + c) + "px"
                })), a.setAttribute("aria-role", "progressbar"), i.lines(a, i.opts), !u) {
                var f = 0,
                    h = o.fps,
                    d = h / o.speed,
                    p = (1 - o.opacity) / (d * o.trail / 100),
                    g = d / o.lines;
                ! function t() {
                    f++;
                    for (var e = o.lines; e; e--) {
                        var n = Math.max(1 - (f + e * g) % d * p, o.opacity);
                        i.opacity(a, o.lines - e, n, o)
                    }
                    i.timeout = i.el && setTimeout(t, ~~(1e3 / h))
                }()
            }
            return i
        },
        stop: function() {
            var t = this.el;
            return t && (clearTimeout(this.timeout), t.parentNode && t.parentNode.removeChild(t), this.el = void 0), this
        },
        lines: function(t, e) {
            function o(t, r) {
                return s(n(), {
                    position: "absolute",
                    width: e.length + e.width + "px",
                    height: e.width + "px",
                    background: t,
                    boxShadow: r,
                    transformOrigin: "left",
                    transform: "rotate(" + ~~(360 / e.lines * l + e.rotate) + "deg) translate(" + e.radius + "px,0)",
                    borderRadius: (e.width >> 1) + "px"
                })
            }
            for (var a, l = 0; l < e.lines; l++) a = s(n(), {
                position: "absolute",
                top: 1 + ~(e.width / 2) + "px",
                transform: e.hwaccel ? "translate3d(0,0,0)" : "",
                opacity: e.opacity,
                animation: u && i(e.opacity, e.trail, l, e.lines) + " " + 1 / e.speed + "s linear infinite"
            }), e.shadow && r(a, s(o("#000", "0 0 4px #000"), {
                top: "2px"
            })), r(t, r(a, o(e.color, "0 0 1px rgba(0,0,0,.1)")));
            return t
        },
        opacity: function(t, e, n) {
            e < t.childNodes.length && (t.childNodes[e].style.opacity = n)
        }
    }), ! function() {
        function t(t, e) {
            return n("<" + t + ' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">', e)
        }
        var e = s(n("group"), {
            behavior: "url(#default#VML)"
        });
        !o(e, "transform") && e.adj ? (h.addRule(".spin-vml", "behavior:url(#default#VML)"), p.prototype.lines = function(e, n) {
            function i() {
                return s(t("group", {
                    coordsize: u + " " + u,
                    coordorigin: -l + " " + -l
                }), {
                    width: u,
                    height: u
                })
            }

            function o(e, o, a) {
                r(f, r(s(i(), {
                    rotation: 360 / n.lines * e + "deg",
                    left: ~~o
                }), r(s(t("roundrect", {
                    arcsize: 1
                }), {
                    width: l,
                    height: n.width,
                    left: n.radius,
                    top: -n.width >> 1,
                    filter: a
                }), t("fill", {
                    color: n.color,
                    opacity: n.opacity
                }), t("stroke", {
                    opacity: 0
                }))))
            }
            var a, l = n.length + n.width,
                u = 2 * l,
                c = 2 * -(n.width + n.length) + "px",
                f = s(i(), {
                    position: "absolute",
                    top: c,
                    left: c
                });
            if (n.shadow)
                for (a = 1; a <= n.lines; a++) o(a, -2, "progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");
            for (a = 1; a <= n.lines; a++) o(a);
            return r(e, f)
        }, p.prototype.opacity = function(t, e, n, r) {
            var i = t.firstChild;
            r = r.shadow && r.lines || 0, i && e + r < i.childNodes.length && (i = i.childNodes[e + r], i = i && i.firstChild, i = i && i.firstChild, i && (i.opacity = n))
        }) : u = o(e, "animation")
    }(), t.exports = p
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.COLLECTION_SPINNER_ID = e.VERTICAL_BAFFLE_URL = e.VERTICAL_BAFFLE_CLASS = e.HORIZONTAL_BAFFLE_URL = e.HORIZONTAL_BAFFLE_CLASS = e.DOORS_COLOR_CLASS = e.DOORS_COUNT_CHANGE_DEFAULT = e.DOORS_CHANGE_COUNT_CLASS = void 0;
    var i = n(96),
        o = r(i);
    e.DOORS_CHANGE_COUNT_CLASS = "doors-count", e.DOORS_COUNT_CHANGE_DEFAULT = 4, e.DOORS_COLOR_CLASS = "doors-color", e.HORIZONTAL_BAFFLE_CLASS = "horizontal-baffle", e.HORIZONTAL_BAFFLE_URL = "images/collection/horizontal-baffle.png", e.VERTICAL_BAFFLE_CLASS = "vertical-wall", e.VERTICAL_BAFFLE_URL = "images/collection/vertical-baffle.png", e.COLLECTION_SPINNER_ID = (0, o.default)()
}, function(t, e, n) {
    var r = n(203);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".inside-toolbox-collection-label{font-size:10px;color:#888;margin-top:8px;text-transform:uppercase;position:absolute;right:62px;top:158px}", ""])
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function o(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function s(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var a = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        l = function t(e, n, r) {
            null === e && (e = Function.prototype);
            var i = Object.getOwnPropertyDescriptor(e, n);
            if (void 0 === i) {
                var o = Object.getPrototypeOf(e);
                return null === o ? void 0 : t(o, n, r)
            }
            if ("value" in i) return i.value;
            var s = i.get;
            if (void 0 !== s) return s.call(r)
        },
        u = n(95),
        c = r(u),
        f = n(136),
        h = (r(f), n(205)),
        d = r(h);
    n(221);
    var p = n(179),
        g = r(p),
        _ = n(135),
        v = r(_),
        b = function(t) {
            function e() {
                return i(this, e), o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
            }
            return s(e, t), a(e, [{
                key: "preRender",
                value: function() {
                    g.default.recalculateDoorsCount(), this.children.toolbox = new d.default
                }
            }, {
                key: "getTemplate",
                value: function() {
                    return '\n            <div class="constructor-doors" >\n                ' + this.children.toolbox.getTemplate() + "\n            </div>\n        "
                }
            }, {
                key: "postRender",
                value: function() {
                    g.default.showDoors()
                }
            }, {
                key: "unload",
                value: function() {
                    l(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "unload", this).call(this), g.default.hideDoors(), v.default.update()
                }
            }]), e
        }(c.default);
    e.default = b
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = n(2),
        c = i(u),
        f = n(95),
        h = i(f),
        d = n(109),
        p = i(d),
        g = n(136),
        _ = i(g),
        v = n(206),
        b = i(v),
        y = n(210),
        m = i(y);
    n(214);
    var E = n(201),
        S = r(E),
        O = n(174),
        T = r(O),
        x = n(216),
        w = i(x),
        C = n(115),
        I = i(C),
        R = n(130),
        A = i(R),
        P = n(123),
        L = i(P),
        k = n(219),
        D = i(k),
        j = n(220),
        M = i(j),
        N = n(179),
        B = i(N),
        H = n(183),
        F = i(H),
        U = n(169),
        G = i(U),
        W = function(t) {
            function e() {
                var t, n, r, i;
                o(this, e);
                for (var a = arguments.length, l = Array(a), u = 0; u < a; u++) l[u] = arguments[u];
                return n = r = s(this, (t = e.__proto__ || Object.getPrototypeOf(e)).call.apply(t, [this].concat(l))), r.changeZoomHandler = function(t, e) {
                    e ? r.children.zoomImage.showZoomBlock(t) : r.children.zoomImage.hideZoomBlock(t)
                }, r.onDoorsCountChanged = function(t, e) {
                    c.default.debug("onDoorsCountChanged: value = " + e), B.default.setDoorsCount(e)
                }, r.onDoorsCountInputResolver = function(t, e) {
                    c.default.debug("onDoorsCountInputResolver: oldValue = " + t + ", newValue = " + e);
                    var n = _.default.getValue("currentWidth"),
                        r = Math.floor(n / e);
                    return r > T.MAX_DOOR_WIDH ? (F.default.openConfirmationModal({
                        message: p.default.KEYS.CONFIRMATION_MODAL_DOORS_MAX
                    }), !1) : !(r < T.MIN_DOOR_WIDTH) || (F.default.openConfirmationModal({
                        message: p.default.KEYS.CONFIRMATION_MODAL_DOORS_MIN
                    }), !1)
                }, r.onProfilChanged = function(t, e) {
                    B.default.applyNewColor(e)
                }, r.onHorizontalBaffleClick = function(t) {
                    B.default.moveDoorsToDefaultPosition(), G.default.onDragStart(r.horizontalBaffle, t)
                }, r.onVerticalBaffleClick = function(t) {
                    B.default.moveDoorsToDefaultPosition(), G.default.onDragStart(r.verticalBaffle, t)
                }, i = n, s(r, i)
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    var t = _.default.getOptions(),
                        e = t.doorsAvailableColors,
                        n = _.default.getValue("doorsColor");
                    this.children.doorsCountInput = new I.default({
                        label: p.default.KEYS.DOORS_COUNT_LABEL,
                        handler: this.onDoorsCountChanged,
                        className: S.DOORS_CHANGE_COUNT_CLASS,
                        resolver: this.onDoorsCountInputResolver,
                        defaultValue: _.default.getValue("doorsCount")
                    }), this.children.colorPicker = new L.default({
                        label: p.default.KEYS.DOOR_COLOR_LABEL,
                        handler: this.onProfilChanged,
                        className: S.DOORS_COLOR_CLASS,
                        options: e,
                        defaultValue: n.color
                    }), this.children.horizontalBaffleContainer = new A.default({
                        label: p.default.KEYS.HORIZONTAL_BAFFLE_LABEL,
                        handler: this.onHorizontalBaffleClick,
                        className: S.HORIZONTAL_BAFFLE_CLASS,
                        url: S.HORIZONTAL_BAFFLE_URL
                    }), this.children.verticalBaffleContainer = new A.default({
                        label: p.default.KEYS.VERTICAL_BAFFLE_LABEL,
                        handler: this.onVerticalBaffleClick,
                        className: S.VERTICAL_BAFFLE_CLASS,
                        url: S.VERTICAL_BAFFLE_URL
                    }), this.horizontalBaffle = {
                        element: new D.default,
                        label: p.default.KEYS.HORIZONTAL_BAFFLE_LABEL
                    }, this.verticalBaffle = {
                        element: new M.default,
                        label: p.default.KEYS.VERTICAL_BAFFLE_LABEL
                    }, this.children.doorsGroupsCollection = new b.default({
                        items: _.default.getDoorsGroupsCollectionItems()
                    }), this.children.doorsItemsCollection = new m.default({
                        items: _.default.getDoorsCollectionItems(),
                        changeZoomHandler: this.changeZoomHandler
                    }), this.children.zoomImage = new w.default({})
                }
            }, {
                key: "getTemplate",
                value: function() {
                    return '\n            <div class="constructor-doors-toolbox">\n                <div class="constructor-doors-toolbox-instruments">\n                    <div class="constructor-doors-toolbox-block">\n                        ' + this.children.doorsCountInput.getTemplate() + "\n                        " + this.children.colorPicker.getTemplate() + '\n                    </div>\n                    <div class="constructor-doors-toolbox-block">\n                        ' + this.children.horizontalBaffleContainer.getTemplate() + "\n                        " + this.children.verticalBaffleContainer.getTemplate() + '\n                    </div>\n                </div>\n                <div class="doors-collections-container">\n                    <div class="collection-loader unvisible" id=' + S.COLLECTION_SPINNER_ID + "></div>\n                    " + this.children.doorsGroupsCollection.getTemplate() + "\n                    " + this.children.doorsItemsCollection.getTemplate() + "\n                </div>\n                " + this.children.zoomImage.getTemplate() + '\n                <div class="inside-toolbox-collection-label drag-doors-material-label">' + p.default.KEYS.DRAG_DOORS_MATERIAL_LABEL + "</div>\n            </div>\n        "
                }
            }]), e
        }(h.default);
    e.default = W
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
        function t(t, e) {
            for (var n = 0; n < e.length; n++) {
                var r = e[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
            }
        }
        return function(e, n, r) {
            return n && t(e.prototype, n), r && t(e, r), e
        }
    }();
    n(207);
    var u = n(2),
        c = (i(u), n(7)),
        f = i(c),
        h = n(96),
        d = i(h),
        p = n(199),
        g = i(p),
        _ = n(136),
        v = i(_),
        b = n(95),
        y = i(b),
        m = n(209),
        E = r(m),
        S = n(3),
        O = n(5),
        T = function(t) {
            function e(t) {
                var n = t.items,
                    r = void 0 === n ? [] : n;
                t.itemsPerPage, t.cyclic;
                o(this, e);
                var i = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return i.headerItemClickHandler = function(t) {
                    if (t.currentTarget !== t.target) {
                        var e = f.default.indexOf(t.currentTarget.children, t.target);
                        e !== i.selectedItemIndex && g.default.setDoorsGroupsSelectedItemIndex(e, i.parent.children.doorsItemsCollection, i.changeSelectedIndex.bind(i, t.currentTarget.children, e))
                    }
                }, i.updateTranslate = function() {
                    i.collectionItems.style.transform = "translate3d(-" + i.offsets[i.offset] + "px, 0, 0)"
                }, i.onRightScrollStart = function() {
                    i.offset < i.maxOffset - 1 && i.offset++, i.updateTranslate()
                }, i.onLeftScrollStart = function() {
                    i.offset > 0 && i.offset--, i.updateTranslate()
                }, i.onSwipeStart = function(t) {
                    i.swipeInProgress = !0, i.swipeStartX = f.default.result(t, "touches[0].clientX") || f.default.result(t, "clientX"), i.currentX = i.swipeStartX, t.preventDefault()
                }, i.onTouchMove = function(t) {
                    i.currentX = f.default.result(t, "touches[0].clientX"), i.onSwipeMove()
                }, i.onMouseMove = function(t) {
                    i.currentX = t.clientX, i.onSwipeMove()
                }, i.onSwipeMove = function() {
                    if (i.swipeInProgress) {
                        var t = (i.currentX - i.swipeStartX) * E.SWIPE_SCROLL_COEF;
                        t > 300 || t < -300 || (i.collectionItems.style.transform = "translate3d(-" + (i.offsets[i.offset] - t) + "px, 0, 0)")
                    }
                }, i.onTouchCancel = function() {
                    i.swipeInProgress = !1, i.updateTranslate()
                }, i.onMouseLeave = function() {
                    i.swipeInProgress = !1, i.updateTranslate()
                }, i.onDragEnd = function() {
                    i.swipeInProgress = !1, i.updateTranslate()
                }, i.onSwipeEnd = function() {
                    if (i.swipeInProgress) {
                        var t = i.currentX - i.swipeStartX;
                        i.swipeInProgress = !1, t < -E.SWIPE_DELTA ? i.onRightScrollStart() : t > E.SWIPE_DELTA ? i.onLeftScrollStart() : i.updateTranslate();
                    }
                }, i.itemsTemplateData = "", i.items = r, i.offset = 0, i.offsets = [], i.selectedItemIndex = v.default.getDoorsGroupsSelectedItemIndex(), i.initOffsets(), i.collectionItems = null, i.rightArrowId = (0, d.default)(), i.leftArrowId = (0, d.default)(), i.swipeInProgress = !1, i.swipeStartX = 0, i.currentX = 0, i
            }
            return a(e, t), l(e, [{
                key: "initOffsets",
                value: function() {
                    for (var t = 90, e = 5, n = this.items.length - e, r = 0; r < n; r += 2) this.offsets.push(r * t);
                    this.offsets.push(n > 0 ? n * t : 0), this.maxOffset = this.offsets.length
                }
            }, {
                key: "preRender",
                value: function() {
                    this.itemsTemplateData = this.getItemsTemplateData()
                }
            }, {
                key: "getItemsTemplateData",
                value: function() {
                    var t = "";
                    return this.items.forEach(function(e) {
                        t += '<li class="doors-groups-collection-item doors-groups-non-selected-group">' + e + "</li>"
                    }), t
                }
            }, {
                key: "getTemplate",
                value: function() {
                    return '\n            <div class="constructor-doors-groups-collection">\n                <div class="doors-groups-collection-arrow-container left" id="' + this.leftArrowId + '"></div>\n                <div class="doors-groups-collection-items-container">\n                    <ul class="doors-groups-collection-items" id="' + this.id + '">\n                        ' + this.itemsTemplateData + '\n                    </ul>\n                </div>\n                <div class="doors-groups-collection-arrow-container right" id="' + this.rightArrowId + '"></div>\n            </div>\n        '
                }
            }, {
                key: "postRender",
                value: function() {
                    this.collectionItems = document.getElementById(this.id), this.collectionItems.children[this.selectedItemIndex].classList.add("doors-groups-selected-group"), this.collectionItems.addEventListener("click", this.headerItemClickHandler), this.rightArrow = document.getElementById(this.rightArrowId), this.rightArrow.addEventListener("click", this.onRightScrollStart), this.rightArrow.style.backgroundImage = 'url("' + S.PRODUCTION_SERVER_CONFIG.URL + "/" + O.CONFIG_RESOURCES_PATH + "/" + E.RIGHT_ARROW_PATH + '")', this.leftArrow = document.getElementById(this.leftArrowId), this.leftArrow.addEventListener("click", this.onLeftScrollStart), this.leftArrow.style.backgroundImage = 'url("' + S.PRODUCTION_SERVER_CONFIG.URL + "/" + O.CONFIG_RESOURCES_PATH + "/" + E.LEFT_ARROW_PATH + '")', this.collectionItems.addEventListener("touchstart", this.onSwipeStart), this.collectionItems.addEventListener("touchmove", this.onTouchMove), this.collectionItems.addEventListener("touchend", this.onSwipeEnd), this.collectionItems.addEventListener("touchcancel", this.onTouchCancel), this.collectionItems.addEventListener("mousedown", this.onSwipeStart), this.collectionItems.addEventListener("mousemove", this.onMouseMove), this.collectionItems.addEventListener("mouseleave", this.onMouseLeave), this.collectionItems.addEventListener("mouseup", this.onSwipeEnd), this.collectionItems.addEventListener("dragend", this.onDragEnd)
                }
            }, {
                key: "changeSelectedIndex",
                value: function(t, e, n) {
                    n ? (t[e].classList.add("doors-groups-selected-group"), t[e].classList.remove("doors-groups-non-selected-group"), t[this.selectedItemIndex].classList.add("doors-groups-non-selected-group"), t[this.selectedItemIndex].classList.remove("doors-groups-selected-group"), this.selectedItemIndex = e) : v.default.setDoorsGroupsSelectedItemIndex(this.selectedItemIndex)
                }
            }]), e
        }(y.default);
    e.default = T
}, function(t, e, n) {
    var r = n(208);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".constructor-doors-groups-collection{display:flex;align-items:stretch;margin:0 3px;height:21px}.doors-groups-collection-item{max-width:90px;min-width:90px;font-size:9px;color:#4b4b4b;display:flex;align-items:center;justify-content:space-around;cursor:pointer}.doors-groups-collection-page-item .constructor-doors-groups-image-container{width:auto}.constructor-doors-groups-image-container-label{margin-top:6px}.doors-groups-collection-items{height:100%;display:flex;align-items:stretch;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;box-sizing:border-box;transition:transform .4s linear}.doors-groups-collection-items-container{overflow:hidden;min-width:450px;max-width:450px;box-sizing:border-box}.doors-groups-collection-arrow-container{width:18px;cursor:pointer;background-repeat:no-repeat;background-position:50%;background-size:6px}.doors-groups-collection-arrow-container:hover,.doors-groups-non-selected-group:hover{background-color:#eee}.doors-groups-selected-group{background:#d5f2ff}", ""])
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    e.ITEM_IMAGE_CLASS = "constructor-shared-collection-item", e.RIGHT_SCROLL_CLASS = "right-scroll", e.LEFT_SCROLL_CLASS = "left-scroll", e.TRANSFORM_ANIMATION = "collection-transformation", e.DEFAULT_TRANSITION_VALUE = -335, e.SWIPE_SCROLL_COEF = .5, e.MAX_NEGATIVE_SCROLL_VALUE = -455, e.MAX_SCROLL_VALUE = -235, e.SWIPE_DELTA = 100, e.LEFT_ARROW_PATH = "images/arrows/left.png", e.RIGHT_ARROW_PATH = "images/arrows/right.png"
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = function t(e, n, r) {
            null === e && (e = Function.prototype);
            var i = Object.getOwnPropertyDescriptor(e, n);
            if (void 0 === i) {
                var o = Object.getPrototypeOf(e);
                return null === o ? void 0 : t(o, n, r)
            }
            if ("value" in i) return i.value;
            var s = i.get;
            if (void 0 !== s) return s.call(r)
        };
    n(211);
    var c = n(2),
        f = (i(c), n(7)),
        h = i(f),
        d = n(96),
        p = i(d),
        g = n(95),
        _ = i(g),
        v = n(130),
        b = i(v),
        y = n(213),
        m = r(y),
        E = n(3),
        S = n(5),
        O = function(t) {
            function e(t) {
                var n = t.items,
                    r = void 0 === n ? [] : n,
                    i = (t.itemsPerPage, t.cyclic, t.changeZoomHandler);
                o(this, e);
                var a = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return a.updateTranslate = function() {
                    a.collectionItems.style.transform = "translate3d(-" + a.offsets[a.offset] + "px, 0, 0)"
                }, a.onRightScrollStart = function() {
                    a.offset < a.maxOffset - 1 && a.offset++, a.updateTranslate()
                }, a.onLeftScrollStart = function() {
                    a.offset > 0 && a.offset--, a.updateTranslate()
                }, a.onSwipeStart = function(t) {
                    a.swipeInProgress = !0, a.swipeStartX = h.default.result(t, "touches[0].clientX") || h.default.result(t, "clientX"), a.currentX = a.swipeStartX, t.preventDefault()
                }, a.onTouchMove = function(t) {
                    a.currentX = h.default.result(t, "touches[0].clientX"), a.onSwipeMove()
                }, a.onMouseMove = function(t) {
                    a.currentX = t.clientX, a.onSwipeMove()
                }, a.onSwipeMove = function() {
                    if (a.swipeInProgress) {
                        var t = (a.currentX - a.swipeStartX) * m.SWIPE_SCROLL_COEF;
                        t > 300 || t < -300 || (a.collectionItems.style.transform = "translate3d(-" + (a.offsets[a.offset] - t) + "px, 0, 0)")
                    }
                }, a.onTouchCancel = function() {
                    a.swipeInProgress = !1, a.updateTranslate()
                }, a.onMouseLeave = function() {
                    a.swipeInProgress = !1, a.updateTranslate()
                }, a.onDragEnd = function() {
                    a.swipeInProgress = !1, a.updateTranslate()
                }, a.onSwipeEnd = function() {
                    if (a.swipeInProgress) {
                        var t = a.currentX - a.swipeStartX;
                        a.swipeInProgress = !1, t < -m.SWIPE_DELTA ? a.onRightScrollStart() : t > m.SWIPE_DELTA ? a.onLeftScrollStart() : a.updateTranslate()
                    }
                }, a.itemsTemplateData = "", a.items = r, a.offset = 0, a.offsets = [], a.children = [], a.collectionItems = null, a.rightArrowId = (0, p.default)(), a.leftArrowId = (0, p.default)(), a.listId = (0, p.default)(), a.changeZoomHandler = h.default.isFunction(i) ? i : function() {}, a.swipeInProgress = !1, a.swipeStartX = 0, a.currentX = 0, a
            }
            return a(e, t), l(e, [{
                key: "initOffsets",
                value: function() {
                    var t = 50,
                        e = 9,
                        n = this.items.length - e;
                    this.offsets = [];
                    for (var r = 0; r < n; r++) this.offsets.push(r * t);
                    this.offsets.push(n > 0 ? n * t : 0), this.maxOffset = this.offsets.length
                }
            }, {
                key: "unload",
                value: function() {
                    u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "unload", this).call(this), this.children = [], this.offset = 0, this.swipeInProgress = !1, this.swipeStartX = 0, this.currentX = 0, this.itemsTemplateData = ""
                }
            }, {
                key: "preRender",
                value: function() {
                    var t = this,
                        e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                    this.items = e.items || this.items, this.initOffsets(), h.default.forEach(this.items, function(e) {
                        var n = new b.default({
                            label: e.label,
                            handler: e.handler,
                            className: m.ITEM_IMAGE_CLASS,
                            url: e.url,
                            mouseenterHandler: function(e) {
                                return t.changeZoomHandler(e, !0)
                            },
                            mouseleaveHandler: function(e) {
                                return t.changeZoomHandler(e, !1)
                            }
                        });
                        t.children.push(n), t.itemsTemplateData += '<li class="doors-items-collection-page-item">' + n.getTemplate() + "</li>"
                    })
                }
            }, {
                key: "getItemsTemplateData",
                value: function() {
                    var t = "";
                    return this.items.forEach(function(e) {
                        t += '<li class="doors-items-collection-item">' + e + "</li>"
                    }), t
                }
            }, {
                key: "getTemplate",
                value: function() {
                    return '\n            <div class="constructor-doors-items-collection" id="' + this.id + '">\n                <div class="doors-items-collection-arrow-container left" id="' + this.leftArrowId + '"></div>\n                <div class="doors-items-collection-items-container">\n                    <ul class="doors-items-collection-items" id="' + this.listId + '">\n                        ' + this.itemsTemplateData + '\n                    </ul>\n                </div>\n                <div class="doors-items-collection-arrow-container right" id="' + this.rightArrowId + '"></div>\n            </div>\n        '
                }
            }, {
                key: "postRender",
                value: function() {
                    this.collectionItems = document.getElementById(this.listId), this.rightArrow = document.getElementById(this.rightArrowId), this.rightArrow.addEventListener("click", this.onRightScrollStart), this.rightArrow.style.backgroundImage = 'url("' + E.PRODUCTION_SERVER_CONFIG.URL + "/" + S.CONFIG_RESOURCES_PATH + "/" + m.RIGHT_ARROW_PATH + '")', this.leftArrow = document.getElementById(this.leftArrowId), this.leftArrow.addEventListener("click", this.onLeftScrollStart), this.leftArrow.style.backgroundImage = 'url("' + E.PRODUCTION_SERVER_CONFIG.URL + "/" + S.CONFIG_RESOURCES_PATH + "/" + m.LEFT_ARROW_PATH + '")', this.collectionItems.addEventListener("touchstart", this.onSwipeStart), this.collectionItems.addEventListener("touchmove", this.onTouchMove), this.collectionItems.addEventListener("touchend", this.onSwipeEnd), this.collectionItems.addEventListener("touchcancel", this.onTouchCancel), this.collectionItems.addEventListener("mousedown", this.onSwipeStart), this.collectionItems.addEventListener("mousemove", this.onMouseMove), this.collectionItems.addEventListener("mouseleave", this.onMouseLeave), this.collectionItems.addEventListener("mouseup", this.onSwipeEnd), this.collectionItems.addEventListener("dragend", this.onDragEnd)
                }
            }]), e
        }(_.default);
    e.default = O
}, function(t, e, n) {
    var r = n(212);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".constructor-doors-items-collection{display:flex;align-items:stretch;margin-top:6px;height:44px}.doors-items-collection-page{min-width:450px;max-width:450px;width:450px;display:inline-flex;justify-content:space-around;margin-top:2px}.doors-items-collection-page-item{max-width:50px;width:50px;min-width:50px;display:flex;align-items:center;justify-content:center;height:40px}.doors-items-collection-page-item .constructor-doors-items-image-container{width:auto}.doors-items-collection-page-item .constructor-doors-items-image-container-label{margin-top:6px}.doors-items-collection-items{width:1005px;height:100%;display:flex;align-items:flex-start;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;box-sizing:border-box}.doors-items-collection-items-container{width:450px;overflow:hidden;box-sizing:border-box}.doors-items-collection-arrow-container{width:18px;cursor:pointer;background-repeat:no-repeat;background-position:50%;background-size:6px}.doors-items-collection-arrow-container:hover{background-color:#eee}.doors-items-collection-transformation{transition:transform .4s linear}.doors-items-collection-page-item .constructor-shared-image-container-label{display:none}.doors-items-collection-page-item .constructor-shared-image{min-width:30px;max-width:30px;min-height:30px;max-height:30px;border:2px solid #d5f2ff;border-radius:5px;margin-top:0;background-size:contain}.doors-items-collection-page-item .constructor-shared-image-container.constructor-shared-collection-item{width:30px;height:30px;border:none;border-radius:0;display:flex;justify-content:center;align-items:center}", ""])
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    e.ITEM_IMAGE_CLASS = "constructor-shared-collection-item", e.RIGHT_SCROLL_CLASS = "right-scroll", e.LEFT_SCROLL_CLASS = "left-scroll", e.TRANSFORM_ANIMATION = "collection-transformation", e.DEFAULT_TRANSITION_VALUE = -335, e.SWIPE_SCROLL_COEF = .5, e.MAX_NEGATIVE_SCROLL_VALUE = -455, e.MAX_SCROLL_VALUE = -235, e.SWIPE_DELTA = 100, e.LEFT_ARROW_PATH = "images/arrows/left.png", e.RIGHT_ARROW_PATH = "images/arrows/right.png"
}, function(t, e, n) {
    var r = n(215);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".constructor-doors-toolbox{height:80px;box-sizing:border-box;overflow:auto;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;display:flex}.constructor-doors-toolbox-instruments{width:466px;height:80px;display:inline-block;vertical-align:top}.constructor-doors-toolbox .constructor-shared-input-container{height:auto;margin-bottom:23px}.constructor-doors-toolbox .constructor-shared-checkbox-label{margin-left:0}.constructor-doors-toolbox .constructor-shared-image-container{display:inline-flex;width:100px}.constructor-doors-toolbox .constructor-shared-image-container-label{margin-bottom:5px}.constructor-doors-toolbox-block{display:inline-block;height:100%;vertical-align:top;margin-left:20px}.constructor-doors-toolbox .shared-color-picker-options{top:158px;left:54px}.constructor-doors-toolbox-block:first-child{margin-right:16px}.doors-collections-container{display:inline-block;width:490px;position:relative}.drag-doors-material-label{right:135px}.collection-loader{position:absolute;display:flex;left:0;right:0;top:0;bottom:0;align-items:center;justify-content:center;z-index:1;background-color:hsla(0,0%,100%,.5)}.unvisible{display:none}", ""])
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function o(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function s(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var a = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        l = n(96),
        u = r(l);
    n(217);
    var c = n(95),
        f = r(c),
        h = n(7),
        d = r(h),
        p = (n(3), n(5), 50),
        g = function(t) {
            function e(t) {
                var n = (t.label, t.url);
                i(this, e);
                var r = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return _.call(r), r.label = "PEACE", r.url = n, r.zoomImageId = (0, u.default)(), r.labelId = (0, u.default)(), r
            }
            return s(e, t), a(e, [{
                key: "getTemplate",
                value: function() {
                    return "\n            <div class='zoom-block unvisible' id=" + this.id + '>\n                <div class="zoom-image" id=' + this.zoomImageId + '></div>\n                <div class="zoom-label" id=' + this.labelId + ">" + this.label + "</div>\n            </div>\n        "
                }
            }, {
                key: "postRender",
                value: function() {
                    this.element = document.getElementById(this.id), this.image = document.getElementById(this.zoomImageId), this.label = document.getElementById(this.labelId)
                }
            }]), e
        }(f.default),
        _ = function() {
            var t = this;
            this.showZoomBlock = function(e) {
                var n = e || {},
                    r = n.label,
                    i = n.element,
                    o = d.default.get(document, "body.scrollTop", 0),
                    s = d.default.get(document, "body.scrollLeft", 0),
                    a = t.cumulativeOffset(i),
                    l = a.top,
                    u = a.left;
                t.element.style.top = l + p - o + "px", t.element.style.left = u - Math.abs(t.element.clientWidth - i.clientWidth) / 2 - s + "px", t.image.style.backgroundImage = i.style.backgroundImage, t.label.innerText = r || "", t.element.classList.remove("unvisible")
            }, this.hideZoomBlock = function() {
                t.element.classList.add("unvisible")
            }, this.cumulativeOffset = function(t) {
                var e = 0,
                    n = 0;
                do e += t.offsetTop || 0, n += t.offsetLeft || 0, t = t.offsetParent; while (t);
                return {
                    top: e,
                    left: n
                }
            }
        };
    e.default = g
}, function(t, e, n) {
    var r = n(218);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".zoom-block{display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:fixed;border:6px solid #d5f2ff;background-color:#d5f2ff;border-radius:5px;min-height:115px;z-index:1}.zoom-block,.zoom-image{min-width:100px;max-width:100px}.zoom-image{background-repeat:no-repeat;background-position:50%;background-size:contain;max-height:100px;min-height:100px}.zoom-label{font-size:10px;max-width:100px;padding:4px 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.unvisible{display:none}", ""])
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = function t(e, n, r) {
            null === e && (e = Function.prototype);
            var i = Object.getOwnPropertyDescriptor(e, n);
            if (void 0 === i) {
                var o = Object.getPrototypeOf(e);
                return null === o ? void 0 : t(o, n, r)
            }
            if ("value" in i) return i.value;
            var s = i.get;
            if (void 0 !== s) return s.call(r)
        },
        c = n(7),
        f = i(c),
        h = n(96),
        d = i(h),
        p = n(11),
        g = n(136),
        _ = i(g),
        v = n(155),
        b = i(v),
        y = n(175),
        m = r(y),
        E = n(143),
        S = (r(E), function(t) {
            function e() {
                o(this, e);
                var t = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return t.isForDoors = !0, t
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "preRender", this).call(this);
                    var t = _.default.getValue("doorsColor"),
                        n = t.line;
                    this.stroke = n, this.color = n;
                    var r = {
                            x: 0,
                            y: this.shelfWidth
                        },
                        i = {
                            x: this.shelfLength,
                            y: 0
                        };
                    this.fabricElement = this.createPath(r, i), this.phantom = p.fabric.util.object.clone(this.fabricElement), this.phantom.set({
                        visible: !1
                    })
                }
            }, {
                key: "getCoordinatesPhantomElement",
                value: function(t) {
                    var e = t.x,
                        n = t.y;
                    return {
                        x: e,
                        y: n
                    }
                }
            }, {
                key: "getParents",
                value: function(t) {
                    var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                        x: 0,
                        y: 0
                    };
                    if (t.length < 1) return [];
                    var n = m.getNearestDoor(t, e.x),
                        r = n.verticalShelves,
                        i = void 0,
                        o = void 0;
                    return f.default.forEach(r, function(t) {
                        var n = t.options.x - e.x;
                        n < 0 && (!i || n >= i.options.x - e.x) && t.options.y < e.y && t.options.y + t.element.height > e.y && (i = t), n > 0 && (!o || n <= o.options.x - e.x) && t.options.y < e.y && t.options.y + t.element.height > e.y && (o = t)
                    }), i && o ? [i, o, n] : i || o ? [i || o, n] : [n]
                }
            }, {
                key: "canBeAdded",
                value: function(t, e) {
                    var n = this,
                        r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        i = m.getDoor(e),
                        o = !1;
                    if (i) {
                        var s = i && i.horizontalShelves;
                        o = e.length > 0 && r.y > i.element.top + this.shelfWidth && r.y < Math.floor(i.element.top + i.element.height - 2 * this.shelfWidth);
                        var a = i.element.toLocalPoint(r, "center", "center");
                        f.default.forEach(s, function(t) {
                            t.element.top - n.shelfWidth < a.y && t.element.top + n.shelfWidth > a.y && t.element.left <= a.x && t.element.left + t.element.width >= a.x && (o = !1)
                        })
                    }
                    return o
                }
            }, {
                key: "getLeftAndRightCoordinates",
                value: function(t) {
                    var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                            x: 0,
                            y: 0
                        },
                        n = void 0,
                        r = void 0;
                    if (t[0].startCoordinates) n = t[0].element.left, r = n + t[0].element.width - 6;
                    else if (t[1].startCoordinates) {
                        var i = t[1].element.left,
                            o = t[0].options.x;
                        n = o < e.x ? o : i, r = o < e.x ? i + t[1].element.width - 6 : o
                    } else {
                        var s = t[0].options.x,
                            a = t[1].options.x;
                        n = s < a ? s : a, r = s < a ? a : s
                    }
                    return {
                        leftX: n,
                        rightX: r
                    }
                }
            }, {
                key: "getShadowOptions",
                value: function(t, e) {
                    var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        r = this.canBeAdded(t, e, n);
                    if (!r) return {
                        visible: !1
                    };
                    var i = this.getLeftAndRightCoordinates(e, n),
                        o = i.leftX,
                        s = i.rightX;
                    return {
                        visible: !0,
                        isAvailable: r,
                        left: o + this.shelfWidth,
                        top: n.y,
                        width: s - o - this.shelfWidth,
                        height: this.shelfWidth + 1
                    }
                }
            }, {
                key: "createElement",
                value: function(t) {
                    var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                        n = {
                            x: Math.floor(e.x),
                            y: Math.floor(e.y)
                        },
                        r = this.getLeftAndRightCoordinates(t, n),
                        i = r.leftX,
                        o = r.rightX,
                        s = this.createPath({
                            x: Math.floor(i + 6),
                            y: Math.floor(n.y + this.shelfWidth - 1)
                        }, {
                            x: Math.floor(o - 1),
                            y: Math.floor(n.y)
                        });
                    return s.hasControls = s.hasBorders = !1, {
                        id: (0, d.default)(),
                        element: s,
                        door: null,
                        backupElement: p.fabric.util.object.clone(s),
                        options: {
                            x: i,
                            y: n.y
                        },
                        isHorizontal: !0,
                        parent: this.constructor,
                        children: [],
                        parents: []
                    }
                }
            }]), e
        }(b.default));
    e.default = S
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = function t(e, n, r) {
            null === e && (e = Function.prototype);
            var i = Object.getOwnPropertyDescriptor(e, n);
            if (void 0 === i) {
                var o = Object.getPrototypeOf(e);
                return null === o ? void 0 : t(o, n, r)
            }
            if ("value" in i) return i.value;
            var s = i.get;
            if (void 0 !== s) return s.call(r)
        },
        c = n(7),
        f = i(c),
        h = n(96),
        d = i(h),
        p = n(11),
        g = n(136),
        _ = i(g),
        v = n(155),
        b = i(v),
        y = n(175),
        m = r(y),
        E = n(143),
        S = (r(E), function(t) {
            function e() {
                o(this, e);
                var t = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return t.isForDoors = !0, t
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "preRender", this).call(this);
                    var t = _.default.getValue("doorsColor"),
                        n = t.line;
                    this.stroke = n, this.color = n;
                    var r = {
                            x: 0,
                            y: this.shelfLength
                        },
                        i = {
                            x: this.shelfWidth,
                            y: 0
                        };
                    this.fabricElement = this.createPath(r, i), this.phantom = p.fabric.util.object.clone(this.fabricElement), this.phantom.set({
                        visible: !1
                    })
                }
            }, {
                key: "getCoordinatesPhantomElement",
                value: function(t) {
                    var e = t.x,
                        n = t.y;
                    return {
                        x: e,
                        y: n
                    }
                }
            }, {
                key: "getParents",
                value: function(t) {
                    var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                        x: 0,
                        y: 0
                    };
                    if (t.length < 1) return [];
                    var n = m.getNearestDoor(t, e.x),
                        r = n.horizontalShelves,
                        i = void 0,
                        o = void 0;
                    return f.default.forEach(r, function(t) {
                        var n = t.options.y - e.y;
                        n < 0 && (!i || n >= i.options.y - e.y) && t.options.x < e.x && t.options.x + t.element.width > e.x && (i = t), n > 0 && (!o || n <= o.options.y - e.y) && t.options.x < e.x && t.options.x + t.element.width > e.x && (o = t)
                    }), i && o ? [i, o, n] : i || o ? [i || o, n] : [n]
                }
            }, {
                key: "canBeAdded",
                value: function(t, e) {
                    var n = this,
                        r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        i = m.getDoor(e),
                        o = !1;
                    if (i) {
                        var s = i && i.verticalShelves;
                        o = e.length > 0 && r.x > i.element.left + this.shelfWidth && r.x < Math.floor(i.element.left + i.element.width - 2 * this.shelfWidth);
                        var a = i.element.toLocalPoint(r, "center", "center");
                        f.default.forEach(s, function(t) {
                            t.element.left - n.shelfWidth < a.x && t.element.left + n.shelfWidth > a.x && t.element.top <= a.y && t.element.top + t.element.height >= a.y && (o = !1)
                        })
                    }
                    return o
                }
            }, {
                key: "getTopAndBottomCoordinates",
                value: function(t) {
                    var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                            x: 0,
                            y: 0
                        },
                        n = void 0,
                        r = void 0;
                    if (t[0].startCoordinates) n = t[0].element.top, r = n + t[0].element.height - 7;
                    else if (t[1].startCoordinates) {
                        var i = t[1].element.top,
                            o = t[0].options.y;
                        n = o < e.y ? o : i, r = o < e.y ? i + t[1].element.height - 6 : o
                    } else {
                        var s = t[0].options.y,
                            a = t[1].options.y;
                        n = s < a ? s : a, r = s < a ? a : s
                    }
                    return {
                        topY: n,
                        bottomY: r
                    }
                }
            }, {
                key: "getShadowOptions",
                value: function(t, e) {
                    var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
                            x: 0,
                            y: 0
                        },
                        r = this.canBeAdded(t, e, n);
                    if (!r) return {
                        visible: !1
                    };
                    var i = this.getTopAndBottomCoordinates(e, n),
                        o = i.topY,
                        s = i.bottomY;
                    return {
                        visible: !0,
                        isAvailable: r,
                        left: n.x,
                        top: o + this.shelfWidth,
                        width: this.shelfWidth + 1,
                        height: s - o - this.shelfWidth
                    }
                }
            }, {
                key: "createElement",
                value: function(t) {
                    var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                        n = {
                            x: Math.floor(e.x),
                            y: Math.floor(e.y)
                        },
                        r = this.getTopAndBottomCoordinates(t, n),
                        i = r.topY,
                        o = r.bottomY,
                        s = this.createPath({
                            x: n.x,
                            y: o - 1
                        }, {
                            x: n.x + this.shelfWidth - 1,
                            y: i + this.shelfWidth
                        });
                    return s.hasControls = s.hasBorders = !1, {
                        id: (0, d.default)(),
                        element: s,
                        door: null,
                        backupElement: p.fabric.util.object.clone(s),
                        options: {
                            x: n.x,
                            y: i
                        },
                        isHorizontal: !1,
                        parent: this.constructor,
                        children: [],
                        parents: []
                    }
                }
            }]), e
        }(b.default));
    e.default = S
}, function(t, e, n) {
    var r = n(222);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".constructor-doors{margin-top:7px}", ""])
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function o(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function s(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var a = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        l = function t(e, n, r) {
            null === e && (e = Function.prototype);
            var i = Object.getOwnPropertyDescriptor(e, n);
            if (void 0 === i) {
                var o = Object.getPrototypeOf(e);
                return null === o ? void 0 : t(o, n, r)
            }
            if ("value" in i) return i.value;
            var s = i.get;
            if (void 0 !== s) return s.call(r)
        };
    n(224);
    var u = n(95),
        c = r(u),
        f = n(226),
        h = r(f),
        d = n(243),
        p = r(d),
        g = n(6),
        _ = r(g),
        v = n(136),
        b = r(v),
        y = function(t) {
            function e() {
                i(this, e);
                var t = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return t.children.toolbox = new p.default, t.children.main = new h.default, t
            }
            return s(e, t), a(e, [{
                key: "getTemplate",
                value: function() {
                    return '\n            <div class="constructor-bid" >\n                ' + this.children.toolbox.getTemplate() + "\n                " + this.children.main.getTemplate() + "\n            </div>\n        "
                }
            }, {
                key: "postRender",
                value: function() {
                    _.default.component.children.canvasContainer.hide()
                }
            }, {
                key: "unload",
                value: function() {
                    b.default.removeSnapshots(), _.default.component.children.canvasContainer.show(), l(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "unload", this).call(this)
                }
            }]), e
        }(c.default);
    e.default = y
}, function(t, e, n) {
    var r = n(225);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, "", ""])
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function o(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function s(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var a = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        l = n(95),
        u = r(l);
    n(227);
    var c = n(136),
        f = r(c),
        h = n(109),
        d = r(h),
        p = n(229),
        g = r(p),
        _ = n(239),
        v = r(_),
        b = function(t) {
            function e() {
                return i(this, e), o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
            }
            return s(e, t), a(e, [{
                key: "preRender",
                value: function() {
                    this.snapshots = g.default.makeSnapshots(), f.default.saveSnapshots(this.snapshots), this.children.cabinetSection = new v.default({
                        snapshot: this.snapshots.cabinet,
                        title: d.default.KEYS.BID_CABINET_SECTION_TITLE,
                        info: [{
                            label: d.default.KEYS.BID_CABINET_SECTION_HEIGHT,
                            value: f.default.getValue("height")
                        }, {
                            label: d.default.KEYS.BID_CABINET_SECTION_WIDTH,
                            value: f.default.getValue("width")
                        }, {
                            label: d.default.KEYS.BID_CABINET_SECTION_DEPTH,
                            value: f.default.getValue("depth")
                        }],
                        coordinates: g.default.calculateCabinetOptions()
                    }), this.children.doorsSection = new v.default({
                        snapshot: this.snapshots.doors,
                        title: d.default.KEYS.BID_DOORS_SECTION_TITLE,
                        showMM: !1,
                        info: [{
                            label: d.default.KEYS.BID_DOORS_SECTION_DOORS_COUNT,
                            value: f.default.getValue("doorsCount")
                        }],
                        coordinates: g.default.calculateDoorsOptions()
                    })
                }
            }, {
                key: "getTemplate",
                value: function() {
                    return '\n            <div class="constructor-bid-main" >\n                ' + this.children.cabinetSection.getTemplate() + "\n                " + this.children.doorsSection.getTemplate() + "\n            </div>\n        "
                }
            }]), e
        }(u.default);
    e.default = b
}, function(t, e, n) {
    var r = n(228);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".constructor-bid-main{height:448px;margin:20px 0 0 140px;display:flex;justify-content:space-between}", ""])
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var s = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        a = n(136),
        l = i(a),
        u = n(141),
        c = i(u),
        f = n(142),
        h = i(f),
        d = n(179),
        p = i(d),
        g = n(230),
        v = r(g),
        b = n(145),
        y = i(b),
        m = n(5),
        E = r(m),
        S = n(143),
        O = r(S),
        T = function() {
            function t() {
                var e = this;
                o(this, t), this.makeSnapshots = function() {
                    var t = l.default.getCanvas();
                    return {
                        cabinetLarge: e.makeCabinetSnapshot(t, E.CANVAS_ZOOM),
                        doorsLarge: e.makeDoorsSnapshot(t, E.CANVAS_ZOOM),
                        cabinet: e.makeCabinetSnapshot(t),
                        doors: e.makeDoorsSnapshot(t)
                    }
                }, this.makeCabinetSnapshot = function(t, n) {
                    var r = e.calculateCabinetOptions();
                    return e.makeSnapshot(t, r, n)
                }, this.makeDoorsSnapshot = function(t, n) {
                    p.default.showOnlyDoors(), p.default.moveDoorsToDefaultPositionSync();
                    var r = e.calculateDoorsOptions(),
                        i = e.makeSnapshot(t, r, n);
                    return p.default.hideOnlyDoors(), i
                }, this.makeSnapshot = function(t, e) {
                    var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1;
                    if (1 === n) return t.toDataURL(e);
                    var r = t.getWidth(),
                        i = t.getHeight();
                    t.setWidth(n * r), t.setHeight(n * i), t.setZoom(n);
                    var o = t.toDataURL();
                    return t.setZoom(1), t.setHeight(i), t.setWidth(r), o
                }, this.calculateBottomPadding = function(t) {
                    var e = l.default.getCabinetItems(),
                        n = _.filter(e, function(t) {
                            return t.constructor === c.default
                        });
                    return n.length > 0 || t ? O.BOTTOM_ROLLER_TOP_PADDING + O.BOTTOM_ROLLER_BOTTOM_PADDING : 0
                }, this.calculateRightPadding = function(t) {
                    var e = l.default.getOptions(),
                        n = (e.shelfWidth, e.shelvesChange),
                        r = l.default.getValue("isShowRightShelve"),
                        i = l.default.getValue("currentRightShelfWidth"),
                        o = Math.floor(y.default.calculatePx({
                            value: i,
                            oldMin: n.min,
                            oldMax: n.max,
                            newMin: O.MIN_SIDE_SHELVES_WIDTH,
                            newMax: O.MAX_SIDE_SHELVES_WIDTH
                        })),
                        s = l.default.getCabinetItems(),
                        a = _.filter(s, function(t) {
                            return t.constructor === h.default && !t.options.isLeftBorderShelf && !t.options.isRightBorderShelf
                        }),
                        u = r ? o : 0;
                    return u += a.length > 0 || t ? O.RIGHT_ROLLER_LEFT_PADDING + O.RIGHT_ROLLER_RIGHT_PADDING : 0
                }, this.calculateCabinetOptions = function() {
                    var t = l.default.getOptions(),
                        n = (t.shelfWidth, t.shelvesChange),
                        r = l.default.getValue("isShowLeftShelve"),
                        i = l.default.getValue("currentLeftShelfWidth"),
                        o = Math.floor(y.default.calculatePx({
                            value: i,
                            oldMin: n.min,
                            oldMax: n.max,
                            newMin: O.MIN_SIDE_SHELVES_WIDTH,
                            newMax: O.MAX_SIDE_SHELVES_WIDTH
                        })),
                        s = l.default.getDoorsValues(),
                        a = O.TOP_ROLLER_BOTTOM_PADDING + O.TOP_ROLLER_TOP_PADDING,
                        u = r ? o + O.LEFT_ROLLER_PADDING : O.LEFT_ROLLER_PADDING,
                        c = e.calculateBottomPadding(),
                        f = e.calculateRightPadding();
                    return {
                        width: s.width + u + f + 20,
                        height: s.height + a + c + 30,
                        left: s.left - u - 10,
                        top: s.top - a - 10
                    }
                }, this.calculateDoorsOptions = function() {
                    var t = l.default.getDoorsValues(),
                        n = e.calculateBottomPadding(!0),
                        r = e.calculateRightPadding(!0);
                    return {
                        width: t.width + r + 20,
                        height: t.height + n + 5,
                        left: t.left,
                        top: t.top
                    }
                }
            }
            return s(t, [{
                key: "sendRequest",
                value: function(t) {
                    var e = l.default.getSnapshots(),
                        n = l.default.getValue();
                    return v.post(E.REQUEST_API_URL, _.merge(t, {
                        id: l.default.getId(),
                        width: n.currentWidth,
                        height: n.currentHeight,
                        depth: n.depth,
                        cabinetCost: l.default.getCabinetCost(),
                        cabinetSnapshot: e.cabinet,
                        doorsCount: n.doorsCount,
                        doorsCost: l.default.getDoorsCost(),
                        doorsSnapshot: e.doors
                    }))
                }
            }]), t
        }();
    e.default = new T
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.post = e.get = void 0;
    var i = n(57),
        o = r(i),
        s = n(231),
        a = r(s),
        l = n(2),
        u = r(l),
        c = n(3);
    e.get = function(t, e) {
        return new o.default(function(n, r) {
            a.default.get(c.PRODUCTION_SERVER_CONFIG.URL + "/" + t).send(e).end(function(e, i) {
                e ? (u.default.error("Http.get error: " + JSON.stringify(e)), r(e)) : (u.default.debug("Http.get url: " + t + ", statusCode: " + i.statusCode), n(i.body))
            })
        })
    }, e.post = function(t, e) {
        return new o.default(function(n, r) {
            a.default.post(c.PRODUCTION_SERVER_CONFIG.URL + "/" + t).send(e).end(function(e, i) {
                e ? (u.default.error("Http.post error: " + JSON.stringify(e)), r(e)) : (u.default.debug("Http.post url: " + t + ", statusCode: " + i.statusCode), n(i.body))
            })
        })
    }
}, function(t, e, n) {
    "use strict";

    function r() {}

    function i(t) {
        if (!_(t)) return t;
        var e = [];
        for (var n in t) o(e, n, t[n]);
        return e.join("&")
    }

    function o(t, e, n) {
        if (null != n)
            if (Array.isArray(n)) n.forEach(function(n) {
                o(t, e, n)
            });
            else if (_(n))
                for (var r in n) o(t, e + "[" + r + "]", n[r]);
            else t.push(encodeURIComponent(e) + "=" + encodeURIComponent(n));
        else null === n && t.push(encodeURIComponent(e))
    }

    function s(t) {
        for (var e, n, r = {}, i = t.split("&"), o = 0, s = i.length; o < s; ++o) e = i[o], n = e.indexOf("="), n == -1 ? r[decodeURIComponent(e)] = "" : r[decodeURIComponent(e.slice(0, n))] = decodeURIComponent(e.slice(n + 1));
        return r
    }

    function a(t) {
        var e, n, r, i, o = t.split(/\r?\n/),
            s = {};
        o.pop();
        for (var a = 0, l = o.length; a < l; ++a) n = o[a], e = n.indexOf(":"), r = n.slice(0, e).toLowerCase(), i = E(n.slice(e + 1)), s[r] = i;
        return s
    }

    function l(t) {
        return /[\/+]json\b/.test(t)
    }

    function u(t) {
        this.req = t, this.xhr = this.req.xhr, this.text = "HEAD" != this.req.method && ("" === this.xhr.responseType || "text" === this.xhr.responseType) || "undefined" == typeof this.xhr.responseType ? this.xhr.responseText : null, this.statusText = this.req.xhr.statusText;
        var e = this.xhr.status;
        1223 === e && (e = 204), this._setStatusProperties(e), this.header = this.headers = a(this.xhr.getAllResponseHeaders()), this.header["content-type"] = this.xhr.getResponseHeader("content-type"), this._setHeaderProperties(this.header), null === this.text && t._responseType ? this.body = this.xhr.response : this.body = "HEAD" != this.req.method ? this._parseBody(this.text ? this.text : this.xhr.response) : null
    }

    function c(t, e) {
        var n = this;
        this._query = this._query || [], this.method = t, this.url = e, this.header = {}, this._header = {}, this.on("end", function() {
            var t = null,
                e = null;
            try {
                e = new u(n)
            } catch (e) {
                return t = new Error("Parser is unable to parse the response"), t.parse = !0, t.original = e, n.xhr ? (t.rawResponse = "undefined" == typeof n.xhr.responseType ? n.xhr.responseText : n.xhr.response, t.status = n.xhr.status ? n.xhr.status : null, t.statusCode = t.status) : (t.rawResponse = null, t.status = null), n.callback(t)
            }
            n.emit("response", e);
            var r;
            try {
                n._isResponseOK(e) || (r = new Error(e.statusText || "Unsuccessful HTTP response"), r.original = t, r.response = e, r.status = e.status)
            } catch (t) {
                r = t
            }
            r ? n.callback(r, e) : n.callback(null, e)
        })
    }

    function f(t, e, n) {
        var r = m("DELETE", t);
        return "function" == typeof e && (n = e, e = null), e && r.send(e), n && r.end(n), r
    }
    var h, d = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
        return typeof t
    } : function(t) {
        return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
    };
    "undefined" != typeof window ? h = window : "undefined" != typeof self ? h = self : (console.warn("Using browser-only version of superagent in non-browser environment"), h = void 0);
    var p = n(232),
        g = n(233),
        _ = n(234),
        v = n(235),
        b = n(236),
        y = n(238),
        m = e = t.exports = function(t, n) {
            return "function" == typeof n ? new e.Request("GET", t).end(n) : 1 == arguments.length ? new e.Request("GET", t) : new e.Request(t, n)
        };
    e.Request = c, m.getXHR = function() {
        if (!(!h.XMLHttpRequest || h.location && "file:" == h.location.protocol && h.ActiveXObject)) return new XMLHttpRequest;
        try {
            return new ActiveXObject("Microsoft.XMLHTTP")
        } catch (t) {}
        try {
            return new ActiveXObject("Msxml2.XMLHTTP.6.0")
        } catch (t) {}
        try {
            return new ActiveXObject("Msxml2.XMLHTTP.3.0")
        } catch (t) {}
        try {
            return new ActiveXObject("Msxml2.XMLHTTP")
        } catch (t) {}
        throw Error("Browser-only verison of superagent could not find XHR")
    };
    var E = "".trim ? function(t) {
        return t.trim()
    } : function(t) {
        return t.replace(/(^\s*|\s*$)/g, "")
    };
    m.serializeObject = i, m.parseString = s, m.types = {
        html: "text/html",
        json: "application/json",
        xml: "application/xml",
        urlencoded: "application/x-www-form-urlencoded",
        form: "application/x-www-form-urlencoded",
        "form-data": "application/x-www-form-urlencoded"
    }, m.serialize = {
        "application/x-www-form-urlencoded": i,
        "application/json": JSON.stringify
    }, m.parse = {
        "application/x-www-form-urlencoded": s,
        "application/json": JSON.parse
    }, b(u.prototype), u.prototype._parseBody = function(t) {
        var e = m.parse[this.type];
        return this.req._parser ? this.req._parser(this, t) : (!e && l(this.type) && (e = m.parse["application/json"]), e && t && (t.length || t instanceof Object) ? e(t) : null)
    }, u.prototype.toError = function() {
        var t = this.req,
            e = t.method,
            n = t.url,
            r = "cannot " + e + " " + n + " (" + this.status + ")",
            i = new Error(r);
        return i.status = this.status, i.method = e, i.url = n, i
    }, m.Response = u, p(c.prototype), g(c.prototype), c.prototype.type = function(t) {
        return this.set("Content-Type", m.types[t] || t), this
    }, c.prototype.accept = function(t) {
        return this.set("Accept", m.types[t] || t), this
    }, c.prototype.auth = function(t, e, n) {
        switch ("object" === ("undefined" == typeof e ? "undefined" : d(e)) && null !== e && (n = e), n || (n = {
            type: "function" == typeof btoa ? "basic" : "auto"
        }), n.type) {
            case "basic":
                this.set("Authorization", "Basic " + btoa(t + ":" + e));
                break;
            case "auto":
                this.username = t, this.password = e;
                break;
            case "bearer":
                this.set("Authorization", "Bearer " + t)
        }
        return this
    }, c.prototype.query = function(t) {
        return "string" != typeof t && (t = i(t)), t && this._query.push(t), this
    }, c.prototype.attach = function(t, e, n) {
        if (e) {
            if (this._data) throw Error("superagent can't mix .send() and .attach()");
            this._getFormData().append(t, e, n || e.name)
        }
        return this
    }, c.prototype._getFormData = function() {
        return this._formData || (this._formData = new h.FormData), this._formData
    }, c.prototype.callback = function(t, e) {
        if (this._maxRetries && this._retries++ < this._maxRetries && y(t, e)) return this._retry();
        var n = this._callback;
        this.clearTimeout(), t && (this._maxRetries && (t.retries = this._retries - 1), this.emit("error", t)), n(t, e)
    }, c.prototype.crossDomainError = function() {
        var t = new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");
        t.crossDomain = !0, t.status = this.status, t.method = this.method, t.url = this.url, this.callback(t)
    }, c.prototype.buffer = c.prototype.ca = c.prototype.agent = function() {
        return console.warn("This is not supported in browser version of superagent"), this
    }, c.prototype.pipe = c.prototype.write = function() {
        throw Error("Streaming is not supported in browser version of superagent")
    }, c.prototype._appendQueryString = function() {
        var t = this._query.join("&");
        if (t && (this.url += (this.url.indexOf("?") >= 0 ? "&" : "?") + t), this._sort) {
            var e = this.url.indexOf("?");
            if (e >= 0) {
                var n = this.url.substring(e + 1).split("&");
                v(this._sort) ? n.sort(this._sort) : n.sort(), this.url = this.url.substring(0, e) + "?" + n.join("&")
            }
        }
    }, c.prototype._isHost = function(t) {
        return t && "object" === ("undefined" == typeof t ? "undefined" : d(t)) && !Array.isArray(t) && "[object Object]" !== Object.prototype.toString.call(t)
    }, c.prototype.end = function(t) {
        return this._endCalled && console.warn("Warning: .end() was called twice. This is not supported in superagent"), this._endCalled = !0, this._callback = t || r, this._appendQueryString(), this._end()
    }, c.prototype._end = function() {
        var t = this,
            e = this.xhr = m.getXHR(),
            n = this._formData || this._data;
        this._setTimeouts(), e.onreadystatechange = function() {
            var n = e.readyState;
            if (n >= 2 && t._responseTimeoutTimer && clearTimeout(t._responseTimeoutTimer), 4 == n) {
                var r;
                try {
                    r = e.status
                } catch (t) {
                    r = 0
                }
                if (!r) {
                    if (t.timedout || t._aborted) return;
                    return t.crossDomainError()
                }
                t.emit("end")
            }
        };
        var r = function(e, n) {
            n.total > 0 && (n.percent = n.loaded / n.total * 100), n.direction = e, t.emit("progress", n)
        };
        if (this.hasListeners("progress")) try {
            e.onprogress = r.bind(null, "download"), e.upload && (e.upload.onprogress = r.bind(null, "upload"))
        } catch (t) {}
        try {
            this.username && this.password ? e.open(this.method, this.url, !0, this.username, this.password) : e.open(this.method, this.url, !0)
        } catch (t) {
            return this.callback(t)
        }
        if (this._withCredentials && (e.withCredentials = !0), !this._formData && "GET" != this.method && "HEAD" != this.method && "string" != typeof n && !this._isHost(n)) {
            var i = this._header["content-type"],
                o = this._serializer || m.serialize[i ? i.split(";")[0] : ""];
            !o && l(i) && (o = m.serialize["application/json"]), o && (n = o(n))
        }
        for (var s in this.header) null != this.header[s] && this.header.hasOwnProperty(s) && e.setRequestHeader(s, this.header[s]);
        return this._responseType && (e.responseType = this._responseType), this.emit("request", this), e.send("undefined" != typeof n ? n : null), this
    }, m.get = function(t, e, n) {
        var r = m("GET", t);
        return "function" == typeof e && (n = e, e = null), e && r.query(e), n && r.end(n), r
    }, m.head = function(t, e, n) {
        var r = m("HEAD", t);
        return "function" == typeof e && (n = e, e = null), e && r.send(e), n && r.end(n), r
    }, m.options = function(t, e, n) {
        var r = m("OPTIONS", t);
        return "function" == typeof e && (n = e, e = null), e && r.send(e), n && r.end(n), r
    }, m.del = f, m.delete = f, m.patch = function(t, e, n) {
        var r = m("PATCH", t);
        return "function" == typeof e && (n = e, e = null), e && r.send(e), n && r.end(n), r
    }, m.post = function(t, e, n) {
        var r = m("POST", t);
        return "function" == typeof e && (n = e, e = null), e && r.send(e), n && r.end(n), r
    }, m.put = function(t, e, n) {
        var r = m("PUT", t);
        return "function" == typeof e && (n = e, e = null), e && r.send(e), n && r.end(n), r
    }
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t) return i(t)
    }

    function i(t) {
        for (var e in r.prototype) t[e] = r.prototype[e];
        return t
    }
    t.exports = r, r.prototype.on = r.prototype.addEventListener = function(t, e) {
        return this._callbacks = this._callbacks || {}, (this._callbacks["$" + t] = this._callbacks["$" + t] || []).push(e), this
    }, r.prototype.once = function(t, e) {
        function n() {
            this.off(t, n), e.apply(this, arguments)
        }
        return n.fn = e, this.on(t, n), this
    }, r.prototype.off = r.prototype.removeListener = r.prototype.removeAllListeners = r.prototype.removeEventListener = function(t, e) {
        if (this._callbacks = this._callbacks || {}, 0 == arguments.length) return this._callbacks = {}, this;
        var n = this._callbacks["$" + t];
        if (!n) return this;
        if (1 == arguments.length) return delete this._callbacks["$" + t], this;
        for (var r, i = 0; i < n.length; i++)
            if (r = n[i], r === e || r.fn === e) {
                n.splice(i, 1);
                break
            }
        return this
    }, r.prototype.emit = function(t) {
        this._callbacks = this._callbacks || {};
        var e = [].slice.call(arguments, 1),
            n = this._callbacks["$" + t];
        if (n) {
            n = n.slice(0);
            for (var r = 0, i = n.length; r < i; ++r) n[r].apply(this, e)
        }
        return this
    }, r.prototype.listeners = function(t) {
        return this._callbacks = this._callbacks || {}, this._callbacks["$" + t] || []
    }, r.prototype.hasListeners = function(t) {
        return !!this.listeners(t).length
    }
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t) return i(t)
    }

    function i(t) {
        for (var e in r.prototype) t[e] = r.prototype[e];
        return t
    }
    var o = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        },
        s = n(234);
    t.exports = r, r.prototype.clearTimeout = function() {
        return clearTimeout(this._timer), clearTimeout(this._responseTimeoutTimer), delete this._timer, delete this._responseTimeoutTimer, this
    }, r.prototype.parse = function(t) {
        return this._parser = t, this
    }, r.prototype.responseType = function(t) {
        return this._responseType = t, this
    }, r.prototype.serialize = function(t) {
        return this._serializer = t, this
    }, r.prototype.timeout = function(t) {
        if (!t || "object" !== ("undefined" == typeof t ? "undefined" : o(t))) return this._timeout = t, this._responseTimeout = 0, this;
        for (var e in t) switch (e) {
            case "deadline":
                this._timeout = t.deadline;
                break;
            case "response":
                this._responseTimeout = t.response;
                break;
            default:
                console.warn("Unknown timeout option", e)
        }
        return this
    }, r.prototype.retry = function(t) {
        return 0 !== arguments.length && t !== !0 || (t = 1), t <= 0 && (t = 0), this._maxRetries = t, this._retries = 0, this
    }, r.prototype._retry = function() {
        return this.clearTimeout(), this.req && (this.req = null, this.req = this.request()), this._aborted = !1, this.timedout = !1, this._end()
    }, r.prototype.then = function(t, e) {
        if (!this._fullfilledPromise) {
            var n = this;
            this._endCalled && console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"), this._fullfilledPromise = new Promise(function(t, e) {
                n.end(function(n, r) {
                    n ? e(n) : t(r)
                })
            })
        }
        return this._fullfilledPromise.then(t, e)
    }, r.prototype.catch = function(t) {
        return this.then(void 0, t)
    }, r.prototype.use = function(t) {
        return t(this), this
    }, r.prototype.ok = function(t) {
        if ("function" != typeof t) throw Error("Callback required");
        return this._okCallback = t, this
    }, r.prototype._isResponseOK = function(t) {
        return !!t && (this._okCallback ? this._okCallback(t) : t.status >= 200 && t.status < 300)
    }, r.prototype.get = function(t) {
        return this._header[t.toLowerCase()]
    }, r.prototype.getHeader = r.prototype.get, r.prototype.set = function(t, e) {
        if (s(t)) {
            for (var n in t) this.set(n, t[n]);
            return this
        }
        return this._header[t.toLowerCase()] = e, this.header[t] = e, this
    }, r.prototype.unset = function(t) {
        return delete this._header[t.toLowerCase()], delete this.header[t], this
    }, r.prototype.field = function(t, e) {
        if (null === t || void 0 === t) throw new Error(".field(name, val) name can not be empty");
        if (this._data && console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"), s(t)) {
            for (var n in t) this.field(n, t[n]);
            return this
        }
        if (Array.isArray(e)) {
            for (var r in e) this.field(t, e[r]);
            return this
        }
        if (null === e || void 0 === e) throw new Error(".field(name, val) val can not be empty");
        return "boolean" == typeof e && (e = "" + e), this._getFormData().append(t, e), this
    }, r.prototype.abort = function() {
        return this._aborted ? this : (this._aborted = !0, this.xhr && this.xhr.abort(), this.req && this.req.abort(), this.clearTimeout(), this.emit("abort"), this)
    }, r.prototype.withCredentials = function(t) {
        return void 0 == t && (t = !0), this._withCredentials = t, this
    }, r.prototype.redirects = function(t) {
        return this._maxRedirects = t, this
    }, r.prototype.toJSON = function() {
        return {
            method: this.method,
            url: this.url,
            data: this._data,
            headers: this._header
        }
    }, r.prototype.send = function(t) {
        var e = s(t),
            n = this._header["content-type"];
        if (this._formData && console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"), e && !this._data) Array.isArray(t) ? this._data = [] : this._isHost(t) || (this._data = {});
        else if (t && this._data && this._isHost(this._data)) throw Error("Can't merge these send calls");
        if (e && s(this._data))
            for (var r in t) this._data[r] = t[r];
        else "string" == typeof t ? (n || this.type("form"), n = this._header["content-type"], "application/x-www-form-urlencoded" == n ? this._data = this._data ? this._data + "&" + t : t : this._data = (this._data || "") + t) : this._data = t;
        return !e || this._isHost(t) ? this : (n || this.type("json"), this)
    }, r.prototype.sortQuery = function(t) {
        return this._sort = "undefined" == typeof t || t, this
    }, r.prototype._timeoutError = function(t, e, n) {
        if (!this._aborted) {
            var r = new Error(t + e + "ms exceeded");
            r.timeout = e, r.code = "ECONNABORTED", r.errno = n, this.timedout = !0, this.abort(), this.callback(r)
        }
    }, r.prototype._setTimeouts = function() {
        var t = this;
        this._timeout && !this._timer && (this._timer = setTimeout(function() {
            t._timeoutError("Timeout of ", t._timeout, "ETIME")
        }, this._timeout)), this._responseTimeout && !this._responseTimeoutTimer && (this._responseTimeoutTimer = setTimeout(function() {
            t._timeoutError("Response timeout of ", t._responseTimeout, "ETIMEDOUT")
        }, this._responseTimeout))
    }
}, function(t, e) {
    "use strict";

    function n(t) {
        return null !== t && "object" === ("undefined" == typeof t ? "undefined" : r(t))
    }
    var r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
        return typeof t
    } : function(t) {
        return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
    };
    t.exports = n
}, function(t, e, n) {
    "use strict";

    function r(t) {
        var e = i(t) ? Object.prototype.toString.call(t) : "";
        return "[object Function]" === e
    }
    var i = n(234);
    t.exports = r
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t) return i(t)
    }

    function i(t) {
        for (var e in r.prototype) t[e] = r.prototype[e];
        return t
    }
    var o = n(237);
    t.exports = r, r.prototype.get = function(t) {
        return this.header[t.toLowerCase()]
    }, r.prototype._setHeaderProperties = function(t) {
        var e = t["content-type"] || "";
        this.type = o.type(e);
        var n = o.params(e);
        for (var r in n) this[r] = n[r];
        this.links = {};
        try {
            t.link && (this.links = o.parseLinks(t.link))
        } catch (t) {}
    }, r.prototype._setStatusProperties = function(t) {
        var e = t / 100 | 0;
        this.status = this.statusCode = t, this.statusType = e, this.info = 1 == e, this.ok = 2 == e, this.redirect = 3 == e, this.clientError = 4 == e, this.serverError = 5 == e, this.error = (4 == e || 5 == e) && this.toError(), this.accepted = 202 == t, this.noContent = 204 == t, this.badRequest = 400 == t, this.unauthorized = 401 == t, this.notAcceptable = 406 == t, this.forbidden = 403 == t, this.notFound = 404 == t
    }
}, function(t, e) {
    "use strict";
    e.type = function(t) {
        return t.split(/ *; */).shift()
    }, e.params = function(t) {
        return t.split(/ *; */).reduce(function(t, e) {
            var n = e.split(/ *= */),
                r = n.shift(),
                i = n.shift();
            return r && i && (t[r] = i), t
        }, {})
    }, e.parseLinks = function(t) {
        return t.split(/ *, */).reduce(function(t, e) {
            var n = e.split(/ *; */),
                r = n[0].slice(1, -1),
                i = n[1].split(/ *= */)[1].slice(1, -1);
            return t[i] = r, t
        }, {})
    }, e.cleanHeader = function(t, e) {
        return delete t["content-type"], delete t["content-length"], delete t["transfer-encoding"], delete t.host, e && delete t.cookie, t
    }
}, function(t, e) {
    "use strict";
    var n = ["ECONNRESET", "ETIMEDOUT", "EADDRINFO", "ESOCKETTIMEDOUT"];
    t.exports = function(t, e) {
        return !!(t && t.code && ~n.indexOf(t.code)) || (!!(e && e.status && e.status >= 500) || (!!(t && "timeout" in t && "ECONNABORTED" == t.code) || !!(t && "crossDomain" in t)))
    }
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = n(7),
        c = i(u),
        f = n(96),
        h = i(f);
    n(240);
    var d = n(95),
        p = i(d),
        g = n(109),
        _ = i(g),
        v = n(242),
        b = r(v),
        y = function(t) {
            function e(t) {
                var n = t.snapshot,
                    r = t.title,
                    i = t.info,
                    a = t.coordinates,
                    l = t.showMM,
                    u = void 0 === l || l;
                o(this, e);
                var c = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return c.snapshot = n, c.title = r, c.info = i, c.coordinates = a, c.showMM = u, c.snapshotId = (0, h.default)(), c
            }
            return a(e, t), l(e, [{
                key: "getInfoTemplate",
                value: function() {
                    var t = this,
                        e = "";
                    return c.default.forEach(this.info, function(n) {
                        e += '\n                <div class="main-section-info">\n                    <label class="main-section-info-label">' + n.label + '</label>\n                    <label class="main-section-info-value">' + n.value + "</label>\n                    " + (t.showMM ? '<label class="main-section-info-mm">' + _.default.KEYS.BID_SECTION_MM + "</label>" : "") + "\n                </div>\n            "
                    }), e
                }
            }, {
                key: "getTemplate",
                value: function() {
                    return '\n            <section class="bid-main-section-container">\n                <label class="main-section-title">' + this.title + '</label>\n                <div\n                    width="' + b.IMAGE_WIDTH + '"\n                    height="' + b.IMAGE_HEIGHT + '">\n                    <img\n                        id="' + this.snapshotId + '">\n                </div>\n                <div class="main-section-info-container">\n                    ' + this.getInfoTemplate() + "\n                </div>\n            </section>\n        "
                }
            }, {
                key: "postRender",
                value: function() {
                    this.snapshotElement = document.getElementById(this.snapshotId);
                    var t = this.coordinates.width / this.coordinates.height,
                        e = b.IMAGE_WIDTH,
                        n = b.IMAGE_WIDTH / t;
                    b.IMAGE_WIDTH / t > b.IMAGE_HEIGHT && (n = b.IMAGE_HEIGHT, e = b.IMAGE_HEIGHT * t), this.snapshotElement.style.width = e + "px", this.snapshotElement.style.height = n + "px", this.snapshotElement.src = "" + this.snapshot
                }
            }]), e
        }(p.default);
    e.default = y
}, function(t, e, n) {
    var r = n(241);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".bid-main-section-container{width:380px;height:448px}.main-section-snapshot{width:380px;height:360px;margin-bottom:20px}.main-section-title{display:block;margin-bottom:15px;font-size:12px;font-weight:700}.main-section-info{margin-bottom:10px;font-size:12px}.main-section-info-mm{display:inline-block}", ""])
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    e.IMAGE_WIDTH = 380, e.IMAGE_HEIGHT = 360
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = n(96),
        c = i(u),
        f = n(7),
        h = i(f),
        d = n(2),
        p = i(d),
        g = n(95),
        _ = i(g),
        v = n(109),
        b = i(v);
    n(244);
    var y = n(136),
        m = i(y),
        E = n(112),
        S = i(E),
        O = n(246),
        T = i(O),
        x = n(250),
        w = i(x),
        C = n(254),
        I = r(C),
        R = (n(3), n(5), n(168)),
        A = r(R),
        P = n(229),
        L = i(P),
        k = n(183),
        D = i(k),
        j = function(t) {
            function e() {
                o(this, e);
                var t = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return t.isInputFilled = function() {
                    return "" !== t.children.numberInput.value
                }, t.setIsCorrect = function(e) {
                    e ? t.children.numberInput.setIsCorrect(e) : t.children.numberInput.setIsCorrect(e)
                }, t.validateData = function() {
                    var e = /^(17|29|25|44|33)(\d{3})(\d{2})(\d{2})$/;
                    return p.default.debug("validate" + t.children.numberInput.value + ":" + e.test(t.children.numberInput.value)), e.test(t.children.numberInput.value)
                }, t.onTextInput = function(t, e, n) {
                    m.default.setBidTextValue(t, n)
                }, t.submitRequest = function() {
                    t.isInputFilled() && t.validateData() ? (t.setIsCorrect(!0), p.default.debug("BidToolbox.submitRequest"), L.default.sendRequest({
                        name: t.children.nameInput.value,
                        email: t.children.emailInput.value,
                        phone: t.children.numberInput.value,
                        city: t.children.cityInput.value,
                        comment: t.children.commentsInput.value
                    }).then(function() {
                        p.default.debug("request has been sent"), D.default.openConfirmationModal({
                            message: b.default.KEYS.BID_REQUEST_HAS_BEEN_SENT,
                            icon: A.CHECK_ICON,
                            class: "success"
                        })
                    }).catch(function(t) {
                        p.default.error(t), D.default.openConfirmationModal({
                            message: b.default.KEYS.BID_REQUEST_ERROR,
                            icon: A.ERROR_ICON,
                            class: "fail"
                        })
                    })) : (t.setIsCorrect(!1), p.default.debug("set false"))
                }, t.arrowDescriptionId = (0, c.default)(), t
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    this.children.nameInput = new T.default({
                        label: b.default.KEYS.BID_NAME_INPUT_LABEL,
                        className: I.BID_NAME_INPUT_CLASS,
                        handler: h.default.partial(this.onTextInput, b.default.KEYS.BID_NAME_INPUT_LABEL),
                        defaultValue: m.default.getBidTextValue(b.default.KEYS.BID_NAME_INPUT_LABEL)
                    }), this.children.numberInput = new T.default({
                        label: b.default.KEYS.BID_PHONE_INPUT_LABEL,
                        type: I.NUMBER_INPUT_TEXT_TYPE,
                        countryCode: I.BID_PHONE_INPUT_COUNTRY_CODE,
                        className: I.BID_PHONE_INPUT_CLASS,
                        handler: h.default.partial(this.onTextInput, b.default.KEYS.BID_PHONE_INPUT_LABEL),
                        defaultValue: m.default.getBidTextValue(b.default.KEYS.BID_PHONE_INPUT_LABEL)
                    }), this.children.emailInput = new T.default({
                        label: b.default.KEYS.BID_EMAIL_INPUT_LABEL,
                        handler: h.default.partial(this.onTextInput, b.default.KEYS.BID_EMAIL_INPUT_LABEL),
                        defaultValue: m.default.getBidTextValue(b.default.KEYS.BID_EMAIL_INPUT_LABEL)
                    }), this.children.cityInput = new T.default({
                        label: b.default.KEYS.BID_CITY_INPUT_LABEL,
                        handler: h.default.partial(this.onTextInput, b.default.KEYS.BID_CITY_INPUT_LABEL),
                        defaultValue: m.default.getBidTextValue(b.default.KEYS.BID_CITY_INPUT_LABEL)
                    }), this.children.commentsInput = new w.default({
                        label: b.default.KEYS.BID_COMMENTS_INPUT_LABEL,
                        handler: h.default.partial(this.onTextInput, b.default.KEYS.BID_COMMENTS_INPUT_LABEL),
                        defaultValue: m.default.getBidTextValue(b.default.KEYS.BID_COMMENTS_INPUT_LABEL)
                    }), this.children.submitButton = new S.default({
                        label: b.default.KEYS.BID_SEND_REQUEST,
                        handler: this.submitRequest,
                        className: I.SUBMIT_BUTTON_CLASS
                    })
                }
            }, {
                key: "getTemplate",
                value: function() {
                    return '\n            <div class="constructor-bid-toolbox" >\n                <div class="constructor-bid-toolbox-row">\n                    ' + this.children.nameInput.getTemplate() + "\n                    " + this.children.numberInput.getTemplate() + "\n                    " + this.children.emailInput.getTemplate() + "\n                    " + this.children.cityInput.getTemplate() + '\n                </div>\n                <div class="constructor-bid-toolbox-row">\n                    ' + this.children.commentsInput.getTemplate() + "\n                    " + this.children.submitButton.getTemplate() + "\n                </div>\n            </div>\n        "
                }
            }]), e
        }(_.default);
    e.default = j
}, function(t, e, n) {
    var r = n(245);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".constructor-bid-toolbox{flex-direction:column;height:92px;box-sizing:border-box;margin:0 80px 0 20px}.constructor-bid-toolbox,.constructor-bid-toolbox-row{display:flex;justify-content:space-between}.constructor-bid-submit{width:180px;height:35px}", ""])
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
        function t(t, e) {
            for (var n = 0; n < e.length; n++) {
                var r = e[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
            }
        }
        return function(e, n, r) {
            return n && t(e.prototype, n), r && t(e, r), e
        }
    }();
    n(247);
    var u = n(95),
        c = i(u),
        f = n(249),
        h = r(f),
        d = function(t) {
            function e(t) {
                var n = t.label,
                    r = t.type,
                    i = void 0 === r ? "text" : r,
                    a = t.countryCode,
                    l = void 0 === a ? "" : a,
                    u = t.handler,
                    c = void 0 === u ? function() {} : u,
                    f = t.className,
                    h = void 0 === f ? "" : f,
                    d = t.isCorrect,
                    g = void 0 === d || d,
                    _ = t.defaultValue,
                    v = void 0 === _ ? "" : _;
                o(this, e);
                var b = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return p.call(b), b.label = n, b.type = i, b.countryCode = l, b.handler = c, b.className = h, b.isCorrect = g, b.value = v, b
            }
            return a(e, t), l(e, [{
                key: "getTemplate",
                value: function() {
                    return '\n            <div class="constructor-shared-text-input-container ' + this.className + '">\n            \t' + (this.countryCode ? '<span class="country-code">' + this.countryCode + "</span>" : "") + '\n                <label class="constructor-shared-text-input-label">' + this.label + '</label>\n                <input class="constructor-shared-text-input ' + (this.isCorrect ? "" : h.INCORRECT_CLASS) + '" type="' + this.type + '" value="' + this.value + '" id="' + this.id + '">\n            </div>\n        '
                }
            }, {
                key: "postRender",
                value: function() {
                    this.textInput = document.getElementById(this.id), this.textInput.addEventListener("change", this.onChange)
                }
            }]), e
        }(c.default),
        p = function() {
            var t = this;
            this.setIsCorrect = function(e) {
                return e !== t.isCorrect && (t.isCorrect = e, void(e ? t.textInput.classList.remove(h.INCORRECT_CLASS) : t.textInput.classList.add(h.INCORRECT_CLASS)))
            }, this.onChange = function(e) {
                t.value = t.textInput.value, t.handler(e, t.value)
            }
        };
    e.default = d
}, function(t, e, n) {
    var r = n(248);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".constructor-shared-text-input-container{height:25px;box-sizing:border-box;display:inline-flex;align-items:center}.constructor-shared-text-input-label{font-size:12px;color:#000;margin-right:8px}.constructor-shared-text-input{font-size:12px;padding:4px 8px;box-sizing:border-box;width:150px;border-radius:2px;border:1px solid #ccc}.constructor-shared-text-input:focus{border-color:#888}.constructor-shared-text-input.incorrect{border-color:red}.constrcutor-bid-phone-input{position:relative}.constrcutor-bid-phone-input>input{padding-left:38px}.country-code{top:0;position:absolute;right:112px;font-size:12px;line-height:25px}", ""]);
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    e.INCORRECT_CLASS = "incorrect"
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
        function t(t, e) {
            for (var n = 0; n < e.length; n++) {
                var r = e[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
            }
        }
        return function(e, n, r) {
            return n && t(e.prototype, n), r && t(e, r), e
        }
    }();
    n(251);
    var u = n(95),
        c = i(u),
        f = n(253),
        h = r(f),
        d = function(t) {
            function e(t) {
                var n = t.label,
                    r = t.handler,
                    i = void 0 === r ? function() {} : r,
                    a = t.className,
                    l = void 0 === a ? "" : a,
                    u = t.linesCount,
                    c = void 0 === u ? h.DEFAULT_LINES_COUNT : u,
                    f = t.defaultValue,
                    d = void 0 === f ? "" : f;
                o(this, e);
                var p = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return p.onChange = function(t) {
                    p.value = p.textArea.value, p.handler(t, p.value)
                }, p.label = n, p.handler = i, p.className = l, p.linesCount = c, p.value = d, p
            }
            return a(e, t), l(e, [{
                key: "getTemplate",
                value: function() {
                    return '\n            <div class="constructor-shared-text-area-container ' + this.className + '">\n                <label class="constructor-shared-text-area-label">' + this.label + '</label>\n                <textarea class="constructor-shared-text-area" id="' + this.id + '" rows="' + this.linesCount + '">' + this.value + "</textarea>\n            </div>\n        "
                }
            }, {
                key: "postRender",
                value: function() {
                    this.textArea = document.getElementById(this.id), this.textArea.addEventListener("change", this.onChange)
                }
            }]), e
        }(c.default);
    e.default = d
}, function(t, e, n) {
    var r = n(252);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".constructor-shared-text-area-container{height:48px;box-sizing:border-box;display:inline-flex;align-items:center}.constructor-shared-text-area-label{font-size:12px;color:#000;margin-right:8px}.constructor-shared-text-area{width:525px;height:48px;box-sizing:border-box;padding:0 4px;overflow:hidden;font-size:12px;line-height:20px;resize:none;border-radius:2px;border:1px solid #ccc}.constructor-shared-text-area:focus{border-color:#888}", ""])
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    e.DEFAULT_LINES_COUNT = 2
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    e.BID_NAME_INPUT_CLASS = "constrcutor-bid-name-input", e.BID_PHONE_INPUT_CLASS = "constrcutor-bid-phone-input", e.BID_RIGHT_ARROW = "images/arrows/right-big.png", e.SUBMIT_BUTTON_CLASS = "constructor-bid-submit", e.NUMBER_INPUT_TEXT_TYPE = "number", e.BID_PHONE_INPUT_COUNTRY_CODE = "+375"
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = n(7),
        c = (i(u), n(96)),
        f = i(c),
        h = n(95),
        d = i(h),
        p = n(2),
        g = i(p),
        _ = n(109),
        v = i(_),
        b = n(181),
        y = r(b),
        m = n(3),
        E = n(5),
        S = n(106),
        O = i(S),
        T = n(135),
        x = i(T),
        w = n(183),
        C = i(w),
        I = n(179),
        R = i(I),
        A = n(93),
        P = i(A);
    n(256);
    var L = n(6),
        k = i(L),
        D = function(t) {
            function e(t) {
                o(this, e);
                var n = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
                return n.onRepeatClick = function() {
                    g.default.debug("AsidePanel.onRepeatClick: click"), C.default.openTwoOptionsModal({
                        title: v.default.KEYS.REPEAT_MODAL_TITLE,
                        subtitle: v.default.KEYS.REPEAT_MODAL_SUBTITLE,
                        isFirstSelected: !1,
                        firstOption: {
                            text: v.default.KEYS.REPEAT_MODAL_CANCEL,
                            handler: function() {
                                C.default.closeLastModal()
                            }
                        },
                        secondOption: {
                            text: v.default.KEYS.REPEAT_MODAL_CONTINUE,
                            handler: function() {
                                C.default.closeLastModal(), n.currentRoute !== O.default.INSIDE && (P.default.navigateToInsidePage(!0), k.default.component.children.header.update(O.default.INSIDE)), x.default.createCabinet()
                            }
                        }
                    })
                }, n.onHelpClick = function() {
                    g.default.debug("AsidePanel.onHelpClick: click"), C.default.openInstructionModal()
                }, n.onArrowClick = function() {
                    if (g.default.debug("AsidePanel.onArrowClick: click"), n.currentRoute === O.default.INSIDE) P.default.navigateToDoorsPage();
                    else {
                        if (n.currentRoute !== O.default.DOORS) return;
                        R.default.isSelectedMaterialForAllDoors() ? P.default.navigateToBidPage() : C.default.openConfirmationModal({
                            message: v.default.KEYS.CONFIRMATION_MODAL_CHOOSE_DOORS_MATERIAL
                        })
                    }
                    k.default.component.children.header.update(n.currentRoute === O.default.INSIDE ? O.default.DOORS : O.default.BID)
                }, n.onLeftArrowCLick = function() {
                    if (g.default.debug("AsidePanel.onLeftArrowCLick: click"), n.currentRoute === O.default.DOORS) P.default.navigateToInsidePage(!0);
                    else {
                        if (n.currentRoute !== O.default.BID) return;
                        P.default.navigateToDoorsPage()
                    }
                    k.default.component.children.header.update(n.currentRoute === O.default.DOORS ? O.default.INSIDE : O.default.DOORS)
                }, n.currentRoute = t.currentRoute || O.default.INSIDE, n.repeatId = (0, f.default)(), n.helpId = (0, f.default)(), n.titleId = (0, f.default)(), n
            }
            return a(e, t), l(e, [{
                key: "getTemplate",
                value: function() {
                    return '\n            <aside class="aside-panel" id="' + y.ASIDE_PANEL_ID + '">\n                <div\n                    id="' + y.ASIDE_LEFT_ARROW_CONTAINER_ID + '"\n                    class="aside-panel-left-arrow-container ' + y.ASIDE_LEFT_ARROW_HIDDEN_CLASS + '"\n                >\n                    <div class="aside-panel-left-arrow"></div>\n                    <div class="constructor-aside-panel-title">' + v.default.KEYS.ASIDE_LEFT_TITLE + '</div>\n                    <div class="constructor-aside-panel-description"></div>\n                </div>\n                <div\n                    class="aside-panel-right-arrow-container"\n                    id="' + y.RIGHT_ARROW_CONTAINER + '"\n                >\n                    <div\n                        class="aside-panel-right-arrow-super-container ' + y.ASIDE_LEFT_ARROW_HIDDEN_CLASS + '"\n                        id="' + y.ASIDE_RIGHT_ARROW_CONTAINER_ID + '"\n                    >\n                        <div id="' + y.ASIDE_RIGHT_ARROW_ID + '" class="aside-panel-right-arrow">\n                        </div>\n                        <div class="constructor-aside-panel-title right" id="' + this.titleId + '">\n                            ' + v.default.KEYS.ASIDE_PANEL_NEXT + '\n                        </div>\n                        <div class="constructor-aside-panel-description" id="' + y.CONSTRUCTOR_ASIDE_PANEL_DESCRIPTION_ID + '">\n                        </div>\n                    </div>\n                    <div class="constructor-aside-panel-row" id="' + this.repeatId + '">\n                        <div class="constructor-aside-panel-icon"></div>\n                        <div class="constructor-aside-panel-text">' + v.default.KEYS.ASIDE_PANEL_REPEAT_TEXT + '</div>\n                    </div>\n                    <div class="constructor-aside-panel-row" id="' + this.helpId + '">\n                        <div class="constructor-aside-panel-icon"></div>\n                        <div class="constructor-aside-panel-text">' + v.default.KEYS.ASIDE_PANEL_HELP_TEXT + "</div>\n                    </div>\n                </div>\n            </aside>\n        "
                }
            }, {
                key: "postRender",
                value: function() {
                    var t = document.getElementById(y.ASIDE_RIGHT_ARROW_ID),
                        e = document.getElementById(y.RIGHT_ARROW_CONTAINER),
                        n = document.getElementById(this.repeatId),
                        r = document.getElementById(this.helpId),
                        i = document.getElementById(this.titleId);
                    n.children[0].style.backgroundImage = 'url("' + m.PRODUCTION_SERVER_CONFIG.URL + "/" + E.CONFIG_RESOURCES_PATH + "/" + y.ASIDE_PANEL_REPEAT_ICON + '")', n.children[0].addEventListener("click", this.onRepeatClick), n.children[1].addEventListener("click", this.onRepeatClick), r.children[0].style.backgroundImage = 'url("' + m.PRODUCTION_SERVER_CONFIG.URL + "/" + E.CONFIG_RESOURCES_PATH + "/" + y.ASIDE_PANEL_HELP_ICON + '")', r.children[0].addEventListener("click", this.onHelpClick), r.children[1].addEventListener("click", this.onHelpClick);
                    var o = document.getElementById(y.CONSTRUCTOR_ASIDE_PANEL_DESCRIPTION_ID);
                    if (o.innerText = this.currentRoute === O.default.INSIDE ? v.default.KEYS.ASIDE_PANEL_DESCRIPTION_STEP_1 : v.default.KEYS.ASIDE_PANEL_DESCRIPTION_STEP_2, this.currentRoute !== O.default.BID) {
                        var s = document.getElementById(y.ASIDE_RIGHT_ARROW_CONTAINER_ID);
                        t.style.backgroundImage = 'url("' + m.PRODUCTION_SERVER_CONFIG.URL + "/" + E.CONFIG_RESOURCES_PATH + "/" + y.ASIDE_PANEL_RIGHT_ARROW + '")', t.addEventListener("click", this.onArrowClick), i.addEventListener("click", this.onArrowClick), s.classList.remove(y.ASIDE_LEFT_ARROW_HIDDEN_CLASS)
                    } else e.classList.add(y.RIGHT_COORDINTE_CLASS);
                    if (this.currentRoute !== O.default.INSIDE) {
                        var a = document.getElementById(y.ASIDE_LEFT_ARROW_CONTAINER_ID);
                        a.children[0].style.backgroundImage = 'url("' + m.PRODUCTION_SERVER_CONFIG.URL + "/" + E.CONFIG_RESOURCES_PATH + "/" + y.ASIDE_PANEL_LEFT_ARROW + '")', a.children[2].innerText = this.currentRoute === O.default.DOORS ? v.default.KEYS.RETURN_TO_INSIDE : v.default.KEYS.RETURN_TO_DOORS, a.classList.remove(y.ASIDE_LEFT_ARROW_HIDDEN_CLASS), a.addEventListener("click", this.onLeftArrowCLick)
                    }
                }
            }]), e
        }(d.default);
    e.default = D
}, function(t, e, n) {
    var r = n(257);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".aside-panel-right-arrow{background-repeat:no-repeat;background-position:50%;background-size:contain;height:44px;width:52px;margin-bottom:10px;cursor:pointer}.aside-panel-left-arrow-container,.aside-panel-right-arrow-container,.aside-panel-right-arrow-super-container{display:flex;flex-direction:column;align-items:center;z-index:2;top:380px;position:absolute;width:150px}.aside-panel-right-arrow-super-container{position:static}.aside-panel-right-arrow-container{right:0}.aside-panel-right-arrow-container.container-bottom{top:570px}.constructor-aside-panel-title{font-size:14px;color:#000;font-weight:700;cursor:pointer}.constructor-aside-panel-description{font-size:14px;color:#989898;margin-bottom:94px;max-width:120px;text-align:center;height:28px}.constructor-aside-panel-row{width:100%;display:flex;justify-content:flex-start;align-items:center;margin-bottom:10px}.constructor-aside-panel-row:last-child{margin-bottom:0}.constructor-aside-panel-icon{width:20px;height:20px;background-repeat:no-repeat;background-position:50%;background-size:contain;cursor:pointer;margin-right:10px}.constructor-aside-panel-text{color:#000;font-size:14px;border-bottom:1px dotted #7f7f7f;line-height:18px;cursor:pointer}.aside-panel-left-arrow{background-repeat:no-repeat;background-position:50%;background-size:contain;height:44px;width:52px;cursor:pointer}.aside-panel-left-arrow-container{left:0}.aside-panel-left-arrow-container.hidden{display:none}", ""])
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = n(95),
        c = i(u),
        f = n(136),
        h = i(f);
    n(259);
    var d = n(5),
        p = r(d),
        g = n(143),
        _ = r(g),
        v = n(261),
        b = r(v),
        y = n(135),
        m = i(y),
        E = n(169),
        S = i(E),
        O = function(t) {
            function e() {
                return o(this, e), s(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
            }
            return a(e, t), l(e, [{
                key: "getTemplate",
                value: function() {
                    return '\n            <div id="' + _.CANVAS_CONTAINER_ID + '">\n                <div class="main-canvas-container">\n                    <canvas\n                        id=' + p.MAIN_CANVAS_ID + '\n                        width="' + _.MAIN_CANVAS_WIDTH + 'px"\n                        height="' + _.MAIN_CANVAS_HEIGHT + 'px"\n                    >\n                    </canvas>\n                </div>\n                <div class="spy-canvas-container">\n                    <canvas\n                        id="' + p.SPY_CANVAS_ID + '"\n                        width="' + _.SPY_CANVAS_WIDTH + 'px"\n                        height="' + _.SPY_CANVAS_HEIGHT + 'px"\n                    >\n                    </canvas>\n                </div>\n                <div class="right-scroller">\n                </div>\n                <div class="left-scroller">\n                </div>\n            </div>\n        '
                }
            }, {
                key: "postRender",
                value: function() {
                    this.canvasContainer = document.getElementById(_.CANVAS_CONTAINER_ID), h.default.getCanvas() || (m.default.initCanvas(p.MAIN_CANVAS_ID), m.default.initCallbacks(), S.default.init(), m.default.defaultFilling(), m.default.update())
                }
            }, {
                key: "hide",
                value: function() {
                    this.canvasContainer.classList.add(b.HIDDEN_CLASS)
                }
            }, {
                key: "show",
                value: function() {
                    this.canvasContainer.classList.remove(b.HIDDEN_CLASS)
                }
            }]), e
        }(c.default);
    e.default = O
}, function(t, e, n) {
    var r = n(260);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".main-canvas-container{position:absolute;top:186px}.spy-canvas-container{position:absolute;top:0;pointer-events:none;z-index:3}.spy-canvas-container .cursor-pointer{cursor:pointer}.hidden{display:none}.left-scroller,.right-scroller{width:85px;height:453px;z-index:1;position:absolute;top:186px}.right-scroller{right:0}.left-scroller{left:0}", ""])
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    e.HIDDEN_CLASS = "hidden"
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e, n) {
        return e in t ? Object.defineProperty(t, e, {
            value: n,
            enumerable: !0,
            configurable: !0,
            writable: !0
        }) : t[e] = n, t
    }

    function s(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function a(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function l(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var u = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        c = n(7),
        f = i(c),
        h = n(95),
        d = i(h);
    n(263);
    var p = n(109),
        g = i(p),
        _ = n(168),
        v = r(_),
        b = n(3),
        y = n(5),
        m = n(106),
        E = i(m),
        S = n(93),
        O = i(S),
        T = n(136),
        x = (i(T), n(167)),
        w = r(x),
        C = n(179),
        I = i(C),
        R = n(183),
        A = i(R),
        P = function(t) {
            function e() {
                var t;
                s(this, e);
                var n = a(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return n.navigateTo = function(t) {
                    n.setSelectedItem(t), A.default.closeAllModals(), n.itemsMap[t.id].navigate(!0)
                }, n.selectedItem = null, n.headerList = null, n.itemsMap = (t = {}, o(t, v.HEADER_ITEM_IDS.INSIDE, {
                    navigate: O.default.navigateToInsidePage,
                    class: v.HEADER_ITEM_CLASSES.INSIDE
                }), o(t, v.HEADER_ITEM_IDS.DOORS, {
                    navigate: O.default.navigateToDoorsPage,
                    class: v.HEADER_ITEM_CLASSES.DOORS
                }), o(t, v.HEADER_ITEM_IDS.BID, {
                    navigate: O.default.navigateToBidPage,
                    class: v.HEADER_ITEM_CLASSES.BID
                }), t), n
            }
            return l(e, t), u(e, [{
                key: "getTemplate",
                value: function() {
                    return '\n            <div class="constructor-header" id="' + this.id + '">\n                <ul class="constructor-header-list" id="' + v.HEADER_LIST_ID + '">\n                    <li class="constructor-header-item" id="' + v.HEADER_ITEM_IDS.INSIDE + '">\n                        <div class="constructor-header-item-container">\n                            <div class="constructor-header-item-step">\n                                ' + g.default.KEYS.HEADER_STEP_1 + '\n                            </div>\n                            <label class="constructor-header-item-title">\n                                ' + g.default.KEYS.HEADER_INSIDE_TITLE + '\n                            </label>\n                        </div>\n                    </li>\n                    <li class="constructor-header-item" id="' + v.HEADER_ITEM_IDS.DOORS + '">\n                        <div class="constructor-header-item-container">\n                            <div class="constructor-header-item-step">\n                                ' + g.default.KEYS.HEADER_STEP_2 + '\n                            </div>\n                            <label class="constructor-header-item-title">\n                                ' + g.default.KEYS.HEADER_DOORS_TITLE + '\n                            </label>\n                        </div>\n                    </li>\n                    <li class="constructor-header-item" id="' + v.HEADER_ITEM_IDS.BID + '">\n                        <div class="constructor-header-item-container">\n                            <div class="constructor-header-item-step">\n                                ' + g.default.KEYS.HEADER_STEP_3 + '\n                            </div>\n                            <label class="constructor-header-item-title">\n                                ' + g.default.KEYS.HEADER_BID_TITLE + "\n                            </label>\n                        </div>\n                    </li>\n                </ul>\n            </div>\n        "
                }
            }, {
                key: "postRender",
                value: function() {
                    this.headerList = document.getElementById(v.HEADER_LIST_ID);
                    var t = this.headerList.children;
                    this.selectedItem = t[0];
                    for (var e = 0; e < t.length; e++) t[e].addEventListener("click", this.onHeaderListItemClick.bind(this, t[e])), t[e].children[0].classList.add(this.itemsMap[t[e].id].class);
                    this.setSelectedItem(t[0])
                }
            }, {
                key: "update",
                value: function(t) {
                    var e = this.headerList.children,
                        n = void 0;
                    switch (t) {
                        case E.default.INSIDE:
                            n = e[0];
                            break;
                        case E.default.DOORS:
                            n = e[1];
                            break;
                        case E.default.BID:
                            n = e[2]
                    }
                    this.setSelectedItem(n)
                }
            }, {
                key: "setSelectedItem",
                value: function(t) {
                    this.selectedItem.classList.remove(v.HEADER_SELECTED_CLASS), this.selectedItem = t, this.selectedItem.classList.add(v.HEADER_SELECTED_CLASS);
                    var e = !1;
                    f.default.forEach(this.headerList.children, function(n) {
                        n === t && (e = !0), e ? (n.classList.remove(v.HEADER_COMPLETED_CLASS), n.children[0].children[0].style.backgroundImage = "") : (n.classList.add(v.HEADER_COMPLETED_CLASS), n.children[0].children[0].style.backgroundImage = 'url("' + b.PRODUCTION_SERVER_CONFIG.URL + "/" + y.CONFIG_RESOURCES_PATH + "/" + v.CHECK_ICON + '")')
                    })
                }
            }, {
                key: "onHeaderListItemClick",
                value: function(t) {
                    t.id === v.HEADER_ITEM_IDS.BID ? I.default.isSelectedMaterialForAllDoors() ? (w.changeStyleBidStep(!0, !0), this.navigateTo(t)) : A.default.openConfirmationModal({
                        message: g.default.KEYS.CONFIRMATION_MODAL_CHOOSE_DOORS_MATERIAL
                    }) : this.navigateTo(t)
                }
            }]), e
        }(d.default);
    e.default = P
}, function(t, e, n) {
    var r = n(264);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".app-constructor .constructor-header-list{display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;margin-bottom:20px}.constructor-header-item{cursor:pointer;margin-right:2px;width:319px;min-width:319px;max-width:319px;height:58px;display:flex;align-items:center;justify-content:space-around;padding:0;background-color:#d5f2ff}.constructor-header-item:last-child{margin-right:0}.constructor-header-item-container{display:flex;align-items:center;max-width:235px}.constructor-header-item-step{width:36px;min-width:36px;max-width:36px;height:36px;border-radius:50%;text-align:center;color:#0d0d0d;font-size:18px;font-weight:700;box-sizing:border-box;display:flex;align-items:center;justify-content:space-around;border:2px solid #00b0ff}.constructor-header-item.selected{background-color:#fff}.constructor-header-item-title{font-size:12px;line-height:14px;color:#000;font-weight:700;display:inline-block;margin-left:13px;cursor:pointer}.constructor-header-item.selected .constructor-header-item-step{background-color:#00b0ff;color:#fff}.constructor-header-item.completed .constructor-header-item-step{background-color:#00c853;border-color:#00c853;background-repeat:no-repeat;color:transparent;background-position:50%}.constructor-header-item.not-available .constructor-header-item-step{background-color:#ccc;border-color:#ccc}", ""])
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function o(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function s(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var a = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        l = n(7),
        u = r(l),
        c = n(95),
        f = r(c);
    n(266);
    var h = n(184),
        d = r(h),
        p = function(t) {
            function e() {
                i(this, e);
                var t = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return t.modals = [], t
            }
            return s(e, t), a(e, [{
                key: "preRender",
                value: function(t) {
                    var e = this;
                    this.modals = t ? t.modals : this.modals, u.default.forEach(this.modals, function(t) {
                        e.children[t.type] = new t.constructor(t.options)
                    }), this.shadowIsHidden = !!this.children[d.default.DOORS_MODIFICATION_MODAL]
                }
            }, {
                key: "getTemplate",
                value: function() {
                    return '\n            <div\n                class="constructor-modal-container"\n                id="' + this.id + '"\n            >\n                ' + (u.default.size(this.children) > 0 ? '<div class="modal-shadow ' + (this.shadowIsHidden ? "modified" : "") + '"></div>' : "") + "\n                " + u.default.map(this.children, function(t) {
                        return t.getTemplate()
                    }).join("") + "\n            </div>\n        "
                }
            }]), e
        }(f.default);
    e.default = p
}, function(t, e, n) {
    var r = n(267);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".constructor-modal-container *{z-index:5}.modal-shadow{position:absolute;left:0;top:0;width:100%;height:100%;background-color:#000;opacity:.5}.modified{height:186px;opacity:.7}", ""])
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function o(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function s(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var a = function() {
        function t(t, e) {
            for (var n = 0; n < e.length; n++) {
                var r = e[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
            }
        }
        return function(e, n, r) {
            return n && t(e.prototype, n), r && t(e, r), e
        }
    }();
    n(269);
    var l = n(200),
        u = r(l),
        c = n(96),
        f = r(c),
        h = n(95),
        d = r(h),
        p = (0, f.default)(),
        g = function(t) {
            function e() {
                return i(this, e), o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
            }
            return s(e, t), a(e, [{
                key: "getTemplate",
                value: function() {
                    return '\n            <div class="loading">\n                <div class="loading-spinner" id=' + p + '>\n                </div>\n                <label class="loading-title">\n                    Пожалуйста подождите, идет загрузка...\n                </label>\n            </div>\n        '
                }
            }, {
                key: "postRender",
                value: function() {
                    var t = document.getElementById(p),
                        e = {
                            lines: 12,
                            length: 0,
                            width: 10,
                            radius: 35,
                            opacity: .1,
                            trail: 50,
                            color: "#00b0ff"
                        };
                    this.spin = new u.default(e).spin(t)
                }
            }, {
                key: "unload",
                value: function() {
                    this.spin.stop()
                }
            }]), e
        }(d.default);
    e.default = g
}, function(t, e, n) {
    var r = n(270);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".loading{width:100%;height:100%;background-color:#fff;color:#222;position:relative;overflow:auto}.loading-spinner{margin:200px auto 0;width:9px;height:9px;border-radius:50%}.loading-title{display:block;text-align:center;margin-top:140px;font-size:15px}", ""])
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = n(96),
        c = i(u),
        f = n(95),
        h = i(f);
    n(272);
    var d = n(109),
        p = i(d),
        g = n(178),
        _ = r(g),
        v = n(136),
        b = i(v),
        y = function(t) {
            function e() {
                o(this, e);
                var t = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return t.cost = 0, t.displayedCost = "", t.costLabelId = (0, c.default)(), t
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                    this.cost = t.cost || b.default.getCabinetCost() || this.cost, this.calculateCost = b.default.getOption("calculateCost"), this.displayedCost = _.formatCost(this.cost)
                }
            }, {
                key: "getTemplate",
                value: function() {
                    return '\n            <div\n                class="constructor-cost-container"\n                id="' + this.id + '"\n            >\n                <label\n                    class="constructor-cost-title ' + (this.calculateCost ? "" : "large") + '"\n                >\n                    ' + (this.calculateCost ? p.default.KEYS.CABINET_COST_LABEL : p.default.KEYS.DISABLE_COST_CALCULATION) + '\n                </label>\n                <label\n                    id="' + this.costLabelId + '"\n                    class="constructor-cost ' + (this.calculateCost ? "" : "super-hidden") + '"\n                >\n                    ' + this.displayedCost + '\n                </label>\n                <label\n                    class="constructor-cost-currency ' + (this.calculateCost ? "" : "super-hidden") + '"\n                >\n                    ' + p.default.KEYS.CABINET_COST_RUB_LABEL + "\n                </label>\n            </div>\n        "
                }
            }, {
                key: "postRender",
                value: function() {
                    this.costContainer = document.getElementById(this.id), this.costLabel = document.getElementById(this.costLabelId)
                }
            }, {
                key: "update",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                    this.cost = t.cost || b.default.getCabinetCost() || this.cost, this.displayedCost = _.formatCost(this.cost), this.costLabel && (this.costLabel.innerHTML = this.displayedCost)
                }
            }, {
                key: "show",
                value: function() {
                    var t = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
                    this.costContainer.classList.remove("hidden"), t || !this.calculateCost ? this.costContainer.classList.add("selected") : this.costContainer.classList.remove("selected")
                }
            }]), e
        }(h.default);
    e.default = y
}, function(t, e, n) {
    var r = n(273);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".constructor-cost-container{margin:2px 0 0 15px;width:218px;height:39px;border-top:none;background-color:#d5f2ff;border-bottom-left-radius:4px;border-bottom-right-radius:4px;color:#000;display:inline-flex;align-items:center;vertical-align:top;font-size:20px}.constructor-cost-container label{margin-top:-3px}.constructor-cost-title{font-size:10px;max-width:50px;margin-left:10px;margin-right:15px}.constructor-cost-title.large{max-width:200px;font-size:14px}.constructor-cost-currency{margin-left:12px}.super-hidden{display:none}", ""])
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = n(96),
        c = i(u),
        f = n(95),
        h = i(f);
    n(275);
    var d = n(109),
        p = i(d),
        g = n(178),
        _ = r(g),
        v = n(136),
        b = i(v),
        y = function(t) {
            function e() {
                o(this, e);
                var t = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return t.cost = 0, t.displayedCost = "", t.costLabelId = (0, c.default)(), t
            }
            return a(e, t),
                l(e, [{
                    key: "preRender",
                    value: function() {
                        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                        this.calculateCost = b.default.getOption("calculateCost"), this.cost = t.cost || b.default.getDoorsCost() || this.cost, this.displayedCost = _.formatCost(this.cost)
                    }
                }, {
                    key: "getTemplate",
                    value: function() {
                        return '\n            <div\n                class="constructor-cost-container doors hidden ' + (this.calculateCost ? "" : "super-hidden") + '"\n                id="' + this.id + '"\n            >\n                <label class="constructor-cost-title">\n                    ' + p.default.KEYS.DOORS_COST_LABEL + '\n                </label>\n                <label\n                    id="' + this.costLabelId + '"\n                    class="constructor-cost"\n                >\n                    ' + this.displayedCost + '\n                </label>\n                <label class="constructor-cost-currency">\n                    ' + p.default.KEYS.CABINET_COST_RUB_LABEL + "\n                </label>\n            </div>\n        "
                    }
                }, {
                    key: "postRender",
                    value: function() {
                        this.costLabel = document.getElementById(this.costLabelId), this.costContainer = document.getElementById(this.id)
                    }
                }, {
                    key: "update",
                    value: function() {
                        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                        this.cost = t.cost || b.default.getDoorsCost() || this.cost, this.displayedCost = _.formatCost(this.cost), this.costLabel && (this.costLabel.innerHTML = this.displayedCost)
                    }
                }, {
                    key: "hide",
                    value: function() {
                        this.costContainer.classList.add("hidden")
                    }
                }, {
                    key: "show",
                    value: function() {
                        var t = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
                        this.costContainer.classList.remove("hidden"), t ? this.costContainer.classList.add("selected") : this.costContainer.classList.remove("selected")
                    }
                }]), e
        }(h.default);
    e.default = y
}, function(t, e, n) {
    var r = n(276);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".constructor-cost-container.doors{margin-left:0}.constructor-cost-container.hidden{display:none}.constructor-cost-container.selected{background-color:#00b0ff;color:#fff}", ""])
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return e.default = t, e
    }

    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        }
    }

    function o(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function s(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e
    }

    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var l = function() {
            function t(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
                }
            }
            return function(e, n, r) {
                return n && t(e.prototype, n), r && t(e, r), e
            }
        }(),
        u = n(96),
        c = i(u),
        f = n(95),
        h = i(f);
    n(278);
    var d = n(109),
        p = i(d),
        g = n(178),
        _ = r(g),
        v = n(136),
        b = i(v),
        y = function(t) {
            function e() {
                o(this, e);
                var t = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return t.cabinetCost = 0, t.doorCost = 0, t.cost = 0, t.displayedCost = "", t.costLabelId = (0, c.default)(), t
            }
            return a(e, t), l(e, [{
                key: "preRender",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                    this.recalculateCost(t)
                }
            }, {
                key: "getTemplate",
                value: function() {
                    return '\n            <div\n                class="constructor-cost-container total hidden ' + (this.calculateCost ? "" : "super-hidden") + '"\n                id="' + this.id + '"\n            >\n                <label class="constructor-cost-title">\n                    ' + p.default.KEYS.TOTAL_COST_LABEL + '\n                </label>\n                <label\n                    id="' + this.costLabelId + '"\n                    class="constructor-cost"\n                >\n                    ' + this.displayedCost + '\n                </label>\n                <label class="constructor-cost-currency">\n                    ' + p.default.KEYS.CABINET_COST_RUB_LABEL + "\n                </label>\n            </div>\n        "
                }
            }, {
                key: "postRender",
                value: function() {
                    this.costLabel = document.getElementById(this.costLabelId), this.costContainer = document.getElementById(this.id)
                }
            }, {
                key: "recalculateCost",
                value: function(t) {
                    this.calculateCost = b.default.getOption("calculateCost"), this.cabinetCost = t.cabinetCost || b.default.getCabinetCost() || this.cabinetCost, this.doorCost = t.doorCost || b.default.getDoorsCost() || this.doorCost, this.cost = this.cabinetCost + this.doorCost, this.displayedCost = _.formatCost(this.cost)
                }
            }, {
                key: "update",
                value: function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                    this.recalculateCost(t), this.costLabel && (this.costLabel.innerHTML = this.displayedCost)
                }
            }, {
                key: "hide",
                value: function() {
                    this.costContainer.classList.add("hidden")
                }
            }, {
                key: "show",
                value: function() {
                    var t = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
                    this.costContainer.classList.remove("hidden"), t ? this.costContainer.classList.add("selected") : this.costContainer.classList.remove("selected")
                }
            }]), e
        }(h.default);
    e.default = y
}, function(t, e, n) {
    var r = n(279);
    "string" == typeof r && (r = [
        [t.id, r, ""]
    ]);
    n(100)(r, {});
    r.locals && (t.exports = r.locals)
}, function(t, e, n) {
    e = t.exports = n(99)(), e.push([t.id, ".constructor-cost-container.total{margin-left:0}", ""])
}]);